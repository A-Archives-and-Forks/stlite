"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[3685],{81805:(e,t,r)=>{r.d(t,{X:()=>n,o:()=>l});var i=r(72176),o=r(61872);class l{constructor(){this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}manageFormClearListener(e,t,r){(0,o.se)(this.formClearListener)&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,o._L)(t)&&(this.formClearListener=e.addFormClearedListener(t,r),this.lastWidgetMgr=e,this.lastFormId=t))}disconnect(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}function n(e){let{element:t,widgetMgr:r,onFormCleared:l}=e;(0,i.useEffect)((()=>{if(!(0,o._L)(t.formId))return;const e=r.addFormClearedListener(t.formId,l);return()=>{e.disconnect()}}),[t,r,l])}},23685:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var i=r(72176),o=r(56730),l=r(78239),n=r(18678),a=r(79828),s=r.n(a),d=r(7099),c=r(60265),g=r(37900),u=r(70341),m=r(76341),h=r(76355),p=r(37097),f=r(89183);const v=(0,r(271).A)("div",{target:"e6zijwc0"})((e=>{let{theme:t}=e;return{"span[aria-disabled='true']":{background:t.colors.fadedText05}}}),"");var S=r(61872),b=r(69204),y=r(80812);const C=(e,t)=>e.getIntArrayValue(t),M=e=>{var t;return null!==(t=e.default)&&void 0!==t?t:null},x=e=>{var t;return null!==(t=e.value)&&void 0!==t?t:null},I=(e,t,r,i)=>{t.setIntArrayValue(e,r.value,{fromUi:r.fromUi},i)},W=e=>{var t;const{element:r,widgetMgr:a,width:W,fragmentId:w}=e,F=(0,c.u)(),[z,L]=(0,b.t)({getStateFromWidgetMgr:C,getDefaultStateFromProto:M,getCurrStateFromProto:x,updateWidgetMgrState:I,element:r,widgetMgr:a,fragmentId:w}),R=r.maxSelections>0&&z.length>=r.maxSelections,k=(0,i.useMemo)((()=>{if(0===r.maxSelections)return"No results";if(z.length===r.maxSelections){const e=1!==r.maxSelections?"options":"option";return`You can only select up to ${r.maxSelections} ${e}. Remove an option first.`}return"No results"}),[r.maxSelections,z.length]),A=(0,i.useMemo)((()=>z.map((e=>{const t=r.options[e];return{value:e.toString(),label:t}}))),[r.options,z]),T=(0,i.useCallback)((e=>{const t=()=>{var t;const r=null===(t=e.option)||void 0===t?void 0:t.value;return parseInt(r,10)};switch(e.type){case"remove":return s()(z,t());case"clear":return[];case"select":return z.concat([t()]);default:throw new Error(`State transition is unknown: ${e.type}`)}}),[z]),V=(0,i.useCallback)((e=>{r.maxSelections&&"select"===e.type&&z.length>=r.maxSelections||L({value:T(e),fromUi:!0})}),[r.maxSelections,T,L,z.length]),j=(0,i.useCallback)(((e,t)=>{if(R)return[];const r=e.filter((e=>!z.includes(Number(e.value))));return(0,u.VC)(r,t)}),[R,z]),E={width:W},{options:P}=r,U=0===P.length||e.disabled,$=0===P.length?"No options to select.":r.placeholder,D=P.map(((e,t)=>({label:e,value:t.toString()}))),N=P.length>10;return(0,y.jsxs)("div",{className:"stMultiSelect","data-testid":"stMultiSelect",style:E,children:[(0,y.jsx)(p.L,{label:r.label,disabled:U,labelVisibility:(0,S.yv)(null===(t=r.labelVisibility)||void 0===t?void 0:t.value),children:r.help&&(0,y.jsx)(f.j,{children:(0,y.jsx)(h.A,{content:r.help,placement:m.W.TOP_RIGHT})})}),(0,y.jsx)(v,{children:(0,y.jsx)(l.A,{options:D,labelKey:"label",valueKey:"value","aria-label":r.label,placeholder:$,type:n.ZE.select,multi:!0,onChange:V,value:A,disabled:U,size:"compact",noResultsMsg:k,filterOptions:j,closeOnSelect:!1,overrides:{SelectArrow:{component:o.A,props:{overrides:{Svg:{style:()=>({width:F.iconSizes.xl,height:F.iconSizes.xl})}}}},IconsContainer:{style:()=>({paddingRight:F.spacing.sm})},ControlContainer:{style:{minHeight:F.sizes.minElementHeight,borderLeftWidth:F.sizes.borderWidth,borderRightWidth:F.sizes.borderWidth,borderTopWidth:F.sizes.borderWidth,borderBottomWidth:F.sizes.borderWidth}},Placeholder:{style:()=>({flex:"inherit",opacity:"0.7"})},ValueContainer:{style:()=>({paddingLeft:F.spacing.sm,paddingTop:F.spacing.none,paddingBottom:F.spacing.none,paddingRight:F.spacing.none})},ClearIcon:{props:{overrides:{Svg:{style:{color:F.colors.darkGray,padding:F.spacing.threeXS,height:F.sizes.clearIconSize,width:F.sizes.clearIconSize,":hover":{fill:F.colors.bodyText}}}}}},SearchIcon:{style:{color:F.colors.darkGray}},Tag:{props:{overrides:{Root:{style:{borderTopLeftRadius:F.radii.md,borderTopRightRadius:F.radii.md,borderBottomRightRadius:F.radii.md,borderBottomLeftRadius:F.radii.md,fontSize:F.fontSizes.md,paddingLeft:F.spacing.sm,marginLeft:F.spacing.none,marginRight:F.spacing.sm,height:`calc(${F.sizes.minElementHeight} - 2 * ${F.spacing.xs})`,maxWidth:`calc(100% - ${F.spacing.lg})`}},Action:{style:{paddingLeft:0}},ActionIcon:{props:{overrides:{Svg:{style:{width:"0.625em",height:"0.625em"}}}}}}}},MultiValue:{props:{overrides:{Root:{style:{fontSize:F.fontSizes.sm}}}}},Input:{props:{readOnly:d.Fr&&!1===N?"readonly":null}},Dropdown:{component:g.A}}})})]})},w=(0,i.memo)(W)},69204:(e,t,r)=>{r.d(t,{_:()=>n,t:()=>a});var i=r(72176),o=r(81805),l=r(61872);function n(e){let{getStateFromWidgetMgr:t,getDefaultState:r,updateWidgetMgrState:n,element:a,widgetMgr:s,fragmentId:d,onFormCleared:c}=e;const[g,u]=(0,i.useState)((()=>{var e;return null!==(e=t(s,a))&&void 0!==e?e:r(s,a)})),[m,h]=(0,i.useState)({value:g,fromUi:!1});(0,i.useEffect)((()=>{(0,l.hX)(m)||(h(null),u(m.value),n(a,s,m,d))}),[m,n,a,s,d]);const p=(0,i.useCallback)((()=>{h({value:r(s,a),fromUi:!0}),null===c||void 0===c||c()}),[h,a,r,s,c]);return(0,o.X)({widgetMgr:s,element:a,onFormCleared:p}),[g,h]}function a(e){let{getStateFromWidgetMgr:t,getDefaultStateFromProto:r,getCurrStateFromProto:o,updateWidgetMgrState:l,element:a,widgetMgr:s,fragmentId:d,onFormCleared:c}=e;const g=(0,i.useCallback)(((e,t)=>r(t)),[r]),[u,m]=n({getStateFromWidgetMgr:t,getDefaultState:g,updateWidgetMgrState:l,element:a,widgetMgr:s,fragmentId:d,onFormCleared:c});return(0,i.useEffect)((()=>{a.setValue&&(a.setValue=!1,m({value:o(a),fromUi:!1}))}),[a,o,m]),[u,m]}}}]);
//# sourceMappingURL=3685.917e9b30.chunk.js.map