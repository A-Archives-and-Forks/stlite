"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[6643],{1813:(e,t,i)=>{i.d(t,{Z:()=>u});i(30969);var s,r=i(98170),o=i(3146),n=i(83405);const a=(0,i(54470).F4)(s||(l=["\n  50% {\n    color: rgba(0, 0, 0, 0);\n  }\n"],d||(d=l.slice(0)),s=Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(d)}}))));var l,d;const c=(0,n.Z)("span",{target:"edlqvik0"})((e=>{let{includeDot:t,shouldBlink:i,theme:s}=e;return{...t?{"&::before":{opacity:1,content:'"\u2022"',animation:"none",color:s.colors.gray,margin:"0 5px"}}:{},...i?{color:s.colors.red,animationName:"".concat(a),animationDuration:"0.5s",animationIterationCount:5}:{}}}),"");var h=i(37574);const u=e=>{let{dirty:t,value:i,maxLength:s,className:n,type:a="single",inForm:l}=e;const d=[],u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d.push((0,h.jsx)(c,{includeDot:d.length>0,shouldBlink:t,children:e},d.length))};if(t){const e=l?"submit form":"apply";if("multiline"===a){const t=(0,r.Ge)()?"\u2318":"Ctrl";u("Press ".concat(t,"+Enter to ").concat(e))}else"single"===a&&u("Press Enter to ".concat(e))}return s&&("chat"!==a||t)&&u("".concat(i.length,"/").concat(s),t&&i.length>=s),(0,h.jsx)(o.X7,{"data-testid":"InputInstructions",className:n,children:d})}},23083:(e,t,i)=>{i.d(t,{K:()=>r});var s=i(98170);class r{constructor(){this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}manageFormClearListener(e,t,i){null!=this.formClearListener&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,s.bM)(t)&&(this.formClearListener=e.addFormClearedListener(t,i),this.lastWidgetMgr=e,this.lastFormId=t))}disconnect(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}},56643:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var s=i(30969),r=i(99208),o=i(96857),n=i(3077),a=i(14800),l=i(23083),d=i(1561),c=i(91439),h=i(444),u=i(63705),m=i(62606),p=i(77746),g=i(80543),f=i(1813),b=i(85668),v=i(3146),y=i(98170),x=i(83405);const V=(0,x.Z)("div",{target:"e116k4er3"})((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:t.colors.widgetBorderColor||t.colors.widgetBackgroundColor||t.colors.bgColor,transitionDuration:"200ms",transitionProperty:"border",transitionTimingFunction:"cubic-bezier(0.2, 0.8, 0.4, 1)",borderRadius:t.radii.lg,overflow:"hidden","&.focused":{borderColor:t.colors.primary},input:{MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:t.spacing.none}}}}),""),w=(0,x.Z)("div",{target:"e116k4er2"})({name:"76z9jo",styles:"display:flex;flex-direction:row;align-self:stretch"}),C=(0,x.Z)("button",{target:"e116k4er1"})((e=>{let{theme:t}=e;return{margin:t.spacing.none,border:"none",height:t.sizes.full,display:"flex",alignItems:"center",width:"".concat(32,"px"),justifyContent:"center",color:t.colors.bodyText,transition:"color 300ms, backgroundColor 300ms",backgroundColor:t.colors.widgetBackgroundColor||t.colors.secondaryBg,"&:hover:enabled, &:focus:enabled":{color:t.colors.white,backgroundColor:t.colors.primary,transition:"none",outline:"none"},"&:active":{outline:"none",border:"none"},"&:last-of-type":{borderTopRightRadius:t.radii.lg,borderBottomRightRadius:t.radii.lg},"&:disabled":{cursor:"not-allowed",color:t.colors.fadedText40}}}),""),I=(0,x.Z)("div",{target:"e116k4er0"})((e=>{let{theme:t,clearable:i}=e;return{position:"absolute",marginRight:t.spacing.twoXS,left:0,right:"".concat(64+(i?12:0),"px")}}),"");var F=i(37574);class D extends s.PureComponent{constructor(e){super(e),this.formClearHelper=new l.K,this.inputRef=s.createRef(),this.formatValue=e=>{if((0,y.le)(e))return null;const t=function(e){return null==e||""===e?void 0:e}(this.props.element.format);if(null==t)return e.toString();try{return(0,a.sprintf)(t,e)}catch(i){return(0,d.KE)("Error in sprintf(".concat(t,", ").concat(e,"): ").concat(i)),String(e)}},this.isIntData=()=>this.props.element.dataType===c.Y2.DataType.INT,this.getMin=()=>this.props.element.hasMin?this.props.element.min:-1/0,this.getMax=()=>this.props.element.hasMax?this.props.element.max:1/0,this.getStep=()=>{const{step:e}=this.props.element;return e||(this.isIntData()?1:.01)},this.commitWidgetValue=e=>{const{value:t}=this.state,{element:i,widgetMgr:s}=this.props,r=this.props.element,o=this.getMin(),n=this.getMax();if((0,y.bb)(t)&&(o>t||t>n)){const e=this.inputRef.current;e&&e.reportValidity()}else{var a;const o=null!==(a=null!==t&&void 0!==t?t:r.default)&&void 0!==a?a:null;this.isIntData()?s.setIntValue(i,o,e):s.setDoubleValue(i,o,e),this.setState({dirty:!1,value:o,formattedValue:this.formatValue(o)})}},this.onFormCleared=()=>{this.setState(((e,t)=>{var i;return{value:null!==(i=t.element.default)&&void 0!==i?i:null}}),(()=>this.commitWidgetValue({fromUi:!0})))},this.onBlur=()=>{this.state.dirty&&this.commitWidgetValue({fromUi:!0}),this.setState({isFocused:!1})},this.onFocus=()=>{this.setState({isFocused:!0})},this.onChange=e=>{const{value:t}=e.target;if(""===t)this.setState({dirty:!0,value:null,formattedValue:null});else{let e;e=this.isIntData()?parseInt(t,10):parseFloat(t),this.setState({dirty:!0,value:e,formattedValue:t})}},this.onKeyDown=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.modifyValueUsingStep("increment")();break;case"ArrowDown":e.preventDefault(),this.modifyValueUsingStep("decrement")()}},this.onKeyPress=e=>{"Enter"===e.key&&(this.state.dirty&&this.commitWidgetValue({fromUi:!0}),(0,y.$b)(this.props.element)&&this.props.widgetMgr.submitForm(this.props.element.formId))},this.modifyValueUsingStep=e=>()=>{const{value:t}=this.state,i=this.getStep();switch(e){case"increment":this.canIncrement&&this.setState({dirty:!0,value:(null!==t&&void 0!==t?t:this.getMin())+i},(()=>{this.commitWidgetValue({fromUi:!0})}));break;case"decrement":this.canDecrement&&this.setState({dirty:!0,value:(null!==t&&void 0!==t?t:this.getMax())-i},(()=>{this.commitWidgetValue({fromUi:!0})}))}},this.state={dirty:!1,value:this.initialValue,formattedValue:this.formatValue(this.initialValue),isFocused:!1}}get initialValue(){var e;const t=this.isIntData()?this.props.widgetMgr.getIntValue(this.props.element):this.props.widgetMgr.getDoubleValue(this.props.element);return null!==(e=null!==t&&void 0!==t?t:this.props.element.default)&&void 0!==e?e:null}componentDidMount(){this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}componentDidUpdate(){this.maybeUpdateFromProtobuf()}componentWillUnmount(){this.formClearHelper.disconnect()}maybeUpdateFromProtobuf(){const{setValue:e}=this.props.element;e&&this.updateFromProtobuf()}updateFromProtobuf(){const{value:e}=this.props.element;this.props.element.setValue=!1,this.setState({value:null!==e&&void 0!==e?e:null,formattedValue:this.formatValue(null!==e&&void 0!==e?e:null)},(()=>{this.commitWidgetValue({fromUi:!1})}))}get canDecrement(){return!(0,y.le)(this.state.value)&&this.state.value-this.getStep()>=this.getMin()}get canIncrement(){return!(0,y.le)(this.state.value)&&this.state.value+this.getStep()<=this.getMax()}render(){var e;const{element:t,width:i,disabled:s,widgetMgr:n,theme:a}=this.props,{formattedValue:l,dirty:d,isFocused:c}=this.state,x={width:i},D=!this.canDecrement||s,k=!this.canIncrement||s,M=(0,y.le)(t.default)&&!s;return this.formClearHelper.manageFormClearListener(n,t.formId,this.onFormCleared),(0,F.jsxs)("div",{className:"stNumberInput",style:x,"data-testid":"stNumberInput",children:[(0,F.jsx)(b.O,{label:t.label,disabled:s,labelVisibility:(0,y.iF)(null===(e=t.labelVisibility)||void 0===e?void 0:e.value),children:t.help&&(0,F.jsx)(v.dT,{children:(0,F.jsx)(u.Z,{content:t.help,placement:m.u.TOP_RIGHT})})}),(0,F.jsxs)(V,{className:c?"focused":"",children:[(0,F.jsx)(g.Z,{type:"number",inputRef:this.inputRef,value:null!==l&&void 0!==l?l:"",placeholder:t.placeholder,onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.onChange,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,clearable:M,clearOnEscape:M,disabled:s,"aria-label":t.label,overrides:{ClearIcon:{props:{overrides:{Svg:{style:{color:a.colors.darkGray,transform:"scale(1.4)",width:a.spacing.twoXL,marginRight:"-1.25em",":hover":{fill:a.colors.bodyText}}}}}},Input:{props:{step:this.getStep(),min:this.getMin(),max:this.getMax()},style:{lineHeight:"1.4",paddingRight:".5rem",paddingLeft:".5rem",paddingBottom:".5rem",paddingTop:".5rem"}},InputContainer:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0})},Root:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0})}}}),i>h.A.hideWidgetDetails&&(0,F.jsxs)(w,{children:[(0,F.jsx)(C,{className:"step-down",onClick:this.modifyValueUsingStep("decrement"),disabled:D,tabIndex:-1,children:(0,F.jsx)(p.Z,{content:r.W,size:"xs",color:this.canDecrement?"inherit":"disabled"})}),(0,F.jsx)(C,{className:"step-up",onClick:this.modifyValueUsingStep("increment"),disabled:k,tabIndex:-1,children:(0,F.jsx)(p.Z,{content:o.v,size:"xs",color:this.canIncrement?"inherit":"disabled"})})]})]}),i>h.A.hideWidgetDetails&&(0,F.jsx)(I,{clearable:M,children:(0,F.jsx)(f.Z,{dirty:d,value:null!==l&&void 0!==l?l:"",className:"input-instructions",inForm:(0,y.$b)({formId:t.formId})})})]})}}const k=(0,n.b)(D)}}]);
//# sourceMappingURL=6643.12fca811.chunk.js.map