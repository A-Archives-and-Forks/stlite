/*! For license information please see 7160.fe8b036a.chunk.js.LICENSE.txt */
(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[7160],{39554:function(t){var n=function(){"use strict";function t(t,n){return null!=n&&t instanceof n}var n,e,r;try{n=Map}catch(u){n=function(){}}try{e=Set}catch(u){e=function(){}}try{r=Promise}catch(u){r=function(){}}function i(a,u,c,s,l){"object"===typeof u&&(c=u.depth,s=u.prototype,l=u.includeNonEnumerable,u=u.circular);var f=[],h=[],d="undefined"!=typeof Buffer;return"undefined"==typeof u&&(u=!0),"undefined"==typeof c&&(c=1/0),function a(c,p){if(null===c)return null;if(0===p)return c;var v,g;if("object"!=typeof c)return c;if(t(c,n))v=new n;else if(t(c,e))v=new e;else if(t(c,r))v=new r((function(t,n){c.then((function(n){t(a(n,p-1))}),(function(t){n(a(t,p-1))}))}));else if(i.__isArray(c))v=[];else if(i.__isRegExp(c))v=new RegExp(c.source,o(c)),c.lastIndex&&(v.lastIndex=c.lastIndex);else if(i.__isDate(c))v=new Date(c.getTime());else{if(d&&Buffer.isBuffer(c))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(v),v;t(c,Error)?v=Object.create(c):"undefined"==typeof s?(g=Object.getPrototypeOf(c),v=Object.create(g)):(v=Object.create(s),g=s)}if(u){var m=f.indexOf(c);if(-1!=m)return h[m];f.push(c),h.push(v)}for(var y in t(c,n)&&c.forEach((function(t,n){var e=a(n,p-1),r=a(t,p-1);v.set(e,r)})),t(c,e)&&c.forEach((function(t){var n=a(t,p-1);v.add(n)})),c){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(v[y]=a(c[y],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(y=0;y<x.length;y++){var _=x[y];(!(k=Object.getOwnPropertyDescriptor(c,_))||k.enumerable||l)&&(v[_]=a(c[_],p-1),k.enumerable||Object.defineProperty(v,_,{enumerable:!1}))}}if(l){var w=Object.getOwnPropertyNames(c);for(y=0;y<w.length;y++){var k,M=w[y];(k=Object.getOwnPropertyDescriptor(c,M))&&k.enumerable||(v[M]=a(c[M],p-1),Object.defineProperty(v,M,{enumerable:!1}))}}return v}(a,c)}function a(t){return Object.prototype.toString.call(t)}function o(t){var n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),n}return i.clonePrototype=function(t){if(null===t)return null;var n=function(){};return n.prototype=t,new n},i.__objToStr=a,i.__isDate=function(t){return"object"===typeof t&&"[object Date]"===a(t)},i.__isArray=function(t){return"object"===typeof t&&"[object Array]"===a(t)},i.__isRegExp=function(t){return"object"===typeof t&&"[object RegExp]"===a(t)},i.__getRegExpFlags=o,i}();t.exports&&(t.exports=n)},59264:function(t){"use strict";t.exports=function t(n,e){if(n===e)return!0;if(n&&e&&"object"==typeof n&&"object"==typeof e){if(n.constructor!==e.constructor)return!1;var r,i,a;if(Array.isArray(n)){if((r=n.length)!=e.length)return!1;for(i=r;0!==i--;)if(!t(n[i],e[i]))return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if((r=(a=Object.keys(n)).length)!==Object.keys(e).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(e,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!t(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}},33608:function(t){"use strict";t.exports=function(t,n){n||(n={}),"function"===typeof n&&(n={cmp:n});var e,r="boolean"===typeof n.cycles&&n.cycles,i=n.cmp&&(e=n.cmp,function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}),a=[];return function t(n){if(n&&n.toJSON&&"function"===typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!==typeof n)return JSON.stringify(n);var e,o;if(Array.isArray(n)){for(o="[",e=0;e<n.length;e++)e&&(o+=","),o+=t(n[e])||"null";return o+"]"}if(null===n)return"null";if(-1!==a.indexOf(n)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=a.push(n)-1,c=Object.keys(n).sort(i&&i(n));for(o="",e=0;e<c.length;e++){var s=c[e],l=t(n[s]);l&&(o&&(o+=","),o+=JSON.stringify(s)+":"+l)}return a.splice(u,1),"{"+o+"}"}}(t)}},47160:function(t,n,e){"use strict";e.d(n,{ZP:function(){return Cy}});var r={};e.r(r),e.d(r,{JsonPatchError:function(){return _},_areEquals:function(){return T},applyOperation:function(){return E},applyPatch:function(){return S},applyReducer:function(){return D},deepClone:function(){return w},getValueByPointer:function(){return O},validate:function(){return A},validator:function(){return C}});var i={};e.r(i),e.d(i,{compare:function(){return R},generate:function(){return U},observe:function(){return z},unobserve:function(){return N}});var a={};e.r(a),e.d(a,{accessPathDepth:function(){return Pt},accessPathWithDatum:function(){return Ft},compile:function(){return fv},contains:function(){return ht},deepEqual:function(){return it},deleteNestedProperty:function(){return At},duplicate:function(){return at},entries:function(){return Et},every:function(){return pt},fieldIntersection:function(){return wt},flatAccessWithDatum:function(){return jt},getFirstDefined:function(){return Rt},hasIntersection:function(){return xt},hash:function(){return lt},internalField:function(){return qt},isBoolean:function(){return St},isEmpty:function(){return kt},isEqual:function(){return yt},isInternalField:function(){return Ht},isNullOrFalse:function(){return ft},isNumeric:function(){return Yt},keys:function(){return Mt},logicalExpr:function(){return Ct},mergeDeep:function(){return vt},never:function(){return ot},normalize:function(){return Es},normalizeAngle:function(){return Wt},omit:function(){return ct},pick:function(){return ut},prefixGenerator:function(){return _t},removePathFromField:function(){return Ut},replaceAll:function(){return zt},replacePathInField:function(){return Nt},resetIdCounter:function(){return Bt},setEqual:function(){return bt},some:function(){return dt},stringify:function(){return st},titleCase:function(){return Tt},unique:function(){return mt},uniqueId:function(){return It},vals:function(){return Ot},varName:function(){return Dt},version:function(){return hv}});var o={};e.r(o),e.d(o,{dark:function(){return gv},excel:function(){return yv},fivethirtyeight:function(){return kv},ggplot2:function(){return Ov},googlecharts:function(){return Yv},latimes:function(){return Tv},powerbi:function(){return ag},quartz:function(){return Zv},urbaninstitute:function(){return Bv},version:function(){return og},vox:function(){return zv}});var u=e(59019),c=e(57994),s=e(98907),l=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},t(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),f=Object.prototype.hasOwnProperty;function h(t,n){return f.call(t,n)}function d(t){if(Array.isArray(t)){for(var n=new Array(t.length),e=0;e<n.length;e++)n[e]=""+e;return n}if(Object.keys)return Object.keys(t);var r=[];for(var i in t)h(t,i)&&r.push(i);return r}function p(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function v(t){for(var n,e=0,r=t.length;e<r;){if(!((n=t.charCodeAt(e))>=48&&n<=57))return!1;e++}return!0}function g(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function m(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function y(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,e=t.length;n<e;n++)if(y(t[n]))return!0}else if("object"===typeof t)for(var r=d(t),i=r.length,a=0;a<i;a++)if(y(t[r[a]]))return!0;return!1}function b(t,n){var e=[t];for(var r in n){var i="object"===typeof n[r]?JSON.stringify(n[r],null,2):n[r];"undefined"!==typeof i&&e.push(r+": "+i)}return e.join("\n")}var x=function(t){function n(n,e,r,i,a){var o=this.constructor,u=t.call(this,b(n,{name:e,index:r,operation:i,tree:a}))||this;return u.name=e,u.index=r,u.operation=i,u.tree=a,Object.setPrototypeOf(u,o.prototype),u.message=b(n,{name:e,index:r,operation:i,tree:a}),u}return l(n,t),n}(Error),_=x,w=p,k={add:function(t,n,e){return t[n]=this.value,{newDocument:e}},remove:function(t,n,e){var r=t[n];return delete t[n],{newDocument:e,removed:r}},replace:function(t,n,e){var r=t[n];return t[n]=this.value,{newDocument:e,removed:r}},move:function(t,n,e){var r=O(e,this.path);r&&(r=p(r));var i=E(e,{op:"remove",path:this.from}).removed;return E(e,{op:"add",path:this.path,value:i}),{newDocument:e,removed:r}},copy:function(t,n,e){var r=O(e,this.from);return E(e,{op:"add",path:this.path,value:p(r)}),{newDocument:e}},test:function(t,n,e){return{newDocument:e,test:T(t[n],this.value)}},_get:function(t,n,e){return this.value=t[n],{newDocument:e}}},M={add:function(t,n,e){return v(n)?t.splice(n,0,this.value):t[n]=this.value,{newDocument:e,index:n}},remove:function(t,n,e){return{newDocument:e,removed:t.splice(n,1)[0]}},replace:function(t,n,e){var r=t[n];return t[n]=this.value,{newDocument:e,removed:r}},move:k.move,copy:k.copy,test:k.test,_get:k._get};function O(t,n){if(""==n)return t;var e={op:"_get",path:n};return E(t,e),e.value}function E(t,n,e,r,i,a){if(void 0===e&&(e=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=0),e&&("function"==typeof e?e(n,0,t,n.path):C(n,0)),""===n.path){var o={newDocument:t};if("add"===n.op)return o.newDocument=n.value,o;if("replace"===n.op)return o.newDocument=n.value,o.removed=t,o;if("move"===n.op||"copy"===n.op)return o.newDocument=O(t,n.from),"move"===n.op&&(o.removed=t),o;if("test"===n.op){if(o.test=T(t,n.value),!1===o.test)throw new _("Test operation failed","TEST_OPERATION_FAILED",a,n,t);return o.newDocument=t,o}if("remove"===n.op)return o.removed=t,o.newDocument=null,o;if("_get"===n.op)return n.value=t,o;if(e)throw new _("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,n,t);return o}r||(t=p(t));var u=(n.path||"").split("/"),c=t,s=1,l=u.length,f=void 0,h=void 0,d=void 0;for(d="function"==typeof e?e:C;;){if((h=u[s])&&-1!=h.indexOf("~")&&(h=m(h)),i&&("__proto__"==h||"prototype"==h&&s>0&&"constructor"==u[s-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(e&&void 0===f&&(void 0===c[h]?f=u.slice(0,s).join("/"):s==l-1&&(f=n.path),void 0!==f&&d(n,0,t,f)),s++,Array.isArray(c)){if("-"===h)h=c.length;else{if(e&&!v(h))throw new _("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,n,t);v(h)&&(h=~~h)}if(s>=l){if(e&&"add"===n.op&&h>c.length)throw new _("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,n,t);if(!1===(o=M[n.op].call(n,c,h,t)).test)throw new _("Test operation failed","TEST_OPERATION_FAILED",a,n,t);return o}}else if(s>=l){if(!1===(o=k[n.op].call(n,c,h,t)).test)throw new _("Test operation failed","TEST_OPERATION_FAILED",a,n,t);return o}if(c=c[h],e&&s<l&&(!c||"object"!==typeof c))throw new _("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,n,t)}}function S(t,n,e,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),e&&!Array.isArray(n))throw new _("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=p(t));for(var a=new Array(n.length),o=0,u=n.length;o<u;o++)a[o]=E(t,n[o],e,!0,i,o),t=a[o].newDocument;return a.newDocument=t,a}function D(t,n,e){var r=E(t,n);if(!1===r.test)throw new _("Test operation failed","TEST_OPERATION_FAILED",e,n,t);return r.newDocument}function C(t,n,e,r){if("object"!==typeof t||null===t||Array.isArray(t))throw new _("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,t,e);if(!k[t.op])throw new _("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,t,e);if("string"!==typeof t.path)throw new _("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,t,e);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new _('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,t,e);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new _("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,t,e);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new _("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,t,e);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&y(t.value))throw new _("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,t,e);if(e)if("add"==t.op){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new _("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,t,e)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new _("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,t,e)}else if("move"===t.op||"copy"===t.op){var o=A([{op:"_get",path:t.from,value:void 0}],e);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new _("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,t,e)}}function A(t,n,e){try{if(!Array.isArray(t))throw new _("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)S(p(n),p(t),e||!0);else{e=e||C;for(var r=0;r<t.length;r++)e(t[r],r,n,void 0)}}catch(i){if(i instanceof _)return i;throw i}}function T(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var e,r,i,a=Array.isArray(t),o=Array.isArray(n);if(a&&o){if((r=t.length)!=n.length)return!1;for(e=r;0!==e--;)if(!T(t[e],n[e]))return!1;return!0}if(a!=o)return!1;var u=Object.keys(t);if((r=u.length)!==Object.keys(n).length)return!1;for(e=r;0!==e--;)if(!n.hasOwnProperty(u[e]))return!1;for(e=r;0!==e--;)if(!T(t[i=u[e]],n[i]))return!1;return!0}return t!==t&&n!==n}var F=new WeakMap,j=function(t){this.observers=new Map,this.obj=t},Z=function(t,n){this.callback=t,this.observer=n};function N(t,n){n.unobserve()}function z(t,n){var e,r=function(t){return F.get(t)}(t);if(r){var i=function(t,n){return t.observers.get(n)}(r,n);e=i&&i.observer}else r=new j(t),F.set(t,r);if(e)return e;if(e={},r.value=p(t),n){e.callback=n,e.next=null;var a=function(){U(e)},o=function(){clearTimeout(e.next),e.next=setTimeout(a)};"undefined"!==typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return e.patches=[],e.object=t,e.unobserve=function(){U(e),clearTimeout(e.next),function(t,n){t.observers.delete(n.callback)}(r,e),"undefined"!==typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(n,new Z(n,e)),e}function U(t,n){void 0===n&&(n=!1);var e=F.get(t.object);P(e.value,t.object,t.patches,"",n),t.patches.length&&S(e.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function P(t,n,e,r,i){if(n!==t){"function"===typeof n.toJSON&&(n=n.toJSON());for(var a=d(n),o=d(t),u=!1,c=o.length-1;c>=0;c--){var s=t[f=o[c]];if(!h(n,f)||void 0===n[f]&&void 0!==s&&!1===Array.isArray(n))Array.isArray(t)===Array.isArray(n)?(i&&e.push({op:"test",path:r+"/"+g(f),value:p(s)}),e.push({op:"remove",path:r+"/"+g(f)}),u=!0):(i&&e.push({op:"test",path:r,value:t}),e.push({op:"replace",path:r,value:n}),!0);else{var l=n[f];"object"==typeof s&&null!=s&&"object"==typeof l&&null!=l&&Array.isArray(s)===Array.isArray(l)?P(s,l,e,r+"/"+g(f),i):s!==l&&(!0,i&&e.push({op:"test",path:r+"/"+g(f),value:p(s)}),e.push({op:"replace",path:r+"/"+g(f),value:p(l)}))}}if(u||a.length!=o.length)for(c=0;c<a.length;c++){var f;h(t,f=a[c])||void 0===n[f]||e.push({op:"add",path:r+"/"+g(f),value:p(n[f])})}}}function R(t,n,e){void 0===e&&(e=!1);var r=[];return P(t,n,r,"",e),r}Object.assign({},r,i,{JsonPatchError:x,deepClone:p,escapePathComponent:g,unescapePathComponent:m});var L=e(47614),I=e.n(L),B=e(14409),q=e(19541),H=e(16408),W=e(19065),Y=e(47427),X=e(39554),G=e.n(X),J=e(59264),$=e.n(J),V=e(33608),K=e.n(V);function Q(t){return!!t.or}function tt(t){return!!t.and}function nt(t){return!!t.not}function et(t,n){if(nt(t))et(t.not,n);else if(tt(t)){var e,r=(0,Y.Z)(t.and);try{for(r.s();!(e=r.n()).done;){et(e.value,n)}}catch(o){r.e(o)}finally{r.f()}}else if(Q(t)){var i,a=(0,Y.Z)(t.or);try{for(a.s();!(i=a.n()).done;){et(i.value,n)}}catch(o){a.e(o)}finally{a.f()}}else n(t)}function rt(t,n){return nt(t)?{not:rt(t.not,n)}:tt(t)?{and:t.and.map((function(t){return rt(t,n)}))}:Q(t)?{or:t.or.map((function(t){return rt(t,n)}))}:n(t)}var it=$(),at=G();function ot(t){throw new Error(t)}function ut(t,n){var e,r={},i=(0,Y.Z)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;(0,H.nr)(t,a)&&(r[a]=t[a])}}catch(o){i.e(o)}finally{i.f()}return r}function ct(t,n){var e,r=Object.assign({},t),i=(0,Y.Z)(n);try{for(i.s();!(e=i.n()).done;){delete r[e.value]}}catch(a){i.e(a)}finally{i.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat((0,u.Z)(this).map((function(t){return K()(t)})).join(","),")")};var st=K();function lt(t){if((0,H.hj)(t))return t;var n=(0,H.HD)(t)?t:K()(t);if(n.length<250)return n;for(var e=0,r=0;r<n.length;r++){e=(e<<5)-e+n.charCodeAt(r),e&=e}return e}function ft(t){return!1===t||null===t}function ht(t,n){return t.includes(n)}function dt(t,n){var e,r=0,i=(0,Y.Z)(t.entries());try{for(i.s();!(e=i.n()).done;){var a=(0,W.Z)(e.value,2),o=a[0];if(n(a[1],o,r++))return!0}}catch(u){i.e(u)}finally{i.f()}return!1}function pt(t,n){var e,r=0,i=(0,Y.Z)(t.entries());try{for(i.s();!(e=i.n()).done;){var a=(0,W.Z)(e.value,2),o=a[0];if(!n(a[1],o,r++))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}function vt(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=0,a=e;i<a.length;i++){var o=a[i];gt(t,null!==o&&void 0!==o?o:{})}return t}function gt(t,n){var e,r=(0,Y.Z)(Mt(n));try{for(r.s();!(e=r.n()).done;){var i=e.value;(0,H.iL)(t,i,n[i],!0)}}catch(a){r.e(a)}finally{r.f()}}function mt(t,n){var e,r,i=[],a={},o=(0,Y.Z)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;(e=n(u))in a||(a[e]=1,i.push(u))}}catch(c){o.e(c)}finally{o.f()}return i}function yt(t,n){var e=Mt(t),r=Mt(n);if(e.length!==r.length)return!1;var i,a=(0,Y.Z)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t[o]!==n[o])return!1}}catch(u){a.e(u)}finally{a.f()}return!0}function bt(t,n){if(t.size!==n.size)return!1;var e,r=(0,Y.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!n.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}function xt(t,n){var e,r=(0,Y.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(n.has(i))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function _t(t){var n,e=new Set,r=(0,Y.Z)(t);try{var i=function(){var t,r=n.value,i=(0,H._k)(r).map((function(t,n){return 0===n?t:"[".concat(t,"]")})),a=i.map((function(t,n){return i.slice(0,n+1).join("")})),o=(0,Y.Z)(a);try{for(o.s();!(t=o.n()).done;){var u=t.value;e.add(u)}}catch(c){o.e(c)}finally{o.f()}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return e}function wt(t,n){return void 0===t||void 0===n||xt(_t(t),_t(n))}function kt(t){return 0===Mt(t).length}var Mt=Object.keys,Ot=Object.values,Et=Object.entries;function St(t){return!0===t||!1===t}function Dt(t){var n=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+n}function Ct(t,n){return nt(t)?"!(".concat(Ct(t.not,n),")"):tt(t)?"(".concat(t.and.map((function(t){return Ct(t,n)})).join(") && ("),")"):Q(t)?"(".concat(t.or.map((function(t){return Ct(t,n)})).join(") || ("),")"):n(t)}function At(t,n){if(0===n.length)return!0;var e=n.shift();return e in t&&At(t[e],n)&&delete t[e],kt(t)}function Tt(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Ft(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",e=(0,H._k)(t),r=[],i=1;i<=e.length;i++){var a="[".concat(e.slice(0,i).map(H.m8).join("]["),"]");r.push("".concat(n).concat(a))}return r.join(" && ")}function jt(t){return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum","[").concat((0,H.m8)((0,H._k)(t).join(".")),"]")}function Zt(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Nt(t){return"".concat((0,H._k)(t).map(Zt).join("\\."))}function zt(t,n,e){return t.replace(new RegExp(n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),e)}function Ut(t){return"".concat((0,H._k)(t).join("."))}function Pt(t){return t?(0,H._k)(t).length:0}function Rt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];for(var r=0,i=n;r<i.length;r++){var a=i[r];if(void 0!==a)return a}}var Lt=42;function It(t){var n=++Lt;return t?String(t)+n:n}function Bt(){Lt=42}function qt(t){return Ht(t)?t:"__".concat(t)}function Ht(t){return t.startsWith("__")}function Wt(t){if(void 0!==t)return(t%360+360)%360}function Yt(t){return!!(0,H.hj)(t)||!isNaN(t)&&!isNaN(parseFloat(t))}var Xt=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Gt="row",Jt="column",$t="facet",Vt="x",Kt="y",Qt="x2",tn="y2",nn="xOffset",en="yOffset",rn="radius",an="radius2",on="theta",un="theta2",cn="latitude",sn="longitude",ln="latitude2",fn="longitude2",hn="color",dn="fill",pn="stroke",vn="shape",gn="size",mn="angle",yn="opacity",bn="fillOpacity",xn="strokeOpacity",_n="strokeWidth",wn="strokeDash",kn="text",Mn="order",On="detail",En="key",Sn="tooltip",Dn="href",Cn="url",An="description",Tn={theta:1,theta2:1,radius:1,radius2:1};function Fn(t){return t in Tn}var jn={longitude:1,longitude2:1,latitude:1,latitude2:1};var Zn=Mt(jn),Nn=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),Tn),jn),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function zn(t){return t===hn||t===dn||t===pn}var Un={row:1,column:1,facet:1},Pn=Mt(Un),Rn=Object.assign(Object.assign({},Nn),Un),Ln=Mt(Rn),In=(Rn.order,Rn.detail,Rn.tooltip,Xt(Rn,["order","detail","tooltip"])),Bn=(In.row,In.column,In.facet,Xt(In,["row","column","facet"]));Mt(In),Mt(Bn);function qn(t){return!!Rn[t]}var Hn=[Qt,tn,ln,fn,un,an];function Wn(t){return Yn(t)!==t}function Yn(t){switch(t){case Qt:return Vt;case tn:return Kt;case ln:return cn;case fn:return sn;case un:return on;case an:return rn}return t}function Xn(t){if(Fn(t))switch(t){case on:return"startAngle";case un:return"endAngle";case rn:return"outerRadius";case an:return"innerRadius"}return t}function Gn(t){switch(t){case Vt:return Qt;case Kt:return tn;case cn:return ln;case sn:return fn;case on:return un;case rn:return an}}function Jn(t){switch(t){case Vt:case Qt:return"width";case Kt:case tn:return"height"}}function $n(t){switch(t){case Vt:return"xOffset";case Kt:return"yOffset"}}function Vn(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}var Kn=Mt(Nn),Qn=(Nn.x,Nn.y,Nn.x2,Nn.y2,Nn.xOffset,Nn.yOffset,Nn.latitude,Nn.longitude,Nn.latitude2,Nn.longitude2,Nn.theta,Nn.theta2,Nn.radius,Nn.radius2,Xt(Nn,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"])),te=Mt(Qn),ne={x:1,y:1},ee=Mt(ne);function re(t){return t in ne}var ie={theta:1,radius:1},ae=Mt(ie);function oe(t){return"width"===t?Vt:Kt}var ue={xOffset:1,yOffset:1};Mt(ue);function ce(t){return t in ue}Qn.text,Qn.tooltip,Qn.href,Qn.url,Qn.description,Qn.detail,Qn.key,Qn.order;var se=Xt(Qn,["text","tooltip","href","url","description","detail","key","order"]),le=Mt(se);var fe=Object.assign(Object.assign(Object.assign(Object.assign({},ne),ie),ue),se),he=Mt(fe);function de(t){return!!fe[t]}function pe(t,n){return function(t){switch(t){case hn:case dn:case pn:case An:case On:case En:case Sn:case Dn:case Mn:case yn:case bn:case xn:case _n:case $t:case Gt:case Jt:return ve;case Vt:case Kt:case nn:case en:case cn:case sn:return ge;case Qt:case tn:case ln:case fn:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gn:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case wn:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case vn:return{point:"always",geoshape:"always"};case kn:return{text:"always"};case mn:return{point:"always",square:"always",text:"always"};case Cn:return{image:"always"};case on:case rn:return{text:"always",arc:"always"};case un:case an:return{arc:"always"}}}(t)[n]}var ve={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},ge=(ve.geoshape,Xt(ve,["geoshape"]));function me(t){switch(t){case Vt:case Kt:case on:case rn:case nn:case en:case gn:case mn:case _n:case yn:case bn:case xn:case Qt:case tn:case un:case an:return;case $t:case Gt:case Jt:case vn:case wn:case kn:case Sn:case Dn:case Cn:case An:return"discrete";case hn:case dn:case pn:return"flexible";case cn:case sn:case ln:case fn:case On:case En:case Mn:return}}var ye=e(16798),be={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},xe={count:1,min:1,max:1};function _e(t){return!!t&&!!t.argmin}function we(t){return!!t&&!!t.argmax}function ke(t){return(0,H.HD)(t)&&!!be[t]}var Me=new Set(["count","valid","missing","distinct"]);function Oe(t){return(0,H.HD)(t)&&Me.has(t)}var Ee=new Set(["count","sum","distinct","valid","missing"]),Se=new Set(["mean","average","median","q1","q3","min","max"]);function De(t){return(0,H.jn)(t)&&(t=No(t,void 0)),"bin"+Mt(t).map((function(n){return Fe(t[n])?Dt("_".concat(n,"_").concat(Et(t[n]))):Dt("_".concat(n,"_").concat(t[n]))})).join("")}function Ce(t){return!0===t||Te(t)&&!t.binned}function Ae(t){return"binned"===t||Te(t)&&!0===t.binned}function Te(t){return(0,H.Kn)(t)}function Fe(t){return null===t||void 0===t?void 0:t.param}function je(t){switch(t){case Gt:case Jt:case gn:case hn:case dn:case pn:case _n:case yn:case bn:case xn:case vn:return 6;case wn:return 4;default:return 10}}function Ze(t){return!!(null===t||void 0===t?void 0:t.expr)}function Ne(t){var n,e=Mt(t||{}),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r[a]=Xe(t[a])}}catch(o){i.e(o)}finally{i.f()}return r}var ze=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Ue(t){var n=t.anchor,e=t.frame,r=t.offset,i=t.orient,a=t.angle,o=t.limit,u=t.color,c=t.subtitleColor,s=t.subtitleFont,l=t.subtitleFontSize,f=t.subtitleFontStyle,h=t.subtitleFontWeight,d=t.subtitleLineHeight,p=t.subtitlePadding,v=ze(t,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=Object.assign(Object.assign({},v),u?{fill:u}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n?{anchor:n}:{}),e?{frame:e}:{}),r?{offset:r}:{}),i?{orient:i}:{}),void 0!==a?{angle:a}:{}),void 0!==o?{limit:o}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{subtitleColor:c}:{}),s?{subtitleFont:s}:{}),l?{subtitleFontSize:l}:{}),f?{subtitleFontStyle:f}:{}),h?{subtitleFontWeight:h}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{});return{titleMarkConfig:g,subtitleMarkConfig:ut(t,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:m,subtitle:y}}function Pe(t){return(0,H.HD)(t)||(0,H.kJ)(t)&&(0,H.HD)(t[0])}function Re(t){return!!(null===t||void 0===t?void 0:t.signal)}function Le(t){return!!t.step}function Ie(t){return!(0,H.kJ)(t)&&("field"in t&&"data"in t)}var Be=Mt({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),qe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},He=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],We=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Ye(t){var n=(0,H.kJ)(t.condition)?t.condition.map(Ge):Ge(t.condition);return Object.assign(Object.assign({},Xe(t)),{condition:n})}function Xe(t){if(Ze(t)){var n=t.expr,e=We(t,["expr"]);return Object.assign({signal:n},e)}return t}function Ge(t){if(Ze(t)){var n=t.expr,e=We(t,["expr"]);return Object.assign({signal:n},e)}return t}function Je(t){if(Ze(t)){var n=t.expr,e=We(t,["expr"]);return Object.assign({signal:n},e)}return Re(t)?t:void 0!==t?{value:t}:void 0}function $e(t){return Re(t)?t.signal:(0,H.m8)(t.value)}function Ve(t){return Re(t)?t.signal:null==t?null:(0,H.m8)(t)}function Ke(t){var n;return[].concat(t.type,null!==(n=t.style)&&void 0!==n?n:[])}function Qe(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel,a=r.ignoreVgConfig;return i&&void 0!==n[i]?n[i]:void 0!==n[t]?n[t]:!a||i&&i!==t?tr(t,n,e,r):void 0}function tr(t,n,e){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).vgChannel;return Rt(r?nr(t,n,e.style):void 0,nr(t,n,e.style),r?e[n.type][r]:void 0,e[n.type][t],r?e.mark[r]:e.mark[t])}function nr(t,n,e){return er(t,Ke(n),e)}function er(t,n,e){var r;n=(0,H.IX)(n);var i,a=(0,Y.Z)(n);try{for(a.s();!(i=a.n()).done;){var o=e[i.value];o&&void 0!==o[t]&&(r=o[t])}}catch(u){a.e(u)}finally{a.f()}return r}function rr(t,n){return(0,H.IX)(t).reduce((function(t,e){var r;return t.field.push(_o(e,n)),t.order.push(null!==(r=e.sort)&&void 0!==r?r:"ascending"),t}),{field:[],order:[]})}function ir(t,n){var e=(0,u.Z)(t);return n.forEach((function(t){var n,r=(0,Y.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(it(i,t))return}}catch(a){r.e(a)}finally{r.f()}e.push(t)})),e}function ar(t,n){return it(t,n)||!n?t:t?[].concat((0,u.Z)((0,H.IX)(t)),(0,u.Z)((0,H.IX)(n))).join(", "):n}function or(t,n){var e=t.value,r=n.value;if(null==e||null===r)return{explicit:t.explicit,value:null};if((Pe(e)||Re(e))&&(Pe(r)||Re(r)))return{explicit:t.explicit,value:ar(e,r)};if(Pe(e)||Re(e))return{explicit:t.explicit,value:e};if(Pe(r)||Re(r))return{explicit:t.explicit,value:r};if(!Pe(e)&&!Re(e)&&!Pe(r)&&!Re(r))return{explicit:t.explicit,value:ir(e,r)};throw new Error("It should never reach here")}var ur=e(58825);function cr(t){return"Invalid specification ".concat(st(t),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var sr='Autosize "fit" only works for single views and layered views.';function lr(t){return"".concat("width"==t?"Width":"Height",' "container" only works for single views and layered views.')}function fr(t){var n="width"==t?"x":"y";return"".concat("width"==t?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(n,'".')}function hr(t){return t?'Dropping "fit-'.concat(t,'" because spec has discrete ').concat(Jn(t),"."):'Dropping "fit" because spec has discrete size.'}function dr(t){return"Unknown field for ".concat(t,". Cannot calculate view size.")}function pr(t){return'Cannot project a selection on encoding channel "'.concat(t,'", which has no field.')}function vr(t,n){return'Cannot project a selection on encoding channel "'.concat(t,'" as it uses an aggregate function ("').concat(n,'").')}function gr(t){return"Selection not supported for ".concat(t," yet.")}var mr="The same selection must be used to override scale domains in a layered view.";function yr(t){return'The "columns" property cannot be used when "'.concat(t,'" has nested row/column.')}var br="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function xr(t,n,e){return'An ancestor parsed field "'.concat(t,'" as ').concat(e," but a child wants to parse the field as ").concat(n,".")}function _r(t){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(t," are dropped.")}var wr="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kr(t){return'Invalid field type "'.concat(t,'".')}function Mr(t,n){var e=n.fill,r=n.stroke;return"Dropping color ".concat(t," as the plot also has ").concat(e&&r?"fill and stroke":e?"fill":"stroke",".")}function Or(t,n){return"Dropping ".concat(st(t),' from channel "').concat(n,'" since it does not contain any data field, datum, value, or signal.')}var Er="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Sr(t,n,e){return"".concat(t,' dropped as it is incompatible with "').concat(n,'"').concat(e?" when ".concat(e):"",".")}function Dr(t){return"".concat(t," encoding has no scale, so specified scale is ignored.")}function Cr(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned).")}function Ar(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).")}function Tr(t,n){return'Using discrete channel "'.concat(t,'" to encode "').concat(n,'" field can be misleading as it does not encode ').concat("ordinal"===n?"order":"magnitude",".")}function Fr(t){return"Using unaggregated domain with raw field has no effect (".concat(st(t),").")}function jr(t){return'Unaggregated domain not applicable for "'.concat(t,'" since it produces values outside the origin domain of the source data.')}function Zr(t){return"Unaggregated domain is currently unsupported for log scale (".concat(st(t),").")}function Nr(t,n,e){return"".concat(e,"-scale's \"").concat(n,'" is dropped as it does not work with ').concat(t," scale.")}function zr(t){return'The step for "'.concat(t,'" is dropped because the ').concat("width"===t?"x":"y"," is continuous.")}var Ur="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Pr="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Rr="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Lr="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Ir(t,n){return"Invalid ".concat(t,": ").concat(st(n),".")}function Br(t){return"1D error band does not support ".concat(t,".")}function qr(t){return"Channel ".concat(t,' is required for "binned" bin.')}var Hr=(0,H.kg)(H.uU),Wr=Hr;function Yr(){return Wr=Hr}function Xr(){var t;(t=Wr).warn.apply(t,arguments)}function Gr(t){if(t&&(0,H.Kn)(t)){var n,e=(0,Y.Z)(ri);try{for(e.s();!(n=e.n()).done;){if(n.value in t)return!0}}catch(r){e.e(r)}finally{e.f()}}return!1}new WeakMap;var Jr=["january","february","march","april","may","june","july","august","september","october","november","december"],$r=Jr.map((function(t){return t.substr(0,3)})),Vr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Kr=Vr.map((function(t){return t.substr(0,3)}));function Qr(t,n){var e=[];if(n&&void 0!==t.day&&Mt(t).length>1&&(Xr(function(t){return"Dropping day from datetime ".concat(st(t)," as day cannot be combined with other units.")}(t)),delete(t=at(t)).day),void 0!==t.year?e.push(t.year):e.push(2012),void 0!==t.month){var r=n?function(t){if(Yt(t)&&(t=+t),(0,H.hj)(t))return t-1;var n=t.toLowerCase(),e=Jr.indexOf(n);if(-1!==e)return e;var r=n.substr(0,3),i=$r.indexOf(r);if(-1!==i)return i;throw new Error(Ir("month",t))}(t.month):t.month;e.push(r)}else if(void 0!==t.quarter){var i=n?function(t){if(Yt(t)&&(t=+t),(0,H.hj)(t))return t>4&&Xr(Ir("quarter",t)),t-1;throw new Error(Ir("quarter",t))}(t.quarter):t.quarter;e.push((0,H.hj)(i)?3*i:"".concat(i,"*3"))}else e.push(0);if(void 0!==t.date)e.push(t.date);else if(void 0!==t.day){var a=n?function(t){if(Yt(t)&&(t=+t),(0,H.hj)(t))return t%7;var n=t.toLowerCase(),e=Vr.indexOf(n);if(-1!==e)return e;var r=n.substr(0,3),i=Kr.indexOf(r);if(-1!==i)return i;throw new Error(Ir("day",t))}(t.day):t.day;e.push((0,H.hj)(a)?a+1:"".concat(a,"+1"))}else e.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var c=t[u[o]];e.push("undefined"===typeof c?0:c)}return e}function ti(t){var n=Qr(t,!0).join(", ");return t.utc?"utc(".concat(n,")"):"datetime(".concat(n,")")}var ni=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},ei={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ri=Mt(ei);function ii(t){return t.startsWith("utc")}var ai={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function oi(t){return ri.filter((function(n){return ui(t,n)}))}function ui(t,n){var e=t.indexOf(n);return!(e<0)&&(!(e>0&&"seconds"===n&&"i"===t.charAt(e-1))&&(!(t.length>e+3&&"day"===n&&"o"===t.charAt(e+3))&&!(e>0&&"year"===n&&"f"===t.charAt(e-1))))}function ci(t,n){var e,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1}).end,i=Ft(n),a=ii(t)?"utc":"";var o,u,c={},s=(0,Y.Z)(ri);try{for(s.s();!(o=s.n()).done;){var l=o.value;ui(t,l)&&(c[l]="quarter"===(u=l)?"(".concat(a,"quarter(").concat(i,")-1)"):"".concat(a).concat(u,"(").concat(i,")"),e=l)}}catch(f){s.e(f)}finally{s.f()}return r&&(c[e]+="+1"),function(t){var n=Qr(t,!1).join(", ");return t.utc?"utc(".concat(n,")"):"datetime(".concat(n,")")}(c)}function si(t){if(t){var n=oi(t);return"timeUnitSpecifier(".concat(st(n),", ").concat(st(ai),")")}}function li(t){var n;if(t)return(0,H.HD)(t)?n={unit:t}:(0,H.Kn)(t)&&(n=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),ii(n.unit)&&(n.utc=!0,n.unit=function(t){return t.substr(3)}(n.unit)),n}function fi(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.equal}function hi(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.lt}function di(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.lte}function pi(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.gt}function vi(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.gte}function gi(t){if(null===t||void 0===t?void 0:t.field){if((0,H.kJ)(t.range)&&2===t.range.length)return!0;if(Re(t.range))return!0}return!1}function mi(t){return!!(null===t||void 0===t?void 0:t.field)&&((0,H.kJ)(t.oneOf)||(0,H.kJ)(t.in))}function yi(t){return mi(t)||fi(t)||gi(t)||hi(t)||pi(t)||di(t)||vi(t)}function bi(t,n){return Po(t,{timeUnit:n,wrapTime:!0})}function xi(t){var n,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.field,i=null===(n=li(t.timeUnit))||void 0===n?void 0:n.unit,a=i?"time(".concat(ci(i,r),")"):_o(t,{expr:"datum"});if(fi(t))return"".concat(a,"===").concat(bi(t.equal,i));if(hi(t)){var o=t.lt;return"".concat(a,"<").concat(bi(o,i))}if(pi(t)){var u=t.gt;return"".concat(a,">").concat(bi(u,i))}if(di(t)){var c=t.lte;return"".concat(a,"<=").concat(bi(c,i))}if(vi(t)){var s=t.gte;return"".concat(a,">=").concat(bi(s,i))}if(mi(t))return"indexof([".concat(function(t,n){return t.map((function(t){return bi(t,n)}))}(t.oneOf,i).join(","),"], ").concat(a,") !== -1");if(function(t){return!!(null===t||void 0===t?void 0:t.field)&&void 0!==t.valid}(t))return _i(a,t.valid);if(gi(t)){var l=t.range,f=Re(l)?{signal:"".concat(l.signal,"[0]")}:l[0],h=Re(l)?{signal:"".concat(l.signal,"[1]")}:l[1];if(null!==f&&null!==h&&e)return"inrange("+a+", ["+bi(f,i)+", "+bi(h,i)+"])";var d=[];return null!==f&&d.push("".concat(a," >= ").concat(bi(f,i))),null!==h&&d.push("".concat(a," <= ").concat(bi(h,i))),d.length>0?d.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(st(t)))}function _i(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"isValid(".concat(t,") && isFinite(+").concat(t,")"):"!isValid(".concat(t,") || !isFinite(+").concat(t,")")}function wi(t){var n;return yi(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(n=li(t.timeUnit))||void 0===n?void 0:n.unit}):t}var ki={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Mi(t){return"ordinal"===t||"nominal"===t}var Oi=ki.quantitative,Ei=ki.ordinal,Si=ki.temporal,Di=ki.nominal,Ci=ki.geojson;Mt(ki);var Ai=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Ti={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Fi={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};Mt(Fi);function ji(t,n){var e=Fi[t],r=Fi[n];return e===r||"ordinal-position"===e&&"time"===r||"ordinal-position"===r&&"time"===e}var Zi={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Ni(t){return Zi[t]}var zi=new Set(["linear","log","pow","sqrt","symlog"]),Ui=new Set([].concat((0,u.Z)(zi),["time","utc"]));function Pi(t){return zi.has(t)}var Ri=new Set(["quantile","quantize","threshold"]),Li=new Set([].concat((0,u.Z)(Ui),(0,u.Z)(Ri),["sequential","identity"])),Ii=new Set(["ordinal","bin-ordinal","point","band"]);new Set(["time","utc"]);function Bi(t){return Ii.has(t)}function qi(t){return Li.has(t)}function Hi(t){return Ui.has(t)}function Wi(t){return Ri.has(t)}function Yi(t){return null===t||void 0===t?void 0:t.param}var Xi={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Gi=(Mt(Xi),Ai(Xi,["type","domain","range","rangeMax","rangeMin","scheme"])),Ji=Mt(Gi);function $i(t,n){switch(n){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Hi(t)||"band"===t||"point"===t;case"padding":case"rangeMin":case"rangeMax":return Hi(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return"band"===t;case"domainMax":case"domainMid":case"domainMin":case"clamp":return Hi(t);case"nice":return Hi(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return qi(t)&&!ht(["log","time","utc","threshold","quantile"],t)}}function Vi(t,n){switch(n){case"interpolate":case"scheme":case"domainMid":return zn(t)?void 0:'Cannot use the scale property "'.concat(n,'" with non-color channel.');case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}var Ki={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Qi=Ki.arc,ta=Ki.area,na=Ki.bar,ea=Ki.image,ra=Ki.line,ia=Ki.point,aa=Ki.rect,oa=Ki.rule,ua=Ki.text,ca=Ki.tick,sa=Ki.trail,la=Ki.circle,fa=Ki.square,ha=Ki.geoshape;function da(t){return["line","area","trail"].includes(t)}function pa(t){return["rect","bar","image","arc"].includes(t)}var va=new Set(Mt(Ki));function ga(t){return t.type}var ma=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),ya=Mt({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),ba=Mt({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function xa(t){return t&&void 0!=t.band}var _a={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},wa={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},ka={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function Ma(t){var n=t.channel,e=t.channelDef,r=t.markDef,i=t.scale,a=t.config,o=Ca(t);return uo(e)&&!Oe(e.aggregate)&&i&&Hi(i.get("type"))?function(t){var n=t.fieldDef,e=t.channel,r=t.markDef,i=t.ref,a=t.config;if(da(r.type))return i;var o=Qe("invalid",r,a);if(null===o)return[Oa(n,e),i];return i}({fieldDef:e,channel:n,markDef:r,ref:o,config:a}):o}function Oa(t,n){var e=Ea(t,!0),r="y"===Yn(n)?{field:{group:"height"}}:{value:0};return Object.assign({test:e},r)}function Ea(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _i((0,H.HD)(t)?t:_o(t,{expr:"datum"}),!n)}function Sa(t,n,e,r){var i={};if(n&&(i.scale=n),so(t)){var a=t.datum;Gr(a)?i.signal=ti(a):Re(a)?i.signal=a.signal:Ze(a)?i.signal=a.expr:i.value=a}else i.field=_o(t,e);if(r){var o=r.offset,u=r.band;o&&(i.offset=o),u&&(i.band=u)}return i}function Da(t){var n=t.scaleName,e=t.fieldOrDatumDef,r=t.fieldOrDatumDef2,i=t.offset,a=t.startSuffix,o=t.bandPosition,u=void 0===o?.5:o,c=0<u&&u<1?"datum":void 0,s=_o(e,{expr:c,suffix:a}),l=void 0!==r?_o(r,{expr:c}):_o(e,{suffix:"end",expr:c}),f={};if(0===u||1===u){f.scale=n;var h=0===u?s:l;f.field=h}else{var d=Re(u)?"".concat(u.signal," * ").concat(s," + (1-").concat(u.signal,") * ").concat(l):"".concat(u," * ").concat(s," + ").concat(1-u," * ").concat(l);f.signal='scale("'.concat(n,'", ').concat(d,")")}return i&&(f.offset=i),f}function Ca(t){var n,e=t.channel,r=t.channelDef,i=t.channel2Def,a=t.markDef,o=t.config,u=t.scaleName,c=t.scale,s=t.stack,l=t.offset,f=t.defaultRef,h=t.bandPosition;if(r){if(ho(r)){var d=null===c||void 0===c?void 0:c.get("type");if(po(r)){null!==h&&void 0!==h||(h=no({fieldDef:r,fieldDef2:i,markDef:a,config:o}));var p=r.bin,v=r.timeUnit,g=r.type;if(Ce(p)||h&&v&&g===Si)return(null===s||void 0===s?void 0:s.impute)?Sa(r,u,{binSuffix:"mid"},{offset:l}):h&&!Bi(d)?Da({scaleName:u,fieldOrDatumDef:r,bandPosition:h,offset:l}):Sa(r,u,Lo(r,e)?{binSuffix:"range"}:{},{offset:l});if(Ae(p)){if(uo(i))return Da({scaleName:u,fieldOrDatumDef:r,fieldOrDatumDef2:i,bandPosition:h,offset:l});Xr(qr(e===Vt?Qt:tn))}}return Sa(r,u,Bi(d)?{binSuffix:"range"}:{},{offset:l,band:"band"===d?null!==(n=null!==h&&void 0!==h?h:r.bandPosition)&&void 0!==n?n:.5:void 0})}if(vo(r)){var m=r.value,y=l?{offset:l}:{};return Object.assign(Object.assign({},Aa(e,m)),y)}}return(0,H.mf)(f)&&(f=f()),f?Object.assign(Object.assign({},f),l?{offset:l}:{}):f}function Aa(t,n){return ht(["x","x2"],t)&&"width"===n?{field:{group:"width"}}:ht(["y","y2"],t)&&"height"===n?{field:{group:"height"}}:Je(n)}function Ta(t){return t&&"number"!==t&&"time"!==t}function Fa(t,n,e){return"".concat(t,"(").concat(n).concat(e?", ".concat(st(e)):"",")")}var ja=" \u2013 ";function Za(t){var n,e,r=t.fieldOrDatumDef,i=t.format,a=t.formatType,o=t.expr,u=t.normalizeStack,c=t.config;if(Ta(a))return za({fieldOrDatumDef:r,format:i,formatType:a,expr:o,config:c});var s=Na(r,o,u),l=co(r);if(void 0===i&&void 0===a&&c.customFormatTypes){if("quantitative"===l){if(u&&c.normalizedNumberFormatType)return za({fieldOrDatumDef:r,format:c.normalizedNumberFormat,formatType:c.normalizedNumberFormatType,expr:o,config:c});if(c.numberFormatType)return za({fieldOrDatumDef:r,format:c.numberFormat,formatType:c.numberFormatType,expr:o,config:c})}if("temporal"===l&&c.timeFormatType&&uo(r)&&void 0===r.timeUnit)return za({fieldOrDatumDef:r,format:c.timeFormat,formatType:c.timeFormatType,expr:o,config:c})}if(Uo(r)){var f=function(t){var n=t.field,e=t.timeUnit,r=t.format,i=t.formatType,a=t.rawTimeFormat,o=t.isUTCScale;return!e||r?!e&&i?"".concat(i,"(").concat(n,", '").concat(r,"')"):(r=(0,H.HD)(r)?r:a,"".concat(o?"utc":"time","Format(").concat(n,", '").concat(r,"')")):function(t,n,e){if(t){var r=si(t),i=e||ii(t);return"".concat(i?"utc":"time","Format(").concat(n,", ").concat(r,")")}}(e,n,o)}({field:s,timeUnit:uo(r)?null===(n=li(r.timeUnit))||void 0===n?void 0:n.unit:void 0,format:i,formatType:c.timeFormatType,rawTimeFormat:c.timeFormat,isUTCScale:go(r)&&(null===(e=r.scale)||void 0===e?void 0:e.type)===Ti.UTC});return f?{signal:f}:void 0}return i=Ra({type:l,specifiedFormat:i,config:c,normalizeStack:u}),uo(r)&&Ce(r.bin)?{signal:Ba(s,_o(r,{expr:o,binSuffix:"end"}),i,a,c)}:i||"quantitative"===co(r)?{signal:"".concat(La(s,i))}:{signal:"isValid(".concat(s,") ? ").concat(s,' : ""+').concat(s)}}function Na(t,n,e){return uo(t)?e?"".concat(_o(t,{expr:n,suffix:"end"}),"-").concat(_o(t,{expr:n,suffix:"start"})):_o(t,{expr:n}):function(t){var n=t.datum;return Gr(n)?ti(n):"".concat(st(n))}(t)}function za(t){var n=t.fieldOrDatumDef,e=t.format,r=t.formatType,i=t.expr,a=t.normalizeStack,o=t.config,u=t.field;return null!==u&&void 0!==u||(u=Na(n,i,a)),"datum.value"!==u&&uo(n)&&Ce(n.bin)?{signal:Ba(u,_o(n,{expr:i,binSuffix:"end"}),e,r,o)}:{signal:Fa(r,u,e)}}function Ua(t,n,e,r,i,a){var o;if(!Ta(r)){if(void 0===e&&void 0===r&&i.customFormatTypes&&"quantitative"===co(t)){if(i.normalizedNumberFormatType&&mo(t)&&"normalize"===t.stack)return;if(i.numberFormatType)return}if(mo(t)&&"normalize"===t.stack&&i.normalizedNumberFormat)return Ra({type:"quantitative",config:i,normalizeStack:!0});if(Uo(t)){var u=uo(t)?null===(o=li(t.timeUnit))||void 0===o?void 0:o.unit:void 0;if(void 0===u&&i.customFormatTypes&&i.timeFormatType)return;return function(t){var n=t.specifiedFormat,e=t.timeUnit,r=t.config,i=t.omitTimeFormatConfig;if(n)return n;if(e)return{signal:si(e)};return i?void 0:r.timeFormat}({specifiedFormat:e,timeUnit:u,config:i,omitTimeFormatConfig:a})}return Ra({type:n,specifiedFormat:e,config:i})}}function Pa(t,n,e){var r;return t&&(Re(t)||"number"===t||"time"===t)?t:Uo(n)&&"time"!==e&&"utc"!==e?uo(n)&&(null===(r=li(null===n||void 0===n?void 0:n.timeUnit))||void 0===r?void 0:r.utc)?"utc":"time":void 0}function Ra(t){var n=t.type,e=t.specifiedFormat,r=t.config,i=t.normalizeStack;return(0,H.HD)(e)?e:n===Oi?i?r.normalizedNumberFormat:r.numberFormat:void 0}function La(t,n){return"format(".concat(t,', "').concat(n||"",'")')}function Ia(t,n,e,r){var i;return Ta(e)?Fa(e,t,n):La(t,null!==(i=(0,H.HD)(n)?n:void 0)&&void 0!==i?i:r.numberFormat)}function Ba(t,n,e,r,i){if(void 0===e&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return Ba(t,n,i.numberFormat,i.numberFormatType,i);var a=Ia(t,e,r,i),o=Ia(n,e,r,i);return"".concat(_i(t,!1),' ? "null" : ').concat(a,' + "').concat(ja,'" + ').concat(o)}var qa="min",Ha={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Wa(t){return t in Ha}function Ya(t){return!!(null===t||void 0===t?void 0:t.encoding)}function Xa(t){return t&&("count"===t.op||!!t.field)}function Ga(t){return t&&(0,H.kJ)(t)}function Ja(t){return"row"in t||"column"in t}function $a(t){return!!t&&"header"in t}function Va(t){return"facet"in t}var Ka=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Qa(t){var n=t.field,e=t.timeUnit,r=t.bin,i=t.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},e?{timeUnit:e}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:n})}function to(t){return"sort"in t}function no(t){var n=t.fieldDef,e=t.fieldDef2,r=t.markDef,i=t.config;if(ho(n)&&void 0!==n.bandPosition)return n.bandPosition;if(uo(n)){var a=n.timeUnit,o=n.bin;if(a&&!e)return pa(r.type)?0:tr("timeUnitBandPosition",r,i);if(Ce(o))return.5}}function eo(t){var n,e,r,i=t.channel,a=t.fieldDef,o=t.fieldDef2,u=t.markDef,c=t.config,s=t.scaleType,l=t.useVlSizeChannel,f=Jn(i),h=Qe(l?"size":f,u,c,{vgChannel:f});if(void 0!==h)return h;if(uo(a)){var d=a.timeUnit,p=a.bin;if(d&&!o)return{band:tr("timeUnitBandSize",u,c)};if(Ce(p)&&!Bi(s))return{band:1}}return pa(u.type)?s?Bi(s)?(null===(n=c[u.type])||void 0===n?void 0:n.discreteBandSize)||{band:1}:null===(e=c[u.type])||void 0===e?void 0:e.continuousBandSize:null===(r=c[u.type])||void 0===r?void 0:r.discreteBandSize:void 0}function ro(t,n,e,r){return!!(Ce(t.bin)||t.timeUnit&&po(t)&&"temporal"===t.type)&&void 0!==no({fieldDef:t,fieldDef2:n,markDef:e,config:r})}function io(t){return t&&"condition"in t}function ao(t){var n=null===t||void 0===t?void 0:t.condition;return!!n&&!(0,H.kJ)(n)&&uo(n)}function oo(t){var n=null===t||void 0===t?void 0:t.condition;return!!n&&!(0,H.kJ)(n)&&ho(n)}function uo(t){return t&&(!!t.field||"count"===t.aggregate)}function co(t){return null===t||void 0===t?void 0:t.type}function so(t){return t&&"datum"in t}function lo(t){return po(t)&&!wo(t)||fo(t)}function fo(t){return so(t)&&(0,H.hj)(t.datum)}function ho(t){return uo(t)||so(t)}function po(t){return t&&("field"in t||"count"===t.aggregate)&&"type"in t}function vo(t){return t&&"value"in t&&"value"in t}function go(t){return t&&("scale"in t||"sort"in t)}function mo(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function yo(t){return t&&"legend"in t}function bo(t){return t&&("format"in t||"formatType"in t)}function xo(t){return ct(t,["legend","axis","header","scale"])}function _o(t){var n,e,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.field,o=i.prefix,u=i.suffix,c="";if(function(t){return"count"===t.aggregate}(t))a=qt("count");else{var s;if(!i.nofn)if(function(t){return"op"in t}(t))s=t.op;else{var l=t.bin,f=t.aggregate,h=t.timeUnit;Ce(l)?(s=De(l),u=(null!==(n=i.binSuffix)&&void 0!==n?n:"")+(null!==(e=i.suffix)&&void 0!==e?e:"")):f?we(f)?(c='["'.concat(a,'"]'),a="argmax_".concat(f.argmax)):_e(f)?(c='["'.concat(a,'"]'),a="argmin_".concat(f.argmin)):s=String(f):h&&(s=function(t){var n=li(t),e=n.utc,r=ni(n,["utc"]);return r.unit?(e?"utc":"")+Mt(r).map((function(t){return Dt("".concat("unit"===t?"":"_".concat(t,"_")).concat(r[t]))})).join(""):(e?"utc":"")+"timeunit"+Mt(r).map((function(t){return Dt("_".concat(t,"_").concat(r[t]))})).join("")}(h),u=(!["range","mid"].includes(i.binSuffix)&&i.binSuffix||"")+(null!==(r=i.suffix)&&void 0!==r?r:""))}s&&(a=a?"".concat(s,"_").concat(a):s)}return u&&(a="".concat(a,"_").concat(u)),o&&(a="".concat(o,"_").concat(a)),i.forAs?Ut(a):i.expr?jt(a,i.expr)+c:Nt(a)+c}function wo(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return uo(t)&&!!t.bin;case"temporal":return!1}throw new Error(kr(t.type))}var ko=function(t,n){switch(n.fieldTitle){case"plain":return t.field;case"functional":return function(t){var n=t.aggregate,e=t.bin,r=t.timeUnit,i=t.field;if(we(n))return"".concat(i," for argmax(").concat(n.argmax,")");if(_e(n))return"".concat(i," for argmin(").concat(n.argmin,")");var a=li(r),o=n||(null===a||void 0===a?void 0:a.unit)||(null===a||void 0===a?void 0:a.maxbins)&&"timeunit"||Ce(e)&&"bin";return o?"".concat(o.toUpperCase(),"(").concat(i,")"):i}(t);default:return function(t,n){var e,r=t.field,i=t.bin,a=t.timeUnit,o=t.aggregate;if("count"===o)return n.countTitle;if(Ce(i))return"".concat(r," (binned)");if(a){var u=null===(e=li(a))||void 0===e?void 0:e.unit;if(u)return"".concat(r," (").concat(oi(u).join("-"),")")}else if(o)return we(o)?"".concat(r," for max ").concat(o.argmax):_e(o)?"".concat(r," for min ").concat(o.argmin):"".concat(Tt(o)," of ").concat(r);return r}(t,n)}},Mo=ko;function Oo(t){Mo=t}function Eo(t,n,e){var r,i,a=e.allowDisabling,o=e.includeDefault,u=void 0===o||o,c=null===(r=So(t))||void 0===r?void 0:r.title;if(!uo(t))return null!==c&&void 0!==c?c:t.title;var s=t,l=u?Do(s,n):void 0;return a?Rt(c,s.title,l):null!==(i=null!==c&&void 0!==c?c:s.title)&&void 0!==i?i:l}function So(t){return mo(t)&&t.axis?t.axis:yo(t)&&t.legend?t.legend:$a(t)&&t.header?t.header:void 0}function Do(t,n){return Mo(t,n)}function Co(t){var n;if(bo(t))return{format:t.format,formatType:t.formatType};var e=null!==(n=So(t))&&void 0!==n?n:{};return{format:e.format,formatType:e.formatType}}function Ao(t){return uo(t)?t:ao(t)?t.condition:void 0}function To(t){return ho(t)?t:oo(t)?t.condition:void 0}function Fo(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,H.HD)(t)||(0,H.hj)(t)||(0,H.jn)(t)?(Xr(function(t,n,e){return"Channel ".concat(t," is a ").concat(n,". Converted to {value: ").concat(st(e),"}.")}(n,(0,H.HD)(t)?"string":(0,H.hj)(t)?"number":"boolean",t)),{value:t}):ho(t)?jo(t,n,e,r):oo(t)?Object.assign(Object.assign({},t),{condition:jo(t.condition,n,e,r)}):t}function jo(t,n,e,r){if(bo(t)){t.format;var i=t.formatType,a=Ka(t,["format","formatType"]);if(Ta(i)&&!e.customFormatTypes)return Xr(_r(n)),jo(a,n,e,r)}else{var o=mo(t)?"axis":yo(t)?"legend":$a(t)?"header":null;if(o&&t[o]){var u=t[o],c=(u.format,u.formatType),s=Ka(u,["format","formatType"]);if(Ta(c)&&!e.customFormatTypes)return Xr(_r(n)),jo(Object.assign(Object.assign({},t),(0,ye.Z)({},o,s)),n,e,r)}}return uo(t)?Zo(t,n,r):function(t){var n=t.type;if(n)return t;var e=t.datum;return n=(0,H.hj)(e)?"quantitative":(0,H.HD)(e)?"nominal":Gr(e)?"temporal":void 0,Object.assign(Object.assign({},t),{type:n})}(t)}function Zo(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).compositeMark,r=void 0!==e&&e,i=t.aggregate,a=t.timeUnit,o=t.bin,u=t.field,c=Object.assign({},t);if(r||!i||ke(i)||we(i)||_e(i)||(Xr(function(t){return'Invalid aggregation operator "'.concat(t,'".')}(i)),delete c.aggregate),a&&(c.timeUnit=li(a)),u&&(c.field="".concat(u)),Ce(o)&&(c.bin=No(o,n)),Ae(o)&&!re(n)&&Xr(function(t){return"Channel ".concat(t,' should not be used with "binned" bin.')}(n)),po(c)){var s=c.type,l=function(t){if(t)switch(t=t.toLowerCase()){case"q":case Oi:return"quantitative";case"t":case Si:return"temporal";case"o":case Ei:return"ordinal";case"n":case Di:return"nominal";case Ci:return"geojson"}}(s);s!==l&&(c.type=l),"quantitative"!==s&&Oe(i)&&(Xr(function(t,n){return'Invalid field type "'.concat(t,'" for aggregate: "').concat(n,'", using "quantitative" instead.')}(s,i)),c.type="quantitative")}else if(!Wn(n)){var f=function(t,n){var e;switch(n){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(to(t)&&(0,H.kJ)(t.sort))return"ordinal";var r=t.aggregate,i=t.bin;if(t.timeUnit)return"temporal";if(i||r&&!we(r)&&!_e(r))return"quantitative";if(go(t)&&(null===(e=t.scale)||void 0===e?void 0:e.type))switch(Fi[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(c,n);c.type=f}if(po(c)){var h=function(t,n){var e=t.type;if("geojson"===e&&"shape"!==n)return{compatible:!1,warning:"Channel ".concat(n," should not be used with a geojson data.")};switch(n){case Gt:case Jt:case $t:return wo(t)?zo:{compatible:!1,warning:Cr(n)};case Vt:case Kt:case nn:case en:case hn:case dn:case pn:case kn:case On:case En:case Sn:case Dn:case Cn:case mn:case on:case rn:case An:return zo;case sn:case fn:case cn:case ln:return e!==Oi?{compatible:!1,warning:"Channel ".concat(n," should be used with a quantitative field only, not ").concat(t.type," field.")}:zo;case yn:case bn:case xn:case _n:case gn:case un:case an:case Qt:case tn:return"nominal"!==e||t.sort?zo:{compatible:!1,warning:"Channel ".concat(n," should not be used with an unsorted discrete field.")};case vn:case wn:return wo(t)||function(t){var n;return go(t)&&Wi(null===(n=t.scale)||void 0===n?void 0:n.type)}(t)?zo:{compatible:!1,warning:Ar(n)};case Mn:return"nominal"!==t.type||"sort"in t?zo:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(c,n)||{},d=h.compatible,p=h.warning;!1===d&&Xr(p)}if(to(c)&&(0,H.HD)(c.sort)){var v=c.sort;if(Wa(v))return Object.assign(Object.assign({},c),{sort:{encoding:v}});var g=v.substr(1);if("-"===v.charAt(0)&&Wa(g))return Object.assign(Object.assign({},c),{sort:{encoding:g,order:"descending"}})}if($a(c)){var m=c.header;if(m){var y=m.orient,b=Ka(m,["orient"]);if(y)return Object.assign(Object.assign({},c),{header:Object.assign(Object.assign({},b),{labelOrient:m.labelOrient||y,titleOrient:m.titleOrient||y})})}}return c}function No(t,n){return(0,H.jn)(t)?{maxbins:je(n)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:je(n)})}var zo={compatible:!0};function Uo(t){var n,e=Co(t).formatType;return"time"===e||!e&&((n=t)&&("temporal"===n.type||uo(n)&&!!n.timeUnit))}function Po(t,n){var e,r,i=n.timeUnit,a=n.type,o=n.wrapTime,u=n.undefinedIfExprNotRequired,c=i&&(null===(e=li(i))||void 0===e?void 0:e.unit),s=c||"temporal"===a;return Ze(t)?r=t.expr:Re(t)?r=t.signal:Gr(t)?(s=!0,r=ti(t)):((0,H.HD)(t)||(0,H.hj)(t))&&s&&(r="datetime(".concat(st(t),")"),function(t){return!!ei[t]}(c)&&((0,H.hj)(t)&&t<1e4||(0,H.HD)(t)&&isNaN(Date.parse(t)))&&(r=ti((0,ye.Z)({},c,t)))),r?o&&s?"time(".concat(r,")"):r:u?void 0:st(t)}function Ro(t,n){var e=t.type;return n.map((function(n){var r=Po(n,{timeUnit:uo(t)?t.timeUnit:void 0,type:e,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:n}))}function Lo(t,n){return Ce(t.bin)?de(n)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}var Io={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Bo(t){return null===t||void 0===t?void 0:t.condition}var qo=["domain","grid","labels","ticks","title"],Ho={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Wo={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Yo=Object.assign(Object.assign({},Wo),{style:1,labelExpr:1,encoding:1});function Xo(t){return!!Yo[t]}Mt(Yo);var Go=Mt({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Jo(t){return"mark"in t}var $o=function(){function t(n,e){(0,c.Z)(this,t),this.name=n,this.run=e}return(0,s.Z)(t,[{key:"hasMatchingType",value:function(t){return!!Jo(t)&&(ga(n=t.mark)?n.type:n)===this.name;var n}}]),t}(),Vo=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Ko(t,n){var e=t&&t[n];return!!e&&((0,H.kJ)(e)?dt(e,(function(t){return!!t.field})):uo(e)||ao(e))}function Qo(t,n){var e=t&&t[n];return!!e&&((0,H.kJ)(e)?dt(e,(function(t){return!!t.field})):uo(e)||so(e)||oo(e))}function tu(t,n){if(re(n)){var e=t[n];if((uo(e)||so(e))&&Mi(e.type))return Qo(t,$n(n))}return!1}function nu(t){return dt(Ln,(function(n){if(Ko(t,n)){var e=t[n];if((0,H.kJ)(e))return dt(e,(function(t){return!!t.aggregate}));var r=Ao(e);return r&&!!r.aggregate}return!1}))}function eu(t,n){var e=[],r=[],i=[],a=[],o={};return au(t,(function(u,c){if(uo(u)){var s=u.field,l=u.aggregate,f=u.bin,h=u.timeUnit,d=Vo(u,["field","aggregate","bin","timeUnit"]);if(l||h||f){var p,v=So(u),g=null===v||void 0===v?void 0:v.title,m=_o(u,{forAs:!0}),y=Object.assign(Object.assign(Object.assign({},g?[]:{title:Eo(u,n,{allowDisabling:!0})}),d),{field:m});if(l){if(we(l)?(p="argmax",m=_o({op:"argmax",field:l.argmax},{forAs:!0}),y.field="".concat(m,".").concat(s)):_e(l)?(p="argmin",m=_o({op:"argmin",field:l.argmin},{forAs:!0}),y.field="".concat(m,".").concat(s)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(p=l),p){var b={op:p,as:m};s&&(b.field=s),a.push(b)}}else if(e.push(m),po(u)&&Ce(f)){if(r.push({bin:f,field:s,as:m}),e.push(_o(u,{binSuffix:"end"})),Lo(u,c)&&e.push(_o(u,{binSuffix:"range"})),re(c)){var x={field:"".concat(m,"_end")};o["".concat(c,"2")]=x}y.bin="binned",Wn(c)||(y.type=Oi)}else if(h){i.push({timeUnit:h,field:s,as:m});var _=po(u)&&u.type!==Si&&"time";_&&(c===kn||c===Sn?y.formatType=_:!function(t){return!!Qn[t]}(c)?re(c)&&(y.axis=Object.assign({formatType:_},y.axis)):y.legend=Object.assign({formatType:_},y.legend))}o[c]=y}else e.push(s),o[c]=t[c]}else o[c]=t[c]})),{bins:r,timeUnits:i,aggregate:a,groupby:e,encoding:o}}function ru(t,n,e,r){var i,a,o={},u=(0,Y.Z)(Mt(t));try{for(u.s();!(i=u.n()).done;){var c=i.value;qn(c)||Xr("".concat(a=c,"-encoding is dropped as ").concat(a," is not a valid encoding channel."))}}catch(h){u.e(h)}finally{u.f()}var s,l=(0,Y.Z)(Kn);try{var f=function(){var i=s.value;if(!t[i])return"continue";var a=t[i];if(ce(i)){var u=Vn(i),c=o[u];if(uo(c)){if(function(t){return"quantitative"===t||"temporal"===t}(c.type)&&uo(a))return Xr(function(t){return"".concat(t,"Offset dropped because ").concat(t," is continuous")}(u)),"continue"}else i=u,Xr(function(t){return"There is no ".concat(t," encoding. Replacing ").concat(t,"Offset encoding as ").concat(t,".")}(u))}if("angle"!==i||"arc"!==n||t.theta||(Xr(wr),i=on),!function(t,n,e){var r=pe(n,e);if(!r)return!1;if("binned"===r){var i=t[n===Qt?Vt:Kt];return!!(uo(i)&&uo(t[n])&&Ae(i.bin))}return!0}(t,i,n))return Xr(Sr(i,n)),"continue";if(i===gn&&"line"===n){var l=Ao(t[i]);if(null===l||void 0===l?void 0:l.aggregate)return Xr(Er),"continue"}if(i===hn&&(e?"fill"in t:"stroke"in t))return Xr(Mr("encoding",{fill:"fill"in t,stroke:"stroke"in t})),"continue";if(i===On||i===Mn&&!(0,H.kJ)(a)&&!vo(a)||i===Sn&&(0,H.kJ)(a))a&&(o[i]=(0,H.IX)(a).reduce((function(t,n){return uo(n)?t.push(Zo(n,i)):Xr(Or(n,i)),t}),[]));else{if(i===Sn&&null===a)o[i]=null;else if(!uo(a)&&!so(a)&&!vo(a)&&!io(a)&&!Re(a))return Xr(Or(a,i)),"continue";o[i]=Fo(a,i,r)}};for(l.s();!(s=l.n()).done;)f()}catch(h){l.e(h)}finally{l.f()}return o}function iu(t,n){var e,r={},i=(0,Y.Z)(Mt(t));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=Fo(t[a],a,n,{compositeMark:!0});r[a]=o}}catch(u){i.e(u)}finally{i.f()}return r}function au(t,n,e){if(t){var r,i=(0,Y.Z)(Mt(t));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t[a];if((0,H.kJ)(o)){var u,c=(0,Y.Z)(o);try{for(c.s();!(u=c.n()).done;){var s=u.value;n.call(e,s,a)}}catch(l){c.e(l)}finally{c.f()}}else n.call(e,o,a)}}catch(l){i.e(l)}finally{i.f()}}}function ou(t,n){return Mt(n).reduce((function(e,r){switch(r){case Vt:case Kt:case Dn:case An:case Cn:case Qt:case tn:case nn:case en:case on:case un:case rn:case an:case cn:case sn:case ln:case fn:case kn:case vn:case mn:case Sn:return e;case Mn:if("line"===t||"trail"===t)return e;case On:case En:var i=n[r];if((0,H.kJ)(i)||uo(i)){var a,o=(0,Y.Z)((0,H.IX)(i));try{for(o.s();!(a=o.n()).done;){var u=a.value;u.aggregate||e.push(_o(u,{}))}}catch(s){o.e(s)}finally{o.f()}}return e;case gn:if("trail"===t)return e;case hn:case dn:case pn:case yn:case bn:case xn:case wn:case _n:var c=Ao(n[r]);return c&&!c.aggregate&&e.push(_o(c,{})),e}}),[])}var uu=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function cu(t,n,e){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in e)return{tooltip:e.tooltip};var i=t.map((function(t){var e=t.fieldPrefix,i=t.titlePrefix,a=r?" of ".concat(su(n)):"";return{field:e+n.field,type:n.type,title:Re(i)?{signal:"".concat(i,'"').concat(escape(a),'"')}:i+a}})),a=function(t){var n,e=[],r=(0,Y.Z)(Mt(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Ko(t,i)){var a,o=t[i],u=(0,H.IX)(o),c=(0,Y.Z)(u);try{for(c.s();!(a=c.n()).done;){var s=a.value;uo(s)?e.push(s):ao(s)&&e.push(s.condition)}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){r.e(l)}finally{r.f()}return e}(e).map(xo);return{tooltip:[].concat((0,u.Z)(i),(0,u.Z)(mt(a,lt)))}}function su(t){return Rt(t.title,t.field)}function lu(t,n,e,r,i){var a=e.scale,o=e.axis;return function(u){var c=u.partName,s=u.mark,l=u.positionPrefix,f=u.endPositionPrefix,h=void 0===f?void 0:f,d=u.extraEncoding,p=void 0===d?{}:d,v=su(e);return fu(t,c,i,{mark:s,encoding:Object.assign(Object.assign(Object.assign((0,ye.Z)({},n,Object.assign(Object.assign(Object.assign({field:"".concat(l,"_").concat(e.field),type:e.type},void 0!==v?{title:v}:{}),void 0!==a?{scale:a}:{}),void 0!==o?{axis:o}:{})),(0,H.HD)(h)?(0,ye.Z)({},"".concat(n,"2"),{field:"".concat(h,"_").concat(e.field)}):{}),r),p)})}}function fu(t,n,e,r){var i=t.clip,a=t.color,o=t.opacity,u=t.type;return t[n]||void 0===t[n]&&e[n]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e[n]),i?{clip:i}:{}),a?{color:a}:{}),o?{opacity:o}:{}),ga(r.mark)?r.mark:{type:r.mark}),{style:"".concat(u,"-").concat(String(n))}),(0,H.jn)(t[n])?{}:t[n])})]:[]}function hu(t,n,e){var r=t.encoding,i="vertical"===n?"y":"x",a=r[i],o=r["".concat(i,"2")],u=r["".concat(i,"Error")],c=r["".concat(i,"Error2")];return{continuousAxisChannelDef:du(a,e),continuousAxisChannelDef2:du(o,e),continuousAxisChannelDefError:du(u,e),continuousAxisChannelDefError2:du(c,e),continuousAxis:i}}function du(t,n){if(null===t||void 0===t?void 0:t.aggregate){var e=t.aggregate,r=uu(t,["aggregate"]);return e!==n&&Xr(function(t,n){return"Continuous axis should not have customized aggregation function ".concat(t,"; ").concat(n," already agregates the axis.")}(e,n)),r}return t}function pu(t,n){var e=t.mark,r=t.encoding,i=r.x,a=r.y;if(ga(e)&&e.orient)return e.orient;if(lo(i)){if(lo(a)){var o=uo(i)&&i.aggregate,u=uo(a)&&a.aggregate;if(o||u!==n){if(u||o!==n){if(o===n&&u===n)throw new Error("Both x and y cannot have aggregate");return Uo(a)&&!Uo(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(lo(a))return"vertical";throw new Error("Need a valid continuous axis for ".concat(n,"s"))}var vu=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},gu="boxplot",mu=new $o(gu,bu);function yu(t){return(0,H.hj)(t)?"tukey":t}function bu(t,n){var e,r,i=n.config,a=t=Object.assign(Object.assign({},t),{encoding:iu(t.encoding,i)}),o=a.mark,c=(a.encoding,a.params),s=(a.projection,vu(t,["mark","encoding","params","projection"])),l=ga(o)?o:{type:o};c&&Xr(gr("boxplot"));var f=null!==(e=l.extent)&&void 0!==e?e:i.boxplot.extent,h=Qe("size",l,i),d=l.invalid,p=yu(f),v=function(t,n,e){var r=pu(t,gu),i=hu(t,r,gu),a=i.continuousAxisChannelDef,o=i.continuousAxis,c=a.field,s=yu(n),l=[].concat((0,u.Z)(xu(c)),[{op:"median",field:c,as:"mid_box_".concat(c)},{op:"min",field:c,as:("min-max"===s?"lower_whisker_":"min_")+c},{op:"max",field:c,as:("min-max"===s?"upper_whisker_":"max_")+c}]),f="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(c,'"] - datum["lower_box_').concat(c,'"]'),as:"iqr_".concat(c)},{calculate:'min(datum["upper_box_'.concat(c,'"] + datum["iqr_').concat(c,'"] * ').concat(n,', datum["max_').concat(c,'"])'),as:"upper_whisker_".concat(c)},{calculate:'max(datum["lower_box_'.concat(c,'"] - datum["iqr_').concat(c,'"] * ').concat(n,', datum["min_').concat(c,'"])'),as:"lower_whisker_".concat(c)}],h=t.encoding,d=o,p=(h[d],vu(h,["symbol"===typeof d?d:d+""])),v=function(t){var n,e,r=t.tooltip,i=uu(t,["tooltip"]);if(!r)return{filteredEncoding:i};if((0,H.kJ)(r)){var a,o=(0,Y.Z)(r);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.aggregate?(n||(n=[]),n.push(u)):(e||(e=[]),e.push(u))}}catch(c){o.e(c)}finally{o.f()}n&&(i.tooltip=n)}else r.aggregate?i.tooltip=r:e=r;return(0,H.kJ)(e)&&1===e.length&&(e=e[0]),{customTooltipWithoutAggregatedField:e,filteredEncoding:i}}(p),g=v.customTooltipWithoutAggregatedField,m=eu(v.filteredEncoding,e),y=m.bins,b=m.timeUnits,x=m.aggregate,_=m.groupby,w=m.encoding,k="vertical"===r?"horizontal":"vertical",M=r,O=[].concat((0,u.Z)(y),(0,u.Z)(b),[{aggregate:[].concat((0,u.Z)(x),(0,u.Z)(l)),groupby:_}],f);return{bins:y,timeUnits:b,transform:O,groupby:_,aggregate:x,continuousAxisChannelDef:a,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:k,boxOrient:M,customTooltipWithoutAggregatedField:g}}(t,f,i),g=v.bins,m=v.timeUnits,y=v.transform,b=v.continuousAxisChannelDef,x=v.continuousAxis,_=v.groupby,w=v.aggregate,k=v.encodingWithoutContinuousAxis,M=v.ticksOrient,O=v.boxOrient,E=v.customTooltipWithoutAggregatedField,S=k.color,D=k.size,C=vu(k,["color","size"]),A=function(t){return lu(l,x,b,t,i.boxplot)},T=A(C),F=A(k),j=A(Object.assign(Object.assign({},C),D?{size:D}:{})),Z=cu([{fieldPrefix:"min-max"===p?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===p?"lower_whisker_":"min_",titlePrefix:"Min"}],b,k),N={type:"tick",color:"black",opacity:1,orient:M,invalid:d,aria:!1},z="min-max"===p?Z:cu([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,k),U=[].concat((0,u.Z)(T({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z})),(0,u.Z)(T({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z})),(0,u.Z)(T({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:z})),(0,u.Z)(T({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:z}))),P=[].concat((0,u.Z)("tukey"!==p?U:[]),(0,u.Z)(F({partName:"box",mark:Object.assign(Object.assign({type:"bar"},h?{size:h}:{}),{orient:O,invalid:d,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:Z})),(0,u.Z)(j({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:d},(0,H.Kn)(i.boxplot.median)&&i.boxplot.median.color?{color:i.boxplot.median.color}:{}),h?{size:h}:{}),{orient:M,aria:!1}),positionPrefix:"mid_box",extraEncoding:Z})));if("min-max"===p)return Object.assign(Object.assign({},s),{transform:(null!==(r=s.transform)&&void 0!==r?r:[]).concat(y),layer:P});var R,L,I='datum["lower_box_'.concat(b.field,'"]'),B='datum["upper_box_'.concat(b.field,'"]'),q="(".concat(B," - ").concat(I,")"),W="".concat(I," - ").concat(f," * ").concat(q),X="".concat(B," + ").concat(f," * ").concat(q),G='datum["'.concat(b.field,'"]'),J={joinaggregate:xu(b.field),groupby:_},$={transform:[{filter:"(".concat(W," <= ").concat(G,") && (").concat(G," <= ").concat(X,")")},{aggregate:[{op:"min",field:b.field,as:"lower_whisker_".concat(b.field)},{op:"max",field:b.field,as:"upper_whisker_".concat(b.field)},{op:"min",field:"lower_box_".concat(b.field),as:"lower_box_".concat(b.field)},{op:"max",field:"upper_box_".concat(b.field),as:"upper_box_".concat(b.field)}].concat((0,u.Z)(w)),groupby:_}],layer:U},V=(C.tooltip,vu(C,["tooltip"])),K=b.scale,Q=b.axis,tt=su(b),nt=ct(Q,["title"]),et=fu(l,"outliers",i.boxplot,{transform:[{filter:"(".concat(G," < ").concat(W,") || (").concat(G," > ").concat(X,")")}],mark:"point",encoding:Object.assign(Object.assign(Object.assign((0,ye.Z)({},x,Object.assign(Object.assign(Object.assign({field:b.field,type:b.type},void 0!==tt?{title:tt}:{}),void 0!==K?{scale:K}:{}),kt(nt)?{}:{axis:nt})),V),S?{color:S}:{}),E?{tooltip:E}:{})})[0],rt=[].concat((0,u.Z)(g),(0,u.Z)(m),[J]);et?R={transform:rt,layer:[et,$]}:(L=(R=$).transform).unshift.apply(L,(0,u.Z)(rt));return Object.assign(Object.assign({},s),{layer:[R,{transform:y,layer:P}]})}function xu(t){return[{op:"q1",field:t,as:"lower_box_".concat(t)},{op:"q3",field:t,as:"upper_box_".concat(t)}]}var _u=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},wu="errorbar",ku=new $o(wu,Mu);function Mu(t,n){var e=n.config,r=Eu(t=Object.assign(Object.assign({},t),{encoding:iu(t.encoding,e)}),wu,e),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,c=r.encodingWithoutContinuousAxis,s=r.ticksOrient,l=r.markDef,f=r.outerSpec,h=r.tooltipEncoding;delete c.size;var d=lu(l,o,a,c,e.errorbar),p=l.thickness,v=l.size,g=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},void 0!==p?{thickness:p}:{}),void 0!==v?{size:v}:{}),m=[].concat((0,u.Z)(d({partName:"ticks",mark:g,positionPrefix:"lower",extraEncoding:h})),(0,u.Z)(d({partName:"ticks",mark:g,positionPrefix:"upper",extraEncoding:h})),(0,u.Z)(d({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==p?{size:p}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:h})));return Object.assign(Object.assign(Object.assign({},f),{transform:i}),m.length>1?{layer:m}:Object.assign({},m[0]))}function Ou(t,n){var e=t.encoding;if(function(t){return(ho(t.x)||ho(t.y))&&!ho(t.x2)&&!ho(t.y2)&&!ho(t.xError)&&!ho(t.xError2)&&!ho(t.yError)&&!ho(t.yError2)}(e))return{orient:pu(t,n),inputType:"raw"};var r=function(t){return ho(t.x2)||ho(t.y2)}(e),i=function(t){return ho(t.xError)||ho(t.xError2)||ho(t.yError)||ho(t.yError2)}(e),a=e.x,o=e.y;if(r){if(i)throw new Error("".concat(n," cannot be both type aggregated-upper-lower and aggregated-error"));var u=e.x2,c=e.y2;if(ho(u)&&ho(c))throw new Error("".concat(n," cannot have both x2 and y2"));if(ho(u)){if(lo(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(n))}if(ho(c)){if(lo(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(n))}throw new Error("No ranged axis")}var s=e.xError,l=e.xError2,f=e.yError,h=e.yError2;if(ho(l)&&!ho(s))throw new Error("".concat(n," cannot have xError2 without xError"));if(ho(h)&&!ho(f))throw new Error("".concat(n," cannot have yError2 without yError"));if(ho(s)&&ho(f))throw new Error("".concat(n," cannot have both xError and yError with both are quantiative"));if(ho(s)){if(lo(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(ho(f)){if(lo(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function Eu(t,n,e){var r,i=t.mark,a=t.encoding,o=t.params,c=(t.projection,_u(t,["mark","encoding","params","projection"])),s=ga(i)?i:{type:i};o&&Xr(gr(n));var l=Ou(t,n),f=l.orient,h=l.inputType,d=hu(t,f,n),p=d.continuousAxisChannelDef,v=d.continuousAxisChannelDef2,g=d.continuousAxisChannelDefError,m=d.continuousAxisChannelDefError2,y=d.continuousAxis,b=function(t,n,e,r,i,a,o,u){var c,s=[],l=[],f=n.field,h=!1;if("raw"===a){var d,p,v,g=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":u.errorbar.center,m=t.extent?t.extent:"mean"===g?"stderr":"iqr";if("median"===g!==("iqr"===m)&&Xr(function(t,n,e){return"".concat(t," is not usually used with ").concat(n," for ").concat(e,".")}(g,m,o)),"stderr"===m||"stdev"===m)s=[{op:m,field:f,as:"extent_".concat(f)},{op:g,field:f,as:"center_".concat(f)}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_".concat(f)},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_".concat(f)}],c=[{fieldPrefix:"center_",titlePrefix:Tt(g)},{fieldPrefix:"upper_",titlePrefix:Su(g,m,"+")},{fieldPrefix:"lower_",titlePrefix:Su(g,m,"-")}],h=!0;else"ci"===m?(d="mean",p="ci0",v="ci1"):(d="median",p="q1",v="q3"),s=[{op:p,field:f,as:"lower_".concat(f)},{op:v,field:f,as:"upper_".concat(f)},{op:d,field:f,as:"center_".concat(f)}],c=[{fieldPrefix:"upper_",titlePrefix:Eo({field:f,aggregate:v,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Eo({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Eo({field:f,aggregate:d,type:"quantitative"},u,{allowDisabling:!1})}]}else{(t.center||t.extent)&&Xr(function(t,n){return"".concat(n?"extent ":"").concat(n&&t?"and ":"").concat(t?"center ":"").concat(n&&t?"are ":"is ","not needed when data are aggregated.")}(t.center,t.extent)),"aggregated-upper-lower"===a?(c=[],l=[{calculate:'datum["'.concat(e.field,'"]'),as:"upper_".concat(f)},{calculate:'datum["'.concat(f,'"]'),as:"lower_".concat(f)}]):"aggregated-error"===a&&(c=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_".concat(f)}],i?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_".concat(f)}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_".concat(f)}));var y,b=(0,Y.Z)(l);try{for(b.s();!(y=b.n()).done;){var x=y.value;c.push({fieldPrefix:x.as.substring(0,6),titlePrefix:zt(zt(x.calculate,'datum["',""),'"]',"")})}}catch(_){b.e(_)}finally{b.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:s,tooltipSummary:c,tooltipTitleWithFieldName:h}}(s,p,v,g,m,h,n,e),x=b.errorBarSpecificAggregate,_=b.postAggregateCalculates,w=b.tooltipSummary,k=b.tooltipTitleWithFieldName,M=a,O=y,E=(M[O],"x"===y?"x2":"y2"),S=(M[E],"x"===y?"xError":"yError"),D=(M[S],"x"===y?"xError2":"yError2"),C=(M[D],eu(_u(M,["symbol"===typeof O?O:O+"","symbol"===typeof E?E:E+"","symbol"===typeof S?S:S+"","symbol"===typeof D?D:D+""]),e)),A=C.bins,T=C.timeUnits,F=C.aggregate,j=C.groupby,Z=C.encoding,N=[].concat((0,u.Z)(F),(0,u.Z)(x)),z="raw"!==h?[]:j,U=cu(w,p,Z,k);return{transform:[].concat((0,u.Z)(null!==(r=c.transform)&&void 0!==r?r:[]),(0,u.Z)(A),(0,u.Z)(T),(0,u.Z)(0===N.length?[]:[{aggregate:N,groupby:z}]),(0,u.Z)(_)),groupby:z,continuousAxisChannelDef:p,continuousAxis:y,encodingWithoutContinuousAxis:Z,ticksOrient:"vertical"===f?"horizontal":"vertical",markDef:s,outerSpec:c,tooltipEncoding:U}}function Su(t,n,e){return"".concat(Tt(t)," ").concat(e," ").concat(n)}var Du="errorband",Cu=new $o(Du,Au);function Au(t,n){var e=n.config,r=Eu(t=Object.assign(Object.assign({},t),{encoding:iu(t.encoding,e)}),Du,e),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,c=r.encodingWithoutContinuousAxis,s=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,h=s,d=lu(h,o,a,c,e.errorband),p=void 0!==t.encoding.x&&void 0!==t.encoding.y,v={type:p?"area":"rect"},g={type:p?"line":"rule"},m=Object.assign(Object.assign({},h.interpolate?{interpolate:h.interpolate}:{}),h.tension&&h.interpolate?{tension:h.tension}:{});return p?(v=Object.assign(Object.assign(Object.assign({},v),m),{ariaRoleDescription:"errorband"}),g=Object.assign(Object.assign(Object.assign({},g),m),{aria:!1})):h.interpolate?Xr(Br("interpolate")):h.tension&&Xr(Br("tension")),Object.assign(Object.assign({},l),{transform:i,layer:[].concat((0,u.Z)(d({partName:"band",mark:v,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})),(0,u.Z)(d({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:f})),(0,u.Z)(d({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:f})))})}var Tu={};function Fu(t,n,e){var r=new $o(t,n);Tu[t]={normalizer:r,parts:e}}Fu(gu,bu,["box","median","outliers","rule","ticks"]),Fu(wu,Mu,["ticks","rule"]),Fu(Du,Au,["band","borders"]);var ju=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Zu={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Nu={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},zu=Mt(Zu),Uu=Mt(Nu),Pu=Mt({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Ru=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Lu={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Iu=(Mt(Lu),"_vgsid_"),Bu={point:{on:"click",fields:[Iu],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function qu(t){return"legend"===t||!!(null===t||void 0===t?void 0:t.legend)}function Hu(t){return qu(t)&&(0,H.Kn)(t)}function Wu(t){return!!(null===t||void 0===t?void 0:t.select)}var Yu=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Xu(t){var n,e=[],r=(0,Y.Z)(t||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!Wu(i)){var a=i.expr,o=i.bind,u=Yu(i,["expr","bind"]);if(o&&a){var c=Object.assign(Object.assign({},u),{bind:o,init:a});e.push(c)}else{var s=Object.assign(Object.assign(Object.assign({},u),a?{update:a}:{}),o?{bind:o}:{});e.push(s)}}}}catch(l){r.e(l)}finally{r.f()}return e}function Gu(t){return"concat"in t}function Ju(t){return"vconcat"in t}function $u(t){return"hconcat"in t}function Vu(t){var n,e=t.step;return t.offsetIsDiscrete?null!==(n=e.for)&&void 0!==n?n:"offset":"position"}function Ku(t){return(0,H.Kn)(t)&&void 0!==t.step}function Qu(t){return t.view||t.width||t.height}var tc=Mt({align:1,bounds:1,center:1,columns:1,spacing:1});var nc=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function ec(t,n){var e;return null!==(e=t[n])&&void 0!==e?e:t["width"===n?"continuousWidth":"continuousHeight"]}function rc(t,n){var e=ic(t,n);return Ku(e)?e.step:ac}function ic(t,n){var e;return Rt(null!==(e=t[n])&&void 0!==e?e:t["width"===n?"discreteWidth":"discreteHeight"],{step:t.step})}var ac=20;var oc={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:ac},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:wa,circle:{},geoshape:{},image:{},line:{},point:{},rect:ka,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Bu,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},uc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],cc={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},sc={blue:uc[0],orange:uc[1],red:uc[2],teal:uc[3],green:uc[4],yellow:uc[5],purple:uc[6],pink:uc[7],brown:uc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function lc(t){var n,e=Mt(t||{}),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t[a];r[a]=Bo(o)?Ye(o):Xe(o)}}catch(u){i.e(u)}finally{i.f()}return r}var fc=[].concat((0,u.Z)(ba),(0,u.Z)(Go),(0,u.Z)(Pu),["background","padding","legend","lineBreak","scale","style","title","view"]);function hc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.color,e=t.font,r=t.fontSize,i=t.selection,a=nc(t,["color","font","fontSize","selection"]),o=(0,H.fE)({},at(oc),e?function(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}(e):{},n?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:(0,H.Kn)(t)?Object.assign(Object.assign({},sc),t):sc}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(n):{},r?function(t){return{signals:[{name:"fontSize",value:(0,H.Kn)(t)?Object.assign(Object.assign({},cc),t):cc}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},a||{});i&&(0,B.writeConfig)(o,"selection",i,!0);for(var u=ct(o,fc),c=0,s=["background","lineBreak","padding"];c<s.length;c++){var l=s[c];o[l]&&(u[l]=Xe(o[l]))}var f,h=(0,Y.Z)(ba);try{for(h.s();!(f=h.n()).done;){var d=f.value;o[d]&&(u[d]=Ne(o[d]))}}catch(x){h.e(x)}finally{h.f()}var p,v=(0,Y.Z)(Go);try{for(v.s();!(p=v.n()).done;){var g=p.value;o[g]&&(u[g]=lc(o[g]))}}catch(x){v.e(x)}finally{v.f()}var m,y=(0,Y.Z)(Pu);try{for(y.s();!(m=y.n()).done;){var b=m.value;o[b]&&(u[b]=Ne(o[b]))}}catch(x){y.e(x)}finally{y.f()}return o.legend&&(u.legend=Ne(o.legend)),o.scale&&(u.scale=Ne(o.scale)),o.style&&(u.style=function(t){var n,e=Mt(t),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r[a]=lc(t[a])}}catch(x){i.e(x)}finally{i.f()}return r}(o.style)),o.title&&(u.title=Ne(o.title)),o.view&&(u.view=Ne(o.view)),u}var dc=new Set(["view"].concat((0,u.Z)(va))),pc=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],vc=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function gc(t){t=at(t);var n,e=(0,Y.Z)(pc);try{for(e.s();!(n=e.n()).done;){delete t[n.value]}}catch(k){e.e(k)}finally{e.f()}if(t.axis)for(var r in t.axis)Bo(t.axis[r])&&delete t.axis[r];if(t.legend){var i,a=(0,Y.Z)(ju);try{for(a.s();!(i=a.n()).done;){var o=i.value;delete t.legend[o]}}catch(k){a.e(k)}finally{a.f()}}if(t.mark){var u,c=(0,Y.Z)(ya);try{for(c.s();!(u=c.n()).done;){var s=u.value;delete t.mark[s]}}catch(k){c.e(k)}finally{c.f()}t.mark.tooltip&&(0,H.Kn)(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(Xu(t.params)),delete t.params);var l,f=(0,Y.Z)(dc);try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=(0,Y.Z)(ya);try{for(p.s();!(h=p.n()).done;){var v=h.value;delete t[d][v]}}catch(k){p.e(k)}finally{p.f()}var g=vc[d];if(g){var m,y=(0,Y.Z)(g);try{for(y.s();!(m=y.n()).done;){var b=m.value;delete t[d][b]}}catch(k){y.e(k)}finally{y.f()}}mc(t,d)}}catch(k){f.e(k)}finally{f.f()}var x,_=(0,Y.Z)(Mt(Tu));try{for(_.s();!(x=_.n()).done;){delete t[x.value]}}catch(k){_.e(k)}finally{_.f()}for(var w in function(t){var n=Ue(t.title),e=n.titleMarkConfig,r=n.subtitleMarkConfig,i=n.subtitle;kt(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e));kt(r)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),r));kt(i)?delete t.title:t.title=i}(t),t)(0,H.Kn)(t[w])&&kt(t[w])&&delete t[w];return kt(t)?void 0:t}function mc(t,n,e,r){var i=r?t[n][r]:t[n];"view"===n&&(e="cell");var a=Object.assign(Object.assign({},i),t.style[null!==e&&void 0!==e?e:n]);kt(a)||(t.style[null!==e&&void 0!==e?e:n]=a),r||delete t[n]}function yc(t){return"layer"in t}var bc=e(35928),xc=e(4392),_c=e(64428),wc=e(82359),kc=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Mc=function(){function t(){(0,c.Z)(this,t)}return(0,s.Z)(t,[{key:"map",value:function(t,n){return Va(t)?this.mapFacet(t,n):function(t){return"repeat"in t}(t)?this.mapRepeat(t,n):$u(t)?this.mapHConcat(t,n):Ju(t)?this.mapVConcat(t,n):Gu(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}},{key:"mapLayerOrUnit",value:function(t,n){if(yc(t))return this.mapLayer(t,n);if(Jo(t))return this.mapUnit(t,n);throw new Error(cr(t))}},{key:"mapLayer",value:function(t,n){var e=this;return Object.assign(Object.assign({},t),{layer:t.layer.map((function(t){return e.mapLayerOrUnit(t,n)}))})}},{key:"mapHConcat",value:function(t,n){var e=this;return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map((function(t){return e.map(t,n)}))})}},{key:"mapVConcat",value:function(t,n){var e=this;return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map((function(t){return e.map(t,n)}))})}},{key:"mapConcat",value:function(t,n){var e=this,r=t.concat,i=kc(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map((function(t){return e.map(t,n)}))})}},{key:"mapFacet",value:function(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}},{key:"mapRepeat",value:function(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}]),t}(),Oc={zero:1,center:1,normalize:1};var Ec=new Set([Qi,na,ta,oa,ia,la,fa,ra,ua,ca]),Sc=new Set([na,ta,Qi]);function Dc(t){return uo(t)&&"quantitative"===co(t)&&!t.bin}function Cc(t,n){var e,r,i="x"===n?"y":"radius",a=t[n],o=t[i];if(uo(a)&&uo(o))if(Dc(a)&&Dc(o)){if(a.stack)return n;if(o.stack)return i;var u=uo(a)&&!!a.aggregate;if(u!==(uo(o)&&!!o.aggregate))return u?n:i;var c=null===(e=a.scale)||void 0===e?void 0:e.type,s=null===(r=o.scale)||void 0===r?void 0:r.type;if(c&&"linear"!==c)return i;if(s&&"linear"!==s)return n}else{if(Dc(a))return n;if(Dc(o))return i}else{if(Dc(a))return n;if(Dc(o))return i}}function Ac(t,n){var e,r,i=ga(t)?t.type:t;if(!Ec.has(i))return null;var a=Cc(n,"x")||Cc(n,"theta");if(!a)return null;var o=n[a],u=uo(o)?_o(o,{}):void 0,c=function(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(a),s=[],l=new Set;if(n[c]){var f=n[c],h=uo(f)?_o(f,{}):void 0;h&&h!==u&&(s.push(c),l.add(h));var d="x"===c?"xOffset":"yOffset",p=n[d],v=uo(p)?_o(p,{}):void 0;v&&v!==u&&(s.push(d),l.add(v))}var g,m,y,b=te.reduce((function(t,e){if("tooltip"!==e&&Ko(n,e)){var r,i=n[e],a=(0,Y.Z)((0,H.IX)(i));try{for(a.s();!(r=a.n()).done;){var o=Ao(r.value);if(!o.aggregate){var u=_o(o,{});u&&l.has(u)||t.push({channel:e,fieldDef:o})}}}catch(c){a.e(c)}finally{a.f()}}return t}),[]);return void 0!==o.stack?g=(0,H.jn)(o.stack)?o.stack?"zero":null:o.stack:Sc.has(i)&&(g="zero"),g&&g in Oc?nu(n)&&0===b.length?null:(null===(e=null===o||void 0===o?void 0:o.scale)||void 0===e?void 0:e.type)&&(null===(r=null===o||void 0===o?void 0:o.scale)||void 0===r?void 0:r.type)!==Ti.LINEAR?(Xr(function(t){return"Cannot stack non-linear scale (".concat(t,").")}(o.scale.type)),null):ho(n[Gn(a)])?(void 0!==o.stack&&Xr('Cannot stack "'.concat(m=a,'" if there is already "').concat(m,'2".')),null):(uo(o)&&o.aggregate&&!Ee.has(o.aggregate)&&Xr((y=o.aggregate,'Stacking is applied even though the aggregate function is non-summative ("'.concat(y,'").'))),{groupbyChannels:s,groupbyFields:l,fieldChannel:a,impute:null!==o.impute&&da(i),stackBy:b,offset:g}):null}var Tc=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Fc(t){t.point,t.line;var n=Tc(t,["point","line"]);return Mt(n).length>1?n:n.type}function jc(t){for(var n=0,e=["line","area","rule","trail"];n<e.length;n++){var r=e[n];t[r]&&(t=Object.assign(Object.assign({},t),(0,ye.Z)({},r,ct(t[r],["point","line"]))))}return t}function Zc(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return"transparent"===t.point?{opacity:0}:t.point?(0,H.Kn)(t.point)?t.point:{}:void 0!==t.point?null:n.point||e.shape?(0,H.Kn)(n.point)?n.point:{}:void 0}function Nc(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:n.line?!0===n.line?{}:n.line:void 0}var zc=function(){function t(){(0,c.Z)(this,t),this.name="path-overlay"}return(0,s.Z)(t,[{key:"hasMatchingType",value:function(t,n){if(Jo(t)){var e=t.mark,r=t.encoding,i=ga(e)?e:{type:e};switch(i.type){case"line":case"rule":case"trail":return!!Zc(i,n[i.type],r);case"area":return!!Zc(i,n[i.type],r)||!!Nc(i,n[i.type])}}return!1}},{key:"run",value:function(t,n,e){var r=n.config,i=t.params,a=t.projection,o=t.mark,u=t.encoding,c=Tc(t,["params","projection","mark","encoding"]),s=iu(u,r),l=ga(o)?o:{type:o},f=Zc(l,r[l.type],s),h="area"===l.type&&Nc(l,r[l.type]),d=[Object.assign(Object.assign({},i?{params:i}:{}),{mark:Fc(Object.assign(Object.assign({},"area"===l.type&&void 0===l.opacity&&void 0===l.fillOpacity?{opacity:.7}:{}),l)),encoding:ct(s,["shape"])})],p=Ac(l,s),v=s;if(p){var g=p.fieldChannel,m=p.offset;v=Object.assign(Object.assign({},s),(0,ye.Z)({},g,Object.assign(Object.assign({},s[g]),m?{stack:m}:{})))}return v=ct(v,["y2","x2"]),h&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},ut(l,["clip","interpolate","tension","tooltip"])),h),encoding:v})),f&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},ut(l,["clip","tooltip"])),f),encoding:v})),e(Object.assign(Object.assign({},c),{layer:d}),Object.assign(Object.assign({},n),{config:jc(r)}))}}]),t}(),Uc=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Pc(t,n){return n?Ja(t)?Hc(t,n):Ic(t,n):t}function Rc(t,n){return n?Hc(t,n):t}function Lc(t,n,e){var r,i=n[t];return(r=i)&&!(0,H.HD)(r)&&"repeat"in r?i.repeat in e?Object.assign(Object.assign({},n),(0,ye.Z)({},t,e[i.repeat])):void Xr(function(t){return'Unknown repeated value "'.concat(t,'".')}(i.repeat)):n}function Ic(t,n){if(void 0!==(t=Lc("field",t,n))){if(null===t)return null;if(to(t)&&Xa(t.sort)){var e=Lc("field",t.sort,n);t=Object.assign(Object.assign({},t),e?{sort:e}:{})}return t}}function Bc(t,n){if(uo(t))return Ic(t,n);var e=Lc("datum",t,n);return e===t||e.type||(e.type="nominal"),e}function qc(t,n){if(!ho(t)){if(oo(t)){var e=Bc(t.condition,n);if(e)return Object.assign(Object.assign({},t),{condition:e});t.condition;return Uc(t,["condition"])}return t}var r=Bc(t,n);return r||(io(t)?{condition:t.condition}:void 0)}function Hc(t,n){var e={};for(var r in t)if((0,H.nr)(t,r)){var i=t[r];if((0,H.kJ)(i))e[r]=i.map((function(t){return qc(t,n)})).filter((function(t){return t}));else{var a=qc(i,n);void 0!==a&&(e[r]=a)}}return e}var Wc=function(){function t(){(0,c.Z)(this,t),this.name="RuleForRangedLine"}return(0,s.Z)(t,[{key:"hasMatchingType",value:function(t){if(Jo(t)){var n=t.encoding,e=t.mark;if("line"===e||ga(e)&&"line"===e.type){var r,i=(0,Y.Z)(Hn);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=n[Yn(a)];if(n[a]&&(uo(o)&&!Ae(o.bin)||so(o)))return!0}}catch(u){i.e(u)}finally{i.f()}}}return!1}},{key:"run",value:function(t,n,e){var r,i,a=t.encoding,o=t.mark;return Xr((r=!!a.x2,i=!!a.y2,"Line mark is for continuous lines and thus cannot be used with ".concat(r&&i?"x2 and y2":r?"x2":"y2",". We will use the rule mark (line segments) instead."))),e(Object.assign(Object.assign({},t),{mark:(0,H.Kn)(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}]),t}(),Yc=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Xc=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){var t;return(0,c.Z)(this,e),(t=n.apply(this,arguments)).nonFacetUnitNormalizers=[mu,ku,Cu,new zc,new Wc],t}return(0,s.Z)(e,[{key:"map",value:function(t,n){if(Jo(t)){var r=Ko(t.encoding,Gt),i=Ko(t.encoding,Jt),a=Ko(t.encoding,$t);if(r||i||a)return this.mapFacetedUnit(t,n)}return(0,bc.Z)((0,xc.Z)(e.prototype),"map",this).call(this,t,n)}},{key:"mapUnit",value:function(t,n){var e=n.parentEncoding,r=n.parentProjection,i=Rc(t.encoding,n.repeater),a=Object.assign(Object.assign({},t),i?{encoding:i}:{});if(e||r)return this.mapUnitWithParentEncodingOrProjection(a,n);var o,u=this.mapLayerOrUnit.bind(this),c=(0,Y.Z)(this.nonFacetUnitNormalizers);try{for(c.s();!(o=c.n()).done;){var s=o.value;if(s.hasMatchingType(a,n.config))return s.run(a,n,u)}}catch(l){c.e(l)}finally{c.f()}return a}},{key:"mapRepeat",value:function(t,n){return function(t){return!(0,H.kJ)(t.repeat)&&t.repeat.layer}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}},{key:"mapLayerRepeat",value:function(t,n){var e=this,r=t.repeat,i=t.spec,a=Yc(t,["repeat","spec"]),o=r.row,u=r.column,c=r.layer,s=n.repeater,l=void 0===s?{}:s,f=n.repeaterPrefix,h=void 0===f?"":f;return o||u?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),u?{column:u}:{}),spec:{repeat:{layer:c},spec:i}}),n):Object.assign(Object.assign({},a),{layer:c.map((function(t){var r=Object.assign(Object.assign({},l),{layer:t}),a="".concat((i.name||"")+h,"child__layer_").concat(Dt(t)),o=e.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:r,repeaterPrefix:a}));return o.name=a,o}))})}},{key:"mapNonLayerRepeat",value:function(t,n){var e,r=t,i=r.repeat,a=r.spec,o=r.data,u=Yc(t,["repeat","spec","data"]);!(0,H.kJ)(i)&&t.columns&&(t=ct(t,["columns"]),Xr(yr("repeat")));var c,s=[],l=n.repeater,f=void 0===l?{}:l,h=n.repeaterPrefix,d=void 0===h?"":h,p=!(0,H.kJ)(i)&&i.row||[f?f.row:null],v=!(0,H.kJ)(i)&&i.column||[f?f.column:null],g=(0,H.kJ)(i)&&i||[f?f.repeat:null],m=(0,Y.Z)(g);try{for(m.s();!(c=m.n()).done;){var y,b=c.value,x=(0,Y.Z)(p);try{for(x.s();!(y=x.n()).done;){var _,w=y.value,k=(0,Y.Z)(v);try{for(k.s();!(_=k.n()).done;){var M=_.value,O={repeat:b,row:w,column:M,layer:f.layer},E=(a.name||"")+d+"child__"+((0,H.kJ)(i)?"".concat(Dt(b)):(i.row?"row_".concat(Dt(w)):"")+(i.column?"column_".concat(Dt(M)):"")),S=this.map(a,Object.assign(Object.assign({},n),{repeater:O,repeaterPrefix:E}));S.name=E,s.push(ct(S,["data"]))}}catch(C){k.e(C)}finally{k.f()}}}catch(C){x.e(C)}finally{x.f()}}}catch(C){m.e(C)}finally{m.f()}var D=(0,H.kJ)(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:null!==(e=a.data)&&void 0!==e?e:o,align:"all"},u),{columns:D,concat:s})}},{key:"mapFacet",value:function(t,n){return Ja(t.facet)&&t.columns&&(t=ct(t,["columns"]),Xr(yr("facet"))),(0,bc.Z)((0,xc.Z)(e.prototype),"mapFacet",this).call(this,t,n)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(t,n){var e=t.encoding,r=t.projection,i=n.parentEncoding,a=n.parentProjection,o=n.config,u=Jc({parentProjection:a,projection:r}),c=Gc({parentEncoding:i,encoding:Rc(e,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),u?{projection:u}:{}),c?{encoding:c}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(t,n){var e=t.encoding,r=e.row,i=e.column,a=e.facet,o=Yc(e,["row","column","facet"]),u=t.mark,c=t.width,s=t.projection,l=t.height,f=t.view,h=t.params,d=(t.encoding,Yc(t,["mark","width","projection","height","view","params","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:i,facet:a},n),v=p.facetMapping,g=p.layout,m=Rc(o,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},d),g),{facet:v,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),l?{height:l}:{}),f?{view:f}:{}),s?{projection:s}:{}),{mark:u,encoding:m}),h?{params:h}:{})}),n)}},{key:"getFacetMappingAndLayout",value:function(t,n){var e,r=t.row,i=t.column,a=t.facet;if(r||i){a&&Xr((m=[].concat((0,u.Z)(r?[Gt]:[]),(0,u.Z)(i?[Jt]:[])),"Facet encoding dropped as ".concat(m.join(" and ")," ").concat(m.length>1?"are":"is"," also specified.")));for(var o={},c={},s=0,l=[Gt,Jt];s<l.length;s++){var f=l[s],h=t[f];if(h){h.align,h.center,h.spacing,h.columns;var d=Yc(h,["align","center","spacing","columns"]);o[f]=d;for(var p=0,v=["align","center","spacing"];p<v.length;p++){var g=v[p];void 0!==h[g]&&(null!==(e=c[g])&&void 0!==e||(c[g]={}),c[g][f]=h[g])}}}return{facetMapping:o,layout:c}}var m,y=a.align,b=a.center,x=a.spacing,_=a.columns;return{facetMapping:Pc(Yc(a,["align","center","spacing","columns"]),n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},y?{align:y}:{}),b?{center:b}:{}),x?{spacing:x}:{}),_?{columns:_}:{})}}},{key:"mapLayer",value:function(t,n){var r=n.parentEncoding,i=n.parentProjection,a=Yc(n,["parentEncoding","parentProjection"]),o=t.encoding,u=t.projection,c=Yc(t,["encoding","projection"]),s=Object.assign(Object.assign({},a),{parentEncoding:Gc({parentEncoding:r,encoding:o,layer:!0}),parentProjection:Jc({parentProjection:i,projection:u})});return(0,bc.Z)((0,xc.Z)(e.prototype),"mapLayer",this).call(this,c,s)}}]),e}(Mc);function Gc(t){var n=t.parentEncoding,e=t.encoding,r=void 0===e?{}:e,i=t.layer,a={};if(n){var o,c=new Set([].concat((0,u.Z)(Mt(n)),(0,u.Z)(Mt(r)))),s=(0,Y.Z)(c);try{for(s.s();!(o=s.n()).done;){var l=o.value,f=r[l],h=n[l];if(ho(f)){var d=Object.assign(Object.assign({},h),f);a[l]=d}else oo(f)?a[l]=Object.assign(Object.assign({},f),{condition:Object.assign(Object.assign({},h),f.condition)}):f||null===f?a[l]=f:(i||vo(h)||Re(h)||ho(h)||(0,H.kJ)(h))&&(a[l]=h)}}catch(p){s.e(p)}finally{s.f()}}else a=r;return!a||kt(a)?void 0:a}function Jc(t){var n=t.parentProjection,e=t.projection;return n&&e&&Xr(function(t){var n=t.parentProjection,e=t.projection;return"Layer's shared projection ".concat(st(n)," is overridden by a child projection ").concat(st(e),".")}({parentProjection:n,projection:e})),null!==e&&void 0!==e?e:n}function $c(t){return"filter"in t}function Vc(t){return void 0!==(null===t||void 0===t?void 0:t.stop)}function Kc(t){return"lookup"in t}function Qc(t){return"pivot"in t}function ts(t){return"density"in t}function ns(t){return"quantile"in t}function es(t){return"regression"in t}function rs(t){return"loess"in t}function is(t){return"sample"in t}function as(t){return"window"in t}function os(t){return"joinaggregate"in t}function us(t){return"flatten"in t}function cs(t){return"calculate"in t}function ss(t){return"bin"in t}function ls(t){return"impute"in t}function fs(t){return"timeUnit"in t}function hs(t){return"aggregate"in t}function ds(t){return"stack"in t}function ps(t){return"fold"in t}var vs=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},gs=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"map",value:function(t,n){var r,i;return null!==(r=n.emptySelections)&&void 0!==r||(n.emptySelections={}),null!==(i=n.selectionPredicates)&&void 0!==i||(n.selectionPredicates={}),t=ms(t,n),(0,bc.Z)((0,xc.Z)(e.prototype),"map",this).call(this,t,n)}},{key:"mapLayerOrUnit",value:function(t,n){if((t=ms(t,n)).encoding){var r,i={},a=(0,Y.Z)(Et(t.encoding));try{for(a.s();!(r=a.n()).done;){var o=(0,W.Z)(r.value,2),u=o[0],c=o[1];i[u]=ys(c,n)}}catch(s){a.e(s)}finally{a.f()}t=Object.assign(Object.assign({},t),{encoding:i})}return(0,bc.Z)((0,xc.Z)(e.prototype),"mapLayerOrUnit",this).call(this,t,n)}},{key:"mapUnit",value:function(t,n){var e=t,r=e.selection,i=vs(e,["selection"]);return r?Object.assign(Object.assign({},i),{params:Et(r).map((function(t){var e,r=(0,W.Z)(t,2),i=r[0],a=r[1],o=a.init,u=a.bind,c=a.empty,s=vs(a,["init","bind","empty"]);"single"===s.type?(s.type="point",s.toggle=!1):"multi"===s.type&&(s.type="point"),n.emptySelections[i]="none"!==c;var l,f=(0,Y.Z)(Ot(null!==(e=n.selectionPredicates[i])&&void 0!==e?e:{}));try{for(f.s();!(l=f.n()).done;){l.value.empty="none"!==c}}catch(h){f.e(h)}finally{f.f()}return{name:i,value:o,select:s,bind:u}}))}):t}}]),e}(Mc);function ms(t,n){var e=t.transform,r=vs(t,["transform"]);if(e){var i=e.map((function(t){if($c(t))return{filter:xs(t,n)};if(ss(t)&&Te(t.bin))return Object.assign(Object.assign({},t),{bin:bs(t.bin)});if(Kc(t)){var e=t.from,r=e.selection,i=vs(e,["selection"]);return r?Object.assign(Object.assign({},t),{from:Object.assign({param:r},i)}):t}return t}));return Object.assign(Object.assign({},r),{transform:i})}return t}function ys(t,n){var e,r,i=at(t);if(uo(i)&&Te(i.bin)&&(i.bin=bs(i.bin)),go(i)&&(null===(r=null===(e=i.scale)||void 0===e?void 0:e.domain)||void 0===r?void 0:r.selection)){var a=i.scale.domain,o=a.selection,u=vs(a,["selection"]);i.scale.domain=Object.assign(Object.assign({},u),o?{param:o}:{})}if(io(i))if((0,B.isArray)(i.condition))i.condition=i.condition.map((function(t){t.selection;var e=t.param,r=(t.test,vs(t,["selection","param","test"]));return e?t:Object.assign(Object.assign({},r),{test:xs(t,n)})}));else{var c=ys(i.condition,n),s=(c.selection,c.param),l=(c.test,vs(c,["selection","param","test"]));i.condition=s?i.condition:Object.assign(Object.assign({},l),{test:xs(i.condition,n)})}return i}function bs(t){var n=t.extent;if(null===n||void 0===n?void 0:n.selection){var e=n.selection,r=vs(n,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},r),{param:e})})}return t}function xs(t,n){var e=function(t){return rt(t,(function(t){var e,r,i,a={param:t,empty:null===(e=n.emptySelections[t])||void 0===e||e};return null!==(r=(i=n.selectionPredicates)[t])&&void 0!==r||(i[t]=[]),n.selectionPredicates[t].push(a),a}))};return t.selection?e(t.selection):rt(t.test||t.filter,(function(t){return t.selection?e(t.selection):t}))}for(var _s=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"map",value:function(t,n){var r,i=null!==(r=n.selections)&&void 0!==r?r:[];if(t.params&&!Jo(t)){var a,o=[],u=(0,Y.Z)(t.params);try{for(u.s();!(a=u.n()).done;){var c=a.value;Wu(c)?i.push(c):o.push(c)}}catch(s){u.e(s)}finally{u.f()}t.params=o}return n.selections=i,(0,bc.Z)((0,xc.Z)(e.prototype),"map",this).call(this,t,Os(t,n))}},{key:"mapUnit",value:function(t,n){var e,r=n.selections;if(!r||!r.length)return t;var i,a=(null!==(e=n.path)&&void 0!==e?e:[]).concat(t.name),o=[],u=(0,Y.Z)(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c.views&&c.views.length){var s,l=(0,Y.Z)(c.views);try{for(l.s();!(s=l.n()).done;){var f=s.value;((0,B.isString)(f)&&(f===t.name||a.indexOf(f)>=0)||(0,B.isArray)(f)&&f.map((function(t){return a.indexOf(t)})).every((function(t,n,e){return-1!==t&&(0===n||t>e[n-1])})))&&o.push(c)}}catch(h){l.e(h)}finally{l.f()}}else o.push(c)}}catch(h){u.e(h)}finally{u.f()}return o.length&&(t.params=o),t}}]),e}(Mc),ws=function(){var t=Ms[ks],n=_s.prototype[t];_s.prototype[t]=function(t,e){return n.call(this,t,Os(t,e))}},ks=0,Ms=["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"];ks<Ms.length;ks++)ws();function Os(t,n){var e;return t.name?Object.assign(Object.assign({},n),{path:(null!==(e=n.path)&&void 0!==e?e:[]).concat(t.name)}):n}function Es(t,n){void 0===n&&(n=hc(t.config));var e=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e={config:n};return Cs.map(Ss.map(Ds.map(t,e),e),e)}(t,n),r=function(t,n,e){var r=n.width,i=n.height,a=Jo(t)||yc(t),o={};a?"container"==r&&"container"==i?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==i&&(o.type="fit-y",o.contains="padding"):("container"==r&&(Xr(lr("width")),r=void 0),"container"==i&&(Xr(lr("height")),i=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),e?As(e.autosize):{}),As(t.autosize));"fit"!==u.type||a||(Xr(sr),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&Xr(fr("width"));"container"==i&&"fit"!=u.type&&"fit-y"!=u.type&&Xr(fr("height"));if(it(u,{type:"pad"}))return;return u}(e,{width:t.width,height:t.height,autosize:t.autosize},n);return Object.assign(Object.assign({},e),r?{autosize:r}:{})}var Ss=new Xc,Ds=new gs,Cs=new _s;function As(t){return(0,H.HD)(t)?{type:t}:null!==t&&void 0!==t?t:{}}var Ts=["background","padding"];function Fs(t,n){var e,r={},i=(0,Y.Z)(Ts);try{for(i.s();!(e=i.n()).done;){var a=e.value;t&&void 0!==t[a]&&(r[a]=Xe(t[a]))}}catch(o){i.e(o)}finally{i.f()}return n&&(r.params=t.params),r}var js=e(67377),Zs=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,t),this.explicit=n,this.implicit=e}return(0,s.Z)(t,[{key:"clone",value:function(){return new t(at(this.explicit),at(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(t){return Rt(this.explicit[t],this.implicit[t])}},{key:"getWithExplicit",value:function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(t,n){var e=n.value,r=n.explicit;void 0!==e&&this.set(t,e,r)}},{key:"set",value:function(t,n,e){return delete this[e?"implicit":"explicit"][t],this[e?"explicit":"implicit"][t]=n,this}},{key:"copyKeyFromSplit",value:function(t,n){var e=n.explicit,r=n.implicit;void 0!==e[t]?this.set(t,e[t],!0):void 0!==r[t]&&this.set(t,r[t],!1)}},{key:"copyKeyFromObject",value:function(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}},{key:"copyAll",value:function(t){var n,e=(0,Y.Z)(Mt(t.combine()));try{for(e.s();!(n=e.n()).done;){var r=n.value,i=t.getWithExplicit(r);this.setWithExplicit(r,i)}}catch(a){e.e(a)}finally{e.f()}}}]),t}();function Ns(t){return{explicit:!0,value:t}}function zs(t){return{explicit:!1,value:t}}function Us(t){return function(n,e,r,i){var a=t(n.value,e.value);return a>0?n:a<0?e:Ps(n,e,r,i)}}function Ps(t,n,e,r){return t.explicit&&n.explicit&&Xr(function(t,n,e,r){return"Conflicting ".concat(n.toString(),' property "').concat(t.toString(),'" (').concat(st(e)," and ").concat(st(r),"). Using ").concat(st(e),".")}(e,r,t.value,n.value)),t}function Rs(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ps;return void 0===t||void 0===t.value?n:t.explicit&&!n.explicit?t:n.explicit&&!t.explicit?n:it(t.value,n.value)?t:i(t,n,e,r)}var Ls,Is=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,c.Z)(this,e),(t=n.call(this,r,i)).explicit=r,t.implicit=i,t.parseNothing=a,t}return(0,s.Z)(e,[{key:"clone",value:function(){var t=(0,bc.Z)((0,xc.Z)(e.prototype),"clone",this).call(this);return t.parseNothing=this.parseNothing,t}}]),e}(Zs);function Bs(t){return"url"in t}function qs(t){return"values"in t}function Hs(t){return"name"in t&&!Bs(t)&&!qs(t)&&!Ws(t)}function Ws(t){return t&&(Ys(t)||Xs(t)||Gs(t))}function Ys(t){return"sequence"in t}function Xs(t){return"sphere"in t}function Gs(t){return"graticule"in t}!function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"}(Ls||(Ls={}));var Js=e(5946),$s=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Vs(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.yR;if((0,H.kJ)(t)){var r=t.map((function(t){return Vs(t,n,e)}));return n?"[".concat(r.join(", "),"]"):r}return Gr(t)?e(n?ti(t):function(t){var n=Qr(t,!0);return t.utc?+new Date(Date.UTC.apply(Date,(0,u.Z)(n))):+(0,ur.Z)(Date,(0,u.Z)(n))}(t)):n?e(st(t)):t}function Ks(t,n){var e,r,i=(0,Y.Z)(Ot(null!==(e=t.component.selection)&&void 0!==e?e:{}));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=(0,Y.Z)(vf);try{for(u.s();!(a=u.n()).done;){var c=a.value;c.defined(o)&&c.marks&&(n=c.marks(t,o,n))}}catch(s){u.e(s)}finally{u.f()}}}catch(s){i.e(s)}finally{i.f()}return n}function Qs(t){return t.map((function(t){return t.on&&!t.on.length&&delete t.on,t}))}var tl=function(){function t(n,e){(0,c.Z)(this,t),this.debugName=e,this._children=[],this._parent=null,n&&(this.parent=n)}return(0,s.Z)(t,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t&&t.addChild(this)}},{key:"children",get:function(){return this._children}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(t,n){this._children.includes(t)?Xr("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}},{key:"removeChild",value:function(t){var n=this._children.indexOf(t);return this._children.splice(n,1),n}},{key:"remove",value:function(){var t,n=this._parent.removeChild(this),e=(0,Y.Z)(this._children);try{for(e.s();!(t=e.n()).done;){var r=t.value;r._parent=this._parent,this._parent.addChild(r,n++)}}catch(i){e.e(i)}finally{e.f()}}},{key:"insertAsParentOf",value:function(t){var n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}},{key:"swapWithParent",value:function(){var t,n=this._parent,e=n.parent,r=(0,Y.Z)(this._children);try{for(r.s();!(t=r.n()).done;){t.value.parent=n}}catch(a){r.e(a)}finally{r.f()}this._children=[],n.removeChild(this);var i=n.parent.removeChild(n);this._parent=e,e.addChild(this,i),n.parent=this}}]),t}(),nl=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;return(0,c.Z)(this,e),(o=n.call(this,t,r)).type=i,o.refCounts=a,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return(0,s.Z)(e,[{key:"clone",value:function(){var t=new this.constructor;return t.debugName="clone_".concat(this.debugName),t._source=this._source,t._name="clone_".concat(this._name),t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(It())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(t){this._source=t}}]),e}(tl),el=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},rl=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).formula=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.formula))}},{key:"merge",value:function(t){for(var n in this.formula=Object.assign({},this.formula),t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);var e,r=(0,Y.Z)(t.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.removeChild(i),i.parent=this}}catch(a){r.e(a)}finally{r.f()}t.remove()}},{key:"removeFormulas",value:function(t){var n,e={},r=(0,Y.Z)(Et(this.formula));try{for(r.s();!(n=r.n()).done;){var i=(0,W.Z)(n.value,2),a=i[0],o=i[1];t.has(o.as)||(e[a]=o)}}catch(u){r.e(u)}finally{r.f()}this.formula=e}},{key:"producedFields",value:function(){return new Set(Ot(this.formula).map((function(t){return t.as})))}},{key:"dependentFields",value:function(){return new Set(Ot(this.formula).map((function(t){return t.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(lt(this.formula))}},{key:"assemble",value:function(){var t,n=[],e=(0,Y.Z)(Ot(this.formula));try{for(e.s();!(t=e.n()).done;){var r=t.value,i=r.field,a=r.as,o=li(r.timeUnit),u=o.unit,c=o.utc,s=el(o,["unit","utc"]);n.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Nt(i),type:"timeunit"},u?{units:oi(u)}:{}),c?{timezone:"utc"}:{}),s),{as:[a,"".concat(a,"_end")]}))}}catch(l){e.e(l)}finally{e.f()}return n}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef((function(t,n){var e=n.field,r=n.timeUnit;if(r){var i=_o(n,{forAs:!0});t[lt({as:i,field:e,timeUnit:r})]={as:i,field:e,timeUnit:r}}return t}),{});return kt(r)?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n){var r=Object.assign({},n),i=r.timeUnit,a=el(r,["timeUnit"]),o=li(i),u=Object.assign(Object.assign({},a),{timeUnit:o});return new e(t,(0,ye.Z)({},lt(u),u))}}]),e}(tl),il=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},al="_tuple_fields",ol=(0,s.Z)((function t(){(0,c.Z)(this,t);for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1})),ul={defined:function(){return!0},parse:function(t,n,e){var r,i=n.name,a=null!==(r=n.project)&&void 0!==r?r:n.project=new ol,o={},u={},c=new Set,s=function(t,n){for(var e="visual"===n?t.channel:t.field,r=Dt("".concat(i,"_").concat(e)),a=1;c.has(r);a++)r=Dt("".concat(i,"_").concat(e,"_").concat(a));return c.add(r),(0,ye.Z)({},n,r)},l=n.type,f=t.config.selection[l],h=void 0!==e.value?(0,H.IX)(e.value):null,d=(0,H.Kn)(e.select)?e.select:{},p=d.fields,v=d.encodings;if(!p&&!v&&h){var g,m=(0,Y.Z)(h);try{for(m.s();!(g=m.n()).done;){var y=g.value;if((0,H.Kn)(y)){var b,x=(0,Y.Z)(Mt(y));try{for(x.s();!(b=x.n()).done;){var _=b.value;Bn[_]?(v||(v=[])).push(_):"interval"===l?(Xr('Interval selections should be initialized using "x" and/or "y" keys.'),v=f.encodings):(p||(p=[])).push(_)}}catch(Z){x.e(Z)}finally{x.f()}}}}catch(Z){m.e(Z)}finally{m.f()}}p||v||(v=f.encodings,"fields"in f&&(p=f.fields));var w,k=(0,Y.Z)(null!==v&&void 0!==v?v:[]);try{for(k.s();!(w=k.n()).done;){var M=w.value,O=t.fieldDef(M);if(O){var E=O.field;if(O.aggregate){Xr(vr(M,O.aggregate));continue}if(!E){Xr(pr(M));continue}if(O.timeUnit){E=t.vgField(M);var S={timeUnit:O.timeUnit,as:E,field:O.field};u[lt(S)]=S}if(!o[E]){var D="E";if("interval"===l)qi(t.getScaleComponent(M).get("type"))&&(D="R");else O.bin&&(D="R-RE");var C={field:E,channel:M,type:D};C.signals=Object.assign(Object.assign({},s(C,"data")),s(C,"visual")),a.items.push(o[E]=C),a.hasField[E]=a.hasChannel[M]=o[E],a.hasSelectionId=a.hasSelectionId||E===Iu}}else Xr(pr(M))}}catch(Z){k.e(Z)}finally{k.f()}var A,T=(0,Y.Z)(null!==p&&void 0!==p?p:[]);try{for(T.s();!(A=T.n()).done;){var F=A.value;if(!a.hasField[F]){var j={type:"E",field:F};j.signals=Object.assign({},s(j,"data")),a.items.push(j),a.hasField[F]=j,a.hasSelectionId=a.hasSelectionId||F===Iu}}}catch(Z){T.e(Z)}finally{T.f()}h&&(n.init=h.map((function(t){return a.items.map((function(n){return(0,H.Kn)(t)?void 0!==t[n.channel]?t[n.channel]:t[n.field]:t}))}))),kt(u)||(a.timeUnit=new rl(null,u))},signals:function(t,n,e){var r=n.name+al;return e.filter((function(t){return t.name===r})).length>0||n.project.hasSelectionId?e:e.concat({name:r,value:n.project.items.map((function(t){t.signals,t.hasLegend;var n=il(t,["signals","hasLegend"]);return n.field=Nt(n.field),n}))})}},cl=ul,sl={defined:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,n){var e,r=n.scales=[],i=(0,Y.Z)(n.project.items);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=a.channel;if(de(o)){var u=t.getScaleComponent(o),c=u?u.get("type"):void 0;u&&qi(c)?(u.set("selectionExtent",{param:n.name,field:a.field},!0),r.push(a)):Xr("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}}}catch(s){i.e(s)}finally{i.f()}},topLevelSignals:function(t,n,e){var r=n.scales.filter((function(t){return 0===e.filter((function(n){return n.name===t.signals.data})).length}));if(!t.parent||hl(t)||0===r.length)return e;var i=e.filter((function(t){return t.name===n.name}))[0],a=i.update;if(a.indexOf(pf)>=0)i.update="{".concat(r.map((function(t){return"".concat((0,H.m8)(Nt(t.field)),": ").concat(t.signals.data)})).join(", "),"}");else{var o,u=(0,Y.Z)(r);try{for(u.s();!(o=u.n()).done;){var c=o.value,s="".concat((0,H.m8)(Nt(c.field)),": ").concat(c.signals.data);a.includes(s)||(a="".concat(a.substring(0,a.length-1),", ").concat(s,"}"))}}catch(l){u.e(l)}finally{u.f()}i.update=a}return e.concat(r.map((function(t){return{name:t.signals.data}})))},signals:function(t,n,e){if(t.parent&&!hl(t)){var r,i=(0,Y.Z)(n.scales);try{var a=function(){var t=r.value,n=e.filter((function(n){return n.name===t.signals.data}))[0];n.push="outer",delete n.value,delete n.update};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return e}},ll=sl;function fl(t,n){var e=(0,H.m8)(t.scaleName(n));return"domain(".concat(e,")")}function hl(t){var n;return t.parent&&sp(t.parent)&&(null!==(n=!t.parent.parent)&&void 0!==n?n:hl(t.parent.parent))}var dl=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},pl="_brush",vl="_scale_trigger",gl={defined:function(t){return"interval"===t.type},signals:function(t,n,e){var r=n.name,i=r+al,a=ll.defined(n),o=n.init?n.init[0]:null,c=[],s=[];if(n.translate&&!a){var l="!event.item || event.item.mark.name !== ".concat((0,H.m8)(r+pl));yl(n,(function(t,n){var e,r,i=(0,H.IX)(null!==(e=(r=n.between[0]).filter)&&void 0!==e?e:r.filter=[]);return i.includes(l)||i.push(l),t}))}n.project.items.forEach((function(r,i){var a=r.channel;if(a===Vt||a===Kt){var l=o?o[i]:null,f=function(t,n,e,r){var i=e.channel,a=e.signals.visual,o=e.signals.data,c=ll.defined(n),s=(0,H.m8)(t.scaleName(i)),l=t.getScaleComponent(i),f=l?l.get("type"):void 0,h=function(t){return"scale(".concat(s,", ").concat(t,")")},d=t.getSizeSignalRef(i===Vt?"width":"height").signal,p="".concat(i,"(unit)"),v=yl(n,(function(t,n){return[].concat((0,u.Z)(t),[{events:n.between[0],update:"[".concat(p,", ").concat(p,"]")},{events:n,update:"[".concat(a,"[0], clamp(").concat(p,", 0, ").concat(d,")]")}])}));return v.push({events:{signal:n.name+vl},update:qi(f)?"[".concat(h("".concat(o,"[0]")),", ").concat(h("".concat(o,"[1]")),"]"):"[0, 0]"}),c?[{name:o,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:Vs(r,!0,h)}:{value:[]}),{on:v}),Object.assign(Object.assign({name:o},r?{init:Vs(r)}:{}),{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(s,", ").concat(a,")")}]})]}(t,n,r,l),h=r.signals.data,d=r.signals.visual,p=(0,H.m8)(t.scaleName(a)),v=qi(t.getScaleComponent(a).get("type"))?"+":"";e.push.apply(e,(0,u.Z)(f)),c.push(h),s.push({scaleName:t.scaleName(a),expr:"(!isArray(".concat(h,") || ")+"(".concat(v,"invert(").concat(p,", ").concat(d,")[0] === ").concat(v).concat(h,"[0] && ")+"".concat(v,"invert(").concat(p,", ").concat(d,")[1] === ").concat(v).concat(h,"[1]))")})}else Xr("Interval selections only support x and y encoding channels.")})),!a&&s.length&&e.push({name:r+vl,value:{},on:[{events:s.map((function(t){return{scale:t.scaleName}})),update:"".concat(s.map((function(t){return t.expr})).join(" && ")," ? ").concat(r+vl," : {}")}]});var f="unit: ".concat(gf(t),", fields: ").concat(i,", values");return e.concat(Object.assign(Object.assign({name:r+hf},o?{init:"{".concat(f,": ").concat(Vs(o),"}")}:{}),c.length?{on:[{events:[{signal:c.join(" || ")}],update:"".concat(c.join(" && ")," ? {").concat(f,": [").concat(c,"]} : null")}]}:{}))},marks:function(t,n,e){var r=n.name,i=n.project.hasChannel,a=i.x,o=i.y,c=null===a||void 0===a?void 0:a.signals.visual,s=null===o||void 0===o?void 0:o.signals.visual,l="data(".concat((0,H.m8)(n.name+ff),")");if(ll.defined(n)||!a&&!o)return e;var f={x:void 0!==a?{signal:"".concat(c,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(c,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===n.resolve){var h,d=(0,Y.Z)(Mt(f));try{for(d.s();!(h=d.n()).done;){var p=h.value;f[p]=[Object.assign({test:"".concat(l,".length && ").concat(l,"[0].unit === ").concat(gf(t))},f[p]),{value:0}]}}catch(_){d.e(_)}finally{d.f()}}var v=n.mark,g=v.fill,m=v.fillOpacity,y=v.cursor,b=dl(v,["fill","fillOpacity","cursor"]),x=Mt(b).reduce((function(t,n){return t[n]=[{test:[void 0!==a&&"".concat(c,"[0] !== ").concat(c,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(t){return t})).join(" && "),value:b[n]},{value:null}],t}),{});return[{name:"".concat(r+pl,"_bg"),type:"rect",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:m}},update:f}}].concat((0,u.Z)(e),[{name:r+pl,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},y?{cursor:{value:y}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},f),x)}}])}},ml=gl;function yl(t,n){return t.events.reduce((function(t,e){return e.between?n(t,e):(Xr("".concat(e," is not an ordered event stream for interval selections.")),t)}),[])}var bl={defined:function(t){return"point"===t.type},signals:function(t,n,e){var r,i=n.name,a=i+al,o=n.project,u="(item().isVoronoi ? datum.datum : datum)",c=Ot(null!==(r=t.component.selection)&&void 0!==r?r:{}).reduce((function(t,n){return"interval"===n.type?t.concat(n.name+pl):t}),[]).map((function(t){return"indexof(item().mark.name, '".concat(t,"') < 0")})).join(" && "),s="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0".concat(c?" && ".concat(c):""),l="unit: ".concat(gf(t),", ");if(n.project.hasSelectionId)l+="".concat(Iu,": ").concat(u,"[").concat((0,H.m8)(Iu),"]");else{var f=o.items.map((function(n){var e=t.fieldDef(n.channel);return(null===e||void 0===e?void 0:e.bin)?"[".concat(u,"[").concat((0,H.m8)(t.vgField(n.channel,{})),"], ")+"".concat(u,"[").concat((0,H.m8)(t.vgField(n.channel,{binSuffix:"end"})),"]]"):"".concat(u,"[").concat((0,H.m8)(n.field),"]")})).join(", ");l+="fields: ".concat(a,", values: [").concat(f,"]")}var h=n.events;return e.concat([{name:i+hf,on:h?[{events:h,update:"".concat(s," ? {").concat(l,"} : null"),force:!0}]:[]}])}},xl=bl;function _l(t,n,e,r){var i=io(n)&&n.condition,a=r(n);if(i){var o=(0,H.IX)(i).map((function(n){var e=r(n);if(function(t){return t.param}(n)){var i=n.param,a=n.empty,o=Mf(t,{param:i,empty:a});return Object.assign({test:o},e)}var u=Ef(t,n.test);return Object.assign({test:u},e)}));return(0,ye.Z)({},e,[].concat((0,u.Z)(o),(0,u.Z)(void 0!==a?[a]:[])))}return void 0!==a?(0,ye.Z)({},e,a):{}}function wl(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",e=t.encoding[n];return _l(t,e,n,(function(n){return kl(n,t.config)}))}function kl(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(t){if(vo(t))return Je(t.value);if(ho(t)){var r=Co(t);return Za({fieldOrDatumDef:t,format:r.format,formatType:r.formatType,expr:e,config:n})}}}function Ml(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.encoding,r=t.markDef,i=t.config,a=t.stack,o=e.tooltip;if((0,H.kJ)(o))return{tooltip:El({tooltip:o},a,i,n)};var u=n.reactiveGeom?"datum.datum":"datum";return _l(t,o,"tooltip",(function(t){var o=kl(t,i,u);if(o)return o;if(null!==t){var c=Qe("tooltip",r,i);return!0===c&&(c={content:"encoding"}),(0,H.HD)(c)?{value:c}:(0,H.Kn)(c)?Re(c)?c:"encoding"===c.content?El(e,a,i,n):{signal:u}:void 0}}))}function Ol(t,n,e){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).reactiveGeom,i={},a=r?"datum.datum":"datum",o=[];function u(r,u){var c,s=Yn(u),l=po(r)?r:Object.assign(Object.assign({},r),{type:t[s].type}),f=l.title||Do(l,e),h=(0,H.IX)(f).join(", ");if(re(u)){var d="x"===u?"x2":"y2",p=Ao(t[d]);if(Ae(l.bin)&&p){var v=_o(l,{expr:a}),g=_o(p,{expr:a}),m=Co(l);c=Ba(v,g,m.format,m.formatType,e),i[d]=!0}}if((re(u)||u===on||u===rn)&&n&&n.fieldChannel===u&&"normalize"===n.offset){var y=Co(l);c=Za({fieldOrDatumDef:l,format:y.format,formatType:y.formatType,expr:a,config:e,normalizeStack:!0}).signal}null!==c&&void 0!==c||(c=kl(l,e,a).signal),o.push({channel:u,key:h,value:c})}au(t,(function(t,n){uo(t)?u(t,n):ao(t)&&u(t.condition,n)}));for(var c={},s=0,l=o;s<l.length;s++){var f=l[s],h=f.channel,d=f.key,p=f.value;i[h]||c[d]||(c[d]=p)}return c}function El(t,n,e){var r=Ol(t,n,e,{reactiveGeom:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).reactiveGeom}),i=Et(r).map((function(t){var n=(0,W.Z)(t,2),e=n[0],r=n[1];return'"'.concat(e,'": ').concat(r)}));return i.length>0?{signal:"{".concat(i.join(", "),"}")}:void 0}function Sl(t){var n=Qe("aria",t.markDef,t.config);return!1===n?{}:Object.assign(Object.assign(Object.assign({},n?{aria:n}:{}),function(t){var n=t.mark,e=t.markDef,r=t.config;if(!1===r.aria)return{};var i=Qe("ariaRoleDescription",e,r);if(null!=i)return{ariaRoleDescription:{value:i}};return n in qe?{}:{ariaRoleDescription:{value:n}}}(t)),function(t){var n=t.encoding,e=t.markDef,r=t.config,i=t.stack,a=n.description;if(a)return _l(t,a,"description",(function(n){return kl(n,t.config)}));var o=Qe("description",e,r);if(null!=o)return{description:Je(o)};if(!1===r.aria)return{};var u=Ol(n,i,r);if(kt(u))return;return{description:{signal:Et(u).map((function(t,n){var e=(0,W.Z)(t,2),r=e[0],i=e[1];return'"'.concat(n>0?"; ":"").concat(r,': " + (').concat(i,")")})).join(" + ")}}}(t))}function Dl(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.markDef,i=n.encoding,a=n.config,o=e.vgChannel,u=e.defaultRef,c=e.defaultValue;void 0===u&&(null!==c&&void 0!==c||(c=Qe(t,r,a,{vgChannel:o,ignoreVgConfig:!0})),void 0!==c&&(u=Je(c)));var s=i[t];return _l(n,s,null!==o&&void 0!==o?o:t,(function(e){return Ca({channel:t,channelDef:e,markDef:r,config:a,scaleName:n.scaleName(t),scale:n.getScaleComponent(t),stack:null,defaultRef:u})}))}function Cl(t){var n,e,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},o=t.markDef,u=t.encoding,c=t.config,s=o.type,l=null!==(n=a.filled)&&void 0!==n?n:Qe("filled",o,c),f=ht(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,h=null!==(r=null!==(e=Qe(!0===l?"color":void 0,o,c,{vgChannel:"fill"}))&&void 0!==e?e:c.mark[!0===l&&"color"])&&void 0!==r?r:f,d=null!==(i=Qe(!1===l?"color":void 0,o,c,{vgChannel:"stroke"}))&&void 0!==i?i:c.mark[!1===l&&"color"],p=l?"fill":"stroke",v=Object.assign(Object.assign({},h?{fill:Je(h)}:{}),d?{stroke:Je(d)}:{});return o.color&&(l?o.fill:o.stroke)&&Xr(Mr("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},v),Dl("color",t,{vgChannel:p,defaultValue:l?h:d})),Dl("fill",t,{defaultValue:u.fill?h:void 0})),Dl("stroke",t,{defaultValue:u.stroke?d:void 0}))}function Al(t){var n=t.channel,e=t.markDef,r=t.encoding,i=void 0===r?{}:r,a=t.model,o=t.bandPosition,u="".concat(n,"Offset"),c=e[u],s=i[u];if(("xOffset"===u||"yOffset"===u)&&s)return{offsetType:"encoding",offset:Ca({channel:u,channelDef:s,markDef:e,config:null===a||void 0===a?void 0:a.config,scaleName:a.scaleName(u),scale:a.getScaleComponent(u),stack:null,defaultRef:Je(c),bandPosition:o})};var l=e[u];return l?{offsetType:"visual",offset:l}:{}}function Tl(t,n,e){var r=e.defaultPos,i=e.vgChannel,a=n.encoding,o=n.markDef,u=n.config,c=n.stack,s=a[t],l=a[Gn(t)],f=n.scaleName(t),h=n.getScaleComponent(t),d=Al({channel:t,markDef:o,encoding:a,model:n,bandPosition:.5}),p=d.offset,v=d.offsetType,g=Fl({model:n,defaultPos:r,channel:t,scaleName:f,scale:h}),m=!s&&re(t)&&(a.latitude||a.longitude)?{field:n.getName(t)}:function(t){var n=t.channel,e=t.channelDef,r=t.scaleName,i=t.stack,a=t.offset,o=t.markDef;if(ho(e)&&i&&n===i.fieldChannel){if(uo(e)){var u=e.bandPosition;if(void 0!==u||"text"!==o.type||"radius"!==n&&"theta"!==n||(u=.5),void 0!==u)return Da({scaleName:r,fieldOrDatumDef:e,startSuffix:"start",bandPosition:u,offset:a})}return Sa(e,r,{suffix:"end"},{offset:a})}return Ma(t)}({channel:t,channelDef:s,channel2Def:l,markDef:o,config:u,scaleName:f,scale:h,stack:c,offset:p,defaultRef:g,bandPosition:"encoding"===v?0:void 0});return m?(0,ye.Z)({},i||t,m):void 0}function Fl(t){var n=t.model,e=t.defaultPos,r=t.channel,i=t.scaleName,a=t.scale,o=n.markDef,u=n.config;return function(){var t=Yn(r),c=Xn(r),s=Qe(r,o,u,{vgChannel:c});if(void 0!==s)return Aa(r,s);switch(e){case"zeroOrMin":case"zeroOrMax":if(i){var l=a.get("type");if(ht([Ti.LOG,Ti.TIME,Ti.UTC],l));else if(a.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===e)return"y"===t?{field:{group:"height"}}:{value:0};switch(t){case"radius":return{signal:"min(".concat(n.width.signal,",").concat(n.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=n[Jn(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var jl={left:"x",center:"xc",right:"x2"},Zl={top:"y",middle:"yc",bottom:"y2"};function Nl(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===t||"theta"===t)return Xn(t);var i,a="x"===t?"align":"baseline",o=Qe(a,n,e);return Re(o)?(Xr(function(t){return"The ".concat(t," for range marks cannot be an expression")}(a)),i=void 0):i=o,"x"===t?jl[i||("top"===r?"left":"center")]:Zl[i||r]}function zl(t,n,e){var r=e.defaultPos,i=e.defaultPos2;return e.range?Ul(t,n,{defaultPos:r,defaultPos2:i}):Tl(t,n,{defaultPos:r})}function Ul(t,n,e){var r=e.defaultPos,i=e.defaultPos2,a=n.markDef,o=n.config,u=Gn(t),c=Jn(t),s=function(t,n,e){var r,i=t.encoding,a=t.mark,o=t.markDef,u=t.stack,c=t.config,s=Yn(e),l=Jn(e),f=Xn(e),h=i[s],d=t.scaleName(s),p=t.getScaleComponent(s),v=Al(e in i||e in o?{channel:e,markDef:o,encoding:i,model:t}:{channel:s,markDef:o,encoding:i,model:t}),g=v.offset;if(!h&&("x2"===e||"y2"===e)&&(i.latitude||i.longitude)){var m=Jn(e),y=t.markDef[m];return null!=y?(0,ye.Z)({},m,{value:y}):(0,ye.Z)({},f,{field:t.getName(e)})}var b=function(t){var n=t.channel,e=t.channelDef,r=t.channel2Def,i=t.markDef,a=t.config,o=t.scaleName,u=t.scale,c=t.stack,s=t.offset,l=t.defaultRef;if(ho(e)&&c&&n.charAt(0)===c.fieldChannel.charAt(0))return Sa(e,o,{suffix:"start"},{offset:s});return Ma({channel:n,channelDef:r,scaleName:o,scale:u,stack:c,markDef:i,config:a,offset:s,defaultRef:l})}({channel:e,channelDef:h,channel2Def:i[e],markDef:o,config:c,scaleName:d,scale:p,stack:u,offset:g,defaultRef:void 0});if(void 0!==b)return(0,ye.Z)({},f,b);return Pl(e,o)||Pl(e,(r={},(0,ye.Z)(r,e,nr(e,o,c.style)),(0,ye.Z)(r,l,nr(l,o,c.style)),r))||Pl(e,c[a])||Pl(e,c.mark)||(0,ye.Z)({},f,Fl({model:t,defaultPos:n,channel:e,scaleName:d,scale:p})())}(n,i,u),l=s[c]?Nl(t,a,o):Xn(t);return Object.assign(Object.assign({},Tl(t,n,{defaultPos:r,vgChannel:l})),s)}function Pl(t,n){var e=Jn(t),r=Xn(t);if(void 0!==n[r])return(0,ye.Z)({},r,Aa(t,n[r]));if(void 0!==n[t])return(0,ye.Z)({},r,Aa(t,n[t]));if(n[e]){var i=n[e];if(!xa(i))return(0,ye.Z)({},e,Aa(t,i));Xr(function(t){return"Position range does not support relative band size for ".concat(t,".")}(e))}}function Rl(t,n){var e,r,i=t.config,a=t.encoding,o=t.markDef,u=o.type,c=Gn(n),s=Jn(n),l=a[n],f=a[c],h=t.getScaleComponent(n),d=h?h.get("type"):void 0,p=o.orient,v=null!==(r=null!==(e=a[s])&&void 0!==e?e:a.size)&&void 0!==r?r:Qe("size",o,i,{vgChannel:s}),g="bar"===u&&("x"===n?"vertical"===p:"horizontal"===p);return!uo(l)||!(Ce(l.bin)||Ae(l.bin)||l.timeUnit&&!f)||v&&!xa(v)||Bi(d)?(ho(l)&&Bi(d)||g)&&!f?function(t,n,e){var r,i=e.markDef,a=e.encoding,o=e.config,u=e.stack,c=i.orient,s=e.scaleName(n),l=e.getScaleComponent(n),f=Jn(n),h=Gn(n),d=function(t){switch(t){case Vt:return"xOffset";case Kt:return"yOffset";case Qt:return"x2Offset";case tn:return"y2Offset";case on:return"thetaOffset";case rn:return"radiusOffset";case un:return"theta2Offset";case an:return"radius2Offset"}}(n),p=e.scaleName(d),v="horizontal"===c&&"y"===n||"vertical"===c&&"x"===n;(a.size||i.size)&&(v?r=Dl("size",e,{vgChannel:f,defaultRef:Je(i.size)}):Xr(function(t){return'Cannot apply size to non-oriented mark "'.concat(t,'".')}(i.type)));var g=!!r,m=eo({channel:n,fieldDef:t,markDef:i,config:o,scaleType:null===l||void 0===l?void 0:l.get("type"),useVlSizeChannel:v});r=r||(0,ye.Z)({},f,function(t,n,e,r,i){if(xa(i)){if(!e)return{mult:i.band,field:{group:t}};var a=e.get("type");if("band"===a){var o="bandwidth('".concat(n,"')");return 1!==i.band&&(o="".concat(i.band," * ").concat(o)),{signal:"max(0.25, ".concat(o,")")}}1!==i.band&&(Xr(function(t){return"Cannot use the relative band size with ".concat(t," scale.")}(a)),i=void 0)}else{if(Re(i))return i;if(i)return{value:i}}if(e){var u=e.get("range");if(Le(u)&&(0,H.hj)(u.step))return{value:u.step-2}}var c=rc(r.view,t);return{value:c-2}}(f,p||s,l,o,m));var y="band"===(null===l||void 0===l?void 0:l.get("type"))&&xa(m)&&!g?"top":"middle",b=Nl(n,i,o,y),x="xc"===b||"yc"===b,_=Al({channel:n,markDef:i,encoding:a,model:e,bandPosition:x?.5:0}),w=_.offset,k=_.offsetType,M=Ma({channel:n,channelDef:t,markDef:i,config:o,scaleName:s,scale:l,stack:u,offset:w,defaultRef:Fl({model:e,defaultPos:"mid",channel:n,scaleName:s,scale:l}),bandPosition:x?"encoding"===k?0:.5:Re(m)?{signal:"(1-".concat(m,")/2")}:xa(m)?(1-m.band)/2:0});if(f)return Object.assign((0,ye.Z)({},b,M),r);var O,E=Xn(h),S=r[f],D=w?Object.assign(Object.assign({},S),{offset:w}):S;return O={},(0,ye.Z)(O,b,M),(0,ye.Z)(O,E,(0,H.kJ)(M)?[M[0],Object.assign(Object.assign({},M[1]),{offset:D})]:Object.assign(Object.assign({},M),{offset:D})),O}(l,n,t):Ul(n,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function(t){var n,e,r,i,a=t.fieldDef,o=t.fieldDef2,u=t.channel,c=t.model,s=c.config,l=c.markDef,f=c.encoding,h=c.getScaleComponent(u),d=c.scaleName(u),p=h?h.get("type"):void 0,v=h.get("reverse"),g=eo({channel:u,fieldDef:a,markDef:l,config:s,scaleType:p}),m=null===(n=c.component.axes[u])||void 0===n?void 0:n[0],y=null!==(e=null===m||void 0===m?void 0:m.get("translate"))&&void 0!==e?e:.5,b=re(u)&&null!==(r=Qe("binSpacing",l,s))&&void 0!==r?r:0,x=Gn(u),_=Xn(u),w=Xn(x),k=Al({channel:u,markDef:l,encoding:f,model:c,bandPosition:0}),M=k.offset,O=Re(g)?{signal:"(1-".concat(g.signal,")/2")}:xa(g)?(1-g.band)/2:.5;if(Ce(a.bin)||a.timeUnit)return i={},(0,ye.Z)(i,w,Il({fieldDef:a,scaleName:d,bandPosition:O,offset:Ll(x,b,v,y,M)})),(0,ye.Z)(i,_,Il({fieldDef:a,scaleName:d,bandPosition:Re(O)?{signal:"1-".concat(O.signal)}:1-O,offset:Ll(u,b,v,y,M)})),i;if(Ae(a.bin)){var E,S,D=Sa(a,d,{},{offset:Ll(x,b,v,y,M)});if(uo(o))return E={},(0,ye.Z)(E,w,D),(0,ye.Z)(E,_,Sa(o,d,{},{offset:Ll(u,b,v,y,M)})),E;if(Te(a.bin)&&a.bin.step)return S={},(0,ye.Z)(S,w,D),(0,ye.Z)(S,_,{signal:'scale("'.concat(d,'", ').concat(_o(a,{expr:"datum"})," + ").concat(a.bin.step,")"),offset:Ll(u,b,v,y,M)}),S}return void Xr(qr(x))}({fieldDef:l,fieldDef2:f,channel:n,model:t})}function Ll(t,n,e,r,i){if(Fn(t))return 0;var a="x"===t||"y2"===t?-n/2:n/2;if(Re(e)||Re(i)||Re(r)){var o=Ve(e),u=Ve(i),c=Ve(r);return{signal:(c?"".concat(c," + "):"")+(o?"(".concat(o," ? -1 : 1) * "):"")+(u?"(".concat(u," + ").concat(a,")"):a)}}return i=i||0,r+(e?-i-a:+i+a)}function Il(t){var n=t.fieldDef;return Da({scaleName:t.scaleName,fieldOrDatumDef:n,bandPosition:t.bandPosition,offset:t.offset})}var Bl=new Set(["aria","width","height"]);function ql(t,n){var e="include"===n.color?Cl(t):{},r=e.fill,i=void 0===r?void 0:r,a=e.stroke,o=void 0===a?void 0:a;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(t,n){return Be.reduce((function(e,r){return Bl.has(r)||void 0===t[r]||"ignore"===n[r]||(e[r]=Je(t[r])),e}),{})}(t.markDef,n)),Hl(t,"fill",i)),Hl(t,"stroke",o)),Dl("opacity",t)),Dl("fillOpacity",t)),Dl("strokeOpacity",t)),Dl("strokeWidth",t)),Dl("strokeDash",t)),function(t){var n=t.encoding,e=t.mark,r=n.order;return!da(e)&&vo(r)?_l(t,r,"zindex",(function(t){return Je(t.value)})):{}}(t)),Ml(t)),wl(t,"href")),Sl(t))}function Hl(t,n,e){var r=t.config,i=t.mark;if("hide"===Qe("invalid",t.markDef,r)&&e&&!da(i)){var a=function(t,n){var e=n.invalid,r=void 0!==e&&e,i=n.channels.reduce((function(n,e){var r=t.getScaleComponent(e);if(r){var i=r.get("type"),a=t.vgField(e,{expr:"datum"});a&&qi(i)&&(n[a]=!0)}return n}),{}),a=Mt(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(t){return Ea(t,r)})).join(" ".concat(o," "))}return}(t,{invalid:!0,channels:he});if(a)return(0,ye.Z)({},n,[{test:a,value:null}].concat((0,u.Z)((0,H.IX)(e))))}return e?(0,ye.Z)({},n,e):{}}function Wl(t){var n=t.config;if(Qe("invalid",t.markDef,n)){var e=function(t,n){var e=n.invalid,r=void 0!==e&&e,i=n.channels.reduce((function(n,e){var r,i=t.getScaleComponent(e);if(i){var a=i.get("type"),o=t.vgField(e,{expr:"datum",binSuffix:(null===(r=t.stack)||void 0===r?void 0:r.impute)?"mid":void 0});o&&qi(a)&&(n[o]=!0)}return n}),{}),a=Mt(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(t){return Ea(t,r)})).join(" ".concat(o," "))}return}(t,{channels:ee});if(e)return{defined:{signal:e}}}return{}}function Yl(t,n){if(void 0!==n)return(0,ye.Z)({},t,Je(n))}var Xl="voronoi",Gl={defined:function(t){return"point"===t.type&&t.nearest},parse:function(t,n){if(n.events){var e,r=(0,Y.Z)(n.events);try{for(r.s();!(e=r.n()).done;){e.value.markname=t.getName(Xl)}}catch(i){r.e(i)}finally{r.f()}}},marks:function(t,n,e){var r=n.project.hasChannel,i=r.x,a=r.y,o=t.mark;if(da(o))return Xr(function(t){return'The "nearest" transform is not supported for '.concat(t," marks.")}(o)),e;var u={name:t.getName(Xl),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Ml(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!a?"datum.datum.x || 0":"0"},y:{expr:a||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},c=0,s=!1;return e.forEach((function(n,e){var r,i=null!==(r=n.name)&&void 0!==r?r:"";i===t.component.mark[0].name?c=e:i.indexOf(Xl)>=0&&(s=!0)})),s||e.splice(c+1,0,u),e}},Jl=Gl,$l={defined:function(t){return"point"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!qu(t.bind)},parse:function(t,n,e){return yf(n,e)},topLevelSignals:function(t,n,e){var r=n.name,i=n.project,a=n.bind,o=n.init&&n.init[0],u=Jl.defined(n)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(t,i){var c,s,l=Dt("".concat(r,"_").concat(t.field));e.filter((function(t){return t.name===l})).length||e.unshift(Object.assign(Object.assign({name:l},o?{init:Vs(o[i])}:{value:null}),{on:n.events?[{events:n.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat((0,H.m8)(t.field),"] : null")}]:[],bind:null!==(s=null!==(c=a[t.field])&&void 0!==c?c:a[t.channel])&&void 0!==s?s:a}))})),e},signals:function(t,n,e){var r=n.name,i=n.project,a=e.filter((function(t){return t.name===r+hf}))[0],o=r+al,u=i.items.map((function(t){return Dt("".concat(r,"_").concat(t.field))})),c=u.map((function(t){return"".concat(t," !== null")})).join(" && ");return u.length&&(a.update="".concat(c," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete a.value,delete a.on,e}},Vl=$l,Kl="_toggle",Ql={defined:function(t){return"point"===t.type&&!!t.toggle},signals:function(t,n,e){return e.concat({name:n.name+Kl,value:!1,on:[{events:n.events,update:n.toggle}]})},modifyExpr:function(t,n){var e=n.name+hf,r=n.name+Kl;return"".concat(r," ? null : ").concat(e,", ")+("global"===n.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(gf(t),"}, "))+"".concat(r," ? ").concat(e," : null")}},tf={defined:function(t){return void 0!==t.clear&&!1!==t.clear},parse:function(t,n){n.clear&&(n.clear=(0,H.HD)(n.clear)?(0,Js.r)(n.clear,"view"):n.clear)},topLevelSignals:function(t,n,e){if(Vl.defined(n)){var r,i=(0,Y.Z)(n.project.items);try{var a=function(){var t=r.value,i=e.findIndex((function(e){return e.name===Dt("".concat(n.name,"_").concat(t.field))}));-1!==i&&e[i].on.push({events:n.clear,update:"null"})};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return e},signals:function(t,n,e){function r(t,r){-1!==t&&e[t].on&&e[t].on.push({events:n.clear,update:r})}if("interval"===n.type){var i,a=(0,Y.Z)(n.project.items);try{var o=function(){var t=i.value,n=e.findIndex((function(n){return n.name===t.signals.visual}));(r(n,"[0, 0]"),-1===n)&&r(e.findIndex((function(n){return n.name===t.signals.data})),"null")};for(a.s();!(i=a.n()).done;)o()}catch(c){a.e(c)}finally{a.f()}}else{var u=e.findIndex((function(t){return t.name===n.name+hf}));r(u,"null"),Ql.defined(n)&&r(u=e.findIndex((function(t){return t.name===n.name+Kl})),"false")}return e}},nf={defined:function(t){var n="global"===t.resolve&&t.bind&&qu(t.bind),e=1===t.project.items.length&&t.project.items[0].field!==Iu;return n&&!e&&Xr("Legend bindings are only supported for selections over an individual field or encoding channel."),n&&e},parse:function(t,n,e){var r,i=at(e);if(i.select=(0,H.HD)(i.select)?{type:i.select,toggle:n.toggle}:Object.assign(Object.assign({},i.select),{toggle:n.toggle}),yf(n,i),(0,B.isObject)(e.select)&&(e.select.on||e.select.clear)){var a,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=(0,Y.Z)(n.events);try{for(u.s();!(a=u.n()).done;){var c=a.value;c.filter=(0,H.IX)(null!==(r=c.filter)&&void 0!==r?r:[]),c.filter.includes(o)||c.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var s=Hu(n.bind)?n.bind.legend:"click",l=(0,H.HD)(s)?(0,Js.r)(s,"view"):(0,H.IX)(s);n.bind={legend:{merge:l}}},topLevelSignals:function(t,n,e){var r,i=n.name,a=Hu(n.bind)&&n.bind.legend,o=function(t){return function(n){var e=at(n);return e.markname=t,e}},u=(0,Y.Z)(n.project.items);try{var c=function(){var t=r.value;if(!t.hasLegend)return"continue";var u="".concat(Dt(t.field),"_legend"),c="".concat(i,"_").concat(u);if(0===e.filter((function(t){return t.name===c})).length){var s=a.merge.map(o("".concat(u,"_symbols"))).concat(a.merge.map(o("".concat(u,"_labels")))).concat(a.merge.map(o("".concat(u,"_entries"))));e.unshift(Object.assign(Object.assign({name:c},n.init?{}:{value:null}),{on:[{events:s,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:a.merge,update:"!event.item || !datum ? null : ".concat(c),force:!0}]}))}};for(u.s();!(r=u.n()).done;)c()}catch(s){u.e(s)}finally{u.f()}return e},signals:function(t,n,e){var r=n.name,i=n.project,a=e.find((function(t){return t.name===r+hf})),o=r+al,u=i.items.filter((function(t){return t.hasLegend})).map((function(t){return Dt("".concat(r,"_").concat(Dt(t.field),"_legend"))})),c=u.map((function(t){return"".concat(t," !== null")})).join(" && "),s="".concat(c," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");n.events&&u.length>0?a.on.push({events:u.map((function(t){return{signal:t}})),update:s}):u.length>0&&(a.update=s,delete a.value,delete a.on);var l=e.find((function(t){return t.name===r+Kl})),f=Hu(n.bind)&&n.bind.legend;return l&&(n.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),e}};var ef="_translate_anchor",rf="_translate_delta",af={defined:function(t){return"interval"===t.type&&t.translate},signals:function(t,n,e){var r=n.name,i=ll.defined(n),a=r+ef,o=n.project.hasChannel,u=o.x,c=o.y,s=(0,Js.r)(n.translate,"scope");return i||(s=s.map((function(t){return t.between[0].markname=r+pl,t}))),e.push({name:a,value:{},on:[{events:s.map((function(t){return t.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: ".concat(i?fl(t,Vt):"slice(".concat(u.signals.visual,")")):"")+(void 0!==c?", extent_y: ".concat(i?fl(t,Kt):"slice(".concat(c.signals.visual,")")):"")+"}"}]},{name:r+rf,value:{},on:[{events:s,update:"{x: ".concat(a,".x - x(unit), y: ").concat(a,".y - y(unit)}")}]}),void 0!==u&&of(t,n,u,"width",e),void 0!==c&&of(t,n,c,"height",e),e}};function of(t,n,e,r,i){var a,o,u=n.name,c=u+ef,s=u+rf,l=e.channel,f=ll.defined(n),h=i.filter((function(t){return t.name===e.signals[f?"data":"visual"]}))[0],d=t.getSizeSignalRef(r).signal,p=t.getScaleComponent(l),v=p.get("type"),g=p.get("reverse"),m=f?l===Vt?g?"":"-":g?"-":"":"",y="".concat(c,".extent_").concat(l),b="".concat(m).concat(s,".").concat(l," / ").concat(f?"".concat(d):"span(".concat(y,")")),x=f?"log"===v?"panLog":"symlog"===v?"panSymlog":"pow"===v?"panPow":"panLinear":"panLinear",_=f?"pow"===v?", ".concat(null!==(a=p.get("exponent"))&&void 0!==a?a:1):"symlog"===v?", ".concat(null!==(o=p.get("constant"))&&void 0!==o?o:1):"":"",w="".concat(x,"(").concat(y,", ").concat(b).concat(_,")");h.on.push({events:{signal:s},update:f?w:"clampRange(".concat(w,", 0, ").concat(d,")")})}var uf="_zoom_anchor",cf="_zoom_delta",sf={defined:function(t){return"interval"===t.type&&t.zoom},signals:function(t,n,e){var r=n.name,i=ll.defined(n),a=r+cf,o=n.project.hasChannel,u=o.x,c=o.y,s=(0,H.m8)(t.scaleName(Vt)),l=(0,H.m8)(t.scaleName(Kt)),f=(0,Js.r)(n.zoom,"scope");return i||(f=f.map((function(t){return t.markname=r+pl,t}))),e.push({name:r+uf,on:[{events:f,update:i?"{"+[s?"x: invert(".concat(s,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(t){return!!t})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&lf(t,n,u,"width",e),void 0!==c&&lf(t,n,c,"height",e),e}};function lf(t,n,e,r,i){var a,o,u=n.name,c=e.channel,s=ll.defined(n),l=i.filter((function(t){return t.name===e.signals[s?"data":"visual"]}))[0],f=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(c),d=h.get("type"),p=s?fl(t,c):l.name,v=u+cf,g="".concat(u).concat(uf,".").concat(c),m=s?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear",y=s?"pow"===d?", ".concat(null!==(a=h.get("exponent"))&&void 0!==a?a:1):"symlog"===d?", ".concat(null!==(o=h.get("constant"))&&void 0!==o?o:1):"":"",b="".concat(m,"(").concat(p,", ").concat(g,", ").concat(v).concat(y,")");l.on.push({events:{signal:v},update:s?b:"clampRange(".concat(b,", 0, ").concat(f,")")})}var ff="_store",hf="_tuple",df="_modify",pf="vlSelectionResolve",vf=[xl,ml,cl,Ql,Vl,ll,nf,tf,af,sf,Jl];function gf(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0}).escape?(0,H.m8)(t.name):t.name,e=function(t){for(var n=t.parent;n&&!up(n);)n=n.parent;return n}(t);if(e){var r,i=e.facet,a=(0,Y.Z)(Pn);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]&&(n+=" + '__facet_".concat(o,"_' + (facet[").concat((0,H.m8)(e.vgField(o)),"])"))}}catch(u){a.e(u)}finally{a.f()}}return n}function mf(t){var n;return Ot(null!==(n=t.component.selection)&&void 0!==n?n:{}).reduce((function(t,n){return t||n.project.hasSelectionId}),!1)}function yf(t,n){!(0,B.isString)(n.select)&&n.select.on||delete t.events,!(0,B.isString)(n.select)&&n.select.clear||delete t.clear,!(0,B.isString)(n.select)&&n.select.toggle||delete t.toggle}var bf=e(12516);function xf(t){var n=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(n.push.apply(n,(0,u.Z)(xf(t.object))),n.push.apply(n,(0,u.Z)(xf(t.property)))),n)}function _f(t){return"MemberExpression"===t.object.type?_f(t.object):"datum"===t.object.name}function wf(t){var n=(0,bf.BJ)(t),e=new Set;return n.visit((function(t){"MemberExpression"===t.type&&_f(t)&&e.add(xf(t).slice(1).join("."))})),e}var kf=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i){var a;return(0,c.Z)(this,e),(a=n.call(this,t)).model=r,a.filter=i,a.expr=Ef(a.model,a.filter,(0,js.Z)(a)),a._dependentFields=wf(a.expr),a}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,this.model,at(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),e}(tl);function Mf(t,n,e){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",a=(0,H.HD)(n)?n:n.param,o=Dt(a),u=(0,H.m8)(o+ff);try{r=t.getSelectionComponent(o,a)}catch(p){return"!!".concat(o)}if(r.project.timeUnit){var c=null!==e&&void 0!==e?e:t.component.data.raw,s=r.project.timeUnit.clone();c.parent?s.insertAsParentOf(c):c.parent=s}var l=r.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f="global"===r.resolve?")":", ".concat((0,H.m8)(r.resolve),")"),h="".concat(l).concat(u,", ").concat(i).concat(f),d="length(data(".concat(u,"))");return!1===n.empty?"".concat(d," && ").concat(h):"!".concat(d," || ").concat(h)}function Of(t,n,e){var r,i=Dt(n),a=e.encoding,o=e.field;try{r=t.getSelectionComponent(i,n)}catch(c){return i}if(a||o){if(a&&!o){var u=r.project.items.filter((function(t){return t.channel===a}));!u.length||u.length>1?(o=r.project.items[0].field,Xr((u.length?"Multiple ":"No ")+"matching ".concat((0,H.m8)(a)," encoding found for selection ").concat((0,H.m8)(e.param),". ")+'Using "field": '.concat((0,H.m8)(o),"."))):o=u[0].field}}else o=r.project.items[0].field,r.project.items.length>1&&Xr('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat((0,H.m8)(o),"."));return"".concat(r.name,"[").concat((0,H.m8)(Nt(o)),"]")}function Ef(t,n,e){return Ct(n,(function(n){return(0,H.HD)(n)?n:function(t){return null===t||void 0===t?void 0:t.param}(n)?Mf(t,n,e):xi(n)}))}var Sf=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Df(t,n,e,r){var i,a,o,u,c;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(a=(u=t.encode)[n])&&void 0!==a||(u[n]={}),null!==(o=(c=t.encode[n]).update)&&void 0!==o||(c.update={}),t.encode[n].update[e]=r}function Cf(t,n,e){var r,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=t.combine(),c=o.disable,s=o.orient,l=o.scale,f=o.labelExpr,h=o.title,d=o.zindex,p=Sf(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!c){for(var v in p){var g=Ho[v],m=p[v];if(g&&g!==n&&"both"!==g)delete p[v];else if(Bo(m)){var y=m.condition,b=Sf(m,["condition"]),x=(0,H.IX)(y),_=Io[v];if(_){var w=_.vgProp;Df(p,_.part,w,[].concat((0,u.Z)(x.map((function(t){var n=t.test,e=Sf(t,["test"]);return Object.assign({test:Ef(null,n)},e)}))),[b])),delete p[v]}else if(null===_){var k={signal:x.map((function(t){var n=t.test,e=Sf(t,["test"]);return"".concat(Ef(null,n)," ? ").concat($e(e)," : ")})).join("")+$e(b)};p[v]=k}}else if(Re(m)){var M=Io[v];if(M){var O=M.vgProp;Df(p,M.part,O,m),delete p[v]}}ht(["labelAlign","labelBaseline"],v)&&null===p[v]&&delete p[v]}if("grid"===n){if(!p.grid)return;if(p.encode){var E=p.encode.grid;p.encode=Object.assign({},E?{grid:E}:{}),kt(p.encode)&&delete p.encode}return Object.assign(Object.assign({scale:l,orient:s},p),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Rt(d,0)})}if(a.header||!t.mainExtracted){if(void 0!==f){var S=f;(null===(i=null===(r=p.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&Re(p.encode.labels.update.text)&&(S=zt(f,"datum.label",p.encode.labels.update.text.signal)),Df(p,"labels","text",{signal:S})}if(null===p.labelAlign&&delete p.labelAlign,p.encode){var D,C=(0,Y.Z)(qo);try{for(C.s();!(D=C.n()).done;){var A=D.value;t.hasAxisPart(A)||delete p.encode[A]}}catch(F){C.e(F)}finally{C.f()}kt(p.encode)&&delete p.encode}var T=function(t,n){if(t)return(0,H.kJ)(t)&&!Pe(t)?t.map((function(t){return Do(t,n)})).join(", "):t}(h,e);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:s,grid:!1},T?{title:T}:{}),p),!1===e.aria?{aria:!1}:{}),{zindex:Rt(d,0)})}}}function Af(t){var n,e=t.component.axes,r=[],i=(0,Y.Z)(ee);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(e[a]){var o,u=(0,Y.Z)(e[a]);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!c.get("disable")&&!c.get("gridScale")){var s="x"===a?"height":"width",l=t.getSizeSignalRef(s).signal;s!==l&&r.push({name:s,update:l})}}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return r}function Tf(t,n,e,r){return Object.assign.apply(null,[{}].concat((0,u.Z)(t.map((function(t){if("axisOrient"===t){var i,a="x"===e?"bottom":"left",o=n["x"===e?"axisBottom":"axisLeft"]||{},c=n["x"===e?"axisTop":"axisRight"]||{},s=new Set([].concat((0,u.Z)(Mt(o)),(0,u.Z)(Mt(c)))),l={},f=(0,Y.Z)(s.values());try{for(f.s();!(i=f.n()).done;){var h=i.value;l[h]={signal:"".concat(r.signal,' === "').concat(a,'" ? ').concat(Ve(o[h])," : ").concat(Ve(c[h]))}}}catch(d){f.e(d)}finally{f.f()}return l}return n[t]})))))}function Ff(t,n){var e,r,i=[{}],a=(0,Y.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=null===(e=n[r.value])||void 0===e?void 0:e.style;if(o){o=(0,H.IX)(o);var u,c=(0,Y.Z)(o);try{for(c.s();!(u=c.n()).done;){var s=u.value;i.push(n.style[s])}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){a.e(l)}finally{a.f()}return Object.assign.apply(null,i)}function jf(t,n,e){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=er(t,e,n);if(void 0!==a)return{configFrom:"style",configValue:a};for(var o=0,u=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<u.length;o++){var c=u[o];if(void 0!==(null===(r=i[c])||void 0===r?void 0:r[t]))return{configFrom:c,configValue:i[c][t]}}return{}}var Zf={scale:function(t){var n=t.model,e=t.channel;return n.scaleName(e)},format:function(t){var n=t.fieldOrDatumDef,e=t.config,r=t.axis,i=r.format,a=r.formatType;return Ua(n,n.type,i,a,e,!0)},formatType:function(t){var n=t.axis,e=t.fieldOrDatumDef,r=t.scaleType,i=n.formatType;return Pa(i,e,r)},grid:function(t){var n,e=t.fieldOrDatumDef,r=t.axis,i=t.scaleType;return null!==(n=r.grid)&&void 0!==n?n:function(t,n){return!Bi(t)&&uo(n)&&!Ce(null===n||void 0===n?void 0:n.bin)&&!Ae(null===n||void 0===n?void 0:n.bin)}(i,e)},gridScale:function(t){return function(t,n){var e="x"===n?"y":"x";if(t.getScaleComponent(e))return t.scaleName(e);return}(t.model,t.channel)},labelAlign:function(t){var n=t.axis,e=t.labelAngle,r=t.orient,i=t.channel;return n.labelAlign||Uf(e,r,i)},labelAngle:function(t){return t.labelAngle},labelBaseline:function(t){var n=t.axis,e=t.labelAngle,r=t.orient,i=t.channel;return n.labelBaseline||zf(e,r,i)},labelFlush:function(t){var n,e=t.axis,r=t.fieldOrDatumDef,i=t.channel;return null!==(n=e.labelFlush)&&void 0!==n?n:function(t,n){if("x"===n&&ht(["quantitative","temporal"],t))return!0;return}(r.type,i)},labelOverlap:function(t){var n,e=t.axis,r=t.fieldOrDatumDef,i=t.scaleType;return null!==(n=e.labelOverlap)&&void 0!==n?n:function(t,n,e,r){if(e&&!(0,H.Kn)(r)||"nominal"!==t&&"ordinal"!==t)return"log"!==n&&"symlog"!==n||"greedy";return}(r.type,i,uo(r)&&!!r.timeUnit,uo(r)?r.sort:void 0)},orient:function(t){return t.orient},tickCount:function(t){var n,e=t.channel,r=t.model,i=t.axis,a=t.fieldOrDatumDef,o=t.scaleType,u="x"===e?"width":"y"===e?"height":void 0,c=u?r.getSizeSignalRef(u):void 0;return null!==(n=i.tickCount)&&void 0!==n?n:function(t){var n,e=t.fieldOrDatumDef,r=t.scaleType,i=t.size,a=t.values;if(!a&&!Bi(r)&&"log"!==r){if(uo(e)){if(Ce(e.bin))return{signal:"ceil(".concat(i.signal,"/10)")};if(e.timeUnit&&ht(["month","hours","day","quarter"],null===(n=li(e.timeUnit))||void 0===n?void 0:n.unit))return}return{signal:"ceil(".concat(i.signal,"/40)")}}return}({fieldOrDatumDef:a,scaleType:o,size:c,values:i.values})},title:function(t){var n=t.axis,e=t.model,r=t.channel;if(void 0!==n.title)return n.title;var i=Pf(e,r);if(void 0!==i)return i;var a=e.typedFieldDef(r),o="x"===r?"x2":"y2",u=e.fieldDef(o);return ir(a?[Qa(a)]:[],uo(u)?[Qa(u)]:[])},values:function(t){return function(t,n){var e=t.values;if((0,H.kJ)(e))return Ro(n,e);if(Re(e))return e;return}(t.axis,t.fieldOrDatumDef)},zindex:function(t){var n,e=t.axis,r=t.fieldOrDatumDef,i=t.mark;return null!==(n=e.zindex)&&void 0!==n?n:function(t,n){if("rect"===t&&wo(n))return 1;return 0}(i,r)}};function Nf(t){return"(((".concat(t.signal," % 360) + 360) % 360)")}function zf(t,n,e,r){if(void 0!==t){if("x"===e){if(Re(t)){var i=Nf(t),a=Re(n)?"(".concat(n.signal,' === "top")'):"top"===n;return{signal:"(45 < ".concat(i," && ").concat(i," < 135) || (225 < ").concat(i," && ").concat(i,' < 315) ? "middle" :')+"(".concat(i," <= 45 || 315 <= ").concat(i,") === ").concat(a,' ? "bottom" : "top"')}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Re(n)){var o=t<=45||315<=t?"===":"!==";return{signal:"".concat(n.signal," ").concat(o,' "top" ? "bottom" : "top"')}}return(t<=45||315<=t)===("top"===n)?"bottom":"top"}if(Re(t)){var u=Nf(t),c=Re(n)?"(".concat(n.signal,' === "left")'):"left"===n,s=r?'"middle"':"null";return{signal:"".concat(u," <= 45 || 315 <= ").concat(u," || (135 <= ").concat(u," && ").concat(u," <= 225) ? ").concat(s," : (45 <= ").concat(u," && ").concat(u," <= 135) === ").concat(c,' ? "top" : "bottom"')}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(Re(n)){var l=45<=t&&t<=135?"===":"!==";return{signal:"".concat(n.signal," ").concat(l,' "left" ? "top" : "bottom"')}}return(45<=t&&t<=135)===("left"===n)?"top":"bottom"}}function Uf(t,n,e){if(void 0!==t){var r="x"===e,i=r?0:90,a=r?"bottom":"left";if(Re(t)){var o=Nf(t),u=Re(n)?"(".concat(n.signal,' === "').concat(a,'")'):n===a;return{signal:"(".concat(i?"(".concat(o," + 90)"):o," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(i," < ").concat(o," && ").concat(o," < ").concat(180+i,") === ").concat(u,' ? "left" : "right"')}}if((t+i)%180===0)return r?null:"center";if(Re(n)){var c=i<t&&t<180+i?"===":"!==",s="".concat(n.signal," ").concat(c,' "').concat(a,'"');return{signal:"".concat(s,' ? "left" : "right"')}}return(i<t&&t<180+i)===(n===a)?"left":"right"}}function Pf(t,n){var e="x"===n?"x2":"y2",r=t.fieldDef(n),i=t.fieldDef(e),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?ar(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}var Rf=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i._dependentFields=wf(i.transform.calculate),i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(lt(this.transform))}}],[{key:"parseAllForSortIndex",value:function(t,n){return n.forEachFieldDef((function(n,r){if(go(n)&&Ga(n.sort)){var i=n.field,a=n.timeUnit,o=n.sort,u=o.map((function(t,n){return"".concat(xi({field:i,timeUnit:a,equal:t})," ? ").concat(n," : ")})).join("")+o.length;t=new e(t,{calculate:u,as:Lf(n,r,{forAs:!0})})}})),t}}]),e}(tl);function Lf(t,n,e){return _o(t,Object.assign({prefix:n,suffix:"sort_index"},null!==e&&void 0!==e?e:{}))}function If(t,n){return ht(["top","bottom"],n)?"column":ht(["left","right"],n)||"row"===t?"row":"column"}function Bf(t,n,e,r){var i="row"===r?e.headerRow:"column"===r?e.headerColumn:e.headerFacet;return Rt((n||{})[t],i[t],e.header[t])}function qf(t,n,e,r){var i,a={},o=(0,Y.Z)(t);try{for(o.s();!(i=o.n()).done;){var u=i.value,c=Bf(u,n||{},e,r);void 0!==c&&(a[u]=c)}}catch(s){o.e(s)}finally{o.f()}return a}var Hf=["row","column"],Wf=["header","footer"];function Yf(t,n){var e=t.component.layoutHeaders[n].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[n].facetFieldDef?t.component.layoutHeaders[n].facetFieldDef:void 0,a=qf(["titleAnchor","titleAngle","titleOrient"],i.header,r,n),o=a.titleAnchor,u=a.titleAngle,c=If(n,a.titleOrient),s=Wt(u);return{name:"".concat(n,"-title"),type:"group",role:"".concat(c,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:e},"row"===n?{orient:"left"}:{}),{style:"guide-title"}),Gf(s,c)),Xf(c,s,o)),nh(r,i,n,zu,Zu))}}function Xf(t,n){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle"){case"start":return{align:"left"};case"end":return{align:"right"}}var e=Uf(n,"row"===t?"left":"top","row"===t?"y":"x");return e?{align:e}:{}}function Gf(t,n){var e=zf(t,"row"===n?"left":"top","row"===n?"y":"x",!0);return e?{baseline:e}:{}}function Jf(t,n){var e,r=t.component.layoutHeaders[n],i=[],a=(0,Y.Z)(Wf);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(r[o]){var u,c=(0,Y.Z)(r[o]);try{for(c.s();!(u=c.n()).done;){var s=Kf(t,n,o,r,u.value);null!=s&&i.push(s)}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){a.e(l)}finally{a.f()}return i}function $f(t,n){var e,r=t.sort;return Xa(r)?{field:_o(r,{expr:"datum"}),order:null!==(e=r.order)&&void 0!==e?e:"ascending"}:(0,H.kJ)(r)?{field:Lf(t,n,{expr:"datum"}),order:"ascending"}:{field:_o(t,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function Vf(t,n,e){var r=qf(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,e,n),i=r.format,a=r.formatType,o=r.labelAngle,u=r.labelAnchor,c=r.labelOrient,s=r.labelExpr,l=Za({fieldOrDatumDef:t,format:i,formatType:a,expr:"parent",config:e}).signal,f=If(n,c);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:s?zt(zt(s,"datum.label",l),"datum.value",_o(t,{expr:"parent"})):l}},"row"===n?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Gf(o,f)),Xf(f,o,u)),nh(e,t,n,Uu,Nu))}function Kf(t,n,e,r,i){if(i){var a=null,o=r.facetFieldDef,u=t.config?t.config:void 0;if(o&&i.labels){var c=qf(["labelOrient"],o.header,u,n).labelOrient;("row"===n&&!ht(["top","bottom"],c)||"column"===n&&!ht(["left","right"],c))&&(a=Vf(o,n,u))}var s=up(t)&&!Ja(t.facet),l=i.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(a||f){var h="row"===n?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("".concat(n,"_").concat(e)),type:"group",role:"".concat(n,"-").concat(e)},r.facetFieldDef?{from:{data:t.getName("".concat(n,"_domain"))},sort:$f(o,n)}:{}),f&&s?{from:{data:t.getName("facet_domain_".concat(n))}}:{}),a?{title:a}:{}),i.sizeSignal?{encode:{update:(0,ye.Z)({},h,i.sizeSignal)}}:{}),f?{axes:l}:{})}}return null}var Qf={column:{start:0,end:1},row:{start:1,end:0}};function th(t,n){return Qf[n][t]}function nh(t,n,e,r,i){var a,o={},u=(0,Y.Z)(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(i[c]){var s=Bf(c,null===n||void 0===n?void 0:n.header,t,e);void 0!==s&&(o[i[c]]=s)}}}catch(l){u.e(l)}finally{u.f()}return o}function eh(t){return[].concat((0,u.Z)(rh(t,"width")),(0,u.Z)(rh(t,"height")),(0,u.Z)(rh(t,"childWidth")),(0,u.Z)(rh(t,"childHeight")))}function rh(t,n){var e="width"===n?"x":"y",r=t.component.layoutSize.get(n);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(n).signal;if("step"===r){var a=t.getScaleComponent(e);if(a){var o=a.get("type"),u=a.get("range");if(Bi(o)&&Le(u)){var c=t.scaleName(e);if(up(t.parent))if("independent"===t.parent.component.resolve.scale[e])return[ih(c,u)];return[ih(c,u),{name:i,update:ah(c,a,"domain('".concat(c,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var s=i.endsWith("width"),l=s?"containerSize()[0]":"containerSize()[1]",f=ec(t.config.view,s?"width":"height"),h="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:i,init:h,on:[{update:h,events:"window:resize"}]}]}return[{name:i,value:r}]}function ih(t,n){var e="".concat(t,"_step");return Re(n.step)?{name:e,update:n.step.signal}:{name:e,value:n.step}}function ah(t,n,e){var r=n.get("type"),i=n.get("padding"),a=Rt(n.get("paddingOuter"),i),o=n.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace(".concat(e,", ").concat(Ve(o),", ").concat(Ve(a),") * ").concat(t,"_step")}function oh(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function uh(t,n){return Mt(t).reduce((function(e,r){var i=t[r];return Object.assign(Object.assign({},e),_l(n,i,r,(function(t){return Je(t.value)})))}),{})}function ch(t,n){if(up(n))return"theta"===t?"independent":"shared";if(sp(n))return"shared";if(cp(n))return re(t)||"theta"===t||"radius"===t?"independent":"shared";throw new Error("invalid model type for resolve")}function sh(t,n){var e=t.scale[n],r=re(n)?"axis":"legend";return"independent"===e?("shared"===t[r][n]&&Xr(function(t){return'Setting the scale to be independent for "'.concat(t,'" means we also have to set the guide (axis or legend) to be independent.')}(n)),"independent"):t[r][n]||"shared"}var lh=Object.assign(Object.assign({},Lu),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),fh=Mt(lh),hh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e)}(Zs),dh={symbols:function(t,n){var e,r,i,a,o,u,c,s,l=n.fieldOrDatumDef,f=n.model,h=n.channel,d=n.legendCmpt;if("symbol"!==n.legendType)return;var p=f.markDef,v=f.encoding,g=f.config,m=f.mark,y=p.filled&&"trail"!==m,b=Object.assign(Object.assign({},function(t,n,e){var r,i=(0,Y.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=tr(a,n.markDef,n.config);void 0!==o&&(t[a]=Je(o))}}catch(u){i.e(u)}finally{i.f()}return t}({},f,ma)),Cl(f,{filled:y})),x=null!==(e=d.get("symbolOpacity"))&&void 0!==e?e:g.legend.symbolOpacity,_=null!==(r=d.get("symbolFillColor"))&&void 0!==r?r:g.legend.symbolFillColor,w=null!==(i=d.get("symbolStrokeColor"))&&void 0!==i?i:g.legend.symbolStrokeColor,k=void 0===x?null!==(a=ph(v.opacity))&&void 0!==a?a:p.opacity:void 0;if(b.fill)if("fill"===h||y&&h===hn)delete b.fill;else if(b.fill.field)_?delete b.fill:(b.fill=Je(null!==(o=g.legend.symbolBaseFillColor)&&void 0!==o?o:"black"),b.fillOpacity=Je(null!==k&&void 0!==k?k:1));else if((0,H.kJ)(b.fill)){var M=null!==(s=null!==(c=vh(null!==(u=v.fill)&&void 0!==u?u:v.color))&&void 0!==c?c:p.fill)&&void 0!==s?s:y&&p.color;M&&(b.fill=Je(M))}if(b.stroke)if("stroke"===h||!y&&h===hn)delete b.stroke;else if(b.stroke.field||w)delete b.stroke;else if((0,H.kJ)(b.stroke)){var O=Rt(vh(v.stroke||v.color),p.stroke,y?p.color:void 0);O&&(b.stroke={value:O})}if(h!==yn){var E=uo(l)&&mh(f,d,l);E?b.opacity=[Object.assign({test:E},Je(null!==k&&void 0!==k?k:1)),Je(g.legend.unselectedOpacity)]:k&&(b.opacity=Je(k))}return kt(b=Object.assign(Object.assign({},b),t))?void 0:b},gradient:function(t,n){var e,r=n.model,i=n.legendType,a=n.legendCmpt;if("gradient"!==i)return;var o=r.config,u=r.markDef,c=r.encoding,s={},l=void 0===(null!==(e=a.get("gradientOpacity"))&&void 0!==e?e:o.legend.gradientOpacity)?ph(c.opacity)||u.opacity:void 0;l&&(s.opacity=Je(l));return kt(s=Object.assign(Object.assign({},s),t))?void 0:s},labels:function(t,n){var e=n.fieldOrDatumDef,r=n.model,i=n.channel,a=n.legendCmpt,o=r.legend(i)||{},u=r.config,c=uo(e)?mh(r,a,e):void 0,s=c?[{test:c,value:1},{value:u.legend.unselectedOpacity}]:void 0,l=o.format,f=o.formatType,h=void 0;Ta(f)?h=za({fieldOrDatumDef:e,field:"datum.value",format:l,formatType:f,config:u}):void 0===l&&void 0===f&&u.customFormatTypes&&("quantitative"===e.type&&u.numberFormatType?h=za({fieldOrDatumDef:e,field:"datum.value",format:u.numberFormat,formatType:u.numberFormatType,config:u}):"temporal"===e.type&&u.timeFormatType&&uo(e)&&void 0===e.timeUnit&&(h=za({fieldOrDatumDef:e,field:"datum.value",format:u.timeFormat,formatType:u.timeFormatType,config:u})));var d=Object.assign(Object.assign(Object.assign({},s?{opacity:s}:{}),h?{text:h}:{}),t);return kt(d)?void 0:d},entries:function(t,n){var e=n.legendCmpt.get("selections");return(null===e||void 0===e?void 0:e.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}};function ph(t){return gh(t,(function(t,n){return Math.max(t,n.value)}))}function vh(t){return gh(t,(function(t,n){return Rt(t,n.value)}))}function gh(t,n){return function(t){var n=null===t||void 0===t?void 0:t.condition;return!!n&&((0,H.kJ)(n)||vo(n))}(t)?(0,H.IX)(t.condition).reduce(n,t.value):vo(t)?t.value:void 0}function mh(t,n,e){var r=n.get("selections");if(null===r||void 0===r?void 0:r.length){var i=(0,H.m8)(e.field);return r.map((function(t){var n=(0,H.m8)(Dt(t)+ff);return"(!length(data(".concat(n,")) || (").concat(t,"[").concat(i,"] && indexof(").concat(t,"[").concat(i,"], datum.value) >= 0))")})).join(" || ")}}var yh={direction:function(t){return t.direction},format:function(t){var n=t.fieldOrDatumDef,e=t.legend,r=t.config,i=e.format,a=e.formatType;return Ua(n,n.type,i,a,r,!1)},formatType:function(t){var n=t.legend,e=t.fieldOrDatumDef,r=t.scaleType,i=n.formatType;return Pa(i,e,r)},gradientLength:function(t){var n,e,r=t.legend,i=t.legendConfig;return null!==(e=null!==(n=r.gradientLength)&&void 0!==n?n:i.gradientLength)&&void 0!==e?e:function(t){var n=t.legendConfig,e=t.model,r=t.direction,i=t.orient,a=t.scaleType,o=n.gradientHorizontalMaxLength,u=n.gradientHorizontalMinLength,c=n.gradientVerticalMaxLength,s=n.gradientVerticalMinLength;if(Hi(a))return"horizontal"===r?"top"===i||"bottom"===i?_h(e,"width",u,o):u:_h(e,"height",s,c);return}(t)},labelOverlap:function(t){var n,e,r=t.legend,i=t.legendConfig,a=t.scaleType;return null!==(e=null!==(n=r.labelOverlap)&&void 0!==n?n:i.labelOverlap)&&void 0!==e?e:function(t){if(ht(["quantile","threshold","log","symlog"],t))return"greedy";return}(a)},symbolType:function(t){var n,e=t.legend,r=t.markDef,i=t.channel,a=t.encoding;return null!==(n=e.symbolType)&&void 0!==n?n:function(t,n,e,r){var i;if("shape"!==n){var a=null!==(i=vh(e))&&void 0!==i?i:r;if(a)return a}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,i,a.shape,r.shape)},title:function(t){return Eo(t.fieldOrDatumDef,t.config,{allowDisabling:!0})},type:function(t){var n=t.legendType,e=t.scaleType;if(zn(t.channel)&&Hi(e)){if("gradient"===n)return}else if("symbol"===n)return;return n},values:function(t){var n=t.fieldOrDatumDef;return function(t,n){var e=t.values;if((0,H.kJ)(e))return Ro(n,e);if(Re(e))return e;return}(t.legend,n)}};function bh(t){return Rt(t.legend.type,function(t){var n=t.channel,e=t.timeUnit,r=t.scaleType;if(zn(n)){if(ht(["quarter","month","day"],e))return"symbol";if(Hi(r))return"gradient"}return"symbol"}(t))}function xh(t){var n,e,r=t.legendConfig,i=t.legendType,a=t.orient;return null!==(e=null!==(n=t.legend.direction)&&void 0!==n?n:r[i?"gradientDirection":"symbolDirection"])&&void 0!==e?e:function(t,n){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===n?"horizontal":void 0}}(a,i)}function _h(t,n,e,r){var i=t.getSizeSignalRef(n).signal;return{signal:"clamp(".concat(i,", ").concat(e,", ").concat(r,")")}}function wh(t){var n=op(t)?function(t){for(var n=t.encoding,e={},r=0,i=[hn].concat((0,u.Z)(Ru));r<i.length;r++){var a=i[r],o=To(n[a]);o&&t.getScaleComponent(a)&&(a===vn&&uo(o)&&o.type===Ci||(e[a]=Mh(t,a)))}return e}(t):function(t){var n,e=t.component,r=e.legends,i=e.resolve,a=(0,Y.Z)(t.children);try{for(a.s();!(n=a.n()).done;){var o=n.value;wh(o);var u,c=(0,Y.Z)(Mt(o.component.legends));try{for(c.s();!(u=c.n()).done;){var s=u.value;i.legend[s]=sh(t.component.resolve,s),"shared"===i.legend[s]&&(r[s]=Oh(r[s],o.component.legends[s]),r[s]||(i.legend[s]="independent",delete r[s]))}}catch(g){c.e(g)}finally{c.f()}}}catch(g){a.e(g)}finally{a.f()}var l,f=(0,Y.Z)(Mt(r));try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=(0,Y.Z)(t.children);try{for(p.s();!(h=p.n()).done;){var v=h.value;v.component.legends[d]&&("shared"===i.legend[d]&&delete v.component.legends[d])}}catch(g){p.e(g)}finally{p.f()}}}catch(g){f.e(g)}finally{f.f()}return r}(t);return t.component.legends=n,n}function kh(t,n,e,r){switch(n){case"disable":return void 0!==e;case"values":return!!(null===e||void 0===e?void 0:e.values);case"title":if("title"===n&&t===(null===r||void 0===r?void 0:r.title))return!0}return t===(e||{})[n]}function Mh(t,n){var e,r,i,a=t.legend(n),o=t.markDef,u=t.encoding,c=t.config,s=c.legend,l=new hh({},function(t,n){var e=t.scaleName(n);if("trail"===t.mark){if("color"===n)return{stroke:e};if("size"===n)return{strokeWidth:e}}return"color"===n?t.markDef.filled?{fill:e}:{stroke:e}:(0,ye.Z)({},n,e)}(t,n));!function(t,n,e){var r,i,a,o,u,c=null===(r=t.fieldDef(n))||void 0===r?void 0:r.field,s=(0,Y.Z)(Ot(null!==(i=t.component.selection)&&void 0!==i?i:{}));try{for(s.s();!(u=s.n()).done;){var l=u.value,f=null!==(a=l.project.hasField[c])&&void 0!==a?a:l.project.hasChannel[n];if(f&&nf.defined(l)){var h=null!==(o=e.get("selections"))&&void 0!==o?o:[];h.push(l.name),e.set("selections",h,!1),f.hasLegend=!0}}}catch(d){s.e(d)}finally{s.f()}}(t,n,l);var f=void 0!==a?!a:s.disable;if(l.set("disable",f,void 0!==a),f)return l;a=a||{};var h,d=t.getScaleComponent(n).get("type"),p=To(u[n]),v=uo(p)?null===(e=li(p.timeUnit))||void 0===e?void 0:e.unit:void 0,g=a.orient||c.legend.orient||"right",m=bh({legend:a,channel:n,timeUnit:v,scaleType:d}),y={legend:a,channel:n,model:t,markDef:o,encoding:u,fieldOrDatumDef:p,legendConfig:s,config:c,scaleType:d,orient:g,legendType:m,direction:xh({legend:a,legendType:m,orient:g,legendConfig:s})},b=(0,Y.Z)(fh);try{for(b.s();!(h=b.n()).done;){var x=h.value;if(!("gradient"===m&&x.startsWith("symbol")||"symbol"===m&&x.startsWith("gradient"))){var _=x in yh?yh[x](y):a[x];if(void 0!==_){var w=kh(_,x,a,t.fieldDef(n));(w||void 0===c.legend[x])&&l.set(x,_,w)}}}}catch(F){b.e(F)}finally{b.f()}for(var k=null!==(r=null===a||void 0===a?void 0:a.encoding)&&void 0!==r?r:{},M=l.get("selections"),O={},E={fieldOrDatumDef:p,model:t,channel:n,legendCmpt:l,legendType:m},S=0,D=["labels","legend","title","symbols","gradient","entries"];S<D.length;S++){var C=D[S],A=uh(null!==(i=k[C])&&void 0!==i?i:{},t),T=C in dh?dh[C](A,E):A;void 0===T||kt(T)||(O[C]=Object.assign(Object.assign(Object.assign({},(null===M||void 0===M?void 0:M.length)&&uo(p)?{name:"".concat(Dt(p.field),"_legend_").concat(C)}:{}),(null===M||void 0===M?void 0:M.length)?{interactive:!!M}:{}),{update:T}))}return kt(O)||l.set("encode",O,!!(null===a||void 0===a?void 0:a.encoding)),l}function Oh(t,n){var e,r,i,a;if(!t)return n.clone();var o=t.getWithExplicit("orient"),u=n.getWithExplicit("orient");if(!o.explicit||!u.explicit||o.value===u.value){var c,s=!1,l=(0,Y.Z)(fh);try{var f=function(){var e=c.value,r=Rs(t.getWithExplicit(e),n.getWithExplicit(e),e,"legend",(function(t,n){switch(e){case"symbolType":return function(t,n){if("circle"===n.value)return n;return t}(t,n);case"title":return or(t,n);case"type":return s=!0,zs("symbol")}return Ps(t,n,e,"legend")}));t.setWithExplicit(e,r)};for(l.s();!(c=l.n()).done;)f()}catch(h){l.e(h)}finally{l.f()}return s&&((null===(r=null===(e=t.implicit)||void 0===e?void 0:e.encode)||void 0===r?void 0:r.gradient)&&At(t.implicit,["encode","gradient"]),(null===(a=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===a?void 0:a.gradient)&&At(t.explicit,["encode","gradient"])),t}}var Eh=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Sh(t){var n,e=t.component.legends,r={},i=(0,Y.Z)(Mt(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.getScaleComponent(a),u=st(o.get("domains"));if(r[u]){var c,s=(0,Y.Z)(r[u]);try{for(s.s();!(c=s.n()).done;){Oh(c.value,e[a])||r[u].push(e[a])}}catch(f){s.e(f)}finally{s.f()}}else r[u]=[e[a].clone()]}}catch(f){i.e(f)}finally{i.f()}var l=Ot(r).flat().map((function(n){return function(t,n){var e,r,i,a=t.combine(),o=a.disable,u=a.labelExpr,c=(a.selections,Eh(a,["disable","labelExpr","selections"]));if(o)return;!1===n.aria&&void 0==c.aria&&(c.aria=!1);if(null===(e=c.encode)||void 0===e?void 0:e.symbols){var s=c.encode.symbols.update;!s.fill||"transparent"===s.fill.value||s.stroke||c.stroke||(s.stroke={value:"transparent"});var l,h=(0,Y.Z)(Ru);try{for(h.s();!(l=h.n()).done;){var d=l.value;c[d]&&delete s[d]}}catch(f){h.e(f)}finally{h.f()}}c.title||delete c.title;if(void 0!==u){var p=u;(null===(i=null===(r=c.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&Re(c.encode.labels.update.text)&&(p=zt(u,"datum.label",c.encode.labels.update.text.signal)),function(t,n,e,r){var i,a,o,u,c;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(a=(u=t.encode)[n])&&void 0!==a||(u[n]={}),null!==(o=(c=t.encode[n]).update)&&void 0!==o||(c.update={}),t.encode[n].update[e]=r}(c,"labels","text",{signal:p})}return c}(n,t.config)})).filter((function(t){return void 0!==t}));return l}function Dh(t){return sp(t)||cp(t)?function(t){return t.children.reduce((function(t,n){return t.concat(n.assembleProjections())}),Ch(t))}(t):Ch(t)}function Ch(t){var n=t.component.projection;if(!n||n.merged)return[];var e=n.combine(),r=e.name;if(n.data){var i={signal:"[".concat(n.size.map((function(t){return t.signal})).join(", "),"]")},a=n.data.reduce((function(n,e){var r=Re(e)?e.signal:"data('".concat(t.lookupDataSource(e),"')");return ht(n,r)||n.push(r),n}),[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:a.length>1?"[".concat(a.join(", "),"]"):a[0]}},e)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),e)]}var Ah=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Th=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;return(0,c.Z)(this,e),(o=n.call(this,Object.assign({},r),{name:t})).specifiedProjection=r,o.size=i,o.data=a,o.merged=!1,o}return(0,s.Z)(e,[{key:"isFit",get:function(){return!!this.data}}]),e}(Zs);function Fh(t){t.component.projection=op(t)?function(t){var n;if(t.hasProjection){var e=Ne(t.specifiedProjection),r=!(e&&(null!=e.scale||null!=e.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,a=r?function(t){for(var n=[],e=t.encoding,r=0,i=[[sn,cn],[fn,ln]];r<i.length;r++){var a=i[r];(To(e[a[0]])||To(e[a[1]]))&&n.push({signal:t.getName("geojson_".concat(n.length))})}t.channelHasField(vn)&&t.typedFieldDef(vn).type===Ci&&n.push({signal:t.getName("geojson_".concat(n.length))});0===n.length&&n.push(t.requestDataName(Ls.Main));return n}(t):void 0,o=new Th(t.projectionName(!0),Object.assign(Object.assign({},null!==(n=Ne(t.config.projection))&&void 0!==n?n:{}),null!==e&&void 0!==e?e:{}),i,a);return o.get("type")||o.set("type","equalEarth",!1),o}return}(t):function(t){if(0===t.children.length)return;var n,e,r=(0,Y.Z)(t.children);try{for(r.s();!(e=r.n()).done;){Fh(e.value)}}catch(d){r.e(d)}finally{r.f()}var i=pt(t.children,(function(t){var e=t.component.projection;if(e){if(n){var r=function(t,n){var e=pt(Ah,(function(e){return!(0,H.nr)(t.explicit,e)&&!(0,H.nr)(n.explicit,e)||!!((0,H.nr)(t.explicit,e)&&(0,H.nr)(n.explicit,e)&&it(t.get(e),n.get(e)))}));if(it(t.size,n.size)){if(e)return t;if(it(t.explicit,{}))return n;if(it(n.explicit,{}))return t}return null}(n,e);return r&&(n=r),!!r}return n=e,!0}return!0}));if(n&&i){var a,o=t.projectionName(!0),c=new Th(o,n.specifiedProjection,n.size,at(n.data)),s=(0,Y.Z)(t.children);try{for(s.s();!(a=s.n()).done;){var l=a.value,f=l.component.projection;if(f){var h;if(f.isFit)(h=c.data).push.apply(h,(0,u.Z)(l.component.projection.data));l.renameProjection(f.get("name"),o),f.merged=!0}}}catch(d){s.e(d)}finally{s.f()}return c}return}(t)}var jh=e(16540),Zh=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Nh(t,n){return"".concat(De(t),"_").concat(n)}function zh(t,n,e){var r,i=Nh(null!==(r=No(e,void 0))&&void 0!==r?r:{},n);return t.getName("".concat(i,"_bins"))}function Uh(t,n,e){var r,i;r=function(t){return"as"in t}(t)?(0,H.HD)(t.as)?[t.as,"".concat(t.as,"_end")]:[t.as[0],t.as[1]]:[_o(t,{forAs:!0}),_o(t,{binSuffix:"end",forAs:!0})];var a=Object.assign({},No(n,void 0)),o=Nh(a,t.field),u=function(t,n){return{signal:t.getName("".concat(n,"_bins")),extentSignal:t.getName("".concat(n,"_extent"))}}(e,o),c=u.signal,s=u.extentSignal;if(Fe(a.extent)){var l=a.extent;i=Of(e,l.param,l),delete a.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:a,field:t.field,as:[r]},c?{signal:c}:{}),s?{extentSignal:s}:{}),i?{span:i}:{})}}var Ph=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).bins=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.bins))}},{key:"merge",value:function(t,n){var e,r=(0,Y.Z)(Mt(t.bins));try{for(r.s();!(e=r.n()).done;){var i=e.value;i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=mt([].concat((0,u.Z)(this.bins[i].as),(0,u.Z)(t.bins[i].as)),lt)):this.bins[i]=t.bins[i]}}catch(s){r.e(s)}finally{r.f()}var a,o=(0,Y.Z)(t.children);try{for(o.s();!(a=o.n()).done;){var c=a.value;t.removeChild(c),c.parent=this}}catch(s){o.e(s)}finally{o.f()}t.remove()}},{key:"producedFields",value:function(){return new Set(Ot(this.bins).map((function(t){return t.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set(Ot(this.bins).map((function(t){return t.field})))}},{key:"hash",value:function(){return"Bin ".concat(lt(this.bins))}},{key:"assemble",value:function(){return Ot(this.bins).flatMap((function(t){var n=[],e=(0,jh.Z)(t.as),r=e[0],i=e.slice(1),a=t.bin,o=a.extent,u=Zh(a,["extent"]),c=Object.assign(Object.assign(Object.assign({type:"bin",field:Nt(t.field),as:r,signal:t.signal},Fe(o)?{extent:null}:{extent:o}),t.span?{span:{signal:"span(".concat(t.span,")")}}:{}),u);!o&&t.extentSignal&&(n.push({type:"extent",field:Nt(t.field),signal:t.extentSignal}),c.extent={signal:t.extentSignal}),n.push(c);var s,l=(0,Y.Z)(i);try{for(l.s();!(s=l.n()).done;)for(var f=s.value,h=0;h<2;h++)n.push({type:"formula",expr:_o({field:r[h]},{expr:"datum"}),as:f[h]})}catch(d){l.e(d)}finally{l.f()}return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n}))}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef((function(t,e,r){if(po(e)&&Ce(e.bin)){var i=Uh(e,e.bin,n),a=i.key,o=i.binComponent;t[a]=Object.assign(Object.assign(Object.assign({},o),t[a]),function(t,n,e,r){var i,a;if(Lo(n,e)){var o=op(t)&&null!==(a=null!==(i=t.axis(e))&&void 0!==i?i:t.legend(e))&&void 0!==a?a:{},u=_o(n,{expr:"datum"}),c=_o(n,{expr:"datum",binSuffix:"end"});return{formulaAs:_o(n,{binSuffix:"range",forAs:!0}),formula:Ba(u,c,o.format,o.formatType,r)}}return{}}(n,e,r,n.config))}return t}),{});return kt(r)?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n,r){var i=Uh(n,n.bin,r),a=i.key,o=i.binComponent;return new e(t,(0,ye.Z)({},a,o))}}]),e}(tl);function Rh(t,n,e,r){var i,a=op(r)?r.encoding[Gn(n)]:void 0;if(po(e)&&op(r)&&ro(e,a,r.markDef,r.config))t.add(_o(e,{})),t.add(_o(e,{suffix:"end"})),e.bin&&Lo(e,n)&&t.add(_o(e,{binSuffix:"range"}));else if(n in jn){var o=function(t){switch(t){case cn:return"y";case ln:return"y2";case sn:return"x";case fn:return"x2"}}(n);t.add(r.getName(o))}else t.add(_o(e));return go(e)&&function(t){return(0,B.isObject)(t)&&"field"in t}(null===(i=e.scale)||void 0===i?void 0:i.range)&&t.add(e.scale.range.field),t}var Lh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i){var a;return(0,c.Z)(this,e),(a=n.call(this,t)).dimensions=r,a.measures=i,a}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,new Set(this.dimensions),at(this.measures))}},{key:"groupBy",get:function(){return this.dimensions}},{key:"merge",value:function(t){return bt(this.dimensions,t.dimensions)?(function(t,n){var e,r,i=(0,Y.Z)(Mt(n));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,c=n[o],s=(0,Y.Z)(Mt(c));try{for(s.s();!(a=s.n()).done;){var l=a.value;o in t?t[o][l]=new Set([].concat((0,u.Z)(null!==(e=t[o][l])&&void 0!==e?e:[]),(0,u.Z)(c[l]))):t[o]=(0,ye.Z)({},l,c[l])}}catch(f){s.e(f)}finally{s.f()}}}catch(f){i.e(f)}finally{i.f()}}(this.measures,t.measures),!0):(function(){var t;(t=Wr).debug.apply(t,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(t){t.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat((0,u.Z)(this.dimensions),(0,u.Z)(Mt(this.measures))))}},{key:"producedFields",value:function(){var t,n=new Set,e=(0,Y.Z)(Mt(this.measures));try{for(e.s();!(t=e.n()).done;){var r,i=t.value,a=(0,Y.Z)(Mt(this.measures[i]));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=this.measures[i][o];0===u.size?n.add("".concat(o,"_").concat(i)):u.forEach(n.add,n)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){e.e(c)}finally{e.f()}return n}},{key:"hash",value:function(){return"Aggregate ".concat(lt({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var t,n=[],e=[],r=[],i=(0,Y.Z)(Mt(this.measures));try{for(i.s();!(t=i.n()).done;){var a,o=t.value,c=(0,Y.Z)(Mt(this.measures[o]));try{for(c.s();!(a=c.n()).done;){var s,l=a.value,f=(0,Y.Z)(this.measures[o][l]);try{for(f.s();!(s=f.n()).done;){var h=s.value;r.push(h),n.push(l),e.push("*"===o?null:Nt(o))}}catch(d){f.e(d)}finally{f.f()}}}catch(d){c.e(d)}finally{c.f()}}}catch(d){i.e(d)}finally{i.f()}return{type:"aggregate",groupby:(0,u.Z)(this.dimensions).map(Nt),ops:n,fields:e,as:r}}}],[{key:"makeFromEncoding",value:function(t,n){var r=!1;n.forEachFieldDef((function(t){t.aggregate&&(r=!0)}));var i={},a=new Set;return r?(n.forEachFieldDef((function(t,e){var r,o,u,c,s=t.aggregate,l=t.field;if(s)if("count"===s)null!==(r=i["*"])&&void 0!==r||(i["*"]={}),i["*"].count=new Set([_o(t,{forAs:!0})]);else{if(_e(s)||we(s)){var f=_e(s)?"argmin":"argmax",h=s[f];null!==(o=i[h])&&void 0!==o||(i[h]={}),i[h][f]=new Set([_o({op:f,field:h},{forAs:!0})])}else null!==(u=i[l])&&void 0!==u||(i[l]={}),i[l][s]=new Set([_o(t,{forAs:!0})]);de(e)&&"unaggregated"===n.scaleDomain(e)&&(null!==(c=i[l])&&void 0!==c||(i[l]={}),i[l].min=new Set([_o({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([_o({field:l,aggregate:"max"},{forAs:!0})]))}else Rh(a,e,t,n)})),a.size+Mt(i).length===0?null:new e(t,a,i)):null}},{key:"makeFromTransform",value:function(t,n){var r,i,a,o,u=new Set,c={},s=(0,Y.Z)(n.aggregate);try{for(s.s();!(o=s.n()).done;){var l=o.value,f=l.op,h=l.field,d=l.as;f&&("count"===f?(null!==(r=c["*"])&&void 0!==r||(c["*"]={}),c["*"].count=new Set([d||_o(l,{forAs:!0})])):(null!==(i=c[h])&&void 0!==i||(c[h]={}),c[h][f]=new Set([d||_o(l,{forAs:!0})])))}}catch(m){s.e(m)}finally{s.f()}var p,v=(0,Y.Z)(null!==(a=n.groupby)&&void 0!==a?a:[]);try{for(v.s();!(p=v.n()).done;){var g=p.value;u.add(g)}}catch(m){v.e(m)}finally{v.f()}return u.size+Mt(c).length===0?null:new e(t,u,c)}}]),e}(tl),Ih=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;(0,c.Z)(this,e),(o=n.call(this,t)).model=r,o.name=i,o.data=a;var s,l=(0,Y.Z)(Pn);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=r.facet[f];if(h){var d=h.bin,p=h.sort;o[f]=Object.assign({name:r.getName("".concat(f,"_domain")),fields:[_o(h)].concat((0,u.Z)(Ce(d)?[_o(h,{binSuffix:"end"})]:[]))},Xa(p)?{sortField:p}:(0,H.kJ)(p)?{sortIndexField:Lf(h,f)}:{})}}}catch(v){l.e(v)}finally{l.f()}return o.childModel=r.child,o}return(0,s.Z)(e,[{key:"hash",value:function(){var t,n="Facet",e=(0,Y.Z)(Pn);try{for(e.s();!(t=e.n()).done;){var r=t.value;this[r]&&(n+=" ".concat(r.charAt(0),":").concat(lt(this[r])))}}catch(i){e.e(i)}finally{e.f()}return n}},{key:"fields",get:function(){var t,n,e=[],r=(0,Y.Z)(Pn);try{for(r.s();!(n=r.n()).done;){var i=n.value;(null===(t=this[i])||void 0===t?void 0:t.fields)&&e.push.apply(e,(0,u.Z)(this[i].fields))}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"dependentFields",value:function(){var t,n=new Set(this.fields),e=(0,Y.Z)(Pn);try{for(e.s();!(t=e.n()).done;){var r=t.value;this[r]&&(this[r].sortField&&n.add(this[r].sortField.field),this[r].sortIndexField&&n.add(this[r].sortIndexField))}}catch(i){e.e(i)}finally{e.f()}return n}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var t,n={},e=(0,Y.Z)(ee);try{for(e.s();!(t=e.n()).done;){var r=t.value,i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(Bi(a)&&Le(o)){var u=Nd(zd(this.childModel,r));u?n[r]=u:Xr(dr(r))}}}}catch(c){e.e(c)}finally{e.f()}return n}},{key:"assembleRowColumnHeaderData",value:function(t,n,e){var r={row:"y",column:"x",facet:void 0}[t],i=[],a=[],o=[];r&&e&&e[r]&&(n?(i.push("distinct_".concat(e[r])),a.push("max")):(i.push(e[r]),a.push("distinct")),o.push("distinct_".concat(e[r])));var u=this[t],c=u.sortField,s=u.sortIndexField;if(c){var l=c.op,f=void 0===l?qa:l,h=c.field;i.push(h),a.push(f),o.push(_o(c,{forAs:!0}))}else s&&(i.push(s),a.push("max"),o.push(s));return{name:this[t].name,source:null!==n&&void 0!==n?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:a,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(t){var n,e,r,i=this.model.layout.columns,a=this.model.component.layoutHeaders,o=[],u={},c=(0,Y.Z)(Hf);try{for(c.s();!(r=c.n()).done;){var s,l=r.value,f=(0,Y.Z)(Wf);try{for(f.s();!(s=f.n()).done;){var h,d=s.value,p=null!==(n=a[l]&&a[l][d])&&void 0!==n?n:[],v=(0,Y.Z)(p);try{for(v.s();!(h=v.n()).done;){if((null===(e=h.value.axes)||void 0===e?void 0:e.length)>0){u[l]=!0;break}}}catch(x){v.e(x)}finally{v.f()}}}catch(x){f.e(x)}finally{f.f()}if(u[l]){var g='length(data("'.concat(this.facet.name,'"))'),m="row"===l?i?{signal:"ceil(".concat(g," / ").concat(i,")")}:1:i?{signal:"min(".concat(g,", ").concat(i,")")}:{signal:g};o.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:m}]})}}}catch(x){c.e(x)}finally{c.f()}var y=u.row,b=u.column;return(y||b)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}},{key:"assemble",value:function(){var t,n,e=[],r=null,i=this.getChildIndependentFieldsWithStep(),a=this.column,o=this.row,c=this.facet;if(a&&o&&(i.x||i.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(n=i.y)&&void 0!==n?n:[]),l=s.map((function(){return"distinct"}));e.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(var f=0,h=[Jt,Gt];f<h.length;f++){var d=h[f];this[d]&&e.push(this.assembleRowColumnHeaderData(d,r,i))}if(c){var p=this.assembleFacetHeaderData(i);p&&e.push.apply(e,(0,u.Z)(p))}return e}}]),e}(tl);function Bh(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function qh(t){var n={};return et(t.filter,(function(t){var e;if(yi(t)){var r=null;fi(t)?r=Xe(t.equal):di(t)?r=Xe(t.lte):hi(t)?r=Xe(t.lt):pi(t)?r=Xe(t.gt):vi(t)?r=Xe(t.gte):gi(t)?r=t.range[0]:mi(t)&&(r=(null!==(e=t.oneOf)&&void 0!==e?e:t.in)[0]),r&&(Gr(r)?n[t.field]="date":(0,H.hj)(r)?n[t.field]="number":(0,H.HD)(r)&&(n[t.field]="string")),t.timeUnit&&(n[t.field]="date")}})),n}function Hh(t){var n={};function e(t){var e;Uo(t)?n[t.field]="date":"quantitative"===t.type&&(e=t.aggregate,(0,H.HD)(e)&&ht(["min","max"],e))?n[t.field]="number":Pt(t.field)>1?t.field in n||(n[t.field]="flatten"):go(t)&&Xa(t.sort)&&Pt(t.sort.field)>1&&(t.sort.field in n||(n[t.sort.field]="flatten"))}if((op(t)||up(t))&&t.forEachFieldDef((function(n,r){if(po(n))e(n);else{var i=Yn(r),a=t.fieldDef(i);e(Object.assign(Object.assign({},n),{type:a.type}))}})),op(t)){var r=t.mark,i=t.markDef,a=t.encoding;if(da(r)&&!t.encoding.order){var o=a["horizontal"===i.orient?"y":"x"];uo(o)&&"quantitative"===o.type&&!(o.field in n)&&(n[o.field]="number")}}return n}var Wh,Yh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t))._parse=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(lt(this._parse))}},{key:"parse",get:function(){return this._parse}},{key:"merge",value:function(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}},{key:"assembleFormatParse",value:function(){var t,n={},e=(0,Y.Z)(Mt(this._parse));try{for(e.s();!(t=e.n()).done;){var r=t.value,i=this._parse[r];1===Pt(r)&&(n[r]=i)}}catch(a){e.e(a)}finally{e.f()}return n}},{key:"producedFields",value:function(){return new Set(Mt(this._parse))}},{key:"dependentFields",value:function(){return new Set(Mt(this._parse))}},{key:"assembleTransforms",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Mt(this._parse).filter((function(t){return!n||Pt(t)>1})).map((function(n){var e=function(t,n){var e=Ft(t);if("number"===n)return"toNumber(".concat(e,")");if("boolean"===n)return"toBoolean(".concat(e,")");if("string"===n)return"toString(".concat(e,")");if("date"===n)return"toDate(".concat(e,")");if("flatten"===n)return e;if(n.startsWith("date:")){var r=Bh(n.slice(5,n.length));return"timeParse(".concat(e,",'").concat(r,"')")}if(n.startsWith("utc:")){var i=Bh(n.slice(4,n.length));return"utcParse(".concat(e,",'").concat(i,"')")}return Xr('Unrecognized parse "'.concat(n,'".')),null}(n,t._parse[n]);return e?{type:"formula",expr:e,as:Ut(n)}:null})).filter((function(t){return null!==t}))}}],[{key:"makeExplicit",value:function(t,n,e){var r,i={},a=n.data;return!Ws(a)&&(null===(r=null===a||void 0===a?void 0:a.format)||void 0===r?void 0:r.parse)&&(i=a.format.parse),this.makeWithAncestors(t,i,{},e)}},{key:"makeWithAncestors",value:function(t,n,r,i){var a,o=(0,Y.Z)(Mt(r));try{for(o.s();!(a=o.n()).done;){var u=a.value,c=i.getWithExplicit(u);void 0!==c.value&&(c.explicit||c.value===r[u]||"derived"===c.value||"flatten"===r[u]?delete r[u]:Xr(xr(u,r[u],c.value)))}}catch(b){o.e(b)}finally{o.f()}var s,l=(0,Y.Z)(Mt(n));try{for(l.s();!(s=l.n()).done;){var f=s.value,h=i.get(f);void 0!==h&&(h===n[f]?delete n[f]:Xr(xr(f,n[f],h)))}}catch(b){l.e(b)}finally{l.f()}var d=new Zs(n,r);i.copyAll(d);var p,v={},g=(0,Y.Z)(Mt(d.combine()));try{for(g.s();!(p=g.n()).done;){var m=p.value,y=d.get(m);null!==y&&(v[m]=y)}}catch(b){g.e(b)}finally{g.f()}return 0===Mt(v).length||i.parseNothing?null:new e(t,v)}}]),e}(tl),Xh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t){return(0,c.Z)(this,e),n.call(this,t)}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set([Iu])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:Iu}}}]),e}(tl),Gh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).params=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(lt(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),e}(tl),Jh=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).params=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}},{key:"hash",value:function(){return"Hash ".concat(lt(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),e}(tl),$h=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t){var r,i;if((0,c.Z)(this,e),r=n.call(this,null),null!==t&&void 0!==t||(t={name:"source"}),Ws(t)||(i=t.format?Object.assign({},ct(t.format,["parse"])):{}),qs(t))r._data={values:t.values};else if(Bs(t)){if(r._data={url:t.url},!i.type){var a=/(?:\.([^.]+))?$/.exec(t.url)[1];ht(["json","csv","tsv","dsv","topojson"],a)||(a="json"),i.type=a}}else Xs(t)?r._data={values:[{type:"Sphere"}]}:(Hs(t)||Ws(t))&&(r._data={});return r._generator=Ws(t),t.name&&(r._name=t.name),i&&!kt(i)&&(r._data.format=i),r}return(0,s.Z)(e,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"data",get:function(){return this._data}},{key:"hasName",value:function(){return!!this._name}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(t){this._name=t}},{key:"parent",set:function(t){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),e}(tl),Vh=function(t,n,e,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof n?t!==n||!i:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,e):i?i.value=e:n.set(t,e),e},Kh=function(t,n,e,r){if("a"===e&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof n?t!==n||!r:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?r:"a"===e?r.call(t):r?r.value:n.get(t)};function Qh(t){return t instanceof $h||t instanceof Gh||t instanceof Jh}var td=function(){function t(){(0,c.Z)(this,t),Wh.set(this,void 0),Vh(this,Wh,!1,"f")}return(0,s.Z)(t,[{key:"setModified",value:function(){Vh(this,Wh,!0,"f")}},{key:"modifiedFlag",get:function(){return Kh(this,Wh,"f")}}]),t}();Wh=new WeakMap;var nd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"getNodeDepths",value:function(t,n,e){e.set(t,n);var r,i=(0,Y.Z)(t.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.getNodeDepths(a,n+1,e)}}catch(o){i.e(o)}finally{i.f()}return e}},{key:"optimize",value:function(t){var n,e=this.getNodeDepths(t,0,new Map),r=(0,u.Z)(e.entries()).sort((function(t,n){return n[1]-t[1]})),i=(0,Y.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.run(a[0])}}catch(o){i.e(o)}finally{i.f()}return this.modifiedFlag}}]),e}(td),ed=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"optimize",value:function(t){this.run(t);var n,e=(0,Y.Z)(t.children);try{for(e.s();!(n=e.n()).done;){var r=n.value;this.optimize(r)}}catch(i){e.e(i)}finally{e.f()}return this.modifiedFlag}}]),e}(td),rd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"mergeNodes",value:function(t,n){var e,r=n.shift(),i=(0,Y.Z)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;t.removeChild(a),a.parent=r,a.remove()}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(t){for(var n=t.children.map((function(t){return t.hash()})),e={},r=0;r<n.length;r++)void 0===e[n[r]]?e[n[r]]=[t.children[r]]:e[n[r]].push(t.children[r]);var i,a=(0,Y.Z)(Mt(e));try{for(a.s();!(i=a.n()).done;){var o=i.value;e[o].length>1&&(this.setModified(),this.mergeNodes(t,e[o]))}}catch(u){a.e(u)}finally{a.f()}}}]),e}(ed),id=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t){var r;return(0,c.Z)(this,e),(r=n.call(this)).requiresSelectionId=t&&mf(t),r}return(0,s.Z)(e,[{key:"run",value:function(t){t instanceof Xh&&(this.requiresSelectionId&&(Qh(t.parent)||t.parent instanceof Lh||t.parent instanceof Yh)||(this.setModified(),t.remove()))}}]),e}(ed),ad=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"optimize",value:function(t){return this.run(t,new Set),this.modifiedFlag}},{key:"run",value:function(t,n){var e=new Set;t instanceof rl&&xt(e=t.producedFields(),n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove());var r,i=(0,Y.Z)(t.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.run(a,new Set([].concat((0,u.Z)(n),(0,u.Z)(e))))}}catch(o){i.e(o)}finally{i.f()}}}]),e}(td),od=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.call(this)}return(0,s.Z)(e,[{key:"run",value:function(t){t instanceof nl&&!t.isRequired()&&(this.setModified(),t.remove())}}]),e}(ed),ud=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){if(!Qh(t)&&!(t.numChildren()>1)){var n,e=(0,Y.Z)(t.children);try{for(e.s();!(n=e.n()).done;){var r=n.value;if(r instanceof Yh)if(t instanceof Yh)this.setModified(),t.merge(r);else{if(wt(t.producedFields(),r.dependentFields()))continue;this.setModified(),r.swapWithParent()}}}catch(i){e.e(i)}finally{e.f()}}}}]),e}(nd),cd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){var n=(0,u.Z)(t.children),e=t.children.filter((function(t){return t instanceof Yh}));if(t.numChildren()>1&&e.length>=1){var r,i={},a=new Set,o=(0,Y.Z)(e);try{for(o.s();!(r=o.n()).done;){var c,s=r.value.parse,l=(0,Y.Z)(Mt(s));try{for(l.s();!(c=l.n()).done;){var f=c.value;f in i?i[f]!==s[f]&&a.add(f):i[f]=s[f]}}catch(_){l.e(_)}finally{l.f()}}}catch(_){o.e(_)}finally{o.f()}var h,d=(0,Y.Z)(a);try{for(d.s();!(h=d.n()).done;){delete i[h.value]}}catch(_){d.e(_)}finally{d.f()}if(!kt(i)){this.setModified();var p,v=new Yh(t,i),g=(0,Y.Z)(n);try{for(g.s();!(p=g.n()).done;){var m=p.value;if(m instanceof Yh){var y,b=(0,Y.Z)(Mt(i));try{for(b.s();!(y=b.n()).done;){var x=y.value;delete m.parse[x]}}catch(_){b.e(_)}finally{b.f()}}t.removeChild(m),m.parent=v,m instanceof Yh&&0===Mt(m.parse).length&&m.remove()}}catch(_){g.e(_)}finally{g.f()}}}}}]),e}(nd),sd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){t instanceof nl||t.numChildren()>0||t instanceof Ih||t instanceof $h||(this.setModified(),t.remove())}}]),e}(nd),ld=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){var n,e=t.children.filter((function(t){return t instanceof rl})),r=e.pop(),i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.setModified(),r.merge(a)}}catch(o){i.e(o)}finally{i.f()}}}]),e}(nd),fd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){var n,e=t.children.filter((function(t){return t instanceof Lh})),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=lt(a.groupBy);o in r||(r[o]=[]),r[o].push(a)}}catch(p){i.e(p)}finally{i.f()}var u,c=(0,Y.Z)(Mt(r));try{for(c.s();!(u=c.n()).done;){var s=r[u.value];if(s.length>1){var l,f=s.pop(),h=(0,Y.Z)(s);try{for(h.s();!(l=h.n()).done;){var d=l.value;f.merge(d)&&(t.removeChild(d),d.parent=f,d.remove(),this.setModified())}}catch(p){h.e(p)}finally{h.f()}}}}catch(p){c.e(p)}finally{c.f()}}}]),e}(nd),hd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t){var r;return(0,c.Z)(this,e),(r=n.call(this)).model=t,r}return(0,s.Z)(e,[{key:"run",value:function(t){var n,e=!(Qh(t)||t instanceof kf||t instanceof Yh||t instanceof Xh),r=[],i=[],a=(0,Y.Z)(t.children);try{for(a.s();!(n=a.n()).done;){var o=n.value;o instanceof Ph&&(e&&!wt(t.producedFields(),o.dependentFields())?r.push(o):i.push(o))}}catch(v){a.e(v)}finally{a.f()}if(r.length>0){var u,c=r.pop(),s=(0,Y.Z)(r);try{for(s.s();!(u=s.n()).done;){var l=u.value;c.merge(l,this.model.renameSignal.bind(this.model))}}catch(v){s.e(v)}finally{s.f()}this.setModified(),t instanceof Ph?t.merge(c,this.model.renameSignal.bind(this.model)):c.swapWithParent()}if(i.length>1){var f,h=i.pop(),d=(0,Y.Z)(i);try{for(d.s();!(f=d.n()).done;){var p=f.value;h.merge(p,this.model.renameSignal.bind(this.model))}}catch(v){d.e(v)}finally{d.f()}this.setModified()}}}]),e}(nd),dd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"run",value:function(t){var n=(0,u.Z)(t.children),e=dt(n,(function(t){return t instanceof nl}));if(e&&!(t.numChildren()<=1)){var r,i,a=[],o=(0,Y.Z)(n);try{for(o.s();!(i=o.n()).done;){var c=i.value;if(c instanceof nl){for(var s=c;1===s.numChildren();){var l=(0,W.Z)(s.children,1)[0];if(!(l instanceof nl))break;s=l}a.push.apply(a,(0,u.Z)(s.children)),r?(t.removeChild(c),c.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setModified()):r=s}else a.push(c)}}catch(p){o.e(p)}finally{o.f()}if(a.length){this.setModified();var f,h=(0,Y.Z)(a);try{for(h.s();!(f=h.n()).done;){var d=f.value;d.parent.removeChild(d),d.parent=r}}catch(p){h.e(p)}finally{h.f()}}}}}]),e}(nd),pd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=mt(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var n;return null!==(n=t.as)&&void 0!==n?n:_o(t)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t,n=[],e=[],r=[],i=(0,Y.Z)(this.transform.joinaggregate);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.push(a.op),r.push(this.getDefaultName(a)),n.push(void 0===a.field?null:a.field)}}catch(u){i.e(u)}finally{i.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:e,fields:n},void 0!==o?{groupby:o}:{})}}]),e}(tl);var vd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t))._stack=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this._stack))}},{key:"stack",get:function(){return this._stack}},{key:"addDimensions",value:function(t){var n;(n=this._stack.facetby).push.apply(n,(0,u.Z)(t))}},{key:"dependentFields",value:function(){var t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(lt(this._stack))}},{key:"getGroupbyFields",value:function(){var t=this._stack,n=t.dimensionFieldDefs,e=t.impute,r=t.groupby;return n.length>0?n.map((function(t){return t.bin?e?[_o(t,{binSuffix:"mid"})]:[_o(t,{}),_o(t,{binSuffix:"end"})]:[_o(t)]})).flat():null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var t=[],n=this._stack,e=n.facetby,r=n.dimensionFieldDefs,i=n.stackField,a=n.stackby,o=n.sort,c=n.offset,s=n.impute,l=n.as;if(s){var f,h=(0,Y.Z)(r);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=d.bandPosition,v=void 0===p?.5:p;if(d.bin){var g=_o(d,{expr:"datum"}),m=_o(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:"".concat(v,"*").concat(g,"+").concat(1-v,"*").concat(m),as:_o(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[].concat((0,u.Z)(a),(0,u.Z)(e)),key:_o(d,{binSuffix:"mid"}),method:"value",value:0})}}catch(y){h.e(y)}finally{h.f()}}return t.push({type:"stack",groupby:[].concat((0,u.Z)(this.getGroupbyFields()),(0,u.Z)(e)),field:i,sort:o,as:l,offset:c}),t}}],[{key:"makeFromTransform",value:function(t,n){var r=n.stack,i=n.groupby,a=n.as,o=n.offset,u=void 0===o?"zero":o,c=[],s=[];if(void 0!==n.sort){var l,f=(0,Y.Z)(n.sort);try{for(f.s();!(l=f.n()).done;){var h=l.value;c.push(h.field),s.push(Rt(h.order,"ascending"))}}catch(v){f.e(v)}finally{f.f()}}var d,p={field:c,order:s};return d=function(t){return(0,H.kJ)(t)&&t.every((function(t){return(0,H.HD)(t)}))&&t.length>1}(a)?a:(0,H.HD)(a)?[a,"".concat(a,"_end")]:["".concat(n.stack,"_start"),"".concat(n.stack,"_end")],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:u,sort:p,facetby:[],as:d})}},{key:"makeFromEncoding",value:function(t,n){var r=n.stack,i=n.encoding;if(!r)return null;var a,o=r.groupbyChannels,u=r.fieldChannel,c=r.offset,s=r.impute,l=o.map((function(t){return Ao(i[t])})).filter((function(t){return!!t})),f=function(t){return t.stack.stackBy.reduce((function(t,n){var e=_o(n.fieldDef);return e&&t.push(e),t}),[])}(n),h=n.encoding.order;return a=(0,H.kJ)(h)||uo(h)?rr(h):f.reduce((function(t,n){return t.field.push(n),t.order.push("y"===u?"descending":"ascending"),t}),{field:[],order:[]}),new e(t,{dimensionFieldDefs:l,stackField:n.vgField(u),facetby:[],stackby:f,sort:a,offset:c,impute:s,as:[n.vgField(u,{suffix:"start",forAs:!0}),n.vgField(u,{suffix:"end",forAs:!0})]})}}]),e}(tl),gd=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=mt(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t,n,e=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(e.add,e),(null!==(n=this.transform.sort)&&void 0!==n?n:[]).forEach((function(t){return e.add(t.field)})),this.transform.window.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var n;return null!==(n=t.as)&&void 0!==n?n:_o(t)}},{key:"hash",value:function(){return"WindowTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t,n,e=[],r=[],i=[],a=[],o=(0,Y.Z)(this.transform.window);try{for(o.s();!(n=o.n()).done;){var u=n.value;r.push(u.op),i.push(this.getDefaultName(u)),a.push(void 0===u.param?null:u.param),e.push(void 0===u.field?null:u.field)}}catch(m){o.e(m)}finally{o.f()}var c=this.transform.frame,s=this.transform.groupby;if(c&&null===c[0]&&null===c[1]&&r.every((function(t){return ke(t)})))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:e},void 0!==s?{groupby:s}:{});var l=[],f=[];if(void 0!==this.transform.sort){var h,d=(0,Y.Z)(this.transform.sort);try{for(d.s();!(h=d.n()).done;){var p=h.value;l.push(p.field),f.push(null!==(t=p.order)&&void 0!==t?t:"ascending")}}catch(m){d.e(m)}finally{d.f()}}var v={field:l,order:f},g=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:a,as:i,ops:r,fields:e,sort:v},void 0!==g?{ignorePeers:g}:{}),void 0!==s?{groupby:s}:{}),void 0!==c?{frame:c}:{})}}]),e}(tl);function md(t){if(t instanceof Ih)if(1!==t.numChildren()||t.children[0]instanceof nl){var n=t.model.component.data.main;yd(n);var e,r=(u=t,function t(n){if(!(n instanceof Ih)){var e=n.clone();if(e instanceof nl){var r=bd+e.getSource();e.setSource(r),u.model.component.data.outputNodes[r]=e}else(e instanceof Lh||e instanceof vd||e instanceof gd||e instanceof pd)&&e.addDimensions(u.fields);var i,a=(0,Y.Z)(n.children.flatMap(t));try{for(a.s();!(i=a.n()).done;)i.value.parent=e}catch(o){a.e(o)}finally{a.f()}return[e]}return n.children.flatMap(t)}),i=t.children.map(r).flat(),a=(0,Y.Z)(i);try{for(a.s();!(e=a.n()).done;){e.value.parent=n}}catch(c){a.e(c)}finally{a.f()}}else{var o=t.children[0];(o instanceof Lh||o instanceof vd||o instanceof gd||o instanceof pd)&&o.addDimensions(t.fields),o.swapWithParent(),md(t)}else t.children.map(md);var u}function yd(t){if(t instanceof nl&&t.type===Ls.Main&&1===t.numChildren()){var n=t.children[0];n instanceof Ih||(n.swapWithParent(),yd(t))}}var bd="scale_",xd=5;function _d(t){var n,e=(0,Y.Z)(t);try{for(e.s();!(n=e.n()).done;){var r,i=n.value,a=(0,Y.Z)(i.children);try{for(a.s();!(r=a.n()).done;){if(r.value.parent!==i)return!1}}catch(o){a.e(o)}finally{a.f()}if(!_d(i.children))return!1}}catch(o){e.e(o)}finally{e.f()}return!0}function wd(t,n){var e,r=!1,i=(0,Y.Z)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;r=t.optimize(a)||r}}catch(o){i.e(o)}finally{i.f()}return r}function kd(t,n,e){var r=t.sources,i=!1;return i=wd(new od,r)||i,i=wd(new id(n),r)||i,r=r.filter((function(t){return t.numChildren()>0})),i=wd(new sd,r)||i,r=r.filter((function(t){return t.numChildren()>0})),e||(i=wd(new ud,r)||i,i=wd(new hd(n),r)||i,i=wd(new ad,r)||i,i=wd(new cd,r)||i,i=wd(new fd,r)||i,i=wd(new ld,r)||i,i=wd(new rd,r)||i,i=wd(new dd,r)||i),t.sources=r,i}var Md=function(){function t(n){(0,c.Z)(this,t),Object.defineProperty(this,"signal",{enumerable:!0,get:n})}return(0,s.Z)(t,null,[{key:"fromName",value:function(n,e){return new t((function(){return n(e)}))}}]),t}(),Od=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Ed(t){op(t)?function(t){var n,e=t.component.scales,r=(0,Y.Z)(Mt(e));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=Sd(t,i);if(e[i].setWithExplicit("domains",a),Td(t,i),t.component.data.isFaceted){for(var o=t;!up(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[i]){var u,c=(0,Y.Z)(a.value);try{for(c.s();!(u=c.n()).done;){var s=u.value;Ie(s)&&(s.data=bd+s.data.replace(bd,""))}}catch(l){c.e(l)}finally{c.f()}}}}}catch(l){r.e(l)}finally{r.f()}}(t):function(t){var n,e=(0,Y.Z)(t.children);try{for(e.s();!(n=e.n()).done;){Ed(n.value)}}catch(d){e.e(d)}finally{e.f()}var r,i=t.component.scales,a=(0,Y.Z)(Mt(i));try{for(a.s();!(r=a.n()).done;){var o,u=r.value,c=void 0,s=null,l=(0,Y.Z)(t.children);try{for(l.s();!(o=l.n()).done;){var f=o.value.component.scales[u];if(f){c=void 0===c?f.getWithExplicit("domains"):Rs(c,f.getWithExplicit("domains"),"domains","scale",jd);var h=f.get("selectionExtent");s&&h&&s.param!==h.param&&Xr(mr),s=h}}}catch(d){l.e(d)}finally{l.f()}i[u].setWithExplicit("domains",c),s&&i[u].set("selectionExtent",s,!0)}}catch(d){a.e(d)}finally{a.f()}}(t)}function Sd(t,n){var e=t.getScaleComponent(n).get("type"),r=t.encoding,i=function(t,n,e,r){if("unaggregated"===t){var i=Fd(n,e),a=i.valid,o=i.reason;if(!a)return void Xr(o)}else if(void 0===t&&r.useUnaggregatedDomain&&Fd(n,e).valid)return"unaggregated";return t}(t.scaleDomain(n),t.typedFieldDef(n),e,t.config.scale);return i!==t.scaleDomain(n)&&(t.specifiedScales[n]=Object.assign(Object.assign({},t.specifiedScales[n]),{domain:i})),"x"===n&&To(r.x2)?To(r.x)?Rs(Cd(e,i,t,"x"),Cd(e,i,t,"x2"),"domain","scale",jd):Cd(e,i,t,"x2"):"y"===n&&To(r.y2)?To(r.y)?Rs(Cd(e,i,t,"y"),Cd(e,i,t,"y2"),"domain","scale",jd):Cd(e,i,t,"y2"):Cd(e,i,t,n)}function Dd(t,n,e){var r,i=null===(r=li(e))||void 0===r?void 0:r.unit;return"temporal"===n||i?function(t,n,e){return t.map((function(t){var r=Po(t,{timeUnit:e,type:n});return{signal:"{data: ".concat(r,"}")}}))}(t,n,i):[t]}function Cd(t,n,e,r){var i=To(e.encoding[r]),a=i.type,o=i.timeUnit;if(function(t){return null===t||void 0===t?void 0:t.unionWith}(n)){var c=Cd(t,void 0,e,r),s=Dd(n.unionWith,a,o);return Ns([].concat((0,u.Z)(s),(0,u.Z)(c.value)))}if(Re(n))return Ns([n]);if(n&&"unaggregated"!==n&&!Yi(n))return Ns(Dd(n,a,o));var l=e.stack;if(l&&r===l.fieldChannel){if("normalize"===l.offset)return zs([[0,1]]);var f=e.requestDataName(Ls.Main);return zs([{data:f,field:e.vgField(r,{suffix:"start"})},{data:f,field:e.vgField(r,{suffix:"end"})}])}var h=de(r)&&uo(i)?function(t,n,e){if(!Bi(e))return;var r=t.fieldDef(n),i=r.sort;if(Ga(i))return{op:"min",field:Lf(r,n),order:"ascending"};var a=t.stack,o=a?new Set([].concat((0,u.Z)(a.groupbyFields),(0,u.Z)(a.stackBy.map((function(t){return t.fieldDef.field}))))):void 0;if(Xa(i))return Ad(i,a&&!o.has(i.field));if(Ya(i)){var c=i.encoding,s=i.order,l=t.fieldDef(c),f=l.aggregate,h=l.field,d=a&&!o.has(h);if(_e(f)||we(f))return Ad({field:_o(l),order:s},d);if(ke(f)||!f)return Ad({op:f,field:h,order:s},d)}else{if("descending"===i)return{op:"min",field:t.vgField(n),order:"descending"};if(ht(["ascending",void 0],i))return!0}return}(e,r,t):void 0;if(so(i))return zs(Dd([i.datum],a,o));var d=i;if("unaggregated"===n){var p=e.requestDataName(Ls.Main),v=i.field;return zs([{data:p,field:_o({field:v,aggregate:"min"})},{data:p,field:_o({field:v,aggregate:"max"})}])}if(Ce(d.bin)){if(Bi(t))return zs("bin-ordinal"===t?[]:[{data:St(h)?e.requestDataName(Ls.Main):e.requestDataName(Ls.Raw),field:e.vgField(r,Lo(d,r)?{binSuffix:"range"}:{}),sort:!0!==h&&(0,H.Kn)(h)?h:{field:e.vgField(r,{}),op:"min"}}]);var g=d.bin;if(Ce(g)){var m=zh(e,d.field,g);return zs([new Md((function(){var t=e.getSignalName(m);return"[".concat(t,".start, ").concat(t,".stop]")}))])}return zs([{data:e.requestDataName(Ls.Main),field:e.vgField(r,{})}])}if(d.timeUnit&&ht(["time","utc"],t)&&ro(d,op(e)?e.encoding[Gn(r)]:void 0,e.markDef,e.config)){var y=e.requestDataName(Ls.Main);return zs([{data:y,field:e.vgField(r)},{data:y,field:e.vgField(r,{suffix:"end"})}])}return zs(h?[{data:St(h)?e.requestDataName(Ls.Main):e.requestDataName(Ls.Raw),field:e.vgField(r),sort:h}]:[{data:e.requestDataName(Ls.Main),field:e.vgField(r)}])}function Ad(t,n){var e=t.op,r=t.field,i=t.order;return Object.assign(Object.assign({op:null!==e&&void 0!==e?e:n?"sum":qa},r?{field:Nt(r)}:{}),i?{order:i}:{})}function Td(t,n){var e,r=t.component.scales[n],i=t.specifiedScales[n].domain,a=null===(e=t.fieldDef(n))||void 0===e?void 0:e.bin,o=Yi(i)&&i,u=Te(a)&&Fe(a.extent)&&a.extent;(o||u)&&r.set("selectionExtent",null!==o&&void 0!==o?o:u,!0)}function Fd(t,n){var e=t.aggregate,r=t.type;return e?(0,H.HD)(e)&&!Se.has(e)?{valid:!1,reason:jr(e)}:"quantitative"===r&&"log"===n?{valid:!1,reason:Zr(t)}:{valid:!0}:{valid:!1,reason:Fr(t)}}function jd(t,n,e,r){return t.explicit&&n.explicit&&Xr(function(t,n,e,r){return"Conflicting ".concat(n.toString(),' property "').concat(t.toString(),'" (').concat(st(e)," and ").concat(st(r),"). Using the union of the two domains.")}(e,r,t.value,n.value)),{explicit:t.explicit,value:[].concat((0,u.Z)(t.value),(0,u.Z)(n.value))}}function Zd(t){var n=mt(t.map((function(t){if(Ie(t)){t.sort;return Od(t,["sort"])}return t})),lt),e=mt(t.map((function(t){if(Ie(t)){var n=t.sort;return void 0===n||St(n)||("op"in n&&"count"===n.op&&delete n.field,"ascending"===n.order&&delete n.order),n}})).filter((function(t){return void 0!==t})),lt);if(0!==n.length){if(1===n.length){var r=t[0];if(Ie(r)&&e.length>0){var i=e[0];if(e.length>1)Xr(Ur),i=!0;else if((0,H.Kn)(i)&&"field"in i){var a=i.field;r.field===a&&(i=!i.order||{order:i.order})}return Object.assign(Object.assign({},r),{sort:i})}return r}var o,u=mt(e.map((function(t){return St(t)||!("op"in t)||(0,H.HD)(t.op)&&t.op in xe?t:(Xr(function(t){return"Dropping sort property ".concat(st(t),' as unioned domains only support boolean or op "count", "min", and "max".')}(t)),!0)})),lt);1===u.length?o=u[0]:u.length>1&&(Xr(Ur),o=!0);var c=mt(t.map((function(t){return Ie(t)?t.data:null})),(function(t){return t}));return 1===c.length&&null!==c[0]?Object.assign({data:c[0],fields:n.map((function(t){return t.field}))},o?{sort:o}:{}):Object.assign({fields:n},o?{sort:o}:{})}}function Nd(t){if(Ie(t)&&(0,H.HD)(t.field))return t.field;if(function(t){return!(0,H.kJ)(t)&&"fields"in t&&!("data"in t)}(t)){var n,e,r=(0,Y.Z)(t.fields);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(Ie(i)&&(0,H.HD)(i.field))if(n){if(n!==i.field)return Xr(Pr),n}else n=i.field}}catch(o){r.e(o)}finally{r.f()}return Xr(Rr),n}if(function(t){return!(0,H.kJ)(t)&&"fields"in t&&"data"in t}(t)){Xr(Lr);var a=t.fields[0];return(0,H.HD)(a)?a:void 0}}function zd(t,n){var e=t.component.scales[n].get("domains").map((function(n){return Ie(n)&&(n.data=t.lookupDataSource(n.data)),n}));return Zd(e)}var Ud=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function Pd(t){return sp(t)||cp(t)?t.children.reduce((function(t,n){return t.concat(Pd(n))}),Rd(t)):Rd(t)}function Rd(t){return Mt(t.component.scales).reduce((function(n,e){var r=t.component.scales[e];if(r.merged)return n;var i=r.combine(),a=i.name,o=i.type,u=i.selectionExtent,c=(i.domains,i.range,i.reverse),s=Ud(i,["name","type","selectionExtent","domains","range","reverse"]),l=function(t,n,e,r){if(re(e)){if(Le(t))return{step:{signal:"".concat(n,"_step")}}}else if((0,H.Kn)(t)&&Ie(t))return Object.assign(Object.assign({},t),{data:r.lookupDataSource(t.data)});return t}(i.range,a,e,t),f=zd(t,e),h=u?function(t,n,e,r){var i=Of(t,n.param,n);return{signal:qi(e.get("type"))&&(0,H.kJ)(r)&&r[0]>r[1]?"isValid(".concat(i,") && reverse(").concat(i,")"):i}}(t,u,r,f):null;return n.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a,type:o},f?{domain:f}:{}),h?{domainRaw:h}:{}),{range:l}),void 0!==c?{reverse:c}:{}),s)),n}),[])}var Ld=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,{},{name:t})).merged=!1,i.setWithExplicit("type",r),i}return(0,s.Z)(e,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||dt(this.get("domains"),(function(t){return(0,H.kJ)(t)&&2===t.length&&t[0]<=0&&t[1]>=0}))}}]),e}(Zs),Id=["range","scheme"];function Bd(t,n){var e=t.fieldDef(n);if(null===e||void 0===e?void 0:e.bin){var r=e.bin,i=e.field,a=Jn(n),o=t.getName(a);if((0,H.Kn)(r)&&r.binned&&void 0!==r.step)return new Md((function(){var e=t.scaleName(n),i='(domain("'.concat(e,'")[1] - domain("').concat(e,'")[0]) / ').concat(r.step);return"".concat(t.getSignalName(o)," / (").concat(i,")")}));if(Ce(r)){var u=zh(t,i,r);return new Md((function(){var n=t.getSignalName(u),e="(".concat(n,".stop - ").concat(n,".start) / ").concat(n,".step");return"".concat(t.getSignalName(o)," / (").concat(e,")")}))}}}function qd(t,n){var e,r=n.specifiedScales[t],i=n.size,a=n.getScaleComponent(t).get("type"),o=(0,Y.Z)(Id);try{for(o.s();!(e=o.n()).done;){var u=e.value;if(void 0!==r[u]){var c=$i(a,u),s=Vi(t,u);if(c)if(s)Xr(s);else switch(u){case"range":var l=r.range;if((0,H.kJ)(l)){if(re(t))return Ns(l.map((function(t){if("width"===t||"height"===t){var e=n.getName(t),r=n.getSignalName.bind(n);return Md.fromName(r,e)}return t})))}else if((0,H.Kn)(l))return Ns({data:n.requestDataName(Ls.Main),field:l.field,sort:{op:"min",field:n.vgField(t)}});return Ns(l);case"scheme":return Ns(Hd(r[u]))}else Xr(Nr(a,u,t))}}}catch(b){o.e(b)}finally{o.f()}var f=t===Vt||"xOffset"===t?"width":"height",h=i[f];if(Ku(h))if(re(t))if(Bi(a)){var d=Wd(h,n,t);if(d)return Ns({step:d})}else Xr(zr(f));else if(ce(t)){var p=t===nn?"x":"y";if("band"===n.getScaleComponent(p).get("type")){var v=Yd(h,a);if(v)return Ns(v)}}var g=r.rangeMin,m=r.rangeMax,y=function(t,n){var e=n.size,r=n.config,i=n.mark,a=n.encoding,o=n.getSignalName.bind(n),u=To(a[t]),c=u.type,s=n.getScaleComponent(t),l=s.get("type"),f=n.specifiedScales[t],h=f.domain,d=f.domainMid;switch(t){case Vt:case Kt:if(ht(["point","band"],l)){var p=Xd(t,e,r.view);if(Ku(p))return{step:Wd(p,n,t)}}var v=Jn(t),g=n.getName(v);return t===Kt&&qi(l)?[Md.fromName(o,g),0]:[0,Md.fromName(o,g)];case nn:case en:return function(t,n,e){var r=t===nn?"x":"y",i=n.getScaleComponent(r),a=i.get("type"),o=n.scaleName(r);if("band"===a){var u=Xd(r,n.size,n.config.view);if(Ku(u)){var c=Yd(u,e);if(c)return c}return[0,{signal:"bandwidth('".concat(o,"')")}]}return ot("Cannot use ".concat(t," scale if ").concat(r," scale is not discrete."))}(t,n,l);case gn:var m=Gd(i,n.component.scales[t].get("zero"),r),y=function(t,n,e,r){var i={x:Bd(e,"x"),y:Bd(e,"y")};switch(t){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var a=$d(n,i,r.view);return(0,H.hj)(a)?a-1:new Md((function(){return"".concat(a.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=$d(n,i,r.view);return(0,H.hj)(o)?Math.pow(Jd*o,2):new Md((function(){return"pow(".concat(Jd," * ").concat(o.signal,", 2)")}))}throw new Error(Sr("size",t))}(i,e,n,r);return Wi(l)?function(t,n,e){var r=function(){var r=Ve(n),i=Ve(t),a="(".concat(r," - ").concat(i,") / (").concat(e," - 1)");return"sequence(".concat(i,", ").concat(r," + ").concat(a,", ").concat(a,")")};return Re(n)?new Md(r):{signal:r()}}(m,y,function(t,n,e,r){switch(t){case"quantile":return n.scale.quantileCount;case"quantize":return n.scale.quantizeCount;case"threshold":return void 0!==e&&(0,H.kJ)(e)?e.length+1:(Xr(function(t){return"Domain for ".concat(t," is required for threshold scale.")}(r)),3)}}(l,r,h,t)):[m,y];case on:return[0,2*Math.PI];case mn:return[0,360];case rn:return[0,new Md((function(){var t=n.getSignalName("width"),e=n.getSignalName("height");return"min(".concat(t,",").concat(e,")/2")}))];case _n:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case wn:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case vn:return"symbol";case hn:case dn:case pn:return"ordinal"===l?"nominal"===c?"category":"ordinal":void 0!==d?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case yn:case bn:case xn:return[r.scale.minOpacity,r.scale.maxOpacity]}}(t,n);return(void 0!==g||void 0!==m)&&$i(a,"rangeMin")&&(0,H.kJ)(y)&&2===y.length?Ns([null!==g&&void 0!==g?g:y[0],null!==m&&void 0!==m?m:y[1]]):zs(y)}function Hd(t){return function(t){return!(0,H.HD)(t)&&!!t.name}(t)?Object.assign({scheme:t.name},ct(t,["name"])):{scheme:t}}function Wd(t,n,e){var r,i,a,o,u,c,s=n.encoding,l=n.getScaleComponent(e),f=$n(e),h=s[f];if("offset"===Vu({step:t,offsetIsDiscrete:ho(h)&&Mi(h.type)})&&Qo(s,f)){var d=n.getScaleComponent(f),p=n.scaleName(f),v="domain('".concat(p,"').length");if("band"===d.get("type")){var g=null!==(i=null!==(r=d.get("paddingInner"))&&void 0!==r?r:d.get("padding"))&&void 0!==i?i:0,m=null!==(o=null!==(a=d.get("paddingOuter"))&&void 0!==a?a:d.get("padding"))&&void 0!==o?o:0;v="bandspace(".concat(v,", ").concat(g,", ").concat(m,")")}var y=null!==(u=l.get("paddingInner"))&&void 0!==u?u:l.get("padding");return{signal:"".concat(t.step," * ").concat(v," / (1-").concat((c=y,Re(c)?c.signal:(0,H.m8)(c)),")")}}return t.step}function Yd(t,n){if("offset"===Vu({step:t,offsetIsDiscrete:Bi(n)}))return{step:t.step}}function Xd(t,n,e){var r=t===Vt?"width":"height",i=n[r];return i||ic(e,r)}function Gd(t,n,e){if(n)return Re(n)?{signal:"".concat(n.signal," ? 0 : ").concat(Gd(t,!1,e))}:0;switch(t){case"bar":case"tick":return e.scale.minBandSize;case"line":case"trail":case"rule":return e.scale.minStrokeWidth;case"text":return e.scale.minFontSize;case"point":case"square":case"circle":return e.scale.minSize}throw new Error(Sr("size",t))}var Jd=.95;function $d(t,n,e){var r=Ku(t.width)?t.width.step:rc(e,"width"),i=Ku(t.height)?t.height.step:rc(e,"height");return n.x||n.y?new Md((function(){var t=[n.x?n.x.signal:r,n.y?n.y.signal:i];return"min(".concat(t.join(", "),")")})):Math.min(r,i)}function Vd(t,n){op(t)?function(t,n){var e,r=t.component.scales,i=t.config,a=t.encoding,o=t.markDef,u=t.specifiedScales,c=(0,Y.Z)(Mt(r));try{for(c.s();!(e=c.n()).done;){var s=e.value,l=u[s],f=r[s],h=t.getScaleComponent(s),d=To(a[s]),p=l[n],v=h.get("type"),g=h.get("padding"),m=h.get("paddingInner"),y=$i(v,n),b=Vi(s,n);if(void 0!==p&&(y?b&&Xr(b):Xr(Nr(v,n,s))),y&&void 0===b)if(void 0!==p){var x=d.timeUnit,_=d.type;switch(n){case"domainMax":case"domainMin":Gr(l[n])||"temporal"===_||x?f.set(n,{signal:Po(l[n],{type:_,timeUnit:x})},!0):f.set(n,l[n],!0);break;default:f.copyKeyFromObject(n,l)}}else{var w=n in Kd?Kd[n]({model:t,channel:s,fieldOrDatumDef:d,scaleType:v,scalePadding:g,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:tu(a,s),hasSecondaryRangeChannel:!!a[Gn(s)]}):i.scale[n];void 0!==w&&f.set(n,w,!1)}}}catch(k){c.e(k)}finally{c.f()}}(t,n):tp(t,n)}var Kd={bins:function(t){var n=t.model,e=t.fieldOrDatumDef;return uo(e)?function(t,n){var e=n.bin;if(Ce(e)){var r=zh(t,n.field,e);return new Md((function(){return t.getSignalName(r)}))}if(Ae(e)&&Te(e)&&void 0!==e.step)return{step:e.step};return}(n,e):void 0},interpolate:function(t){return function(t,n){if(ht([hn,dn,pn],t)&&"nominal"!==n)return"hcl";return}(t.channel,t.fieldOrDatumDef.type)},nice:function(t){return function(t,n,e,r,i,a){var o;if((null===(o=Ao(a))||void 0===o?void 0:o.bin)||(0,H.kJ)(e)||null!=i||null!=r||ht([Ti.TIME,Ti.UTC],t))return;return!!re(n)||void 0}(t.scaleType,t.channel,t.domain,t.domainMin,t.domainMax,t.fieldOrDatumDef)},padding:function(t){var n=t.channel,e=t.scaleType,r=t.fieldOrDatumDef,i=t.markDef,a=t.config;return function(t,n,e,r,i,a){if(re(t)){if(Hi(n)){if(void 0!==e.continuousPadding)return e.continuousPadding;var o=i.type,u=i.orient;if("bar"===o&&(!uo(r)||!r.bin&&!r.timeUnit)&&("vertical"===u&&"x"===t||"horizontal"===u&&"y"===t))return a.continuousBandSize}if(n===Ti.POINT)return e.pointPadding}return}(n,e,a.scale,r,i,a.bar)},paddingInner:function(t){var n=t.scalePadding,e=t.channel,r=t.markDef,i=t.scaleType,a=t.config,o=t.hasNestedOffsetScale;return function(t,n,e,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(void 0!==t)return;if(re(n)){var o=i.bandPaddingInner,u=i.barBandPaddingInner,c=i.rectBandPaddingInner,s=i.bandWithNestedOffsetPaddingInner;return a?s:Rt(o,"bar"===e?u:c)}if(ce(n)&&r===Ti.BAND)return i.offsetBandPaddingInner;return}(n,e,r.type,i,a.scale,o)},paddingOuter:function(t){var n=t.scalePadding,e=t.channel,r=t.scaleType,i=t.scalePaddingInner,a=t.config,o=t.hasNestedOffsetScale;return function(t,n,e,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(void 0!==t)return;if(re(n)){var o=i.bandPaddingOuter,u=i.bandWithNestedOffsetPaddingOuter;if(a)return u;if(e===Ti.BAND)return Rt(o,Re(r)?{signal:"".concat(r.signal,"/2")}:r/2)}else if(ce(n)){if(e===Ti.POINT)return.5;if(e===Ti.BAND)return i.offsetBandPaddingOuter}return}(n,e,r,i,a.scale,o)},reverse:function(t){var n=t.fieldOrDatumDef,e=t.scaleType,r=t.channel,i=t.config;return function(t,n,e,r){if("x"===e&&void 0!==r.xReverse)return qi(t)&&"descending"===n?Re(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(qi(t)&&"descending"===n)return!0;return}(e,uo(n)?n.sort:void 0,r,i.scale)},zero:function(t){var n=t.channel,e=t.fieldOrDatumDef,r=t.domain,i=t.markDef,a=t.scaleType,o=t.config,c=t.hasSecondaryRangeChannel;return function(t,n,e,r,i,a,o){if(e&&"unaggregated"!==e&&qi(i)){if((0,H.kJ)(e)){var c=e[0],s=e[e.length-1];if(c<=0&&s>=0)return!0}return!1}if("size"===t&&"quantitative"===n.type&&!Wi(i))return!0;if((!uo(n)||!n.bin)&&ht([].concat((0,u.Z)(ee),(0,u.Z)(ae)),t)){var l=r.orient,f=r.type;return(!ht(["bar","area","line","trail"],f)||!("horizontal"===l&&"y"===t||"vertical"===l&&"x"===t))&&(!(!ht(["bar","area"],f)||o)||(null===a||void 0===a?void 0:a.zero))}return!1}(n,e,r,i,a,o.scale,c)}};function Qd(t){op(t)?function(t){var n,e=t.component.scales,r=(0,Y.Z)(he);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i];if(a){var o=qd(i,t);a.setWithExplicit("range",o)}}}catch(u){r.e(u)}finally{r.f()}}(t):tp(t,"range")}function tp(t,n){var e,r=t.component.scales,i=(0,Y.Z)(t.children);try{for(i.s();!(e=i.n()).done;){var a=e.value;"range"===n?Qd(a):Vd(a,n)}}catch(d){i.e(d)}finally{i.f()}var o,u=(0,Y.Z)(Mt(r));try{for(u.s();!(o=u.n()).done;){var c,s=o.value,l=void 0,f=(0,Y.Z)(t.children);try{for(f.s();!(c=f.n()).done;){var h=c.value.component.scales[s];if(h)l=Rs(l,h.getWithExplicit(n),n,"scale",Us((function(t,e){return"range"===n&&t.step&&e.step?t.step-e.step:0})))}}catch(d){f.e(d)}finally{f.f()}r[s].setWithExplicit(n,l)}}catch(d){u.e(d)}finally{u.f()}}function np(t,n,e,r){var i,a,o=function(t,n,e,r){var i;switch(n.type){case"nominal":case"ordinal":if(zn(t)||"discrete"===me(t))return"shape"===t&&"ordinal"===n.type&&Xr(Tr(t,"ordinal")),"ordinal";if(re(t)||ce(t)){if(ht(["rect","bar","image","rule"],e.type))return"band";if(r)return"band"}else if("arc"===e.type&&t in ie)return"band";return xa(e[Jn(t)])||mo(n)&&(null===(i=n.axis)||void 0===i?void 0:i.tickBand)?"band":"point";case"temporal":return zn(t)?"time":"discrete"===me(t)?(Xr(Tr(t,"temporal")),"ordinal"):uo(n)&&n.timeUnit&&li(n.timeUnit).utc?"utc":"time";case"quantitative":return zn(t)?uo(n)&&Ce(n.bin)?"bin-ordinal":"linear":"discrete"===me(t)?(Xr(Tr(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(kr(n.type))}(n,e,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),u=t.type;return de(n)?void 0!==u?function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!de(t))return!1;switch(t){case Vt:case Kt:case nn:case en:case on:case rn:return!!Hi(n)||"band"===n||"point"===n&&!e;case gn:case _n:case yn:case bn:case xn:case mn:return Hi(n)||Wi(n)||ht(["band","point","ordinal"],n);case hn:case dn:case pn:return"band"!==n;case wn:case vn:return"ordinal"===n||Wi(n)}}(n,u)?uo(e)&&(i=u,a=e.type,!(ht([Ei,Di],a)?void 0===i||Bi(i):a===Si?ht([Ti.TIME,Ti.UTC,void 0],i):a!==Oi||Pi(i)||Wi(i)||void 0===i))?(Xr(function(t,n){return'FieldDef does not work with "'.concat(t,'" scale. We are using "').concat(n,'" scale instead.')}(u,o)),o):u:(Xr(function(t,n,e){return'Channel "'.concat(t,'" does not work with "').concat(n,'" scale. We are using "').concat(e,'" scale instead.')}(n,u,o)),o):o:null}function ep(t){op(t)?t.component.scales=function(t){var n,e=t.encoding,r=t.mark,i=t.markDef,a={},o=(0,Y.Z)(he);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=To(e[u]);if(!c||r!==ha||u!==vn||c.type!==Ci){var s=c&&c.scale;if(ce(u))if(!tu(e,Vn(u))){s&&Xr(Dr(u));continue}if(c&&null!==s&&!1!==s){null!==s&&void 0!==s||(s={});var l=np(s,u,c,i,tu(e,u));a[u]=new Ld(t.scaleName("".concat(u),!0),{value:l,explicit:s.type===l})}}}}catch(f){o.e(f)}finally{o.f()}return a}(t):t.component.scales=function(t){var n,e,r,i=t.component.scales={},a={},o=t.component.resolve,u=(0,Y.Z)(t.children);try{for(u.s();!(r=u.n()).done;){var c=r.value;ep(c);var s,l=(0,Y.Z)(Mt(c.component.scales));try{for(l.s();!(s=l.n()).done;){var f=s.value;if(null!==(n=(e=o.scale)[f])&&void 0!==n||(e[f]=ch(f,t)),"shared"===o.scale[f]){var h=a[f],d=c.component.scales[f].getWithExplicit("type");h?ji(h.value,d.value)?a[f]=Rs(h,d,"type","scale",rp):(o.scale[f]="independent",delete a[f]):a[f]=d}}}catch(k){l.e(k)}finally{l.f()}}}catch(k){u.e(k)}finally{u.f()}var p,v=(0,Y.Z)(Mt(a));try{for(v.s();!(p=v.n()).done;){var g=p.value,m=t.scaleName(g,!0),y=a[g];i[g]=new Ld(m,y);var b,x=(0,Y.Z)(t.children);try{for(x.s();!(b=x.n()).done;){var _=b.value,w=_.component.scales[g];w&&(_.renameScale(w.get("name"),m),w.merged=!0)}}catch(k){x.e(k)}finally{x.f()}}}catch(k){v.e(k)}finally{v.f()}return i}(t)}var rp=Us((function(t,n){return Ni(t)-Ni(n)}));var ip=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},ap=function(){function t(){(0,c.Z)(this,t),this.nameMap={}}return(0,s.Z)(t,[{key:"rename",value:function(t,n){this.nameMap[t]=n}},{key:"has",value:function(t){return void 0!==this.nameMap[t]}},{key:"get",value:function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}]),t}();function op(t){return"unit"===(null===t||void 0===t?void 0:t.type)}function up(t){return"facet"===(null===t||void 0===t?void 0:t.type)}function cp(t){return"concat"===(null===t||void 0===t?void 0:t.type)}function sp(t){return"layer"===(null===t||void 0===t?void 0:t.type)}var lp=function(){function t(n,e,r,i,a,o,u){var s,l,f=this;(0,c.Z)(this,t),this.type=e,this.parent=r,this.config=a,this.correctDataNames=function(t){var n,e,r;return(null===(n=t.from)||void 0===n?void 0:n.data)&&(t.from.data=f.lookupDataSource(t.from.data)),(null===(r=null===(e=t.from)||void 0===e?void 0:e.facet)||void 0===r?void 0:r.data)&&(t.from.facet.data=f.lookupDataSource(t.from.facet.data)),t},this.parent=r,this.config=a,this.view=Ne(u),this.name=null!==(s=n.name)&&void 0!==s?s:i,this.title=Pe(n.title)?{text:n.title}:n.title?Ne(n.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new ap,this.projectionNameMap=r?r.projectionNameMap:new ap,this.signalNameMap=r?r.signalNameMap:new ap,this.data=n.data,this.description=n.description,this.transforms=(null!==(l=n.transform)&&void 0!==l?l:[]).map((function(t){return $c(t)?{filter:rt(t.filter,wi)}:t})),this.layout="layer"===e||"unit"===e?{}:function(t,n,e){var r,i,a=e[n],o={},u=a.spacing,c=a.columns;void 0!==u&&(o.spacing=u),void 0!==c&&(Va(t)&&!Ja(t.facet)||Gu(t))&&(o.columns=c),Ju(t)&&(o.columns=1);var s,l=(0,Y.Z)(tc);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(void 0!==t[f])if("spacing"===f){var h=t[f];o[f]=(0,H.hj)(h)?h:{row:null!==(r=h.row)&&void 0!==r?r:u,column:null!==(i=h.column)&&void 0!==i?i:u}}else o[f]=t[f]}}catch(d){l.e(d)}finally{l.f()}return o}(n,e,a),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Va(n)||(null===r||void 0===r?void 0:r.component.data.isFaceted)&&void 0===n.data},layoutSize:new Zs,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?at(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return(0,s.Z)(t,[{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreRange;ep(t),Ed(t);var e,r=(0,Y.Z)(Ji);try{for(r.s();!(e=r.n()).done;)Vd(t,e.value)}catch(i){r.e(i)}finally{r.f()}n||Qd(t)}(this)}},{key:"parseProjection",value:function(){Fh(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){wh(this)}},{key:"assembleEncodeFromView",value:function(t){t.style;var n,e=ip(t,["style"]),r={},i=(0,Y.Z)(Mt(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=e[a];void 0!==o&&(r[a]=Je(o))}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(t){var n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=Je(this.description)),"unit"!==this.type&&"layer"!==this.type)?kt(n)?void 0:n:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==n&&void 0!==n?n:{})}},{key:"assembleLayout",value:function(){if(this.layout){var t=this.layout,n=t.spacing,e=ip(t,["spacing"]),r=this.component,i=this.config,a=function(t,n){var e,r={},i=(0,Y.Z)(Pn);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=t[a];if(null===o||void 0===o?void 0:o.facetFieldDef){var u=qf(["titleAnchor","titleOrient"],o.facetFieldDef.header,n,a),c=u.titleAnchor,s=If(a,u.titleOrient),l=th(c,s);void 0!==l&&(r[s]=l)}}}catch(f){i.e(f)}finally{i.f()}return kt(r)?void 0:r}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),e),a?{titleBand:a}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var t,n=this.component.layoutHeaders,e=[],r=(0,Y.Z)(Pn);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i].title&&e.push(Yf(this,i))}}catch(c){r.e(c)}finally{r.f()}var a,o=(0,Y.Z)(Hf);try{for(o.s();!(a=o.n()).done;){var u=a.value;e=e.concat(Jf(this,u))}}catch(c){o.e(c)}finally{o.f()}return e}},{key:"assembleAxes",value:function(){return function(t,n){var e=t.x,r=void 0===e?[]:e,i=t.y,a=void 0===i?[]:i;return[].concat((0,u.Z)(r.map((function(t){return Cf(t,"grid",n)}))),(0,u.Z)(a.map((function(t){return Cf(t,"grid",n)}))),(0,u.Z)(r.map((function(t){return Cf(t,"main",n)}))),(0,u.Z)(a.map((function(t){return Cf(t,"main",n)})))).filter((function(t){return t}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return Sh(this)}},{key:"assembleProjections",value:function(){return Dh(this)}},{key:"assembleTitle",value:function(){var t,n,e,r=null!==(t=this.title)&&void 0!==t?t:{},i=r.encoding,a=ip(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},Ue(this.config.title).nonMarkTitleProperties),a),i?{encode:{update:i}}:{});if(o.text)return ht(["unit","layer"],this.type)?ht(["middle",void 0],o.anchor)&&(null!==(n=o.frame)&&void 0!==n||(o.frame="group")):null!==(e=o.anchor)&&void 0!==e||(o.anchor="start"),kt(o)?void 0:o}},{key:"assembleGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);var e=this.assembleLayout();e&&(n.layout=e),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||up(this.parent)?Pd(this):[];r.length>0&&(n.scales=r);var i=this.assembleAxes();i.length>0&&(n.axes=i);var a=this.assembleLegends();return a.length>0&&(n.legends=a),n}},{key:"getName",value:function(t){return Dt((this.name?"".concat(this.name,"_"):"")+t)}},{key:"getDataName",value:function(t){return this.getName(Ls[t].toLowerCase())}},{key:"requestDataName",value:function(t){var n=this.getDataName(t),e=this.component.data.outputNodeRefCounts;return e[n]=(e[n]||0)+1,n}},{key:"getSizeSignalRef",value:function(t){if(up(this.parent)){var n=oe(oh(t)),e=this.component.scales[n];if(e&&!e.merged){var r=e.get("type"),i=e.get("range");if(Bi(r)&&Le(i)){var a=e.get("name"),o=Nd(zd(this,n));return o?{signal:ah(a,e,_o({aggregate:"distinct",field:o},{expr:"datum"}))}:(Xr(dr(n)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}},{key:"lookupDataSource",value:function(t){var n=this.component.data.outputNodes[t];return n?n.getSource():t}},{key:"getSignalName",value:function(t){return this.signalNameMap.get(t)}},{key:"renameSignal",value:function(t,n){this.signalNameMap.rename(t,n)}},{key:"renameScale",value:function(t,n){this.scaleNameMap.rename(t,n)}},{key:"renameProjection",value:function(t,n){this.projectionNameMap.rename(t,n)}},{key:"scaleName",value:function(t,n){return n?this.getName(t):qn(t)&&de(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}},{key:"projectionName",value:function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}},{key:"getSelectionComponent",value:function(t,n){var e=this.component.selection[t];if(!e&&this.parent&&(e=this.parent.getSelectionComponent(t,n)),!e)throw new Error('Cannot find a selection named "'.concat(n,'".'));return e}},{key:"hasAxisOrientSignalRef",value:function(){var t,n;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some((function(t){return t.hasOrientSignalRef()})))||(null===(n=this.component.axes.y)||void 0===n?void 0:n.some((function(t){return t.hasOrientSignalRef()})))}}]),t}(),fp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){return(0,c.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"vgField",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=this.fieldDef(t);if(e)return _o(e,n)}},{key:"reduceFieldDef",value:function(t,n){return function(t,n,e,r){return t?Mt(t).reduce((function(e,i){var a=t[i];return(0,H.kJ)(a)?a.reduce((function(t,e){return n.call(r,t,e,i)}),e):n.call(r,e,a,i)}),e):e}(this.getMapping(),(function(n,e,r){var i=Ao(e);return i?t(n,i,r):n}),n)}},{key:"forEachFieldDef",value:function(t,n){au(this.getMapping(),(function(n,e){var r=Ao(n);r&&t(r,e)}),n)}}]),e}(lp),hp=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},dp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i,a,o,u;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"value",null!==(u=s[1])&&void 0!==u?u:"density"],r.groupby&&null==r.minsteps&&null==r.maxsteps&&null==r.steps&&(i.transform.steps=200),i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.density].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.density,e=hp(t,["density"]);return Object.assign({type:"kde",field:n},e)}}]),e}(tl),pp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).filter=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(Mt(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(lt(this.filter))}},{key:"assemble",value:function(){var t=this,n=Mt(this.filter).reduce((function(n,e){var r=t.filter[e],i=_o(r,{expr:"datum"});return null!==r&&("temporal"===r.type?n.push("(isDate(".concat(i,") || (isValid(").concat(i,") && isFinite(+").concat(i,")))")):"quantitative"===r.type&&(n.push("isValid(".concat(i,")")),n.push("isFinite(+".concat(i,")")))),n}),[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}],[{key:"make",value:function(t,n){var r=n.config,i=n.mark;if("filter"!==Qe("invalid",n.markDef,r))return null;var a=n.reduceFieldDef((function(t,e,r){var a=de(r)&&n.getScaleComponent(r);a&&(qi(a.get("type"))&&"count"!==e.aggregate&&!da(i)&&(t[e.field]=e));return t}),{});return Mt(a).length?new e(t,a):null}}]),e}(tl),vp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var a=i.transform,o=a.flatten,u=a.as,s=void 0===u?[]:u;return i.transform.as=o.map((function(t,n){var e;return null!==(e=s[n])&&void 0!==e?e:t})),i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(this.parent,at(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"flatten",fields:t.flatten,as:t.as}}}]),e}(tl),gp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i,a,o,u;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"key",null!==(u=s[1])&&void 0!==u?u:"value"],i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"fold",fields:t.fold,as:t.as}}}]),e}(tl),mp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;return(0,c.Z)(this,e),(o=n.call(this,t)).fields=r,o.geojson=i,o.signal=a,o}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var t,n=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(H.HD);return new Set([].concat((0,u.Z)(this.geojson?[this.geojson]:[]),(0,u.Z)(n)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(lt(this.fields))}},{key:"assemble",value:function(){return[].concat((0,u.Z)(this.geojson?[{type:"filter",expr:'isValid(datum["'.concat(this.geojson,'"])')}]:[]),[Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})])}}],[{key:"parseAll",value:function(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;for(var r=0,i=0,a=[[sn,cn],[fn,ln]];i<a.length;i++){var o=a[i].map((function(t){var e=To(n.encoding[t]);return uo(e)?e.field:so(e)?{expr:"".concat(e.datum)}:vo(e)?{expr:"".concat(e.value)}:void 0}));(o[0]||o[1])&&(t=new e(t,o,null,n.getName("geojson_".concat(r++))))}if(n.channelHasField(vn)){var u=n.typedFieldDef(vn);u.type===Ci&&(t=new e(t,null,u.field,n.getName("geojson_".concat(r++))))}return t}}]),e}(tl),yp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;return(0,c.Z)(this,e),(o=n.call(this,t)).projection=r,o.fields=i,o.as=a,o}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,this.projection,at(this.fields),at(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(H.HD))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(lt(this.fields)," ").concat(lt(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(t,n){if(!n.projectionName())return t;for(var r=0,i=[[sn,cn],[fn,ln]];r<i.length;r++){var a=i[r],o=a.map((function(t){var e=To(n.encoding[t]);return uo(e)?e.field:so(e)?{expr:"".concat(e.datum)}:vo(e)?{expr:"".concat(e.value)}:void 0})),u=a[0]===fn?"2":"";(o[0]||o[1])&&(t=new e(t,n.projectionName(),o,[n.getName("x".concat(u)),n.getName("y".concat(u))]))}return t}}]),e}(tl),bp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.impute,this.transform.key].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(t){var n=t.start,e=void 0===n?0:n,r=t.stop,i=t.step,a=[e,r].concat((0,u.Z)(i?[i]:[])).join(",");return{signal:"sequence(".concat(a,")")}}},{key:"hash",value:function(){return"Impute ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.impute,e=t.key,r=t.keyvals,i=t.method,a=t.groupby,o=t.value,u=t.frame,c=void 0===u?[null,null]:u,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:e},r?{keyvals:Vc(r)?this.processSequence(r):r}:{}),{method:"value"}),a?{groupby:a}:{}),{value:i&&"value"!==i?null:o});return i&&"value"!==i?[s,Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[i],fields:[n],frame:c,ignorePeers:!1},a?{groupby:a}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:[s]}}],[{key:"makeFromTransform",value:function(t,n){return new e(t,n)}},{key:"makeFromEncoding",value:function(t,n){var r=n.encoding,i=r.x,a=r.y;if(uo(i)&&uo(a)){var o=i.impute?i:a.impute?a:void 0;if(void 0===o)return;var u=i.impute?a:a.impute?i:void 0,c=o.impute,s=c.method,l=c.value,f=c.frame,h=c.keyvals,d=ou(n.mark,r);return new e(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},s?{method:s}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==h?{keyvals:h}:{}),d.length?{groupby:d}:{}))}return null}}]),e}(tl),xp=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},_p=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i,a,o,u;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.loess],i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.loess,this.transform.on].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.loess,e=t.on,r=xp(t,["loess","on"]);return Object.assign({type:"loess",x:e,y:n},r)}}]),e}(tl),wp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i){var a;return(0,c.Z)(this,e),(a=n.call(this,t)).transform=r,a.secondary=i,a}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?(0,H.IX)(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(lt({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:(0,H.IX)(this.transform.as)}:{});else{var n=this.transform.as;(0,H.HD)(n)||(Xr('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(t,n,r,i){var a=n.component.data.sources,o=r.from,u=null;if(function(t){return"data"in t}(o)){var c=Rp(o.data,a);c||(c=new $h(o.data),a.push(c));var s=n.getName("lookup_".concat(i));u=new nl(c,s,Ls.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[s]=u}else if(function(t){return"param"in t}(o)){var l,f=o.param;r=Object.assign({as:f},r);try{l=n.getSelectionComponent(Dt(f),f)}catch(h){throw new Error('Lookups can only be performed on selection parameters. "'.concat(f,'" is a variable parameter.'))}if(!(u=l.materialized))throw new Error(function(t){return'Cannot define and lookup the "'.concat(t,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}(f))}return new e(t,r,u.getSource())}}]),e}(tl),kp=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Mp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i,a,o,u;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:"prob",null!==(u=s[1])&&void 0!==u?u:"value"],i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.quantile].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.quantile,e=kp(t,["quantile"]);return Object.assign({type:"quantile",field:n},e)}}]),e}(tl),Op=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e},Ep=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i,a,o,u;(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i.transform=at(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.regression],i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.regression,this.transform.on].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.regression,e=t.on,r=Op(t,["regression","on"]);return Object.assign({type:"regression",x:e,y:n},r)}}]),e}(tl),Sp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"addDimensions",value:function(t){var n;this.transform.groupby=mt((null!==(n=this.transform.groupby)&&void 0!==n?n:[]).concat(t),(function(t){return t}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.pivot,this.transform.value].concat((0,u.Z)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){var t=this.transform,n=t.pivot,e=t.value,r=t.groupby,i=t.limit,a=t.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:n,value:e},void 0!==i?{limit:i}:{}),void 0!==a?{op:a}:{}),void 0!==r?{groupby:r}:{})}}]),e}(tl),Dp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r){var i;return(0,c.Z)(this,e),(i=n.call(this,t)).transform=r,i}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(null,at(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(lt(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),e}(tl);function Cp(t){var n=0;return function e(r,i){var a,o,c,s;if(r instanceof $h&&(r.isGenerator||Bs(r.data)||(t.push(i),i={name:null,source:i.name,transform:[]})),r instanceof Yh&&(r.parent instanceof $h&&!i.source?(i.format=Object.assign(Object.assign({},null!==(a=i.format)&&void 0!==a?a:{}),{parse:r.assembleFormatParse()}),(o=i.transform).push.apply(o,(0,u.Z)(r.assembleTransforms(!0)))):(c=i.transform).push.apply(c,(0,u.Z)(r.assembleTransforms()))),r instanceof Ih)return i.name||(i.name="data_".concat(n++)),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void t.push.apply(t,(0,u.Z)(r.assemble()));if((r instanceof Gh||r instanceof Jh||r instanceof pp||r instanceof kf||r instanceof Rf||r instanceof yp||r instanceof Lh||r instanceof wp||r instanceof gd||r instanceof pd||r instanceof gp||r instanceof vp||r instanceof dp||r instanceof _p||r instanceof Mp||r instanceof Ep||r instanceof Xh||r instanceof Dp||r instanceof Sp)&&i.transform.push(r.assemble()),(r instanceof Ph||r instanceof rl||r instanceof bp||r instanceof vd||r instanceof mp)&&(s=i.transform).push.apply(s,(0,u.Z)(r.assemble())),r instanceof nl)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof nl)r.setSource(i.name);else{if(i.name||(i.name="data_".concat(n++)),r.setSource(i.name),1===r.numChildren())t.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof nl&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:e(r.children[0],i);break;default:i.name||(i.name="data_".concat(n++));var l=i.name;!i.source||i.transform.length>0?t.push(i):l=i.source;var f,h=(0,Y.Z)(r.children);try{for(h.s();!(f=h.n()).done;){e(f.value,{name:null,source:l,transform:[]})}}catch(d){h.e(d)}finally{h.f()}}}}function Ap(t){return"top"===t||"left"===t||Re(t)?"header":"footer"}function Tp(t,n){var e,r=t.facet,i=t.config,a=t.child,o=t.component;if(t.channelHasField(n)){var u=r[n],c=Bf("title",null,i,n),s=Eo(u,i,{allowDisabling:!0,includeDefault:void 0===c||!!c});a.component.layoutHeaders[n].title&&(s=(0,H.kJ)(s)?s.join(", "):s,s+=" / ".concat(a.component.layoutHeaders[n].title),a.component.layoutHeaders[n].title=null);var l=Bf("labelOrient",u.header,i,n),f=null!==u.header&&Rt(null===(e=u.header)||void 0===e?void 0:e.labels,i.header.labels,!0),h=ht(["bottom","right"],l)?"footer":"header";o.layoutHeaders[n]=(0,ye.Z)({title:null!==u.header?s:null,facetFieldDef:u},h,"facet"===n?[]:[Fp(t,n,f)])}}function Fp(t,n,e){var r="row"===n?"height":"width";return{labels:e,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function jp(t,n){var e,r=t.child;if(r.component.axes[n]){var i=t.component,a=i.layoutHeaders,o=i.resolve;if(o.axis[n]=sh(o,n),"shared"===o.axis[n]){var u,c="x"===n?"column":"row",s=a[c],l=(0,Y.Z)(r.component.axes[n]);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=Ap(f.get("orient"));null!==(e=s[h])&&void 0!==e||(s[h]=[Fp(t,c,!1)]);var d=Cf(f,"main",t.config,{header:!0});d&&s[h][0].axes.push(d),f.mainExtracted=!0}}catch(p){l.e(p)}finally{l.f()}}}}function Zp(t){var n,e=(0,Y.Z)(t.children);try{for(e.s();!(n=e.n()).done;){n.value.parseLayoutSize()}}catch(r){e.e(r)}finally{e.f()}}function Np(t,n){var e,r,i,a=oh(n),o=oe(a),u=t.component.resolve,c=t.component.layoutSize,s=(0,Y.Z)(t.children);try{for(s.s();!(i=s.n()).done;){var l=i.value.component.layoutSize.getWithExplicit(a),f=null!==(e=u.scale[o])&&void 0!==e?e:ch(o,t);if("independent"===f&&"step"===l.value){r=void 0;break}if(r){if("independent"===f&&r.value!==l.value){r=void 0;break}r=Rs(r,l,a,"")}else r=l}}catch(v){s.e(v)}finally{s.f()}if(r){var h,d=(0,Y.Z)(t.children);try{for(d.s();!(h=d.n()).done;){var p=h.value;t.renameSignal(p.getName(a),t.getName(n)),p.component.layoutSize.set(a,"merged",!1)}}catch(v){d.e(v)}finally{d.f()}c.setWithExplicit(n,r)}else c.setWithExplicit(n,{explicit:!1,value:void 0})}function zp(t,n){var e="width"===n?"x":"y",r=t.config,i=t.getScaleComponent(e);if(i){var a=i.get("type"),o=i.get("range");if(Bi(a)){var u=ic(r.view,n);return Le(o)||Ku(u)?"step":u}return ec(r.view,n)}if(t.hasProjection||"arc"===t.mark)return ec(r.view,n);var c=ic(r.view,n);return Ku(c)?c.step:c}function Up(t,n,e){return _o(n,Object.assign({suffix:"by_".concat(_o(t))},null!==e&&void 0!==e?e:{}))}var Pp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o;return(0,c.Z)(this,e),(o=n.call(this,t,"facet",r,i,a,t.resolve)).child=sv(t.spec,(0,js.Z)(o),o.getName("child"),void 0,a),o.children=[o.child],o.facet=o.initFacet(t.facet),o}return(0,s.Z)(e,[{key:"initFacet",value:function(t){if(!Ja(t))return{facet:this.initFacetFieldDef(t,"facet")};var n,e=Mt(t),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(![Gt,Jt].includes(a)){Xr(Sr(a,"facet"));break}var o=t[a];if(void 0===o.field){Xr(Or(o,a));break}r[a]=this.initFacetFieldDef(o,a)}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"initFacetFieldDef",value:function(t,n){var e=Zo(t,n);return e.header?e.header=Ne(e.header):null===e.header&&(e.header=null),e}},{key:"channelHasField",value:function(t){return!!this.facet[t]}},{key:"fieldDef",value:function(t){return this.facet[t]}},{key:"parseData",value:function(){this.component.data=Lp(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){Zp(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(t){var n,e=(0,Y.Z)(Pn);try{for(e.s();!(n=e.n()).done;)Tp(t,n.value)}catch(r){e.e(r)}finally{e.f()}jp(t,"x"),jp(t,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.child.assembleSelectionTopLevelSignals(t)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(t){return this.child.assembleSelectionData(t)}},{key:"getHeaderLayoutMixins",value:function(){var t,n,e,r,i={},a=(0,Y.Z)(Pn);try{for(a.s();!(r=a.n()).done;){var o,u=r.value,c=(0,Y.Z)(Wf);try{for(c.s();!(o=c.n()).done;){var s=o.value,l=this.component.layoutHeaders[u],f=l[s],h=l.facetFieldDef;if(h){var d=Bf("titleOrient",h.header,this.config,u);if(["right","bottom"].includes(d)){var p=If(u,d);null!==(t=i.titleAnchor)&&void 0!==t||(i.titleAnchor={}),i.titleAnchor[p]="end"}}if(null===f||void 0===f?void 0:f[0]){var v="row"===u?"height":"width",g="header"===s?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(v)||(null!==(n=i[g])&&void 0!==n||(i[g]={}),i[g][u]=.5),l.title&&(null!==(e=i.offset)&&void 0!==e||(i.offset={}),i.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(m){c.e(m)}finally{c.f()}}}catch(m){a.e(m)}finally{a.f()}return i}},{key:"assembleDefaultLayout",value:function(){var t=this.facet,n=t.column,e=t.row,r=n?this.columnDistinctSignal():e?1:void 0,i="all";return(e||"independent"!==this.component.resolve.scale.x)&&(n||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof e)){var t=this.getName("column_domain");return{signal:"length(data('".concat(t,"'))")}}}},{key:"assembleGroupStyle",value:function(){}},{key:"assembleGroup",value:function(t){return this.parent&&this.parent instanceof e?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:_o(this.facet.column,{prefix:"distinct"})}}}}:{}),(0,bc.Z)((0,xc.Z)(e.prototype),"assembleGroup",this).call(this,t)):(0,bc.Z)((0,xc.Z)(e.prototype),"assembleGroup",this).call(this,t)}},{key:"getCardinalityAggregateForChild",value:function(){var t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){var i=_o(this.child.facet.column);t.push(i),n.push("distinct"),r.push("distinct_".concat(i))}}else{var a,o=(0,Y.Z)(ee);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=this.child.component.scales[u];if(c&&!c.merged){var s=c.get("type"),l=c.get("range");if(Bi(s)&&Le(l)){var f=Nd(zd(this.child,u));f?(t.push(f),n.push("distinct"),r.push("distinct_".concat(f))):Xr(dr(u))}}}}catch(h){o.e(h)}finally{o.f()}}return{fields:t,ops:n,as:r}}},{key:"assembleFacet",value:function(){var t,n=this.component.data.facetRoot,e=n.name,r=n.data,i=this.facet,a=i.row,o=i.column,u=this.getCardinalityAggregateForChild(),c=u.fields,s=u.ops,l=u.as,f=[],h=(0,Y.Z)(Pn);try{for(h.s();!(t=h.n()).done;){var d=t.value,p=this.facet[d];if(p){f.push(_o(p));var v=p.bin,g=p.sort;if(Ce(v)&&f.push(_o(p,{binSuffix:"end"})),Xa(g)){var m=g.field,y=g.op,b=void 0===y?qa:y,x=Up(p,g);a&&o?(c.push(x),s.push("max"),l.push(x)):(c.push(m),s.push(b),l.push(x))}else if((0,H.kJ)(g)){var _=Lf(p,d);c.push(_),s.push("max"),l.push(_)}}}}catch(k){h.e(k)}finally{h.f()}var w=!!a&&!!o;return Object.assign({name:e,data:r,groupby:f},w||c.length>0?{aggregate:Object.assign(Object.assign({},w?{cross:w}:{}),c.length?{fields:c,ops:s,as:l}:{})}:{})}},{key:"facetSortFields",value:function(t){var n=this.facet[t];return n?Xa(n.sort)?[Up(n,n.sort,{expr:"datum"})]:(0,H.kJ)(n.sort)?[Lf(n,t,{expr:"datum"})]:[_o(n,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(t){var n=this.facet[t];if(n){var e=n.sort;return[(Xa(e)?e.order:!(0,H.kJ)(e)&&e)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var t,n=this.facet,e=this.config;if(n.facet)return Vf(n.facet,"facet",e);var r,i={row:["top","bottom"],column:["left","right"]},a=(0,Y.Z)(Hf);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(n[o]){var u=Bf("labelOrient",null===(t=n[o])||void 0===t?void 0:t.header,e,o);if(i[o].includes(u))return Vf(n[o],o,e)}}}catch(c){a.e(c)}finally{a.f()}}},{key:"assembleMarks",value:function(){var t=this,n=this.child,e=function(t){var n,e=[],r=Cp(e),i=(0,Y.Z)(t.children);try{for(i.s();!(n=i.n()).done;)r(n.value,{source:t.name,name:null,transform:[]})}catch(a){i.e(a)}finally{i.f()}return e}(this.component.data.facetRoot),r=n.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||n.assembleTitle(),a=n.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Pn.map((function(n){return t.facetSortFields(n)})).flat(),order:Pn.map((function(n){return t.facetSortOrder(n)})).flat()}}),e.length>0?{data:e}:{}),r?{encode:{update:r}}:{}),n.assembleGroup(function(t,n){if(t.component.selection&&Mt(t.component.selection).length){var e=(0,H.m8)(t.getName("cell"));n.unshift({name:"facet",value:{},on:[{events:(0,Js.r)("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(e,").datum")}]})}return Qs(n)}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),e}(fp);function Rp(t,n){var e,r,i,a,o,u=(0,Y.Z)(n);try{for(u.s();!(o=u.n()).done;){var c=o.value,s=c.data;if(!t.name||!c.hasName()||t.name===c.dataName){var l=null===(e=t.format)||void 0===e?void 0:e.mesh,f=null===(r=s.format)||void 0===r?void 0:r.feature;if(!l||!f){var h=null===(i=t.format)||void 0===i?void 0:i.feature;if(!h&&!f||h===f){var d=null===(a=s.format)||void 0===a?void 0:a.mesh;if(!l&&!d||l===d)if(qs(t)&&qs(s)){if(it(t.values,s.values))return c}else if(Bs(t)&&Bs(s)){if(t.url===s.url)return c}else if(Hs(t)&&t.name===c.dataName)return c}}}}}catch(p){u.e(p)}finally{u.f()}return null}function Lp(t){var n,e,r,i,a,o,u,c,s,l,f=function(t,n){if(t.data||!t.parent){if(null===t.data){var e=new $h({values:[]});return n.push(e),e}var r=Rp(t.data,n);if(r)return Ws(t.data)||(r.data.format=vt({},t.data.format,r.data.format)),!r.hasName()&&t.data.name&&(r.dataName=t.data.name),r;var i=new $h(t.data);return n.push(i),i}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}(t,t.component.data.sources),h=t.component.data,d=h.outputNodes,p=h.outputNodeRefCounts,v=t.data,g=!(v&&(Ws(v)||Bs(v)||qs(v)))&&t.parent?t.parent.component.data.ancestorParse.clone():new Is;Ws(v)?(Ys(v)?f=new Jh(f,v.sequence):Gs(v)&&(f=new Gh(f,v.graticule)),g.parseNothing=!0):null===(null===(n=null===v||void 0===v?void 0:v.format)||void 0===n?void 0:n.parse)&&(g.parseNothing=!0),f=null!==(e=Yh.makeExplicit(f,t,g))&&void 0!==e?e:f,f=new Xh(f);var m=t.parent&&sp(t.parent);(op(t)||up(t))&&m&&(f=null!==(r=Ph.makeFromEncoding(f,t))&&void 0!==r?r:f),t.transforms.length>0&&(f=function(t,n,e){var r,i,a,o=0,u=(0,Y.Z)(n.transforms);try{for(u.s();!(a=u.n()).done;){var c=a.value,s=void 0,l=void 0;if(cs(c))l=t=new Rf(t,c),s="derived";else if($c(c)){var f=qh(c);l=t=null!==(r=Yh.makeWithAncestors(t,{},f,e))&&void 0!==r?r:t,t=new kf(t,n,c.filter)}else if(ss(c))l=t=Ph.makeFromTransform(t,c,n),s="number";else if(fs(c))s="date",void 0===e.getWithExplicit(c.field).value&&(t=new Yh(t,(0,ye.Z)({},c.field,s)),e.set(c.field,s,!1)),l=t=rl.makeFromTransform(t,c);else if(hs(c))l=t=Lh.makeFromTransform(t,c),s="number",mf(n)&&(t=new Xh(t));else if(Kc(c))l=t=wp.make(t,n,c,o++),s="derived";else if(as(c))l=t=new gd(t,c),s="number";else if(os(c))l=t=new pd(t,c),s="number";else if(ds(c))l=t=vd.makeFromTransform(t,c),s="derived";else if(ps(c))l=t=new gp(t,c),s="derived";else if(us(c))l=t=new vp(t,c),s="derived";else if(Qc(c))l=t=new Sp(t,c),s="derived";else if(is(c))t=new Dp(t,c);else if(ls(c))l=t=bp.makeFromTransform(t,c),s="derived";else if(ts(c))l=t=new dp(t,c),s="derived";else if(ns(c))l=t=new Mp(t,c),s="derived";else if(es(c))l=t=new Ep(t,c),s="derived";else{if(!rs(c)){Xr("Ignoring an invalid transform: ".concat(st(c),"."));continue}l=t=new _p(t,c),s="derived"}if(l&&void 0!==s){var h,d=(0,Y.Z)(null!==(i=l.producedFields())&&void 0!==i?i:[]);try{for(d.s();!(h=d.n()).done;){var p=h.value;e.set(p,s,!1)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){u.e(v)}finally{u.f()}return t}(f,t,g));var y=function(t){var n={};if(op(t)&&t.component.selection){var e,r=(0,Y.Z)(Mt(t.component.selection));try{for(r.s();!(e=r.n()).done;){var i,a=e.value,o=t.component.selection[a],u=(0,Y.Z)(o.project.items);try{for(u.s();!(i=u.n()).done;){var c=i.value;!c.channel&&Pt(c.field)>1&&(n[c.field]="flatten")}}catch(s){u.e(s)}finally{u.f()}}}catch(s){r.e(s)}finally{r.f()}}return n}(t),b=Hh(t);f=null!==(i=Yh.makeWithAncestors(f,{},Object.assign(Object.assign({},y),b),g))&&void 0!==i?i:f,op(t)&&(f=mp.parseAll(f,t),f=yp.parseAll(f,t)),(op(t)||up(t))&&(m||(f=null!==(a=Ph.makeFromEncoding(f,t))&&void 0!==a?a:f),f=null!==(o=rl.makeFromEncoding(f,t))&&void 0!==o?o:f,f=Rf.parseAllForSortIndex(f,t));var x=t.getDataName(Ls.Raw),_=new nl(f,x,Ls.Raw,p);if(d[x]=_,f=_,op(t)){var w=Lh.makeFromEncoding(f,t);w&&(f=w,mf(t)&&(f=new Xh(f))),f=null!==(u=bp.makeFromEncoding(f,t))&&void 0!==u?u:f,f=null!==(c=vd.makeFromEncoding(f,t))&&void 0!==c?c:f}op(t)&&(f=null!==(s=pp.make(f,t))&&void 0!==s?s:f);var k=t.getDataName(Ls.Main),M=new nl(f,k,Ls.Main,p);d[k]=M,f=M,op(t)&&function(t,n){var e,r,i=(0,Y.Z)(Et(null!==(e=t.component.selection)&&void 0!==e?e:{}));try{for(i.s();!(r=i.n()).done;){var a=(0,W.Z)(r.value,2),o=a[0],u=a[1],c=t.getName("lookup_".concat(o));t.component.data.outputNodes[c]=u.materialized=new nl(new kf(n,t,{param:o}),c,Ls.Lookup,t.component.data.outputNodeRefCounts)}}catch(s){i.e(s)}finally{i.f()}}(t,M);var O=null;if(up(t)){var E=t.getName("facet");f=null!==(l=function(t,n){var e=n.row,r=n.column;if(e&&r){for(var i=null,a=0,o=[e,r];a<o.length;a++){var u=o[a];if(Xa(u.sort)){var c=u.sort,s=c.field,l=c.op;t=i=new pd(t,{joinaggregate:[{op:void 0===l?qa:l,field:s,as:Up(u,u.sort,{forAs:!0})}],groupby:[_o(u)]})}}return i}return null}(f,t.facet))&&void 0!==l?l:f,O=new Ih(f,t,E,M.getSource()),d[E]=O}return Object.assign(Object.assign({},t.component.data),{outputNodes:d,outputNodeRefCounts:p,raw:_,main:M,facetRoot:O,ancestorParse:g})}var Ip=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a){var o,u,s,l,f;return(0,c.Z)(this,e),o=n.call(this,t,"concat",r,i,a,t.resolve),"shared"!==(null===(s=null===(u=t.resolve)||void 0===u?void 0:u.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(f=null===(l=t.resolve)||void 0===l?void 0:l.axis)||void 0===f?void 0:f.y)||Xr(br),o.children=o.getChildren(t).map((function(t,n){return sv(t,(0,js.Z)(o),o.getName("concat_".concat(n)),void 0,a)})),o}return(0,s.Z)(e,[{key:"parseData",value:function(){this.component.data=Lp(this);var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.parseData()}}catch(e){n.e(e)}finally{n.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var e=t.value;e.parseSelections();var r,i=(0,Y.Z)(Mt(e.component.selection));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.component.selection[a]=e.component.selection[a]}}catch(o){i.e(o)}finally{i.f()}}}catch(o){n.e(o)}finally{n.f()}}},{key:"parseMarkGroup",value:function(){var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.parseMarkGroup()}}catch(e){n.e(e)}finally{n.f()}}},{key:"parseAxesAndHeaders",value:function(){var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.parseAxesAndHeaders()}}catch(e){n.e(e)}finally{n.f()}}},{key:"getChildren",value:function(t){return Ju(t)?t.vconcat:$u(t)?t.hconcat:t.concat}},{key:"parseLayoutSize",value:function(){!function(t){Zp(t);var n=1===t.layout.columns?"width":"childWidth",e=void 0===t.layout.columns?"height":"childHeight";Np(t,n),Np(t,e)}(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,n){return n.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(t){return t.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var t,n=eh(this),e=(0,Y.Z)(this.children);try{for(e.s();!(t=e.n()).done;){var r=t.value;n.push.apply(n,(0,u.Z)(r.assembleLayoutSignals()))}}catch(i){e.e(i)}finally{e.f()}return n}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,n){return n.assembleSelectionData(t)}),t)}},{key:"assembleMarks",value:function(){return this.children.map((function(t){var n=t.assembleTitle(),e=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),e?{style:e}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())}))}},{key:"assembleGroupStyle",value:function(){}},{key:"assembleDefaultLayout",value:function(){var t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}]),e}(lp);var Bp=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},Wo),{labelExpr:1,encode:1}),qp=Mt(Bp),Hp=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,c.Z)(this,e),(t=n.call(this)).explicit=r,t.implicit=i,t.mainExtracted=a,t}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(at(this.explicit),at(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!(!1===(n=this.get(t))||null===n));var n}},{key:"hasOrientSignalRef",value:function(){return Re(this.explicit.orient)}}]),e}(Zs);var Wp={bottom:"top",top:"bottom",left:"right",right:"left"};function Yp(t,n){if(!t)return n.map((function(t){return t.clone()}));if(t.length===n.length){for(var e=t.length,r=0;r<e;r++){var i=t[r],a=n[r];if(!!i!==!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;t[r]=Xp(i,a)}}return t}}function Xp(t,n){var e,r=(0,Y.Z)(qp);try{var i=function(){var r=e.value,i=Rs(t.getWithExplicit(r),n.getWithExplicit(r),r,"axis",(function(t,n){switch(r){case"title":return or(t,n);case"gridScale":return{explicit:t.explicit,value:Rt(t.value,n.value)}}return Ps(t,n,r,"axis")}));t.setWithExplicit(r,i)};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return t}function Gp(t,n,e,r,i){if("disable"===n)return void 0!==e;switch(e=e||{},n){case"titleAngle":case"labelAngle":return t===(Re(e.labelAngle)?e.labelAngle:Wt(e.labelAngle));case"values":return!!e.values;case"encode":return!!e.encoding||!!e.labelAngle;case"title":if(t===Pf(r,i))return!0}return t===e[n]}var Jp=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function $p(t,n){var e,r,i,a=n.axis(t),o=new Hp,c=To(n.encoding[t]),s=n.mark,l=n.config,f=(null===a||void 0===a?void 0:a.orient)||(null===(e=l["x"===t?"axisX":"axisY"])||void 0===e?void 0:e.orient)||(null===(r=l.axis)||void 0===r?void 0:r.orient)||function(t){return"x"===t?"bottom":"left"}(t),h=n.getScaleComponent(t).get("type"),d=function(t,n,e,r){var i="band"===n?["axisDiscrete","axisBand"]:"point"===n?["axisDiscrete","axisPoint"]:Pi(n)?["axisQuantitative"]:"time"===n||"utc"===n?["axisTemporal"]:[],a="x"===t?"axisX":"axisY",o=Re(e)?"axisOrient":"axis".concat(Tt(e)),c=[].concat(i,(0,u.Z)(i.map((function(t){return a+t.substr(4)})))),s=["axis",o,a];return{vlOnlyAxisConfig:Tf(c,r,t,e),vgAxisConfig:Tf(s,r,t,e),axisConfigStyle:Ff([].concat(s,(0,u.Z)(c)),r)}}(t,h,f,n.config),p=void 0!==a?!a:jf("disable",l.style,null===a||void 0===a?void 0:a.style,d).configValue;if(o.set("disable",p,void 0!==a),p)return o;var v,g=function(t,n,e,r,i){var a=null===n||void 0===n?void 0:n.labelAngle;if(void 0!==a)return Re(a)?a:Wt(a);var o=jf("labelAngle",r,null===n||void 0===n?void 0:n.style,i).configValue;return void 0!==o?Wt(o):e!==Vt||!ht([Di,Ei],t.type)||uo(t)&&t.timeUnit?void 0:270}(c,a=a||{},t,l.style,d),m={fieldOrDatumDef:c,axis:a,channel:t,model:n,scaleType:h,orient:f,labelAngle:g,mark:s,config:l},y=(0,Y.Z)(qp);try{for(y.s();!(v=y.n()).done;){var b=v.value,x=b in Zf?Zf[b](m):Xo(b)?a[b]:void 0,_=void 0!==x,w=Gp(x,b,a,n,t);if(_&&w)o.set(b,x,w);else{var k=Xo(b)&&"values"!==b?jf(b,l.style,a.style,d):{},M=k.configValue,O=void 0===M?void 0:M,E=k.configFrom,S=void 0===E?void 0:E,D=void 0!==O;_&&!D?o.set(b,x,w):("vgAxisConfig"!==S||Jp.has(b)&&D||Bo(O)||Re(O))&&o.set(b,O,!1)}}}catch(T){y.e(T)}finally{y.f()}var C=null!==(i=a.encoding)&&void 0!==i?i:{},A=qo.reduce((function(e,r){var i;if(!o.hasAxisPart(r))return e;var a=uh(null!==(i=C[r])&&void 0!==i?i:{},n),u="labels"===r?function(t,n,e){var r,i=t.encoding,a=t.config,o=null!==(r=To(i[n]))&&void 0!==r?r:To(i[Gn(n)]),u=t.axis(n)||{},c=u.format,s=u.formatType;if(Ta(s))return Object.assign({text:za({fieldOrDatumDef:o,field:"datum.value",format:c,formatType:s,config:a})},e);if(void 0===c&&void 0===s&&a.customFormatTypes){if("quantitative"===co(o)){if(mo(o)&&"normalize"===o.stack&&a.normalizedNumberFormatType)return Object.assign({text:za({fieldOrDatumDef:o,field:"datum.value",format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,config:a})},e);if(a.numberFormatType)return Object.assign({text:za({fieldOrDatumDef:o,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a})},e)}if("temporal"===co(o)&&a.timeFormatType&&uo(o)&&!o.timeUnit)return Object.assign({text:za({fieldOrDatumDef:o,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})},e)}return e}(n,t,a):a;return void 0===u||kt(u)||(e[r]={update:u}),e}),{});return kt(A)||o.set("encode",A,!!a.encoding||void 0!==a.labelAngle),o}function Vp(t,n,e){var r,i,a=Ne(t),o=Qe("orient",a,e);if(a.orient=function(t,n,e){switch(t){case ia:case la:case fa:case ua:case aa:case ea:return}var r=n.x,i=n.y,a=n.x2,o=n.y2;switch(t){case na:if(uo(r)&&(Ae(r.bin)||uo(i)&&i.aggregate&&!r.aggregate))return"vertical";if(uo(i)&&(Ae(i.bin)||uo(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||a){if(e)return e;if(!a)return(uo(r)&&r.type===Oi&&!Ce(r.bin)||fo(r))&&uo(i)&&Ae(i.bin)?"horizontal":"vertical";if(!o)return(uo(i)&&i.type===Oi&&!Ce(i.bin)||fo(i))&&uo(r)&&Ae(r.bin)?"vertical":"horizontal"}case oa:if(a&&(!uo(r)||!Ae(r.bin))&&o&&(!uo(i)||!Ae(i.bin)))return;case ta:if(o)return uo(i)&&Ae(i.bin)?"horizontal":"vertical";if(a)return uo(r)&&Ae(r.bin)?"vertical":"horizontal";if(t===oa){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case ra:case ca:var u=lo(r),c=lo(i);if(e)return e;if(u&&!c)return"tick"!==t?"horizontal":"vertical";if(!u&&c)return"tick"!==t?"vertical":"horizontal";if(u&&c){var s=r,l=i,f=s.type===Si,h=l.type===Si;return f&&!h?"tick"!==t?"vertical":"horizontal":!f&&h?"tick"!==t?"horizontal":"vertical":!s.aggregate&&l.aggregate?"tick"!==t?"vertical":"horizontal":s.aggregate&&!l.aggregate&&"tick"!==t?"horizontal":"vertical"}return}return"vertical"}(a.type,n,o),void 0!==o&&o!==a.orient&&Xr((r=a.orient,i=o,'Specified orient "'.concat(r,'" overridden with "').concat(i,'".'))),"bar"===a.type&&a.orient){var u=Qe("cornerRadiusEnd",a,e);if(void 0!==u){var c,s="horizontal"===a.orient&&n.x2||"vertical"===a.orient&&n.y2?["cornerRadius"]:_a[a.orient],l=(0,Y.Z)(s);try{for(l.s();!(c=l.n()).done;){a[c.value]=u}}catch(f){l.e(f)}finally{l.f()}void 0!==a.cornerRadiusEnd&&delete a.cornerRadiusEnd}}return void 0===Qe("opacity",a,e)&&(a.opacity=function(t,n){if(ht([ia,ca,la,fa],t)&&!nu(n))return.7;return}(a.type,n)),void 0===Qe("cursor",a,e)&&(a.cursor=function(t,n,e){if(n.href||t.href||Qe("href",t,e))return"pointer";return t.cursor}(a,n,e)),a}function Kp(t,n){t.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Tl("x",t,{defaultPos:"mid"})),Tl("y",t,{defaultPos:"mid"})),Dl("size",t)),Dl("angle",t)),function(t,n,e){if(e)return{shape:{value:e}};return Dl("shape",t)}(t,0,n))}var Qp={vgMark:"rule",encodeEntry:function(t){var n=t.markDef.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),zl("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),zl("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),Dl("size",t,{vgChannel:"strokeWidth"})):{}}};var tv={vgMark:"rect",encodeEntry:function(t){var n=t.config,e=t.markDef,r=e.orient,i="horizontal"===r?"width":"height",a="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Tl("x",t,{defaultPos:"mid",vgChannel:"xc"})),Tl("y",t,{defaultPos:"mid",vgChannel:"yc"})),Dl("size",t,{defaultValue:nv(t),vgChannel:i})),(0,ye.Z)({},a,Je(Qe("thickness",e,n))))}};function nv(t){var n,e=t.config,r=t.markDef,i=r.orient,a="horizontal"===i?"width":"height",o=t.getScaleComponent("horizontal"===i?"x":"y"),u=null!==(n=Qe("size",r,e,{vgChannel:a}))&&void 0!==n?n:e.tick.bandSize;if(void 0!==u)return u;var c=o?o.get("range"):void 0;return c&&Le(c)&&(0,H.hj)(c.step)?3*c.step/4:3*rc(e.view,a)/4}var ev={arc:{vgMark:"arc",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Tl("x",t,{defaultPos:"mid"})),Tl("y",t,{defaultPos:"mid"})),Rl(t,"radius")),Rl(t,"theta"))}},area:{vgMark:"area",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),zl("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),zl("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),Wl(t))}},bar:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Rl(t,"x")),Rl(t,"y"))}},circle:{vgMark:"symbol",encodeEntry:function(t){return Kp(t,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(t){return Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(t){var n=t.encoding.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&uo(n)&&n.type===Ci?{field:_o(n,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Rl(t,"x")),Rl(t,"y")),wl(t,"url"))}},line:{vgMark:"line",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Tl("x",t,{defaultPos:"mid"})),Tl("y",t,{defaultPos:"mid"})),Dl("size",t,{vgChannel:"strokeWidth"})),Wl(t))}},point:{vgMark:"symbol",encodeEntry:function(t){return Kp(t)}},rect:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Rl(t,"x")),Rl(t,"y"))}},rule:Qp,square:{vgMark:"symbol",encodeEntry:function(t){return Kp(t,"square")}},text:{vgMark:"text",encodeEntry:function(t){var n=t.config;t.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Tl("x",t,{defaultPos:"mid"})),Tl("y",t,{defaultPos:"mid"})),wl(t)),Dl("size",t,{vgChannel:"fontSize"})),Dl("angle",t)),Yl("align",function(t,n,e){var r=Qe("align",t,e);if(void 0===r)return"center";return}(t.markDef,0,n))),Yl("baseline",function(t,n,e){var r=Qe("baseline",t,e);if(void 0===r)return"middle";return}(t.markDef,0,n))),Tl("radius",t,{defaultPos:null})),Tl("theta",t,{defaultPos:null}))}},tick:tv,trail:{vgMark:"trail",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Tl("x",t,{defaultPos:"mid"})),Tl("y",t,{defaultPos:"mid"})),Dl("size",t)),Wl(t))}}};function rv(t){if(ht([ra,ta,sa],t.mark)){var n=ou(t.mark,t.encoding);if(n.length>0)return function(t,n){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:iv+t.requestDataName(Ls.Main),data:t.requestDataName(Ls.Main),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:ov(t,{fromPrefix:iv})}]}(t,n)}else if(t.mark===na){var e=He.some((function(n){return Qe(n,t.markDef,t.config)}));if(t.stack&&!t.fieldDef("size")&&e)return function(t){var n,e,r,i=ov(t,{fromPrefix:av}),a=(0,W.Z)(i,1)[0],o=t.scaleName(t.stack.fieldChannel),c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.vgField(t.stack.fieldChannel,n)},s=function(t,n){var e=[c({prefix:"min",suffix:"start",expr:n}),c({prefix:"max",suffix:"start",expr:n}),c({prefix:"min",suffix:"end",expr:n}),c({prefix:"max",suffix:"end",expr:n})];return"".concat(t,"(").concat(e.map((function(t){return"scale('".concat(o,"',").concat(t,")")})).join(","),")")};"x"===t.stack.fieldChannel?(e=Object.assign(Object.assign({},ut(a.encode.update,["y","yc","y2","height"].concat((0,u.Z)(He)))),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},a.encode.update=Object.assign(Object.assign({},ct(a.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(e=Object.assign(Object.assign({},ut(a.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},a.encode.update=Object.assign(Object.assign({},ct(a.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var l,f=(0,Y.Z)(He);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=tr(h,t.markDef,t.config);a.encode.update[h]?(e[h]=a.encode.update[h],delete a.encode.update[h]):d&&(e[h]=Je(d)),d&&(a.encode.update[h]={value:0})}}catch(x){f.e(x)}finally{f.f()}var p=[];if((null===(n=t.stack.groupbyChannels)||void 0===n?void 0:n.length)>0){var v,g=(0,Y.Z)(t.stack.groupbyChannels);try{for(g.s();!(v=g.n()).done;){var m=v.value,y=t.fieldDef(m),b=_o(y);b&&p.push(b),((null===y||void 0===y?void 0:y.bin)||(null===y||void 0===y?void 0:y.timeUnit))&&p.push(_o(y,{binSuffix:"end"}))}}catch(x){g.e(x)}finally{g.f()}}e=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(n,e){if(a.encode.update[e])return Object.assign(Object.assign({},n),(0,ye.Z)({},e,a.encode.update[e]));var r=tr(e,t.markDef,t.config);return void 0!==r?Object.assign(Object.assign({},n),(0,ye.Z)({},e,Je(r))):n}),e),e.stroke&&(e.strokeForeground={value:!0},e.strokeOffset={value:0});return[{type:"group",from:{facet:{data:t.requestDataName(Ls.Main),name:av+t.requestDataName(Ls.Main),groupby:p,aggregate:{fields:[c({suffix:"start"}),c({suffix:"start"}),c({suffix:"end"}),c({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:e},marks:[{type:"group",encode:{update:r},marks:[a]}]}]}(t)}return ov(t)}var iv="faceted_path_";var av="stack_group_";function ov(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},e=t.mark,r=t.markDef,i=t.encoding,a=t.config,o=Rt(r.clip,function(t){var n=t.getScaleComponent("x"),e=t.getScaleComponent("y");return!(!(null===n||void 0===n?void 0:n.get("selectionExtent"))&&!(null===e||void 0===e?void 0:e.get("selectionExtent")))||void 0}(t),function(t){var n=t.component.projection;return!(!n||n.isFit)||void 0}(t)),u=Ke(r),c=i.key,s=function(t){var n,e=t.encoding,r=t.stack,i=t.mark,a=t.markDef,o=t.config,u=e.order;if(!(!(0,H.kJ)(u)&&vo(u)&&ft(u.value)||!u&&ft(Qe("order",a,o)))){if(((0,H.kJ)(u)||uo(u))&&!r)return rr(u,{expr:"datum"});if(da(i)){var c="horizontal"===a.orient?"y":"x",s=e[c];if(uo(s)){var l=s.sort;return(0,H.kJ)(l)?{field:_o(s,{prefix:c,suffix:"sort_index",expr:"datum"})}:Xa(l)?{field:_o({aggregate:nu(t.encoding)?l.op:void 0,field:l.field},{expr:"datum"})}:Ya(l)?{field:_o(t.fieldDef(l.encoding),{expr:"datum"}),order:l.order}:null===l?void 0:{field:_o(s,{binSuffix:(null===(n=t.stack)||void 0===n?void 0:n.impute)?"mid":void 0,expr:"datum"})}}}}}(t),l=function(t){if(!t.component.selection)return null;var n=Mt(t.component.selection).length,e=n,r=t.parent;for(;r&&0===e;)e=Mt(r.component.selection).length,r=r.parent;return e?{interactive:n>0||!!t.encoding.tooltip}:null}(t),f=Qe("aria",r,a),h=ev[e].postEncodingTransform?ev[e].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:ev[e].vgMark},o?{clip:!0}:{}),u?{style:u}:{}),c?{key:c.field}:{}),s?{sort:s}:{}),l||{}),!1===f?{aria:f}:{}),{from:{data:n.fromPrefix+t.requestDataName(Ls.Main)},encode:{update:ev[e].encodeEntry(t)}}),h?{transform:h}:{})]}var uv=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i){var a,o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;(0,c.Z)(this,e),(a=n.call(this,t,"unit",r,i,s,void 0,Qu(t)?t.view:void 0)).specifiedScales={},a.specifiedAxes={},a.specifiedLegends={},a.specifiedProjection={},a.selection=[],a.children=[];var l=ga(t.mark)?Object.assign({},t.mark):{type:t.mark},f=l.type;void 0===l.filled&&(l.filled=function(t,n,e){if(e.graticule)return!1;var r=tr("filled",t,n),i=t.type;return Rt(r,i!==ia&&i!==ra&&i!==oa)}(l,s,{graticule:t.data&&Gs(t.data)}));var h=a.encoding=ru(t.encoding||{},f,l.filled,s);return a.markDef=Vp(l,h,s),a.size=function(t){var n,e=t.encoding,r=t.size,i=(0,Y.Z)(ee);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=Jn(a);Ku(r[o])&&lo(e[a])&&(delete r[o],Xr(zr(o)))}}catch(u){i.e(u)}finally{i.f()}return r}({encoding:h,size:Qu(t)?Object.assign(Object.assign(Object.assign({},u),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):u}),a.stack=Ac(f,h),a.specifiedScales=a.initScales(f,h),a.specifiedAxes=a.initAxes(h),a.specifiedLegends=a.initLegends(h),a.specifiedProjection=t.projection,a.selection=(null!==(o=t.params)&&void 0!==o?o:[]).filter((function(t){return Wu(t)})),a}return(0,s.Z)(e,[{key:"hasProjection",get:function(){var t=this.encoding,n=this.mark===ha,e=t&&Zn.some((function(n){return ho(t[n])}));return n||e}},{key:"scaleDomain",value:function(t){var n=this.specifiedScales[t];return n?n.domain:void 0}},{key:"axis",value:function(t){return this.specifiedAxes[t]}},{key:"legend",value:function(t){return this.specifiedLegends[t]}},{key:"initScales",value:function(t,n){var e=this;return he.reduce((function(t,r){var i,a=To(n[r]);return a&&(t[r]=e.initScale(null!==(i=a.scale)&&void 0!==i?i:{})),t}),{})}},{key:"initScale",value:function(t){var n=t.domain,e=t.range,r=Ne(t);return(0,H.kJ)(n)&&(r.domain=n.map(Xe)),(0,H.kJ)(e)&&(r.range=e.map(Xe)),r}},{key:"initAxes",value:function(t){var n=this;return ee.reduce((function(e,r){var i=t[r];if(ho(i)||r===Vt&&ho(t.x2)||r===Kt&&ho(t.y2)){var a=ho(i)?i.axis:void 0;e[r]=a?n.initAxis(Object.assign({},a)):a}return e}),{})}},{key:"initAxis",value:function(t){var n,e=Mt(t),r={},i=(0,Y.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t[a];r[a]=Bo(o)?Ye(o):Xe(o)}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"initLegends",value:function(t){return le.reduce((function(n,e){var r=To(t[e]);if(r&&function(t){switch(t){case hn:case dn:case pn:case gn:case vn:case yn:case _n:case wn:return!0;case bn:case xn:case mn:return!1}}(e)){var i=r.legend;n[e]=i?Ne(i):i}return n}),{})}},{key:"parseData",value:function(){this.component.data=Lp(this)}},{key:"parseLayoutSize",value:function(){!function(t){var n,e=t.size,r=t.component,i=(0,Y.Z)(ee);try{for(i.s();!(n=i.n()).done;){var a=Jn(n.value);if(e[a]){var o=e[a];r.layoutSize.set(a,Ku(o)?"step":o,!0)}else{var u=zp(t,a);r.layoutSize.set(a,u,!1)}}}catch(c){i.e(c)}finally{i.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(t,n){var e,r={},i=t.config.selection;if(!n||!n.length)return r;var a,o=(0,Y.Z)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=Dt(u.name),s=u.select,l=(0,H.HD)(s)?s:s.type,f=(0,H.Kn)(s)?at(s):{type:l},h=i[l];for(var d in h)"fields"!==d&&"encodings"!==d&&("mark"===d&&(f[d]=Object.assign(Object.assign({},h[d]),f[d])),void 0!==f[d]&&!0!==f[d]||(f[d]=null!==(e=h[d])&&void 0!==e?e:f[d]));var p,v=r[c]=Object.assign(Object.assign({},f),{name:c,type:l,init:u.value,bind:u.bind,events:(0,H.HD)(f.on)?(0,Js.r)(f.on,"scope"):(0,H.IX)(at(f.on))}),g=(0,Y.Z)(vf);try{for(g.s();!(p=g.n()).done;){var m=p.value;m.defined(v)&&m.parse&&m.parse(t,v,u)}}catch(y){g.e(y)}finally{g.f()}}}catch(y){o.e(y)}finally{o.f()}return r}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=rv(this)}},{key:"parseAxesAndHeaders",value:function(){var t;this.component.axes=(t=this,ee.reduce((function(n,e){return t.component.scales[e]&&(n[e]=[$p(e,t)]),n}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(t){return function(t,n){var e,r,i=!1,a=(0,Y.Z)(Ot(null!==(e=t.component.selection)&&void 0!==e?e:{}));try{var o=function(){var e=r.value,a=e.name,o=(0,H.m8)(a+ff);if(0===n.filter((function(t){return t.name===a})).length){var u="global"===e.resolve?"union":e.resolve,c="point"===e.type?", true, true)":")";n.push({name:e.name,update:"".concat(pf,"(").concat(o,", ").concat((0,H.m8)(u)).concat(c)})}i=!0;var s,l=(0,Y.Z)(vf);try{for(l.s();!(s=l.n()).done;){var f=s.value;f.defined(e)&&f.topLevelSignals&&(n=f.topLevelSignals(t,e,n))}}catch(h){l.e(h)}finally{l.f()}};for(a.s();!(r=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return i&&0===n.filter((function(t){return"unit"===t.name})).length&&n.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Qs(n)}(this,t)}},{key:"assembleSignals",value:function(){return[].concat((0,u.Z)(Af(this)),(0,u.Z)(function(t,n){var e,r,i=(0,Y.Z)(Ot(null!==(e=t.component.selection)&&void 0!==e?e:{}));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=o.name,c="".concat(u).concat(hf,", ").concat("global"===o.resolve?"true":"{unit: ".concat(gf(t),"}")),s=(0,Y.Z)(vf);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.defined(o)&&(l.signals&&(n=l.signals(t,o,n)),l.modifyExpr&&(c=l.modifyExpr(t,o,c)))}}catch(f){s.e(f)}finally{s.f()}n.push({name:u+df,on:[{events:{signal:o.name+hf},update:"modify(".concat((0,H.m8)(o.name+ff),", ").concat(c,")")}]})}}catch(f){i.e(f)}finally{i.f()}return Qs(n)}(this,[])))}},{key:"assembleSelectionData",value:function(t){return function(t,n){var e,r,i=(0,u.Z)(n),a=gf(t,{escape:!1}),o=(0,Y.Z)(Ot(null!==(e=t.component.selection)&&void 0!==e?e:{}));try{var c=function(){var t=r.value,n={name:t.name+ff};if(t.project.hasSelectionId&&(n.transform=[{type:"collect",sort:{field:Iu}}]),t.init){var e=t.project.items.map((function(t){return t.signals,$s(t,["signals"])}));n.values=t.project.hasSelectionId?t.init.map((function(t){return(0,ye.Z)({unit:a},Iu,Vs(t,!1)[0])})):t.init.map((function(t){return{unit:a,fields:e,values:Vs(t,!1)}}))}i.filter((function(n){return n.name===t.name+ff})).length||i.push(n)};for(o.s();!(r=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}return i}(this,t)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return eh(this)}},{key:"assembleMarks",value:function(){var t,n=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&sp(this.parent)||(n=Ks(this,n)),n.map(this.correctDataNames)}},{key:"assembleGroupStyle",value:function(){var t=(this.view||{}).style;return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":void 0}},{key:"getMapping",value:function(){return this.encoding}},{key:"mark",get:function(){return this.markDef.type}},{key:"channelHasField",value:function(t){return Ko(this.encoding,t)}},{key:"fieldDef",value:function(t){return Ao(this.encoding[t])}},{key:"typedFieldDef",value:function(t){var n=this.fieldDef(t);return po(n)?n:null}}]),e}(fp),cv=function(t){(0,_c.Z)(e,t);var n=(0,wc.Z)(e);function e(t,r,i,a,o){var u;(0,c.Z)(this,e),u=n.call(this,t,"layer",r,i,o,t.resolve,t.view);var s=Object.assign(Object.assign(Object.assign({},a),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});return u.children=t.layer.map((function(t,n){if(yc(t))return new e(t,(0,js.Z)(u),u.getName("layer_".concat(n)),s,o);if(Jo(t))return new uv(t,(0,js.Z)(u),u.getName("layer_".concat(n)),s,o);throw new Error(cr(t))})),u}return(0,s.Z)(e,[{key:"parseData",value:function(){this.component.data=Lp(this);var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.parseData()}}catch(e){n.e(e)}finally{n.f()}}},{key:"parseLayoutSize",value:function(){var t;Zp(t=this),Np(t,"width"),Np(t,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){var e=t.value;e.parseSelections();var r,i=(0,Y.Z)(Mt(e.component.selection));try{for(i.s();!(r=i.n()).done;){var a=r.value;this.component.selection[a]=e.component.selection[a]}}catch(o){i.e(o)}finally{i.f()}}}catch(o){n.e(o)}finally{n.f()}}},{key:"parseMarkGroup",value:function(){var t,n=(0,Y.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.parseMarkGroup()}}catch(e){n.e(e)}finally{n.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(t){var n,e,r=t.component,i=r.axes,a=r.resolve,o={top:0,bottom:0,right:0,left:0},u=(0,Y.Z)(t.children);try{for(u.s();!(e=u.n()).done;){var c=e.value;c.parseAxesAndHeaders();var s,l=(0,Y.Z)(Mt(c.component.axes));try{for(l.s();!(s=l.n()).done;){var f=s.value;a.axis[f]=sh(t.component.resolve,f),"shared"===a.axis[f]&&(i[f]=Yp(i[f],c.component.axes[f]),i[f]||(a.axis[f]="independent",delete i[f]))}}catch(D){l.e(D)}finally{l.f()}}}catch(D){u.e(D)}finally{u.f()}var h,d=(0,Y.Z)(ee);try{for(d.s();!(h=d.n()).done;){var p,v=h.value,g=(0,Y.Z)(t.children);try{for(g.s();!(p=g.n()).done;){var m=p.value;if(m.component.axes[v]){if("independent"===a.axis[v]){i[v]=(null!==(n=i[v])&&void 0!==n?n:[]).concat(m.component.axes[v]);var y,b=(0,Y.Z)(m.component.axes[v]);try{for(b.s();!(y=b.n()).done;){var x=y.value,_=x.getWithExplicit("orient"),w=_.value,k=_.explicit;if(!Re(w)){if(o[w]>0&&!k){var M=Wp[w];o[w]>o[M]&&x.set("orient",M,!1)}o[w]++}}}catch(D){b.e(D)}finally{b.f()}}delete m.component.axes[v]}}}catch(D){g.e(D)}finally{g.f()}if("independent"===a.axis[v]&&i[v]&&i[v].length>1){var O,E=(0,Y.Z)(i[v]);try{for(E.s();!(O=E.n()).done;){var S=O.value;S.get("grid")&&!S.explicit.grid&&(S.implicit.grid=!1)}}catch(D){E.e(D)}finally{E.f()}}}}catch(D){d.e(D)}finally{d.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,n){return n.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(t,n){return t.concat(n.assembleSignals())}),Af(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(t,n){return t.concat(n.assembleLayoutSignals())}),eh(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,n){return n.assembleSelectionData(t)}),t)}},{key:"assembleGroupStyle",value:function(){var t,n=new Set,e=(0,Y.Z)(this.children);try{for(e.s();!(t=e.n()).done;){var r,i=t.value,a=(0,Y.Z)((0,H.IX)(i.assembleGroupStyle()));try{for(a.s();!(r=a.n()).done;){var o=r.value;n.add(o)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){e.e(c)}finally{e.f()}var u=Array.from(n);return u.length>1?u:1===u.length?u[0]:void 0}},{key:"assembleTitle",value:function(){var t=(0,bc.Z)((0,xc.Z)(e.prototype),"assembleTitle",this).call(this);if(t)return t;var n,r=(0,Y.Z)(this.children);try{for(r.s();!(n=r.n()).done;){if(t=n.value.assembleTitle())return t}}catch(i){r.e(i)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(t,n){var e,r=(0,Y.Z)(t.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;op(i)&&(n=Ks(i,n))}}catch(a){r.e(a)}finally{r.f()}return n}(this,this.children.flatMap((function(t){return t.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(t,n){return t.concat(n.assembleLegends())}),Sh(this))}}]),e}(lp);function sv(t,n,e,r,i){if(Va(t))return new Pp(t,n,e,i);if(yc(t))return new cv(t,n,e,r,i);if(Jo(t))return new uv(t,n,e,r,i);if(function(t){return Ju(t)||$u(t)||Gu(t)}(t))return new Ip(t,n,e,i);throw new Error(cr(t))}var lv=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e};function fv(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.logger&&(n=e.logger,Wr=n),e.fieldTitle&&Oo(e.fieldTitle);try{var r=hc((0,H.fE)(e.config,t.config)),i=Es(t,r),a=sv(i,null,"",void 0,r);a.parse(),function(t,n){_d(t.sources);for(var e=0,r=0,i=0;i<xd&&kd(t,n,!0);i++)e++;t.sources.map(md);for(var a=0;a<xd&&kd(t,n,!1);a++)r++;_d(t.sources),Math.max(e,r)===xd&&Xr("Maximum optimization runs(".concat(xd,") reached."))}(a.component.data,a);var o=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.config?gc(t.config):void 0,a=[].concat(t.assembleSelectionData([]),function(t,n){var e,r,i,a=[],o=Cp(a),u=0,c=(0,Y.Z)(t.sources);try{for(c.s();!(i=c.n()).done;){var s=i.value;s.hasName()||(s.dataName="source_".concat(u++));var l=s.assemble();o(s,l)}}catch(C){c.e(C)}finally{c.f()}for(var f=0,h=a;f<h.length;f++){var d=h[f];0===d.transform.length&&delete d.transform}var p,v=0,g=(0,Y.Z)(a.entries());try{for(g.s();!(p=g.n()).done;){var m=(0,W.Z)(p.value,2),y=m[0],b=m[1];0!==(null!==(e=b.transform)&&void 0!==e?e:[]).length||b.source||a.splice(v++,0,a.splice(y,1)[0])}}catch(C){g.e(C)}finally{g.f()}for(var x=0,_=a;x<_.length;x++){var w,k=_[x],M=(0,Y.Z)(null!==(r=k.transform)&&void 0!==r?r:[]);try{for(M.s();!(w=M.n()).done;){var O=w.value;"lookup"===O.type&&(O.from=t.outputNodes[O.from].getSource())}}catch(C){M.e(C)}finally{M.f()}}for(var E=0,S=a;E<S.length;E++){var D=S[E];D.name in n&&(D.values=n[D.name])}return a}(t.component.data,e)),o=t.assembleProjections(),c=t.assembleTitle(),s=t.assembleGroupStyle(),l=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();f=f.filter((function(t){return"width"!==t.name&&"height"!==t.name||void 0===t.value||(n[t.name]=+t.value,!1)}));var h=n.params,d=lv(n,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),d),c?{title:c}:{}),s?{style:s}:{}),l?{encode:{update:l}}:{}),{data:a}),o.length>0?{projections:o}:{}),t.assembleGroup([].concat((0,u.Z)(f),(0,u.Z)(t.assembleSelectionTopLevelSignals([])),(0,u.Z)(Xu(h))))),i?{config:i}:{}),r?{usermeta:r}:{})}(a,function(t,n,e,r){var i=r.component.layoutSize.get("width"),a=r.component.layoutSize.get("height");void 0===n?(n={type:"pad"},r.hasAxisOrientSignalRef()&&(n.resize=!0)):(0,H.HD)(n)&&(n={type:n});if(i&&a&&(c=n.type,"fit"===c||"fit-x"===c||"fit-y"===c))if("step"===i&&"step"===a)Xr(hr()),n.type="pad";else if("step"===i||"step"===a){var o="step"===i?"width":"height";Xr(hr(oe(o)));var u="width"===o?"height":"width";n.type=function(t){return t?"fit-".concat(oe(t)):"fit"}(u)}var c;return Object.assign(Object.assign(Object.assign({},1===Mt(n).length&&n.type?"pad"===n.type?{}:{autosize:n.type}:{autosize:n}),Fs(e,!1)),Fs(t,!0))}(t,i.autosize,r,a),t.datasets,t.usermeta);return{spec:o,normalized:i}}finally{e.logger&&Yr(),e.fieldTitle&&Oo(ko)}}var hv="5.5.0";var dv=function(t){var n=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3),e=(0,W.Z)(n,2);return{library:e[0],version:e[1]}},pv="2.10.0",vv="#fff",gv={background:"#333",title:{color:vv,subtitleColor:vv},style:{"guide-label":{fill:vv},"guide-title":{fill:vv}},axis:{domainColor:vv,gridColor:"#888",tickColor:vv}},mv="#4572a7",yv={background:"#fff",arc:{fill:mv},area:{fill:mv},line:{stroke:mv,strokeWidth:2},path:{stroke:mv},rect:{fill:mv},shape:{stroke:mv},symbol:{fill:mv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},bv="#30a2da",xv="#cbcbcb",_v="#f0f0f0",wv="#333",kv={arc:{fill:bv},area:{fill:bv},axis:{domainColor:xv,grid:!0,gridColor:xv,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:xv,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:_v,group:{fill:_v},legend:{labelColor:wv,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:wv,titleFontSize:14,titlePadding:10},line:{stroke:bv,strokeWidth:2},path:{stroke:bv,strokeWidth:.5},rect:{fill:bv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:bv},bar:{binSpacing:2,fill:bv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Mv="#000",Ov={group:{fill:"#e5e5e5"},arc:{fill:Mv},area:{fill:Mv},line:{stroke:Mv},path:{stroke:Mv},rect:{fill:Mv},shape:{stroke:Mv},symbol:{fill:Mv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ev="Benton Gothic, sans-serif",Sv="#82c6df",Dv="Benton Gothic Bold, sans-serif",Cv="normal",Av={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Tv={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Dv,fontSize:22,fontWeight:"normal"},arc:{fill:Sv},area:{fill:Sv},line:{stroke:Sv,strokeWidth:2},path:{stroke:Sv},rect:{fill:Sv},shape:{stroke:Sv},symbol:{fill:Sv,size:30},axis:{labelFont:Ev,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Dv,titleFontSize:13,titleFontWeight:Cv},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Ev,labelFontSize:11.5,symbolType:"square",titleFont:Dv,titleFontSize:13,titleFontWeight:Cv},range:{category:Av["category-6"],diverging:Av["fireandice-6"],heatmap:Av["fire-7"],ordinal:Av["fire-7"],ramp:Av["fire-7"]}},Fv="#ab5787",jv="#979797",Zv={background:"#f9f9f9",arc:{fill:Fv},area:{fill:Fv},line:{stroke:Fv},path:{stroke:Fv},rect:{fill:Fv},shape:{stroke:Fv},symbol:{fill:Fv,size:30},axis:{domainColor:jv,domainWidth:.5,gridWidth:.2,labelColor:jv,tickColor:jv,tickWidth:.2,titleColor:jv},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Nv="#3e5c69",zv={background:"#fff",arc:{fill:Nv},area:{fill:Nv},line:{stroke:Nv},path:{stroke:Nv},rect:{fill:Nv},shape:{stroke:Nv},symbol:{fill:Nv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Uv="#1696d2",Pv="#000000",Rv="Lato",Lv="Lato",Iv={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Bv={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Rv},axisX:{domain:!0,domainColor:Pv,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Lv,labelAngle:0,tickColor:Pv,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Rv},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Lv,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Rv,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Lv,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Rv,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Iv["six-groups-cat-1"],diverging:Iv["diverging-colors"],heatmap:Iv["diverging-colors"],ordinal:Iv["six-groups-seq"],ramp:Iv["shades-blue"]},area:{fill:Uv},rect:{fill:Uv},line:{color:Uv,stroke:Uv,strokeWidth:5},trail:{color:Uv,stroke:Uv,strokeWidth:0,size:1},path:{stroke:Uv,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Uv,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Uv,stroke:null}},arc:{fill:Uv},shape:{stroke:Uv},symbol:{fill:Uv,size:30}},qv="#3366CC",Hv="#ccc",Wv="Arial, sans-serif",Yv={arc:{fill:qv},area:{fill:qv},path:{stroke:qv},rect:{fill:qv},shape:{stroke:qv},symbol:{stroke:qv},circle:{fill:qv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Wv,fontSize:12},"guide-title":{font:Wv,fontSize:12},"group-title":{font:Wv,fontSize:12}},title:{font:Wv,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Hv,tickColor:Hv,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Xv=function(t){return t*(1/3+1)},Gv=Xv(9),Jv=Xv(10),$v=Xv(12),Vv="Segoe UI",Kv="wf_standard-font, helvetica, arial, sans-serif",Qv="#252423",tg="#605E5C",ng="transparent",eg="#118DFF",rg="#DEEFFF",ig=[rg,eg],ag={view:{stroke:ng},background:ng,font:Vv,header:{titleFont:Kv,titleFontSize:$v,titleColor:Qv,labelFont:Vv,labelFontSize:Jv,labelColor:tg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:tg,labelFontSize:Gv,titleFont:Kv,titleColor:Qv,titleFontSize:$v,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:eg},line:{stroke:eg,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Vv,fontSize:Gv,fill:tg},arc:{fill:eg},area:{fill:eg,line:!0,opacity:.6},path:{stroke:eg},rect:{fill:eg},point:{fill:eg,filled:!0,size:75},shape:{stroke:eg},symbol:{fill:eg,strokeWidth:1.5,size:50},legend:{titleFont:Vv,titleFontWeight:"bold",titleColor:tg,labelFont:Vv,labelFontSize:Jv,labelColor:tg,symbolType:"circle",symbolSize:75},range:{category:[eg,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:ig,heatmap:ig,ordinal:[rg,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",eg]}},og=pv;function ug(t,n){return JSON.stringify(t,function(t){var n=[];return function(e,r){if("object"!==typeof r||null===r)return r;var i=n.indexOf(this)+1;return n.length=i,n.length>t?"[Object]":n.indexOf(r)>=0?"[Circular]":(n.push(r),r)}}(n))}var cg="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n",sg="vg-tooltip-element",lg={offsetX:10,offsetY:10,id:sg,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(t,n,e){if((0,H.kJ)(t))return"[".concat(t.map((function(t){return n((0,H.HD)(t)?t:ug(t,e))})).join(", "),"]");if((0,H.Kn)(t)){var r="",i=t,a=i.title,o=i.image,u=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(i,["title","image"]);a&&(r+="<h2>".concat(n(a),"</h2>")),o&&(r+='<img src="'.concat(n(o),'">'));var c=Object.keys(u);if(c.length>0){r+="<table>";var s,l=(0,Y.Z)(c);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=u[f];void 0!==h&&((0,H.Kn)(h)&&(h=ug(h,e)),r+='<tr><td class="key">'.concat(n(f),':</td><td class="value">').concat(n(h),"</td></tr>"))}}catch(d){l.e(d)}finally{l.f()}r+="</table>"}return r||"{}"}return n(t)}};var fg=function(){function t(n){(0,c.Z)(this,t),this.options=Object.assign(Object.assign({},lg),n);var e=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return cg.toString().replace(sg,t)}(e);var i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}return(0,s.Z)(t,[{key:"tooltipHandler",value:function(t,n,e,r){var i;(this.el=document.getElementById(this.options.id),this.el)||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(null!==(i=document.fullscreenElement)&&void 0!==i?i:document.body).appendChild(this.el));if(null!=r&&""!==r){this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var a=function(t,n,e,r){var i=t.clientX+e;i+n.width>window.innerWidth&&(i=+t.clientX-e-n.width);var a=t.clientY+r;return a+n.height>window.innerHeight&&(a=+t.clientY-r-n.height),{x:i,y:a}}(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=a.x,u=a.y;this.el.setAttribute("style","top: ".concat(u,"px; left: ").concat(o,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),t}();function hg(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function dg(t,n,e,r,i,a,o){try{var u=t[a](o),c=u.value}catch(s){return void e(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function pg(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){dg(a,r,i,o,u,"next",t)}function u(t){dg(a,r,i,o,u,"throw",t)}o(void 0)}))}}var vg,gg=Object.prototype,mg=gg.hasOwnProperty,yg="function"===typeof Symbol?Symbol:{},bg=yg.iterator||"@@iterator",xg=yg.asyncIterator||"@@asyncIterator",_g=yg.toStringTag||"@@toStringTag";function wg(t,n,e,r){var i=n&&n.prototype instanceof Cg?n:Cg,a=Object.create(i.prototype),o=new Bg(r||[]);return a._invoke=function(t,n,e){var r=Mg;return function(i,a){if(r===Eg)throw new Error("Generator is already running");if(r===Sg){if("throw"===i)throw a;return Hg()}for(e.method=i,e.arg=a;;){var o=e.delegate;if(o){var u=Rg(o,e);if(u){if(u===Dg)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===Mg)throw r=Sg,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=Eg;var c=kg(t,n,e);if("normal"===c.type){if(r=e.done?Sg:Og,c.arg===Dg)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r=Sg,e.method="throw",e.arg=c.arg)}}}(t,e,o),a}function kg(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(r){return{type:"throw",arg:r}}}var Mg="suspendedStart",Og="suspendedYield",Eg="executing",Sg="completed",Dg={};function Cg(){}function Ag(){}function Tg(){}var Fg={};Fg[bg]=function(){return this};var jg=Object.getPrototypeOf,Zg=jg&&jg(jg(qg([])));Zg&&Zg!==gg&&mg.call(Zg,bg)&&(Fg=Zg);var Ng=Tg.prototype=Cg.prototype=Object.create(Fg);function zg(t){["next","throw","return"].forEach((function(n){t[n]=function(t){return this._invoke(n,t)}}))}function Ug(t){var n="function"===typeof t&&t.constructor;return!!n&&(n===Ag||"GeneratorFunction"===(n.displayName||n.name))}function Pg(t,n){function e(r,i,a,o){var u=kg(t[r],t,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"===typeof s&&mg.call(s,"__await")?n.resolve(s.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):n.resolve(s).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,o)}))}o(u.arg)}var r;this._invoke=function(t,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}}function Rg(t,n){var e=t.iterator[n.method];if(e===vg){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=vg,Rg(t,n),"throw"===n.method))return Dg;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return Dg}var r=kg(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,Dg;var i=r.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=vg),n.delegate=null,Dg):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,Dg)}function Lg(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function Ig(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function Bg(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Lg,this),this.reset(!0)}function qg(t){if(t){var n=t[bg];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(mg.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=vg,n.done=!0,n};return r.next=r}}return{next:Hg}}function Hg(){return{value:vg,done:!0}}Ag.prototype=Ng.constructor=Tg,Tg.constructor=Ag,Tg[_g]=Ag.displayName="GeneratorFunction",zg(Pg.prototype),Pg.prototype[xg]=function(){return this},zg(Ng),Ng[_g]="Generator",Ng[bg]=function(){return this},Ng.toString=function(){return"[object Generator]"},Bg.prototype={constructor:Bg,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=vg,this.done=!1,this.delegate=null,this.method="next",this.arg=vg,this.tryEntries.forEach(Ig),!t)for(var n in this)"t"===n.charAt(0)&&mg.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=vg)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,r){return a.type="throw",a.arg=t,n.next=e,r&&(n.method="next",n.arg=vg),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=mg.call(i,"catchLoc"),u=mg.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&mg.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=n,i?(this.method="next",this.next=i.finallyLoc,Dg):this.complete(a)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),Dg},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),Ig(e),Dg}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var i=r.arg;Ig(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:qg(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=vg),Dg}};var Wg={wrap:wg,isGeneratorFunction:Ug,AsyncIterator:Pg,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Tg):(t.__proto__=Tg,_g in t||(t[_g]="GeneratorFunction")),t.prototype=Object.create(Ng),t},awrap:function(t){return{__await:t}},async:function(t,n,e,r,i){void 0===i&&(i=Promise);var a=new Pg(wg(t,n,e,r),i);return Ug(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},keys:function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},values:qg},Yg=Xg;function Xg(t){var n=this;if(n instanceof Xg||(n=new Xg),n.tail=null,n.head=null,n.length=0,t&&"function"===typeof t.forEach)t.forEach((function(t){n.push(t)}));else if(arguments.length>0)for(var e=0,r=arguments.length;e<r;e++)n.push(arguments[e]);return n}function Gg(t,n,e){var r=n===t.head?new Vg(e,null,n,t):new Vg(e,n,n.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function Jg(t,n){t.tail=new Vg(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function $g(t,n){t.head=new Vg(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Vg(t,n,e,r){if(!(this instanceof Vg))return new Vg(t,n,e,r);this.list=r,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}Xg.Node=Vg,Xg.create=Xg,Xg.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var n=t.next,e=t.prev;return n&&(n.prev=e),e&&(e.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,n},Xg.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Xg.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Xg.prototype.push=function(){for(var t=0,n=arguments.length;t<n;t++)Jg(this,arguments[t]);return this.length},Xg.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++)$g(this,arguments[t]);return this.length},Xg.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Xg.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Xg.prototype.forEach=function(t,n){n=n||this;for(var e=this.head,r=0;null!==e;r++)t.call(n,e.value,r,this),e=e.next},Xg.prototype.forEachReverse=function(t,n){n=n||this;for(var e=this.tail,r=this.length-1;null!==e;r--)t.call(n,e.value,r,this),e=e.prev},Xg.prototype.get=function(t){for(var n=0,e=this.head;null!==e&&n<t;n++)e=e.next;if(n===t&&null!==e)return e.value},Xg.prototype.getReverse=function(t){for(var n=0,e=this.tail;null!==e&&n<t;n++)e=e.prev;if(n===t&&null!==e)return e.value},Xg.prototype.map=function(t,n){n=n||this;for(var e=new Xg,r=this.head;null!==r;)e.push(t.call(n,r.value,this)),r=r.next;return e},Xg.prototype.mapReverse=function(t,n){n=n||this;for(var e=new Xg,r=this.tail;null!==r;)e.push(t.call(n,r.value,this)),r=r.prev;return e},Xg.prototype.reduce=function(t,n){var e,r=this.head;if(arguments.length>1)e=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,e=this.head.value}for(var i=0;null!==r;i++)e=t(e,r.value,i),r=r.next;return e},Xg.prototype.reduceReverse=function(t,n){var e,r=this.tail;if(arguments.length>1)e=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,e=this.tail.value}for(var i=this.length-1;null!==r;i--)e=t(e,r.value,i),r=r.prev;return e},Xg.prototype.toArray=function(){for(var t=new Array(this.length),n=0,e=this.head;null!==e;n++)t[n]=e.value,e=e.next;return t},Xg.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,e=this.tail;null!==e;n++)t[n]=e.value,e=e.prev;return t},Xg.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var e=new Xg;if(n<t||n<0)return e;t<0&&(t=0),n>this.length&&(n=this.length);for(var r=0,i=this.head;null!==i&&r<t;r++)i=i.next;for(;null!==i&&r<n;r++,i=i.next)e.push(i.value);return e},Xg.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var e=new Xg;if(n<t||n<0)return e;t<0&&(t=0),n>this.length&&(n=this.length);for(var r=this.length,i=this.tail;null!==i&&r>n;r--)i=i.prev;for(;null!==i&&r>t;r--,i=i.prev)e.push(i.value);return e},Xg.prototype.splice=function(t,n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;var i=[];for(e=0;r&&e<n;e++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(e=0;e<(arguments.length<=2?0:arguments.length-2);e++)r=Gg(this,r,e+2<2||arguments.length<=e+2?void 0:arguments[e+2]);return i},Xg.prototype.reverse=function(){for(var t=this.head,n=this.tail,e=t;null!==e;e=e.prev){var r=e.prev;e.prev=e.next,e.next=r}return this.head=n,this.tail=t,this};try{Xg.prototype[Symbol.iterator]=Wg.mark((function t(){var n;return Wg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.head;case 1:if(!n){t.next=7;break}return t.next=4,n.value;case 4:n=n.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}catch(zy){}var Kg=Yg,Qg=Symbol("max"),tm=Symbol("length"),nm=Symbol("lengthCalculator"),em=Symbol("allowStale"),rm=Symbol("maxAge"),im=Symbol("dispose"),am=Symbol("noDisposeOnSet"),om=Symbol("lruList"),um=Symbol("cache"),cm=Symbol("updateAgeOnGet"),sm=function(){return 1},lm=function(){function t(n){if((0,c.Z)(this,t),"number"===typeof n&&(n={max:n}),n||(n={}),n.max&&("number"!==typeof n.max||n.max<0))throw new TypeError("max must be a non-negative number");this[Qg]=n.max||1/0;var e=n.length||sm;if(this[nm]="function"!==typeof e?sm:e,this[em]=n.stale||!1,n.maxAge&&"number"!==typeof n.maxAge)throw new TypeError("maxAge must be a number");this[rm]=n.maxAge||0,this[im]=n.dispose,this[am]=n.noDisposeOnSet||!1,this[cm]=n.updateAgeOnGet||!1,this.reset()}return(0,s.Z)(t,[{key:"max",get:function(){return this[Qg]},set:function(t){if("number"!==typeof t||t<0)throw new TypeError("max must be a non-negative number");this[Qg]=t||1/0,dm(this)}},{key:"allowStale",get:function(){return this[em]},set:function(t){this[em]=!!t}},{key:"maxAge",get:function(){return this[rm]},set:function(t){if("number"!==typeof t)throw new TypeError("maxAge must be a non-negative number");this[rm]=t,dm(this)}},{key:"lengthCalculator",get:function(){return this[nm]},set:function(t){var n=this;"function"!==typeof t&&(t=sm),t!==this[nm]&&(this[nm]=t,this[tm]=0,this[om].forEach((function(t){t.length=n[nm](t.value,t.key),n[tm]+=t.length}))),dm(this)}},{key:"length",get:function(){return this[tm]}},{key:"itemCount",get:function(){return this[om].length}},{key:"rforEach",value:function(t,n){n=n||this;for(var e=this[om].tail;null!==e;){var r=e.prev;gm(this,t,e,n),e=r}}},{key:"forEach",value:function(t,n){n=n||this;for(var e=this[om].head;null!==e;){var r=e.next;gm(this,t,e,n),e=r}}},{key:"keys",value:function(){return this[om].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[om].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[im]&&this[om]&&this[om].length&&this[om].forEach((function(n){return t[im](n.key,n.value)})),this[um]=new Map,this[om]=new Kg,this[tm]=0}},{key:"dump",value:function(){var t=this;return this[om].map((function(n){return!hm(t,n)&&{k:n.key,v:n.value,e:n.now+(n.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[om]}},{key:"set",value:function(t,n,e){if((e=e||this[rm])&&"number"!==typeof e)throw new TypeError("maxAge must be a number");var r=e?Date.now():0,i=this[nm](n,t);if(this[um].has(t)){if(i>this[Qg])return pm(this,this[um].get(t)),!1;var a=this[um].get(t).value;return this[im]&&(this[am]||this[im](t,a.value)),a.now=r,a.maxAge=e,a.value=n,this[tm]+=i-a.length,a.length=i,this.get(t),dm(this),!0}var o=new vm(t,n,i,r,e);return o.length>this[Qg]?(this[im]&&this[im](t,n),!1):(this[tm]+=o.length,this[om].unshift(o),this[um].set(t,this[om].head),dm(this),!0)}},{key:"has",value:function(t){if(!this[um].has(t))return!1;var n=this[um].get(t).value;return!hm(this,n)}},{key:"get",value:function(t){return fm(this,t,!0)}},{key:"peek",value:function(t){return fm(this,t,!1)}},{key:"pop",value:function(){var t=this[om].tail;return t?(pm(this,t),t.value):null}},{key:"del",value:function(t){pm(this,this[um].get(t))}},{key:"load",value:function(t){this.reset();for(var n=Date.now(),e=t.length-1;e>=0;e--){var r=t[e],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var a=i-n;a>0&&this.set(r.k,r.v,a)}}}},{key:"prune",value:function(){var t=this;this[um].forEach((function(n,e){return fm(t,e,!1)}))}}]),t}(),fm=function(t,n,e){var r=t[um].get(n);if(r){var i=r.value;if(hm(t,i)){if(pm(t,r),!t[em])return}else e&&(t[cm]&&(r.value.now=Date.now()),t[om].unshiftNode(r));return i.value}},hm=function(t,n){if(!n||!n.maxAge&&!t[rm])return!1;var e=Date.now()-n.now;return n.maxAge?e>n.maxAge:t[rm]&&e>t[rm]},dm=function(t){if(t[tm]>t[Qg])for(var n=t[om].tail;t[tm]>t[Qg]&&null!==n;){var e=n.prev;pm(t,n),n=e}},pm=function(t,n){if(n){var e=n.value;t[im]&&t[im](e.key,e.value),t[tm]-=e.length,t[um].delete(e.key),t[om].removeNode(n)}},vm=(0,s.Z)((function t(n,e,r,i,a){(0,c.Z)(this,t),this.key=n,this.value=e,this.length=r,this.now=i,this.maxAge=a||0})),gm=function(t,n,e,r){var i=e.value;hm(t,i)&&(pm(t,e),t[em]||(i=void 0)),i&&n.call(r,i.value,i.key,t)},mm=lm,ym=["includePrerelease","loose","rtl"],bm=function(t){return t?"object"!==typeof t?{loose:!0}:ym.filter((function(n){return t[n]})).reduce((function(t,n){return t[n]=!0,t}),{}):{}},xm={exports:{}},_m={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},wm="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var t,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(t=console).error.apply(t,["SEMVER"].concat(e))}:function(){},km=wm;!function(t,n){var e=_m.MAX_SAFE_COMPONENT_LENGTH,r=km,i=(n=t.exports={}).re=[],a=n.src=[],o=n.t={},u=0,c=function(t,n,e){var c=u++;r(t,c,n),o[t]=c,a[c]=n,i[c]=new RegExp(n,e?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION","(".concat(a[o.NUMERICIDENTIFIER],")\\.")+"(".concat(a[o.NUMERICIDENTIFIER],")\\.")+"(".concat(a[o.NUMERICIDENTIFIER],")")),c("MAINVERSIONLOOSE","(".concat(a[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[o.NUMERICIDENTIFIERLOOSE],")")),c("PRERELEASEIDENTIFIER","(?:".concat(a[o.NUMERICIDENTIFIER],"|").concat(a[o.NONNUMERICIDENTIFIER],")")),c("PRERELEASEIDENTIFIERLOOSE","(?:".concat(a[o.NUMERICIDENTIFIERLOOSE],"|").concat(a[o.NONNUMERICIDENTIFIER],")")),c("PRERELEASE","(?:-(".concat(a[o.PRERELEASEIDENTIFIER],"(?:\\.").concat(a[o.PRERELEASEIDENTIFIER],")*))")),c("PRERELEASELOOSE","(?:-?(".concat(a[o.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(a[o.PRERELEASEIDENTIFIERLOOSE],")*))")),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD","(?:\\+(".concat(a[o.BUILDIDENTIFIER],"(?:\\.").concat(a[o.BUILDIDENTIFIER],")*))")),c("FULLPLAIN","v?".concat(a[o.MAINVERSION]).concat(a[o.PRERELEASE],"?").concat(a[o.BUILD],"?")),c("FULL","^".concat(a[o.FULLPLAIN],"$")),c("LOOSEPLAIN","[v=\\s]*".concat(a[o.MAINVERSIONLOOSE]).concat(a[o.PRERELEASELOOSE],"?").concat(a[o.BUILD],"?")),c("LOOSE","^".concat(a[o.LOOSEPLAIN],"$")),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE","".concat(a[o.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),c("XRANGEIDENTIFIER","".concat(a[o.NUMERICIDENTIFIER],"|x|X|\\*")),c("XRANGEPLAIN","[v=\\s]*(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIER],")")+"(?:".concat(a[o.PRERELEASE],")?").concat(a[o.BUILD],"?")+")?)?"),c("XRANGEPLAINLOOSE","[v=\\s]*(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[o.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(a[o.PRERELEASELOOSE],")?").concat(a[o.BUILD],"?")+")?)?"),c("XRANGE","^".concat(a[o.GTLT],"\\s*").concat(a[o.XRANGEPLAIN],"$")),c("XRANGELOOSE","^".concat(a[o.GTLT],"\\s*").concat(a[o.XRANGEPLAINLOOSE],"$")),c("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(e,"})")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:$|[^\\d])"),c("COERCERTL",a[o.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM","(\\s*)".concat(a[o.LONETILDE],"\\s+"),!0),n.tildeTrimReplace="$1~",c("TILDE","^".concat(a[o.LONETILDE]).concat(a[o.XRANGEPLAIN],"$")),c("TILDELOOSE","^".concat(a[o.LONETILDE]).concat(a[o.XRANGEPLAINLOOSE],"$")),c("LONECARET","(?:\\^)"),c("CARETTRIM","(\\s*)".concat(a[o.LONECARET],"\\s+"),!0),n.caretTrimReplace="$1^",c("CARET","^".concat(a[o.LONECARET]).concat(a[o.XRANGEPLAIN],"$")),c("CARETLOOSE","^".concat(a[o.LONECARET]).concat(a[o.XRANGEPLAINLOOSE],"$")),c("COMPARATORLOOSE","^".concat(a[o.GTLT],"\\s*(").concat(a[o.LOOSEPLAIN],")$|^$")),c("COMPARATOR","^".concat(a[o.GTLT],"\\s*(").concat(a[o.FULLPLAIN],")$|^$")),c("COMPARATORTRIM","(\\s*)".concat(a[o.GTLT],"\\s*(").concat(a[o.LOOSEPLAIN],"|").concat(a[o.XRANGEPLAIN],")"),!0),n.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE","^\\s*(".concat(a[o.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(a[o.XRANGEPLAIN],")")+"\\s*$"),c("HYPHENRANGELOOSE","^\\s*(".concat(a[o.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(a[o.XRANGEPLAINLOOSE],")")+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(xm,xm.exports);var Mm,Om,Em,Sm,Dm=/^[0-9]+$/,Cm=function(t,n){var e=Dm.test(t),r=Dm.test(n);return e&&r&&(t=+t,n=+n),t===n?0:e&&!r?-1:r&&!e?1:t<n?-1:1},Am=Cm,Tm=km,Fm=_m.MAX_LENGTH,jm=_m.MAX_SAFE_INTEGER,Zm=xm.exports.re,Nm=xm.exports.t,zm=bm,Um=Am,Pm=function(){function t(n,e){if((0,c.Z)(this,t),e=zm(e),n instanceof t){if(n.loose===!!e.loose&&n.includePrerelease===!!e.includePrerelease)return n;n=n.version}else if("string"!==typeof n)throw new TypeError("Invalid Version: ".concat(n));if(n.length>Fm)throw new TypeError("version is longer than ".concat(Fm," characters"));Tm("SemVer",n,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;var r=n.trim().match(e.loose?Zm[Nm.LOOSE]:Zm[Nm.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(n));if(this.raw=n,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>jm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>jm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>jm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var n=+t;if(n>=0&&n<jm)return n}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}return(0,s.Z)(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(n){if(Tm("SemVer.compare",this.version,this.options,n),!(n instanceof t)){if("string"===typeof n&&n===this.version)return 0;n=new t(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}},{key:"compareMain",value:function(n){return n instanceof t||(n=new t(n,this.options)),Um(this.major,n.major)||Um(this.minor,n.minor)||Um(this.patch,n.patch)}},{key:"comparePre",value:function(n){if(n instanceof t||(n=new t(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],i=n.prerelease[e];if(Tm("prerelease compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Um(r,i)}while(++e)}},{key:"compareBuild",value:function(n){n instanceof t||(n=new t(n,this.options));var e=0;do{var r=this.build[e],i=n.build[e];if(Tm("prerelease compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Um(r,i)}while(++e)}},{key:"inc",value:function(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",n),this.inc("pre",n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var e=this.prerelease.length;--e>=0;)"number"===typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}n&&(0===Um(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}]),t}(),Rm=Pm,Lm=Rm,Im=function(t,n,e){return new Lm(t,e).compare(new Lm(n,e))},Bm=Im,qm=Im,Hm=Im,Wm=Im,Ym=Im,Xm=Im,Gm=function(t,n,e){return 0===Bm(t,n,e)},Jm=function(t,n,e){return 0!==qm(t,n,e)},$m=function(t,n,e){return Hm(t,n,e)>0},Vm=function(t,n,e){return Wm(t,n,e)>=0},Km=function(t,n,e){return Ym(t,n,e)<0},Qm=function(t,n,e){return Xm(t,n,e)<=0},ty=function(t,n,e,r){switch(n){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof e&&(e=e.version),t===e;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof e&&(e=e.version),t!==e;case"":case"=":case"==":return Gm(t,e,r);case"!=":return Jm(t,e,r);case">":return $m(t,e,r);case">=":return Vm(t,e,r);case"<":return Km(t,e,r);case"<=":return Qm(t,e,r);default:throw new TypeError("Invalid operator: ".concat(n))}};function ny(t,n){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"===typeof t)return ey(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ey(t,n)}(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function ey(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function ry(){if(Sm)return Em;Sm=1;var t=function(){function t(n,i){var a=this;if((0,c.Z)(this,t),i=e(i),n instanceof t)return n.loose===!!i.loose&&n.includePrerelease===!!i.includePrerelease?n:new t(n.raw,i);if(n instanceof r)return this.raw=n.value,this.set=[[n]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=n,this.set=n.split("||").map((function(t){return a.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(n));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(t){return!p(t[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var u,s=ny(this.set);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(1===l.length&&v(l[0])){this.set=[l];break}}}catch(f){s.e(f)}finally{s.f()}}}this.format()}return(0,s.Z)(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var e=this;t=t.trim();var a=Object.keys(this.options).join(","),c="parseRange:".concat(a,":").concat(t),s=n.get(c);if(s)return s;var v=this.options.loose,g=v?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];t=t.replace(g,S(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(o[l.COMPARATORTRIM],f),i("comparator trim",t);var y=(t=(t=(t=t.replace(o[l.TILDETRIM],h)).replace(o[l.CARETTRIM],d)).split(/\s+/).join(" ")).split(" ").map((function(t){return m(t,e.options)})).join(" ").split(/\s+/).map((function(t){return E(t,e.options)}));v&&(y=y.filter((function(t){return i("loose invalid filter",t,e.options),!!t.match(o[l.COMPARATORLOOSE])}))),i("range list",y);var b,x=new Map,_=y.map((function(t){return new r(t,e.options)})),w=ny(_);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(p(k))return[k];x.set(k.value,k)}}catch(O){w.e(O)}finally{w.f()}x.size>1&&x.has("")&&x.delete("");var M=(0,u.Z)(x.values());return n.set(c,M),M}},{key:"intersects",value:function(n,e){if(!(n instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return g(t,e)&&n.set.some((function(n){return g(n,e)&&t.every((function(t){return n.every((function(n){return t.intersects(n,e)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"===typeof t)try{t=new a(t,this.options)}catch(zy){return!1}for(var n=0;n<this.set.length;n++)if(D(this.set[n],t,this.options))return!0;return!1}}]),t}();Em=t;var n=new mm({max:1e3}),e=bm,r=function(){if(Om)return Mm;Om=1;var t=Symbol("SemVer ANY"),n=function(){function n(r,i){if((0,c.Z)(this,n),i=e(i),r instanceof n){if(r.loose===!!i.loose)return r;r=r.value}o("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}return(0,s.Z)(n,[{key:"parse",value:function(n){var e=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],a=n.match(e);if(!a)throw new TypeError("Invalid comparator: ".concat(n));this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new u(a[2],this.options.loose):this.semver=t}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(n){if(o("Comparator.test",n,this.options.loose),this.semver===t||n===t)return!0;if("string"===typeof n)try{n=new u(n,this.options)}catch(zy){return!1}return a(n,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,e){if(!(t instanceof n))throw new TypeError("a Comparator is required");if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new l(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new l(this.value,e).test(t.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),i=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),o=this.semver.version===t.semver.version,u=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),c=a(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),s=a(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||i||o&&u||c||s}}],[{key:"ANY",get:function(){return t}}]),n}();Mm=n;var e=bm,r=xm.exports.re,i=xm.exports.t,a=ty,o=km,u=Rm,l=ry();return Mm}(),i=km,a=Rm,o=xm.exports.re,l=xm.exports.t,f=xm.exports.comparatorTrimReplace,h=xm.exports.tildeTrimReplace,d=xm.exports.caretTrimReplace,p=function(t){return"<0.0.0-0"===t.value},v=function(t){return""===t.value},g=function(t,n){for(var e=!0,r=t.slice(),i=r.pop();e&&r.length;)e=r.every((function(t){return i.intersects(t,n)})),i=r.pop();return e},m=function(t,n){return i("comp",t,n),t=_(t,n),i("caret",t),t=b(t,n),i("tildes",t),t=k(t,n),i("xrange",t),t=O(t,n),i("stars",t),t},y=function(t){return!t||"x"===t.toLowerCase()||"*"===t},b=function(t,n){return t.trim().split(/\s+/).map((function(t){return x(t,n)})).join(" ")},x=function(t,n){var e=n.loose?o[l.TILDELOOSE]:o[l.TILDE];return t.replace(e,(function(n,e,r,a,o){var u;return i("tilde",t,n,e,r,a,o),y(e)?u="":y(r)?u=">=".concat(e,".0.0 <").concat(+e+1,".0.0-0"):y(a)?u=">=".concat(e,".").concat(r,".0 <").concat(e,".").concat(+r+1,".0-0"):o?(i("replaceTilde pr",o),u=">=".concat(e,".").concat(r,".").concat(a,"-").concat(o," <").concat(e,".").concat(+r+1,".0-0")):u=">=".concat(e,".").concat(r,".").concat(a," <").concat(e,".").concat(+r+1,".0-0"),i("tilde return",u),u}))},_=function(t,n){return t.trim().split(/\s+/).map((function(t){return w(t,n)})).join(" ")},w=function(t,n){i("caret",t,n);var e=n.loose?o[l.CARETLOOSE]:o[l.CARET],r=n.includePrerelease?"-0":"";return t.replace(e,(function(n,e,a,o,u){var c;return i("caret",t,n,e,a,o,u),y(e)?c="":y(a)?c=">=".concat(e,".0.0").concat(r," <").concat(+e+1,".0.0-0"):y(o)?c="0"===e?">=".concat(e,".").concat(a,".0").concat(r," <").concat(e,".").concat(+a+1,".0-0"):">=".concat(e,".").concat(a,".0").concat(r," <").concat(+e+1,".0.0-0"):u?(i("replaceCaret pr",u),c="0"===e?"0"===a?">=".concat(e,".").concat(a,".").concat(o,"-").concat(u," <").concat(e,".").concat(a,".").concat(+o+1,"-0"):">=".concat(e,".").concat(a,".").concat(o,"-").concat(u," <").concat(e,".").concat(+a+1,".0-0"):">=".concat(e,".").concat(a,".").concat(o,"-").concat(u," <").concat(+e+1,".0.0-0")):(i("no pr"),c="0"===e?"0"===a?">=".concat(e,".").concat(a,".").concat(o).concat(r," <").concat(e,".").concat(a,".").concat(+o+1,"-0"):">=".concat(e,".").concat(a,".").concat(o).concat(r," <").concat(e,".").concat(+a+1,".0-0"):">=".concat(e,".").concat(a,".").concat(o," <").concat(+e+1,".0.0-0")),i("caret return",c),c}))},k=function(t,n){return i("replaceXRanges",t,n),t.split(/\s+/).map((function(t){return M(t,n)})).join(" ")},M=function(t,n){t=t.trim();var e=n.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return t.replace(e,(function(e,r,a,o,u,c){i("xRange",t,e,r,a,o,u,c);var s=y(a),l=s||y(o),f=l||y(u),h=f;return"="===r&&h&&(r=""),c=n.includePrerelease?"-0":"",s?e=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(l&&(o=0),u=0,">"===r?(r=">=",l?(a=+a+1,o=0,u=0):(o=+o+1,u=0)):"<="===r&&(r="<",l?a=+a+1:o=+o+1),"<"===r&&(c="-0"),e="".concat(r+a,".").concat(o,".").concat(u).concat(c)):l?e=">=".concat(a,".0.0").concat(c," <").concat(+a+1,".0.0-0"):f&&(e=">=".concat(a,".").concat(o,".0").concat(c," <").concat(a,".").concat(+o+1,".0-0")),i("xRange return",e),e}))},O=function(t,n){return i("replaceStars",t,n),t.trim().replace(o[l.STAR],"")},E=function(t,n){return i("replaceGTE0",t,n),t.trim().replace(o[n.includePrerelease?l.GTE0PRE:l.GTE0],"")},S=function(t){return function(n,e,r,i,a,o,u,c,s,l,f,h,d){return e=y(r)?"":y(i)?">=".concat(r,".0.0").concat(t?"-0":""):y(a)?">=".concat(r,".").concat(i,".0").concat(t?"-0":""):o?">=".concat(e):">=".concat(e).concat(t?"-0":""),c=y(s)?"":y(l)?"<".concat(+s+1,".0.0-0"):y(f)?"<".concat(s,".").concat(+l+1,".0-0"):h?"<=".concat(s,".").concat(l,".").concat(f,"-").concat(h):t?"<".concat(s,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(c),"".concat(e," ").concat(c).trim()}},D=function(t,n,e){for(var a=0;a<t.length;a++)if(!t[a].test(n))return!1;if(n.prerelease.length&&!e.includePrerelease){for(var o=0;o<t.length;o++)if(i(t[o].semver),t[o].semver!==r.ANY&&t[o].semver.prerelease.length>0){var u=t[o].semver;if(u.major===n.major&&u.minor===n.minor&&u.patch===n.patch)return!0}return!1}return!0};return Em}var iy=ry(),ay=function(t,n,e){try{n=new iy(n,e)}catch(zy){return!1}return n.test(t)};function oy(t,n,e){var r=t.open(n),i=250,a=new URL(n).origin,o=~~(1e4/i);t.addEventListener("message",(function n(e){e.source===r&&(o=0,t.removeEventListener("message",n,!1))}),!1),setTimeout((function t(){o<=0||(r.postMessage(e,a),setTimeout(t,i),o-=1)}),i)}var uy='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function cy(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=0,a=e;i<a.length;i++){sy(t,a[i])}return t}function sy(t,n){for(var e=0,r=Object.keys(n);e<r.length;e++){var i=r[e];(0,B.writeConfig)(t,i,n[i],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,n){return this.substr(!n||n<0?0:+n,t.length)===t});var ly;function fy(t,n){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"===typeof t)return hy(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hy(t,n)}(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function hy(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function dy(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function py(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?dy(Object(e),!0).forEach((function(n){hg(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dy(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var vy=B,gy=a,my="undefined"!==typeof window?window:void 0;void 0===gy&&null!==my&&void 0!==my&&null!==(ly=my.vl)&&void 0!==ly&&ly.compile&&(gy=my.vl);var yy={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},by={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},xy={vega:"Vega","vega-lite":"Vega-Lite"},_y={vega:vy.version,"vega-lite":gy?gy.version:"not available"},wy={vega:function(t){return t},"vega-lite":function(t,n){return gy.compile(t,{config:n}).spec}},ky='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',My="chart-wrapper";function Oy(t,n,e,r){var i="<html><head>".concat(n,'</head><body><pre><code class="json">'),a="</code></pre>".concat(e,"</body></html>"),o=window.open("");o.document.write(i+t+a),o.document.title="".concat(xy[r]," JSON Source")}function Ey(t,n){if(t.$schema){var e,r=dv(t.$schema);if(n&&n!==r.library)console.warn("The given visualization spec is written in ".concat(xy[r.library],", but mode argument sets ").concat(null!==(e=xy[n])&&void 0!==e?e:n,"."));var i=r.library;return ay(_y[i],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(xy[i]," ").concat(r.version,", but the current version of ").concat(xy[i]," is v").concat(_y[i],".")),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!==n&&void 0!==n?n:"vega"}function Sy(t){return(n=t)&&"load"in n?t:vy.loader(t);var n}function Dy(t){var n,e,r=null!==(n=null===(e=t.usermeta)||void 0===e?void 0:e.embedOptions)&&void 0!==n?n:{};return(0,B.isString)(r.defaultStyle)&&(r.defaultStyle=!1),r}function Cy(t,n){return Ay.apply(this,arguments)}function Ay(){return Ay=pg(Wg.mark((function t(n,e){var r,i,a,o,u,c,s,l,f,h,d,p=arguments;return Wg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=p.length>2&&void 0!==p[2]?p[2]:{},!(0,B.isString)(e)){t.next=10;break}return u=Sy(a.loader),t.t0=JSON,t.next=6,u.load(e);case 6:t.t1=t.sent,o=t.t0.parse.call(t.t0,t.t1),t.next=11;break;case 10:o=e;case 11:return c=Dy(o),s=c.loader,u&&!s||(u=Sy(null!==(l=a.loader)&&void 0!==l?l:s)),t.next=16,Ty(c,u);case 16:return f=t.sent,t.next=19,Ty(a,u);case 19:return h=t.sent,d=py(py({},cy(h,f)),{},{config:(0,B.mergeConfig)(null!==(r=h.config)&&void 0!==r?r:{},null!==(i=f.config)&&void 0!==i?i:{})}),t.next=23,Zy(n,o,d,u);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t)}))),Ay.apply(this,arguments)}function Ty(t,n){return Fy.apply(this,arguments)}function Fy(){return(Fy=pg(Wg.mark((function t(n,e){var r,i,a;return Wg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,B.isString)(n.config)){t.next=8;break}return t.t1=JSON,t.next=4,e.load(n.config);case 4:t.t2=t.sent,t.t0=t.t1.parse.call(t.t1,t.t2),t.next=9;break;case 8:t.t0=null!==(r=n.config)&&void 0!==r?r:{};case 9:if(i=t.t0,!(0,B.isString)(n.patch)){t.next=18;break}return t.t4=JSON,t.next=14,e.load(n.patch);case 14:t.t5=t.sent,t.t3=t.t4.parse.call(t.t4,t.t5),t.next=19;break;case 18:t.t3=n.patch;case 19:return a=t.t3,t.abrupt("return",py(py(py({},n),a?{patch:a}:{}),i?{config:i}:{}));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jy(t){var n,e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:null!==(n=document.head)&&void 0!==n?n:document.body}}function Zy(t,n){return Ny.apply(this,arguments)}function Ny(){return Ny=pg(Wg.mark((function t(n,e){var r,i,a,u,c,s,l,f,h,d,p,v,g,m,y,b,x,_,w,k,M,O,E,D,C,A,T,F,j,Z,N,z,U,P,R,L,H,W,Y,X,G,J,$,V,K,Q,tt,nt,et,rt,it,at=arguments;return Wg.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(it=function(){W&&document.removeEventListener("click",W),z.finalize()},h=at.length>3?at[3]:void 0,d=(f=at.length>2&&void 0!==at[2]?at[2]:{}).theme?(0,B.mergeConfig)(o[f.theme],null!==(r=f.config)&&void 0!==r?r:{}):f.config,p=(0,B.isBoolean)(f.actions)?f.actions:cy({},yy,null!==(i=f.actions)&&void 0!==i?i:{}),v=py(py({},by),f.i18n),g=null!==(a=f.renderer)&&void 0!==a?a:"canvas",m=null!==(u=f.logLevel)&&void 0!==u?u:vy.Warn,y=null!==(c=f.downloadFileName)&&void 0!==c?c:"visualization",b="string"===typeof n?document.querySelector(n):n){t.next=12;break}throw new Error("".concat(n," does not exist"));case 12:if(!1!==f.defaultStyle&&(x="vega-embed-style",_=jy(b),w=_.root,k=_.rootContainer,w.getElementById(x)||((M=document.createElement("style")).id=x,M.innerHTML=void 0===f.defaultStyle||!0===f.defaultStyle?uy.toString():f.defaultStyle,k.appendChild(M))),O=Ey(e,f.mode),E=wy[O](e,d),"vega-lite"===O&&E.$schema&&(D=dv(E.$schema),ay(_y.vega,"^".concat(D.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(D.version,", but current version is v").concat(_y.vega,"."))),b.classList.add("vega-embed"),p&&b.classList.add("has-actions"),b.innerHTML="",C=b,p&&((A=document.createElement("div")).classList.add(My),b.appendChild(A),C=A),(T=f.patch)&&(E=T instanceof Function?T(E):S(E,T,!0,!1).newDocument),f.formatLocale&&vy.formatLocale(f.formatLocale),f.timeFormatLocale&&vy.timeFormatLocale(f.timeFormatLocale),f.expressionFunctions)for(F in f.expressionFunctions)"fn"in(j=f.expressionFunctions[F])?vy.expressionFunction(F,j.fn,j.visitor):j instanceof Function&&vy.expressionFunction(F,j);return Z=f.ast,N=vy.parse(E,"vega-lite"===O?{}:d,{ast:Z}),(z=new(f.viewClass||vy.View)(N,py({loader:h,logLevel:m,renderer:g},Z?{expr:null!==(s=null!==(l=vy.expressionInterpreter)&&void 0!==l?l:f.expr)&&void 0!==s?s:q.N}:{}))).addSignalListener("autosize",(function(t,n){var e=n.type;"fit-x"==e?(C.classList.add("fit-x"),C.classList.remove("fit-y")):"fit-y"==e?(C.classList.remove("fit-x"),C.classList.add("fit-y")):"fit"==e?C.classList.add("fit-x","fit-y"):C.classList.remove("fit-x","fit-y")})),!1!==f.tooltip&&(ot=f.tooltip,U="function"===typeof ot?f.tooltip:new fg(!0===f.tooltip?{}:f.tooltip).call,z.tooltip(U)),void 0===(P=f.hover)&&(P="vega"===O),P&&(L=(R="boolean"===typeof P?{}:P).hoverSet,H=R.updateSet,z.hover(L,H)),f&&(null!=f.width&&z.width(f.width),null!=f.height&&z.height(f.height),null!=f.padding&&z.padding(f.padding)),t.next=37,z.initialize(C,f.bind).runAsync();case 37:if(!1!==p){if(Y=b,!1!==f.defaultStyle&&((X=document.createElement("details")).title=v.CLICK_TO_VIEW_ACTIONS,b.append(X),Y=X,(G=document.createElement("summary")).innerHTML=ky,X.append(G),W=function(t){X.contains(t.target)||X.removeAttribute("open")},document.addEventListener("click",W)),J=document.createElement("div"),Y.append(J),J.classList.add("vega-actions"),!0===p||!1!==p.export){$=fy(["svg","png"]);try{for(K=function(){var t=V.value;if(!0===p||!0===p.export||p.export[t]){var n=v["".concat(t.toUpperCase(),"_ACTION")],e=document.createElement("a");e.text=n,e.href="#",e.target="_blank",e.download="".concat(y,".").concat(t),e.addEventListener("mousedown",function(){var n=pg(Wg.mark((function n(e){var r;return Wg.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,z.toImageURL(t,f.scaleFactor);case 3:r=n.sent,this.href=r;case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()),J.append(e)}},$.s();!(V=$.n()).done;)K()}catch(ut){$.e(ut)}finally{$.f()}}!0!==p&&!1===p.source||((Q=document.createElement("a")).text=v.SOURCE_ACTION,Q.href="#",Q.addEventListener("click",(function(t){var n,r;Oy(I()(e),null!==(n=f.sourceHeader)&&void 0!==n?n:"",null!==(r=f.sourceFooter)&&void 0!==r?r:"",O),t.preventDefault()})),J.append(Q)),"vega-lite"!==O||!0!==p&&!1===p.compiled||((tt=document.createElement("a")).text=v.COMPILED_ACTION,tt.href="#",tt.addEventListener("click",(function(t){var n,e;Oy(I()(E),null!==(n=f.sourceHeader)&&void 0!==n?n:"",null!==(e=f.sourceFooter)&&void 0!==e?e:"","vega"),t.preventDefault()})),J.append(tt)),!0!==p&&!1===p.editor||(et=null!==(nt=f.editorUrl)&&void 0!==nt?nt:"https://vega.github.io/editor/",(rt=document.createElement("a")).text=v.EDITOR_ACTION,rt.href="#",rt.addEventListener("click",(function(t){oy(window,et,{config:d,mode:O,renderer:g,spec:I()(e)}),t.preventDefault()})),J.append(rt))}return t.abrupt("return",{view:z,spec:e,vgSpec:E,finalize:it,embedOptions:f});case 39:case"end":return t.stop()}var ot}),t)}))),Ny.apply(this,arguments)}},5946:function(t,n,e){"use strict";e.d(n,{r:function(){return g}});var r,i,a="view",o="[",u="]",c="{",s="}",l=":",f=",",h="@",d=">",p=/[[\]{}]/,v={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function g(t,n,e){return r=n||a,i=e||v,y(t.trim()).map(b)}function m(t,n,e,r,i){for(var a,o=t.length,u=0;n<o;++n){if(a=t[n],!u&&a===e)return n;i&&i.indexOf(a)>=0?--u:r&&r.indexOf(a)>=0&&++u}return n}function y(t){for(var n=[],e=t.length,r=0,i=0;i<e;)i=m(t,i,f,o+c,u+s),n.push(t.substring(r,i).trim()),r=++i;if(0===n.length)throw"Empty event selector: "+t;return n}function b(t){return"["===t[0]?function(t){var n,e=t.length,r=1;if(r=m(t,r,u,o,u),r===e)throw"Empty between selector: "+t;if(n=y(t.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+t;if(t=t.slice(r+1).trim(),t[0]!==d)throw"Expected '>' after between selector: "+t;n=n.map(b);var i=b(t.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(t):function(t){var n,e,a={source:r},d=[],v=[0,0],g=0,y=0,b=t.length,x=0;if(t[b-1]===s){if(!((x=t.lastIndexOf(c))>=0))throw"Unmatched right brace: "+t;try{v=function(t){var n=t.split(f);if(!t.length||n.length>2)throw t;return n.map((function(n){var e=+n;if(e!==e)throw t;return e}))}(t.substring(x+1,b-1))}catch(w){throw"Invalid throttle specification: "+t}b=(t=t.slice(0,x).trim()).length,x=0}if(!b)throw t;t[0]===h&&(g=++x);n=m(t,x,l),n<b&&(d.push(t.substring(y,n).trim()),y=x=++n);if(x=m(t,x,o),x===b)d.push(t.substring(y,b).trim());else if(d.push(t.substring(y,x).trim()),e=[],(y=++x)===b)throw"Unmatched left bracket: "+t;for(;x<b;){if((x=m(t,x,u))===b)throw"Unmatched left bracket: "+t;if(e.push(t.substring(y,x).trim()),x<b-1&&t[++x]!==o)throw"Expected left bracket: "+t;y=++x}if(!(b=d.length)||p.test(d[b-1]))throw"Invalid event selector: "+t;b>1?(a.type=d[1],g?a.markname=d[0].slice(1):(_=d[0],i[_]?a.marktype=d[0]:a.source=d[0])):a.type=d[0];var _;"!"===a.type.slice(-1)&&(a.consume=!0,a.type=a.type.slice(0,-1));null!=e&&(a.filter=e);v[0]&&(a.throttle=v[0]);v[1]&&(a.debounce=v[1]);return a}(t)}},12516:function(t,n,e){"use strict";e.d(n,{BJ:function(){return Ht},Lt:function(){return d},YP:function(){return Xt},_G:function(){return Wt},t$:function(){return s},wk:function(){return Yt}});var r,i,a,o,u,c=e(16408),s="Literal",l="Property",f="ArrayExpression",h="BinaryExpression",d="CallExpression",p="ConditionalExpression",v="LogicalExpression",g="MemberExpression",m="ObjectExpression",y="UnaryExpression";function b(t){this.type=t}b.prototype.visit=function(t){var n,e,r;if(t(this))return 1;for(e=0,r=(n=function(t){switch(t.type){case f:return t.elements;case h:case v:return[t.left,t.right];case d:return[t.callee].concat(t.arguments);case p:return[t.test,t.consequent,t.alternate];case g:return[t.object,t.property];case m:return t.properties;case l:return[t.key,t.value];case y:return[t.argument];default:return[]}}(this)).length;e<r;++e)if(n[e].visit(t))return 1};var x=1,_=2,w=3,k=4,M=5,O=6,E=7,S=8;(r={})[x]="Boolean",r[_]="<end>",r[w]="Identifier",r[k]="Keyword",r[M]="Null",r[O]="Numeric",r[E]="Punctuator",r[S]="String",r[9]="RegularExpression";var D="ArrayExpression",C="BinaryExpression",A="CallExpression",T="ConditionalExpression",F="Identifier",j="Literal",Z="LogicalExpression",N="MemberExpression",z="ObjectExpression",U="Property",P="UnaryExpression",R="Unexpected token %0",L="Unexpected number",I="Unexpected string",B="Unexpected identifier",q="Unexpected reserved word",H="Unexpected end of input",W="Invalid regular expression",Y="Invalid regular expression: missing /",X="Octal literals are not allowed in strict mode.",G="Duplicate data property in object literal not allowed in strict mode",J="ILLEGAL",$="Disabled.",V=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),K=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Q(t,n){if(!t)throw new Error("ASSERT: "+n)}function tt(t){return t>=48&&t<=57}function nt(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function et(t){return"01234567".indexOf(t)>=0}function rt(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function it(t){return 10===t||13===t||8232===t||8233===t}function at(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&V.test(String.fromCharCode(t))}function ot(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&K.test(String.fromCharCode(t))}var ut={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function ct(){for(;a<o;){var t=i.charCodeAt(a);if(!rt(t)&&!it(t))break;++a}}function st(t){var n,e,r,u=0;for(e="u"===t?4:2,n=0;n<e;++n)a<o&&nt(i[a])?(r=i[a++],u=16*u+"0123456789abcdef".indexOf(r.toLowerCase())):Ot({},R,J);return String.fromCharCode(u)}function lt(){var t,n,e,r;for(n=0,"}"===(t=i[a])&&Ot({},R,J);a<o&&nt(t=i[a++]);)n=16*n+"0123456789abcdef".indexOf(t.toLowerCase());return(n>1114111||"}"!==t)&&Ot({},R,J),n<=65535?String.fromCharCode(n):(e=55296+(n-65536>>10),r=56320+(n-65536&1023),String.fromCharCode(e,r))}function ft(){var t,n;for(t=i.charCodeAt(a++),n=String.fromCharCode(t),92===t&&(117!==i.charCodeAt(a)&&Ot({},R,J),++a,(t=st("u"))&&"\\"!==t&&at(t.charCodeAt(0))||Ot({},R,J),n=t);a<o&&ot(t=i.charCodeAt(a));)++a,n+=String.fromCharCode(t),92===t&&(n=n.substr(0,n.length-1),117!==i.charCodeAt(a)&&Ot({},R,J),++a,(t=st("u"))&&"\\"!==t&&ot(t.charCodeAt(0))||Ot({},R,J),n+=t);return n}function ht(){var t,n;return t=a,n=92===i.charCodeAt(a)?ft():function(){var t,n;for(t=a++;a<o;){if(92===(n=i.charCodeAt(a)))return a=t,ft();if(!ot(n))break;++a}return i.slice(t,a)}(),{type:1===n.length?w:ut.hasOwnProperty(n)?k:"null"===n?M:"true"===n||"false"===n?x:w,value:n,start:t,end:a}}function dt(){var t,n,e,r,o=a,u=i.charCodeAt(a),c=i[a];switch(u){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++a,{type:E,value:String.fromCharCode(u),start:o,end:a};default:if(61===(t=i.charCodeAt(a+1)))switch(u){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return a+=2,{type:E,value:String.fromCharCode(u)+String.fromCharCode(t),start:o,end:a};case 33:case 61:return a+=2,61===i.charCodeAt(a)&&++a,{type:E,value:i.slice(o,a),start:o,end:a}}}return">>>="===(r=i.substr(a,4))?{type:E,value:r,start:o,end:a+=4}:">>>"===(e=r.substr(0,3))||"<<="===e||">>="===e?{type:E,value:e,start:o,end:a+=3}:c===(n=e.substr(0,2))[1]&&"+-<>&|".indexOf(c)>=0||"=>"===n?{type:E,value:n,start:o,end:a+=2}:("//"===n&&Ot({},R,J),"<>=!+-*%&|^/".indexOf(c)>=0?(++a,{type:E,value:c,start:o,end:a}):void Ot({},R,J))}function pt(){var t,n,e;if(Q(tt((e=i[a]).charCodeAt(0))||"."===e,"Numeric literal must start with a decimal digit or a decimal point"),n=a,t="","."!==e){if(t=i[a++],e=i[a],"0"===t){if("x"===e||"X"===e)return++a,function(t){for(var n="";a<o&&nt(i[a]);)n+=i[a++];return 0===n.length&&Ot({},R,J),at(i.charCodeAt(a))&&Ot({},R,J),{type:O,value:parseInt("0x"+n,16),start:t,end:a}}(n);if(et(e))return function(t){for(var n="0"+i[a++];a<o&&et(i[a]);)n+=i[a++];return(at(i.charCodeAt(a))||tt(i.charCodeAt(a)))&&Ot({},R,J),{type:O,value:parseInt(n,8),octal:!0,start:t,end:a}}(n);e&&tt(e.charCodeAt(0))&&Ot({},R,J)}for(;tt(i.charCodeAt(a));)t+=i[a++];e=i[a]}if("."===e){for(t+=i[a++];tt(i.charCodeAt(a));)t+=i[a++];e=i[a]}if("e"===e||"E"===e)if(t+=i[a++],"+"!==(e=i[a])&&"-"!==e||(t+=i[a++]),tt(i.charCodeAt(a)))for(;tt(i.charCodeAt(a));)t+=i[a++];else Ot({},R,J);return at(i.charCodeAt(a))&&Ot({},R,J),{type:O,value:parseFloat(t),start:n,end:a}}function vt(){var t,n,e,r;return u=null,ct(),t=a,n=function(){var t,n,e,r;for(Q("/"===(t=i[a]),"Regular expression literal must start with a slash"),n=i[a++],e=!1,r=!1;a<o;)if(n+=t=i[a++],"\\"===t)it((t=i[a++]).charCodeAt(0))&&Ot({},Y),n+=t;else if(it(t.charCodeAt(0)))Ot({},Y);else if(e)"]"===t&&(e=!1);else{if("/"===t){r=!0;break}"["===t&&(e=!0)}return r||Ot({},Y),{value:n.substr(1,n.length-2),literal:n}}(),e=function(){var t,n,e;for(n="",e="";a<o&&ot((t=i[a]).charCodeAt(0));)++a,"\\"===t&&a<o?Ot({},R,J):(e+=t,n+=t);return e.search(/[^gimuy]/g)>=0&&Ot({},W,e),{value:e,literal:n}}(),r=function(t,n){var e=t;n.indexOf("u")>=0&&(e=e.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,n){if(parseInt(n,16)<=1114111)return"x";Ot({},W)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(e)}catch(r){Ot({},W)}try{return new RegExp(t,n)}catch(i){return null}}(n.value,e.value),{literal:n.literal+e.literal,value:r,regex:{pattern:n.value,flags:e.value},start:t,end:a}}function gt(){if(ct(),a>=o)return{type:_,start:a,end:a};var t=i.charCodeAt(a);return at(t)?ht():40===t||41===t||59===t?dt():39===t||34===t?function(){var t,n,e,r,u="",c=!1;for(Q("'"===(t=i[a])||'"'===t,"String literal must starts with a quote"),n=a,++a;a<o;){if((e=i[a++])===t){t="";break}if("\\"===e)if((e=i[a++])&&it(e.charCodeAt(0)))"\r"===e&&"\n"===i[a]&&++a;else switch(e){case"u":case"x":"{"===i[a]?(++a,u+=lt()):u+=st(e);break;case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:et(e)?(0!==(r="01234567".indexOf(e))&&(c=!0),a<o&&et(i[a])&&(c=!0,r=8*r+"01234567".indexOf(i[a++]),"0123".indexOf(e)>=0&&a<o&&et(i[a])&&(r=8*r+"01234567".indexOf(i[a++]))),u+=String.fromCharCode(r)):u+=e}else{if(it(e.charCodeAt(0)))break;u+=e}}return""!==t&&Ot({},R,J),{type:S,value:u,octal:c,start:n,end:a}}():46===t?tt(i.charCodeAt(a+1))?pt():dt():tt(t)?pt():dt()}function mt(){var t=u;return a=t.end,u=gt(),a=t.end,t}function yt(){var t=a;u=gt(),a=t}function bt(t,n,e){var r=new b("||"===t||"&&"===t?Z:C);return r.operator=t,r.left=n,r.right=e,r}function xt(t,n){var e=new b(A);return e.callee=t,e.arguments=n,e}function _t(t){var n=new b(F);return n.name=t,n}function wt(t){var n=new b(j);return n.value=t.value,n.raw=i.slice(t.start,t.end),t.regex&&("//"===n.raw&&(n.raw="/(?:)/"),n.regex=t.regex),n}function kt(t,n,e){var r=new b(N);return r.computed="["===t,r.object=n,r.property=e,r.computed||(e.member=!0),r}function Mt(t,n,e){var r=new b(U);return r.key=n,r.value=e,r.kind=t,r}function Ot(t,n){var e,r=Array.prototype.slice.call(arguments,2),i=n.replace(/%(\d)/g,(function(t,n){return Q(n<r.length,"Message reference must be in range"),r[n]}));throw(e=new Error(i)).index=a,e.description=i,e}function Et(t){t.type===_&&Ot(t,H),t.type===O&&Ot(t,L),t.type===S&&Ot(t,I),t.type===w&&Ot(t,B),t.type===k&&Ot(t,q),Ot(t,R,t.value)}function St(t){var n=mt();n.type===E&&n.value===t||Et(n)}function Dt(t){return u.type===E&&u.value===t}function Ct(t){return u.type===k&&u.value===t}function At(){var t=[];for(a=u.start,St("[");!Dt("]");)Dt(",")?(mt(),t.push(null)):(t.push(Bt()),Dt("]")||St(","));return mt(),function(t){var n=new b(D);return n.elements=t,n}(t)}function Tt(){a=u.start;var t=mt();return t.type===S||t.type===O?(t.octal&&Ot(t,X),wt(t)):_t(t.value)}function Ft(){var t,n,e;return a=u.start,(t=u).type===w?(e=Tt(),St(":"),Mt("init",e,Bt())):t.type!==_&&t.type!==E?(n=Tt(),St(":"),Mt("init",n,Bt())):void Et(t)}function jt(){var t,n,e=[],r={},i=String;for(a=u.start,St("{");!Dt("}");)n="$"+((t=Ft()).key.type===F?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,n)?Ot({},G):r[n]=!0,e.push(t),Dt("}")||St(",");return St("}"),function(t){var n=new b(z);return n.properties=t,n}(e)}var Zt={if:1};function Nt(){var t,n,e;if(Dt("("))return function(){St("(");var t=qt();return St(")"),t}();if(Dt("["))return At();if(Dt("{"))return jt();if(t=u.type,a=u.start,t===w||Zt[u.value])e=_t(mt().value);else if(t===S||t===O)u.octal&&Ot(u,X),e=wt(mt());else{if(t===k)throw new Error($);t===x?((n=mt()).value="true"===n.value,e=wt(n)):t===M?((n=mt()).value=null,e=wt(n)):Dt("/")||Dt("/=")?(e=wt(vt()),yt()):Et(mt())}return e}function zt(){var t=[];if(St("("),!Dt(")"))for(;a<o&&(t.push(Bt()),!Dt(")"));)St(",");return St(")"),t}function Ut(){a=u.start;var t=mt();return function(t){return t.type===w||t.type===k||t.type===x||t.type===M}(t)||Et(t),_t(t.value)}function Pt(){St("[");var t=qt();return St("]"),t}function Rt(){var t=function(){var t;for(t=Nt();;)if(Dt("."))St("."),t=kt(".",t,Ut());else if(Dt("("))t=xt(t,zt());else{if(!Dt("["))break;t=kt("[",t,Pt())}return t}();if(u.type===E&&(Dt("++")||Dt("--")))throw new Error($);return t}function Lt(){var t,n;if(u.type!==E&&u.type!==k)n=Rt();else{if(Dt("++")||Dt("--"))throw new Error($);if(Dt("+")||Dt("-")||Dt("~")||Dt("!"))t=mt(),n=Lt(),n=function(t,n){var e=new b(P);return e.operator=t,e.argument=n,e.prefix=!0,e}(t.value,n);else{if(Ct("delete")||Ct("void")||Ct("typeof"))throw new Error($);n=Rt()}}return n}function It(t){var n=0;if(t.type!==E&&t.type!==k)return 0;switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":n=7;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Bt(){var t,n;return t=function(){var t,n,e,r,i,a,o,c,s,l;if(t=u,s=Lt(),0===(i=It(r=u)))return s;for(r.prec=i,mt(),n=[t,u],a=[s,r,o=Lt()];(i=It(u))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),c=a.pop().value,s=a.pop(),n.pop(),e=bt(c,s,o),a.push(e);(r=mt()).prec=i,a.push(r),n.push(u),e=Lt(),a.push(e)}for(e=a[l=a.length-1],n.pop();l>1;)n.pop(),e=bt(a[l-1].value,a[l-2],e),l-=2;return e}(),Dt("?")&&(mt(),n=Bt(),St(":"),t=function(t,n,e){var r=new b(T);return r.test=t,r.consequent=n,r.alternate=e,r}(t,n,Bt())),t}function qt(){var t=Bt();if(Dt(","))throw new Error($);return t}function Ht(t){a=0,o=(i=t).length,u=null,yt();var n=qt();if(u.type!==_)throw new Error("Unexpect token after expression.");return n}var Wt={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Yt(t){function n(n,e,r){return function(i){return function(n,e,r,i){var a=t(e[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+n+(i<0?"":0===i?"()":"("+e.slice(1).map(t).join(",")+")")}(n,i,e,r)}}var e="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(n){n.length<3&&(0,c.vU)("Missing arguments to clamp function."),n.length>3&&(0,c.vU)("Too many arguments to clamp function.");var e=n.map(t);return"Math.max("+e[1]+", Math.min("+e[2]+","+e[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:e,date:n("getDate",e,0),day:n("getDay",e,0),year:n("getFullYear",e,0),month:n("getMonth",e,0),hours:n("getHours",e,0),minutes:n("getMinutes",e,0),seconds:n("getSeconds",e,0),milliseconds:n("getMilliseconds",e,0),time:n("getTime",e,0),timezoneoffset:n("getTimezoneOffset",e,0),utcdate:n("getUTCDate",e,0),utcday:n("getUTCDay",e,0),utcyear:n("getUTCFullYear",e,0),utcmonth:n("getUTCMonth",e,0),utchours:n("getUTCHours",e,0),utcminutes:n("getUTCMinutes",e,0),utcseconds:n("getUTCSeconds",e,0),utcmilliseconds:n("getUTCMilliseconds",e,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:i,test:n("test",i),if:function(n){n.length<3&&(0,c.vU)("Missing arguments to if function."),n.length>3&&(0,c.vU)("Too many arguments to if function.");var e=n.map(t);return"("+e[0]+"?"+e[1]+":"+e[2]+")"}}}function Xt(t){var n=(t=t||{}).allowed?(0,c.Rg)(t.allowed):{},e=t.forbidden?(0,c.Rg)(t.forbidden):{},r=t.constants||Wt,i=(t.functions||Yt)(h),a=t.globalvar,o=t.fieldvar,u=(0,c.mf)(a)?a:function(t){return"".concat(a,'["').concat(t,'"]')},s={},l={},f=0;function h(t){if((0,c.HD)(t))return t;var n=d[t.type];return null==n&&(0,c.vU)("Unsupported type: "+t.type),n(t)}var d={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return f>0?i:(0,c.nr)(e,i)?(0,c.vU)("Illegal identifier: "+i):(0,c.nr)(r,i)?r[i]:(0,c.nr)(n,i)?i:(s[i]=1,u(i))},MemberExpression:function(t){var n=!t.computed,e=h(t.object);n&&(f+=1);var r=h(t.property);return e===o&&(l[function(t){var n=t&&t.length-1;return n&&('"'===t[0]&&'"'===t[n]||"'"===t[0]&&"'"===t[n])?t.slice(1,-1):t}(r)]=1),n&&(f-=1),e+(n?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&(0,c.vU)("Illegal callee type: "+t.callee.type);var n=t.callee.name,e=t.arguments,r=(0,c.nr)(i,n)&&i[n];return r||(0,c.vU)("Unrecognized function: "+n),(0,c.mf)(r)?r(e):r+"("+e.map(h).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(h).join(",")+"]"},BinaryExpression:function(t){return"("+h(t.left)+" "+t.operator+" "+h(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+h(t.argument)+")"},ConditionalExpression:function(t){return"("+h(t.test)+"?"+h(t.consequent)+":"+h(t.alternate)+")"},LogicalExpression:function(t){return"("+h(t.left)+t.operator+h(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(h).join(",")+"}"},Property:function(t){f+=1;var n=h(t.key);return f-=1,n+":"+h(t.value)}};function p(t){var n={code:h(t),globals:Object.keys(s),fields:Object.keys(l)};return s={},l={},n}return p.functions=i,p.constants=r,p}},19541:function(t,n,e){"use strict";e.d(n,{N:function(){return h}});var r={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},i={"*":function(t,n){return t*n},"+":function(t,n){return t+n},"-":function(t,n){return t-n},"/":function(t,n){return t/n},"%":function(t,n){return t%n},">":function(t,n){return t>n},"<":function(t,n){return t<n},"<=":function(t,n){return t<=n},">=":function(t,n){return t>=n},"==":function(t,n){return t==n},"!=":function(t,n){return t!=n},"===":function(t,n){return t===n},"!==":function(t,n){return t!==n},"&":function(t,n){return t&n},"|":function(t,n){return t|n},"^":function(t,n){return t^n},"<<":function(t,n){return t<<n},">>":function(t,n){return t>>n},">>>":function(t,n){return t>>>n}},a={"+":function(t){return+t},"-":function(t){return-t},"~":function(t){return~t},"!":function(t){return!t}},o=Array.prototype.slice,u=function(t,n,e){var r=e?e(n[0]):n[0];return r[t].apply(r,o.call(n,1))},c={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:function(t,n,e){return Math.max(n,Math.min(e,t))},now:Date.now,utc:Date.UTC,datetime:function(t,n,e,r,i,a,o){return new Date(t,n||0,null!=e?e:1,r||0,i||0,a||0,o||0)},date:function(t){return new Date(t).getDate()},day:function(t){return new Date(t).getDay()},year:function(t){return new Date(t).getFullYear()},month:function(t){return new Date(t).getMonth()},hours:function(t){return new Date(t).getHours()},minutes:function(t){return new Date(t).getMinutes()},seconds:function(t){return new Date(t).getSeconds()},milliseconds:function(t){return new Date(t).getMilliseconds()},time:function(t){return new Date(t).getTime()},timezoneoffset:function(t){return new Date(t).getTimezoneOffset()},utcdate:function(t){return new Date(t).getUTCDate()},utcday:function(t){return new Date(t).getUTCDay()},utcyear:function(t){return new Date(t).getUTCFullYear()},utcmonth:function(t){return new Date(t).getUTCMonth()},utchours:function(t){return new Date(t).getUTCHours()},utcminutes:function(t){return new Date(t).getUTCMinutes()},utcseconds:function(t){return new Date(t).getUTCSeconds()},utcmilliseconds:function(t){return new Date(t).getUTCMilliseconds()},length:function(t){return t.length},join:function(){return u("join",arguments)},indexof:function(){return u("indexOf",arguments)},lastindexof:function(){return u("lastIndexOf",arguments)},slice:function(){return u("slice",arguments)},reverse:function(t){return t.slice().reverse()},parseFloat:parseFloat,parseInt:parseInt,upper:function(t){return String(t).toUpperCase()},lower:function(t){return String(t).toLowerCase()},substring:function(){return u("substring",arguments,String)},split:function(){return u("split",arguments,String)},replace:function(){return u("replace",arguments,String)},trim:function(t){return String(t).trim()},regexp:RegExp,test:function(t,n){return RegExp(t).test(n)}},s=["view","item","group","xy","x","y"],l={Literal:function(t,n){return n.value},Identifier:function(t,n){var e=n.name;return t.memberDepth>0?e:"datum"===e?t.datum:"event"===e?t.event:"item"===e?t.item:r[e]||t.params["$"+e]},MemberExpression:function(t,n){var e=!n.computed,r=t(n.object);e&&(t.memberDepth+=1);var i=t(n.property);return e&&(t.memberDepth-=1),r[i]},CallExpression:function(t,n){var e=n.arguments,r=n.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?t(e[0])?t(e[1]):t(e[2]):(t.fn[r]||c[r]).apply(t.fn,e.map(t))},ArrayExpression:function(t,n){return n.elements.map(t)},BinaryExpression:function(t,n){return i[n.operator](t(n.left),t(n.right))},UnaryExpression:function(t,n){return a[n.operator](t(n.argument))},ConditionalExpression:function(t,n){return t(n.test)?t(n.consequent):t(n.alternate)},LogicalExpression:function(t,n){return"&&"===n.operator?t(n.left)&&t(n.right):t(n.left)||t(n.right)},ObjectExpression:function(t,n){return n.properties.reduce((function(n,e){t.memberDepth+=1;var r=t(e.key);return t.memberDepth-=1,n[r]=t(e.value),n}),{})}};function f(t,n,e,r,i,a){var o=function t(n){return l[n.type](t,n)};return o.memberDepth=0,o.fn=Object.create(n),o.params=e,o.datum=r,o.event=i,o.item=a,s.forEach((function(t){return o.fn[t]=function(){var n;return(n=i.vega)[t].apply(n,arguments)}})),o(t)}var h={operator:function(t,n){var e=n.ast,r=t.functions;return function(t){return f(e,r,t)}},parameter:function(t,n){var e=n.ast,r=t.functions;return function(t,n){return f(e,r,n,t)}},event:function(t,n){var e=n.ast,r=t.functions;return function(t){return f(e,r,void 0,void 0,t)}},handler:function(t,n){var e=n.ast,r=t.functions;return function(t,n){var i=n.item&&n.item.datum;return f(e,r,t,i,n)}},encode:function(t,n){var e=n.marktype,r=n.channels,i=t.functions,a="group"===e||"image"===e||"rect"===e;return function(t,n){var o,u=t.datum,c=0;for(var s in r)o=f(r[s].ast,i,n,u,void 0,t),t[s]!==o&&(t[s]=o,c=1);return"rule"!==e&&function(t,n,e){var r;n.x2&&(n.x?(e&&t.x>t.x2&&(r=t.x,t.x=t.x2,t.x2=r),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),n.xc&&(t.x=t.xc-(t.width||0)/2),n.y2&&(n.y?(e&&t.y>t.y2&&(r=t.y,t.y=t.y2,t.y2=r),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),n.yc&&(t.y=t.yc-(t.height||0)/2)}(t,r,a),c}}}},16408:function(t,n,e){"use strict";function r(t,n,e){return t.fields=n||[],t.fname=e,t}function i(t){return null==t?null:t.fname}function a(t){return null==t?null:t.fields}function o(t){return 1===t.length?u(t[0]):c(t)}e.d(n,{$G:function(){return Ut},$m:function(){return Et},BB:function(){return Nt},Ds:function(){return ot},Dw:function(){return R},EP:function(){return f},FP:function(){return Pt},HD:function(){return wt},He:function(){return F},Hq:function(){return b},IX:function(){return $},J_:function(){return yt},Jy:function(){return kt},Kj:function(){return _t},Kn:function(){return E},N3:function(){return J},Oj:function(){return a},QA:function(){return I},Rg:function(){return zt},TS:function(){return St},TW:function(){return bt},We:function(){return ct},XW:function(){return vt},Xr:function(){return dt},ZE:function(){return r},ZU:function(){return Zt},Zw:function(){return B},_k:function(){return l},a9:function(){return at},ay:function(){return H},bM:function(){return p},bV:function(){return X},cG:function(){return k},dH:function(){return W},dI:function(){return st},el:function(){return i},fE:function(){return D},fj:function(){return T},hj:function(){return xt},iL:function(){return C},id:function(){return h},j2:function(){return nt},jj:function(){return x},jn:function(){return mt},k:function(){return m},kI:function(){return w},kJ:function(){return O},kX:function(){return v},kg:function(){return M},l$:function(){return V},l7:function(){return ut},m8:function(){return Tt},mJ:function(){return L},mK:function(){return Y},mS:function(){return G},mf:function(){return K},nr:function(){return ft},qu:function(){return tt},rx:function(){return Dt},sw:function(){return Ft},t7:function(){return Mt},u5:function(){return gt},uU:function(){return _},vU:function(){return s},vk:function(){return Ct},yP:function(){return At},yR:function(){return d},yb:function(){return g},yl:function(){return pt}});var u=function(t){return function(n){return n[t]}},c=function(t){var n=t.length;return function(e){for(var r=0;r<n;++r)e=e[t[r]];return e}};function s(t){throw Error(t)}function l(t){var n,e,r,i=[],a=t.length,o=null,u=0,c="";function l(){i.push(c+t.substring(n,e)),c="",n=e+1}for(t+="",n=e=0;e<a;++e)if("\\"===(r=t[e]))c+=t.substring(n,e),c+=t.substring(++e,++e),n=e;else if(r===o)l(),o=null,u=-1;else{if(o)continue;n===u&&'"'===r||n===u&&"'"===r?(n=e+1,o=r):"."!==r||u?"["===r?(e>n&&l(),u=n=e+1):"]"===r&&(u||s("Access path missing open bracket: "+t),u>0&&l(),u=0,n=e+1):e>n?l():n=e+1}return u&&s("Access path missing closing bracket: "+t),o&&s("Access path missing closing quote: "+t),e>n&&(e++,l()),i}function f(t,n,e){var i=l(t);return t=1===i.length?i[0]:t,r((e&&e.get||o)(i),[t],n||t)}var h=f("id"),d=r((function(t){return t}),[],"identity"),p=r((function(){return 0}),[],"zero"),v=r((function(){return 1}),[],"one"),g=r((function(){return!0}),[],"true"),m=r((function(){return!1}),[],"false");function y(t,n,e){var r=[n].concat([].slice.call(e));console[t].apply(console,r)}var b=0,x=1,_=2,w=3,k=4;function M(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=t||b;return{level:function(t){return arguments.length?(r=+t,this):r},error:function(){return r>=x&&e(n||"error","ERROR",arguments),this},warn:function(){return r>=_&&e(n||"warn","WARN",arguments),this},info:function(){return r>=w&&e(n||"log","INFO",arguments),this},debug:function(){return r>=k&&e(n||"log","DEBUG",arguments),this}}}var O=Array.isArray;function E(t){return t===Object(t)}var S=function(t){return"__proto__"!==t};function D(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.reduce((function(t,n){for(var e in n)if("signals"===e)t.signals=A(t.signals,n.signals);else{var r="legend"===e?{layout:1}:"style"===e||null;C(t,e,n[e],r)}return t}),{})}function C(t,n,e,r){var i,a;if(S(n))if(E(e)&&!O(e))for(i in a=E(t[n])?t[n]:t[n]={},e)r&&(!0===r||r[i])?C(a,i,e[i]):S(i)&&(a[i]=e[i]);else t[n]=e}function A(t,n){if(null==t)return n;var e={},r=[];function i(t){e[t.name]||(e[t.name]=1,r.push(t))}return n.forEach(i),t.forEach(i),r}function T(t){return t[t.length-1]}function F(t){return null==t||""===t?null:+t}var j=function(t){return function(n){return t*Math.exp(n)}},Z=function(t){return function(n){return Math.log(t*n)}},N=function(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}},z=function(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}},U=function(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}};function P(t,n,e,r){var i=e(t[0]),a=e(T(t)),o=(a-i)*n;return[r(i-o),r(a-o)]}function R(t,n){return P(t,n,F,d)}function L(t,n){var e=Math.sign(t[0]);return P(t,n,Z(e),j(e))}function I(t,n,e){return P(t,n,U(e),U(1/e))}function B(t,n,e){return P(t,n,N(e),z(e))}function q(t,n,e,r,i){var a=r(t[0]),o=r(T(t)),u=null!=n?r(n):(a+o)/2;return[i(u+(a-u)*e),i(u+(o-u)*e)]}function H(t,n,e){return q(t,n,e,F,d)}function W(t,n,e){var r=Math.sign(t[0]);return q(t,n,e,Z(r),j(r))}function Y(t,n,e,r){return q(t,n,e,U(r),U(1/r))}function X(t,n,e,r){return q(t,n,e,N(r),z(r))}function G(t){return 1+~~(new Date(t).getMonth()/3)}function J(t){return 1+~~(new Date(t).getUTCMonth()/3)}function $(t){return null!=t?O(t)?t:[t]:[]}function V(t,n,e){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=e-n?[n,e]:[i=Math.min(Math.max(i,n),e-r),i+r]}function K(t){return"function"===typeof t}var Q="descending";function tt(t,n,e){e=e||{},n=$(n)||[];var i=[],o=[],u={},c=e.comparator||et;return $(t).forEach((function(t,r){null!=t&&(i.push(n[r]===Q?-1:1),o.push(t=K(t)?t:f(t,null,e)),(a(t)||[]).forEach((function(t){return u[t]=1})))})),0===o.length?null:r(c(o,i),Object.keys(u))}var nt=function(t,n){return(t<n||null==t)&&null!=n?-1:(t>n||null==n)&&null!=t?1:(n=n instanceof Date?+n:n,(t=t instanceof Date?+t:t)!==t&&n===n?-1:n!==n&&t===t?1:0)},et=function(t,n){return 1===t.length?rt(t[0],n[0]):it(t,n,t.length)},rt=function(t,n){return function(e,r){return nt(t(e),t(r))*n}},it=function(t,n,e){return n.push(0),function(r,i){for(var a,o=0,u=-1;0===o&&++u<e;)a=t[u],o=nt(a(r),a(i));return o*n[u]}};function at(t){return K(t)?t:function(){return t}}function ot(t,n){var e;return function(r){e&&clearTimeout(e),e=setTimeout((function(){return n(r),e=null}),t)}}function ut(t){for(var n,e,r=1,i=arguments.length;r<i;++r)for(e in n=arguments[r])t[e]=n[e];return t}function ct(t,n){var e,r,i,a,o=0;if(t&&(e=t.length))if(null==n){for(r=t[o];o<e&&(null==r||r!==r);r=t[++o]);for(i=a=r;o<e;++o)null!=(r=t[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=n(t[o]);o<e&&(null==r||r!==r);r=n(t[++o]));for(i=a=r;o<e;++o)null!=(r=n(t[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]}function st(t,n){var e,r,i,a,o,u=t.length,c=-1;if(null==n){for(;++c<u;)if(null!=(r=t[c])&&r>=r){e=i=r;break}if(c===u)return[-1,-1];for(a=o=c;++c<u;)null!=(r=t[c])&&(e>r&&(e=r,a=c),i<r&&(i=r,o=c))}else{for(;++c<u;)if(null!=(r=n(t[c],c,t))&&r>=r){e=i=r;break}if(c===u)return[-1,-1];for(a=o=c;++c<u;)null!=(r=n(t[c],c,t))&&(e>r&&(e=r,a=c),i<r&&(i=r,o=c))}return[a,o]}var lt=Object.prototype.hasOwnProperty;function ft(t,n){return lt.call(t,n)}var ht={};function dt(t){var n,e={};function r(t){return ft(e,t)&&e[t]!==ht}var i={size:0,empty:0,object:e,has:r,get:function(t){return r(t)?e[t]:void 0},set:function(t,n){return r(t)||(++i.size,e[t]===ht&&--i.empty),e[t]=n,this},delete:function(t){return r(t)&&(--i.size,++i.empty,e[t]=ht),this},clear:function(){i.size=i.empty=0,i.object=e={}},test:function(t){return arguments.length?(n=t,i):n},clean:function(){var t={},r=0;for(var a in e){var o=e[a];o===ht||n&&n(o)||(t[a]=o,++r)}i.size=r,i.empty=0,i.object=e=t}};return t&&Object.keys(t).forEach((function(n){i.set(n,t[n])})),i}function pt(t,n,e,r,i,a){if(!e&&0!==e)return a;var o,u=+e,c=t[0],s=T(t);s<c&&(o=c,c=s,s=o),o=Math.abs(n-c);var l=Math.abs(s-n);return o<l&&o<=u?r:l<=u?i:a}function vt(t,n,e){var r=t.prototype=Object.create(n.prototype);return Object.defineProperty(r,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),ut(r,e)}function gt(t,n,e,r){var i,a=n[0],o=n[n.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((e=void 0===e||e)?a<=t:a<t)&&(r?t<=o:t<o)}function mt(t){return"boolean"===typeof t}function yt(t){return"[object Date]"===Object.prototype.toString.call(t)}function bt(t){return t&&K(t[Symbol.iterator])}function xt(t){return"number"===typeof t}function _t(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function wt(t){return"string"===typeof t}function kt(t,n,e){t&&(t=n?$(t).map((function(t){return t.replace(/\\(.)/g,"$1")})):$(t));var i,a=t&&t.length,u=e&&e.get||o,c=function(t){return u(n?[t]:l(t))};if(a)if(1===a){var s=c(t[0]);i=function(t){return""+s(t)}}else{var f=t.map(c);i=function(t){for(var n=""+f[0](t),e=0;++e<a;)n+="|"+f[e](t);return n}}else i=function(){return""};return r(i,t,"key")}function Mt(t,n){var e=t[0],r=T(t),i=+n;return i?1===i?r:e+i*(r-e):e}var Ot=1e4;function Et(t){var n,e,r;t=+t||Ot;var i=function(){n={},e={},r=0},a=function(i,a){return++r>t&&(e=n,n={},r=1),n[i]=a};return i(),{clear:i,has:function(t){return ft(n,t)||ft(e,t)},get:function(t){return ft(n,t)?n[t]:ft(e,t)?a(t,e[t]):void 0},set:function(t,e){return ft(n,t)?n[t]=e:a(t,e)}}}function St(t,n,e,r){var i=n.length,a=e.length;if(!a)return n;if(!i)return e;for(var o=r||new n.constructor(i+a),u=0,c=0,s=0;u<i&&c<a;++s)o[s]=t(n[u],e[c])>0?e[c++]:n[u++];for(;u<i;++u,++s)o[s]=n[u];for(;c<a;++c,++s)o[s]=e[c];return o}function Dt(t,n){for(var e="";--n>=0;)e+=t;return e}function Ct(t,n,e,r){var i=e||" ",a=t+"",o=n-a.length;return o<=0?a:"left"===r?Dt(i,o)+a:"center"===r?Dt(i,~~(o/2))+a+Dt(i,Math.ceil(o/2)):a+Dt(i,o)}function At(t){return t&&T(t)-t[0]||0}function Tt(t){return O(t)?"["+t.map(Tt)+"]":E(t)||wt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Ft(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}var jt=function(t){return xt(t)||yt(t)?t:Date.parse(t)};function Zt(t,n){return n=n||jt,null==t||""===t?null:n(t)}function Nt(t){return null==t||""===t?null:t+""}function zt(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return n}function Ut(t,n,e,r){var i=null!=r?r:"\u2026",a=t+"",o=a.length,u=Math.max(0,n-i.length);return o<=n?a:"left"===e?i+a.slice(o-u):"center"===e?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function Pt(t,n,e){if(t)if(n)for(var r=t.length,i=0;i<r;++i){var a=n(t[i]);a&&e(a,i,t)}else t.forEach(e)}},14409:function(t,n,e){"use strict";e.r(n),e.d(n,{Bounds:function(){return IY},CanvasHandler:function(){return bJ},CanvasRenderer:function(){return OJ},DATE:function(){return sZ},DAY:function(){return lZ},DAYOFYEAR:function(){return fZ},Dataflow:function(){return va},Debug:function(){return g.cG},Error:function(){return g.jj},EventStream:function(){return Ji},Gradient:function(){return HW},GroupItem:function(){return qY},HOURS:function(){return hZ},Handler:function(){return tJ},Info:function(){return g.kI},Item:function(){return BY},MILLISECONDS:function(){return vZ},MINUTES:function(){return dZ},MONTH:function(){return uZ},Marks:function(){return PG},MultiPulse:function(){return ca},None:function(){return g.Hq},Operator:function(){return Yi},Parameters:function(){return qi},Pulse:function(){return ia},QUARTER:function(){return oZ},RenderType:function(){return g$},Renderer:function(){return eJ},ResourceLoader:function(){return HY},SECONDS:function(){return pZ},SVGHandler:function(){return SJ},SVGRenderer:function(){return QJ},SVGStringRenderer:function(){return d$},Scenegraph:function(){return YG},TIME_UNITS:function(){return gZ},Transform:function(){return ma},View:function(){return Grt},WEEK:function(){return cZ},Warn:function(){return g.uU},YEAR:function(){return aZ},accessor:function(){return g.ZE},accessorFields:function(){return g.Oj},accessorName:function(){return g.el},array:function(){return g.IX},ascending:function(){return g.j2},bandwidthNRD:function(){return wF},bin:function(){return kF},bootstrapCI:function(){return EF},boundClip:function(){return M$},boundContext:function(){return fX},boundItem:function(){return RG},boundMark:function(){return IG},boundStroke:function(){return XY},changeset:function(){return Ii},clampRange:function(){return g.l$},codegenExpression:function(){return C8.YP},compare:function(){return g.qu},constant:function(){return g.a9},cumulativeLogNormal:function(){return IF},cumulativeNormal:function(){return NF},cumulativeUniform:function(){return XF},dayofyear:function(){return kZ},debounce:function(){return g.Ds},defaultLocale:function(){return nP},definition:function(){return ba},densityLogNormal:function(){return LF},densityNormal:function(){return ZF},densityUniform:function(){return YF},domChild:function(){return $G},domClear:function(){return VG},domCreate:function(){return GG},domFind:function(){return JG},dotbin:function(){return SF},error:function(){return g.vU},expressionFunction:function(){return zet},extend:function(){return g.l7},extent:function(){return g.We},extentIndex:function(){return g.dI},falsy:function(){return g.k},fastmap:function(){return g.Xr},field:function(){return g.EP},flush:function(){return g.yl},font:function(){return AG},fontFamily:function(){return CG},fontSize:function(){return MG},format:function(){return CP},formatLocale:function(){return XU},formats:function(){return AP},hasOwnProperty:function(){return g.nr},id:function(){return g.id},identity:function(){return g.yR},inferType:function(){return wP},inferTypes:function(){return kP},ingest:function(){return Ni},inherits:function(){return g.XW},inrange:function(){return g.u5},interpolate:function(){return pW},interpolateColors:function(){return hW},interpolateRange:function(){return fW},intersect:function(){return b$},intersectBoxLine:function(){return wX},intersectPath:function(){return yX},intersectPoint:function(){return bX},intersectRule:function(){return _X},isArray:function(){return g.kJ},isBoolean:function(){return g.jn},isDate:function(){return g.J_},isFunction:function(){return g.mf},isIterable:function(){return g.TW},isNumber:function(){return g.hj},isObject:function(){return g.Kn},isRegExp:function(){return g.Kj},isString:function(){return g.HD},isTuple:function(){return Fi},key:function(){return g.Jy},lerp:function(){return g.t7},lineHeight:function(){return OG},loader:function(){return jP},locale:function(){return tP},logger:function(){return g.kg},lruCache:function(){return g.$m},markup:function(){return WJ},merge:function(){return g.TS},mergeConfig:function(){return g.fE},multiLineOffset:function(){return SG},one:function(){return g.kX},pad:function(){return g.vk},panLinear:function(){return g.Dw},panLog:function(){return g.mJ},panPow:function(){return g.QA},panSymlog:function(){return g.Zw},parse:function(){return Zft},parseExpression:function(){return C8.BJ},parseSelector:function(){return mut.r},path:function(){return GR},pathCurves:function(){return YW},pathEqual:function(){return S$},pathParse:function(){return KW},pathRectangle:function(){return kY},pathRender:function(){return lY},pathSymbols:function(){return pY},pathTrail:function(){return MY},peek:function(){return g.fj},point:function(){return QG},projection:function(){return wQ},quantileLogNormal:function(){return BF},quantileNormal:function(){return zF},quantileUniform:function(){return GF},quantiles:function(){return xF},quantizeInterpolator:function(){return dW},quarter:function(){return g.mS},quartiles:function(){return _F},random:function(){return MF},randomInteger:function(){return CF},randomKDE:function(){return PF},randomLCG:function(){return DF},randomLogNormal:function(){return qF},randomMixture:function(){return HF},randomNormal:function(){return UF},randomUniform:function(){return JF},read:function(){return FP},regressionExp:function(){return ej},regressionLinear:function(){return tj},regressionLoess:function(){return sj},regressionLog:function(){return nj},regressionPoly:function(){return aj},regressionPow:function(){return rj},regressionQuad:function(){return ij},renderModule:function(){return y$},repeat:function(){return g.rx},resetDefaultLocale:function(){return eP},resetSVGClipId:function(){return RY},resetSVGDefIds:function(){return D$},responseType:function(){return TP},runtimeContext:function(){return Wet},sampleCurve:function(){return dj},sampleLogNormal:function(){return RF},sampleNormal:function(){return jF},sampleUniform:function(){return WF},scale:function(){return cW},sceneEqual:function(){return E$},sceneFromJSON:function(){return HG},scenePickVisit:function(){return jX},sceneToJSON:function(){return qG},sceneVisit:function(){return FX},sceneZOrder:function(){return TX},scheme:function(){return yW},serializeXML:function(){return YJ},setRandom:function(){return OF},span:function(){return g.yP},splitAccessPath:function(){return g._k},stringValue:function(){return g.m8},textMetrics:function(){return yG},timeBin:function(){return dN},timeFloor:function(){return RZ},timeFormatLocale:function(){return KU},timeInterval:function(){return WZ},timeOffset:function(){return GZ},timeSequence:function(){return VZ},timeUnitSpecifier:function(){return xZ},timeUnits:function(){return yZ},toBoolean:function(){return g.sw},toDate:function(){return g.ZU},toNumber:function(){return g.He},toSet:function(){return g.Rg},toString:function(){return g.BB},transform:function(){return xa},transforms:function(){return ya},truncate:function(){return g.$G},truthy:function(){return g.yb},tupleid:function(){return ji},typeParsers:function(){return bP},utcFloor:function(){return BZ},utcInterval:function(){return YZ},utcOffset:function(){return JZ},utcSequence:function(){return KZ},utcdayofyear:function(){return CZ},utcquarter:function(){return g.N3},utcweek:function(){return AZ},version:function(){return Nft},visitArray:function(){return g.FP},week:function(){return MZ},writeConfig:function(){return g.iL},zero:function(){return g.bM},zoomLinear:function(){return g.ay},zoomLog:function(){return g.dH},zoomPow:function(){return g.mK},zoomSymlog:function(){return g.bV}});var r={};e.r(r),e.d(r,{aggregate:function(){return dc},bin:function(){return pc},collect:function(){return gc},compare:function(){return mc},countpattern:function(){return bc},cross:function(){return xc},density:function(){return Ec},dotbin:function(){return Tc},expression:function(){return Fc},extent:function(){return Zc},facet:function(){return zc},field:function(){return Uc},filter:function(){return Rc},flatten:function(){return Lc},fold:function(){return Ic},formula:function(){return Bc},generate:function(){return qc},impute:function(){return Yc},joinaggregate:function(){return Xc},kde:function(){return Gc},key:function(){return Jc},load:function(){return Vc},lookup:function(){return Qc},multiextent:function(){return ts},multivalues:function(){return es},params:function(){return is},pivot:function(){return as},prefacet:function(){return os},project:function(){return us},proxy:function(){return cs},quantile:function(){return ss},relay:function(){return ls},sample:function(){return fs},sequence:function(){return hs},sieve:function(){return ds},subflow:function(){return Nc},timeunit:function(){return ps},tupleindex:function(){return gs},values:function(){return ms},window:function(){return ws}});var i={};e.r(i),e.d(i,{interpolate:function(){return bh},interpolateArray:function(){return fh},interpolateBasis:function(){return Kf},interpolateBasisClosed:function(){return Qf},interpolateCubehelix:function(){return gp},interpolateCubehelixLong:function(){return mp},interpolateDate:function(){return dh},interpolateDiscrete:function(){return yd},interpolateHcl:function(){return np},interpolateHclLong:function(){return ep},interpolateHsl:function(){return Td},interpolateHslLong:function(){return Fd},interpolateHue:function(){return bd},interpolateLab:function(){return Qd},interpolateNumber:function(){return ph},interpolateNumberArray:function(){return sh},interpolateObject:function(){return vh},interpolateRgb:function(){return ah},interpolateRgbBasis:function(){return uh},interpolateRgbBasisClosed:function(){return ch},interpolateRound:function(){return xh},interpolateString:function(){return yh},interpolateTransformCss:function(){return Od},interpolateTransformSvg:function(){return Ed},interpolateZoom:function(){return Cd},piecewise:function(){return pd},quantize:function(){return yp}});var a={};e.r(a),e.d(a,{bound:function(){return Zx},identifier:function(){return Ux},mark:function(){return Px},overlap:function(){return Rx},render:function(){return Yx},viewlayout:function(){return p_}});var o={};e.r(o),e.d(o,{axisticks:function(){return C_},datajoin:function(){return A_},encode:function(){return F_},legendentries:function(){return j_},linkpath:function(){return P_},pie:function(){return q_},scale:function(){return X_},sortitems:function(){return V_},stack:function(){return ew}});var u={};e.r(u),e.d(u,{contour:function(){return vD},geojson:function(){return yD},geopath:function(){return bD},geopoint:function(){return xD},geoshape:function(){return _D},graticule:function(){return wD},heatmap:function(){return kD},isocontour:function(){return aD},kde2d:function(){return hD},projection:function(){return OD}});var c={};e.r(c),e.d(c,{force:function(){return uC}});var s={};e.r(s),e.d(s,{nest:function(){return gA},pack:function(){return wA},partition:function(){return MA},stratify:function(){return OA},tree:function(){return DA},treelinks:function(){return CA},treemap:function(){return FA}});var l={};e.r(l),e.d(l,{label:function(){return rT}});var f={};e.r(f),e.d(f,{loess:function(){return aT},regression:function(){return uT}});var h={};e.r(h),e.d(h,{voronoi:function(){return qT}});var d={};e.r(d),e.d(d,{wordcloud:function(){return aF}});var p={};e.r(p),e.d(p,{crossfilter:function(){return gF},resolvefilter:function(){return mF}});var v={};e.r(v),e.d(v,{interpolate:function(){return D_},interpolateArray:function(){return __},interpolateBasis:function(){return Iq.Z},interpolateBasisClosed:function(){return Bq.Z},interpolateCubehelix:function(){return UH},interpolateCubehelixLong:function(){return PH},interpolateDate:function(){return k_},interpolateDiscrete:function(){return qq},interpolateHcl:function(){return wH},interpolateHclLong:function(){return kH},interpolateHsl:function(){return Vq},interpolateHslLong:function(){return Kq},interpolateHue:function(){return Wq},interpolateLab:function(){return xH},interpolateNumber:function(){return M_.Z},interpolateNumberArray:function(){return b_},interpolateObject:function(){return O_},interpolateRgb:function(){return y_.ZP},interpolateRgbBasis:function(){return y_.hD},interpolateRgbBasisClosed:function(){return y_.YD},interpolateRound:function(){return g_},interpolateString:function(){return E_.Z},interpolateTransformCss:function(){return Yq.Y},interpolateTransformSvg:function(){return Yq.w},interpolateZoom:function(){return Jq},piecewise:function(){return yq},quantize:function(){return RH}});var g=e(16408),m=e(82333),y=e(85358),b=e(59019),x={},_={},w=34,k=10,M=13;function O(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function E(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function S(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function D(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+S(-t,6):t>9999?"+"+S(t,6):S(t,4)}(t.getUTCFullYear())+"-"+S(t.getUTCMonth()+1,2)+"-"+S(t.getUTCDate(),2)+(i?"T"+S(n,2)+":"+S(e,2)+":"+S(r,2)+"."+S(i,3)+"Z":r?"T"+S(n,2)+":"+S(e,2)+":"+S(r,2)+"Z":e||n?"T"+S(n,2)+":"+S(e,2)+"Z":"")}function C(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],a=t.length,o=0,u=0,c=a<=0,s=!1;function l(){if(c)return _;if(s)return s=!1,x;var n,r,i=o;if(t.charCodeAt(i)===w){for(;o++<a&&t.charCodeAt(o)!==w||t.charCodeAt(++o)===w;);return(n=o)>=a?c=!0:(r=t.charCodeAt(o++))===k?s=!0:r===M&&(s=!0,t.charCodeAt(o)===k&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(n=o++))===k)s=!0;else if(r===M)s=!0,t.charCodeAt(o)===k&&++o;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===k&&--a,t.charCodeAt(a-1)===M&&--a;(r=l())!==_;){for(var f=[];r!==x&&r!==_;)f.push(r),r=l();n&&null==(f=n(f,u++))||i.push(f)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return o(n[t])})).join(t)}))}function a(n){return n.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?D(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,a=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=O(t);return function(r,i){return n(e(r),i,t)}}(t,n):O(t)}));return a.columns=i||[],a},parseRows:r,format:function(n,e){return null==e&&(e=E(n)),[e.map(o).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=E(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}function A(t){return t}function T(t,n){return"string"===typeof n&&(n=t.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map((function(n){return F(t,n)}))}:F(t,n)}function F(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,a=j(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:e,properties:i,geometry:a}:{type:"Feature",id:e,bbox:r,properties:i,geometry:a}}function j(t,n){var e=function(t){if(null==t)return A;var n,e,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,u){u||(n=e=0);var c=2,s=t.length,l=new Array(s);for(l[0]=(n+=t[0])*r+a,l[1]=(e+=t[1])*i+o;c<s;)l[c]=t[c],++c;return l}}(t.transform),r=t.arcs;function i(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)n.push(e(i[a],a));t<0&&function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}(n,o)}function a(t){return e(t)}function o(t){for(var n=[],e=0,r=t.length;e<r;++e)i(t[e],n);return n.length<2&&n.push(n[0]),n}function u(t){for(var n=o(t);n.length<4;)n.push(n[0]);return n}function c(t){return t.map(u)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=a(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(a);break;case"LineString":e=o(n.arcs);break;case"MultiLineString":e=n.arcs.map(o);break;case"Polygon":e=c(n.arcs);break;case"MultiPolygon":e=n.arcs.map(c);break;default:return null}return{type:r,coordinates:e}}(n)}function Z(t,n){var e={},r={},i={},a=[],o=-1;function u(t,n){for(var r in t){var i=t[r];delete n[i.start],delete i.start,delete i.end,i.forEach((function(t){e[t<0?~t:t]=1})),a.push(i)}}return n.forEach((function(e,r){var i,a=t.arcs[e<0?~e:e];a.length<3&&!a[1][0]&&!a[1][1]&&(i=n[++o],n[o]=e,n[r]=i)})),n.forEach((function(n){var e,a,o=function(n){var e,r=t.arcs[n<0?~n:n],i=r[0];t.transform?(e=[0,0],r.forEach((function(t){e[0]+=t[0],e[1]+=t[1]}))):e=r[r.length-1];return n<0?[e,i]:[i,e]}(n),u=o[0],c=o[1];if(e=i[u])if(delete i[e.end],e.push(n),e.end=c,a=r[c]){delete r[a.start];var s=a===e?e:e.concat(a);r[s.start=e.start]=i[s.end=a.end]=s}else r[e.start]=i[e.end]=e;else if(e=r[c])if(delete r[e.start],e.unshift(n),e.start=u,a=i[u]){delete i[a.end];var l=a===e?e:a.concat(e);r[l.start=a.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else r[(e=[n]).start=u]=i[e.end=c]=e})),u(i,r),u(r,i),n.forEach((function(t){e[t<0?~t:t]||a.push([t])})),a}function N(t){return j(t,z.apply(this,arguments))}function z(t,n,e){var r,i,a;if(arguments.length>1)r=function(t,n,e){var r,i=[],a=[];function o(t){var n=t<0?~t:t;(a[n]||(a[n]=[])).push({i:t,g:r})}function u(t){t.forEach(o)}function c(t){t.forEach(u)}function s(t){t.forEach(c)}function l(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":u(t.arcs);break;case"MultiLineString":case"Polygon":c(t.arcs);break;case"MultiPolygon":s(t.arcs)}}return l(n),a.forEach(null==e?function(t){i.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,n,e);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Z(t,r)}}var U=Math.sqrt(50),P=Math.sqrt(10),R=Math.sqrt(2);var L,I=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function B(t){if(!(n=I.exec(t)))throw new Error("invalid format: "+t);var n;return new q({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function q(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function H(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function W(t){return(t=H(Math.abs(t)))?t[1]:NaN}function Y(t,n){var e=H(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}B.prototype=q.prototype,q.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var X={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Y(100*t,n)},r:Y,s:function(t,n){var e=H(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(L=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+H(t,Math.max(0,n+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function G(t){return t}var J,$,V,K=Array.prototype.map,Q=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function tt(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?G:(n=K.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[o=(o+1)%n.length];return a.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?G:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(K.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=B(t)).fill,e=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):X[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?c:"",_=X[y],w=/[defgprs%]/.test(y);function k(t){var i,a,c,h=b,k=x;if("c"===y)k=_(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),m&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0===+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===y?Q[8+L/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(c=t.charCodeAt(i))||c>57){k=(46===c?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var O=h.length+t.length+k.length,E=O<p?new Array(p-O+1).join(n):"";switch(v&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),e){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,O=E.length>>1)+h+t+k+E.slice(O);break;default:t=E+h+t+k}return u(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,n){var e=f(((t=B(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(W(n)/3))),i=Math.pow(10,-r),a=Q[8+r/3];return function(t){return e(i*t)+a}}}}!function(t){J=tt(t),$=J.format,V=J.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var nt=e(16798),et=new Date,rt=new Date;function it(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return it((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return et.setTime(+n),rt.setTime(+r),t(et),t(rt),Math.floor(e(et,rt))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var at=1e3,ot=60*at,ut=60*ot,ct=24*ut,st=7*ct,lt=30*ct,ft=365*ct,ht=it((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ot)/ct}),(function(t){return t.getDate()-1})),dt=ht;ht.range;function pt(t){return it((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ot)/st}))}var vt=pt(0),gt=pt(1),mt=pt(2),yt=pt(3),bt=pt(4),xt=pt(5),_t=pt(6),wt=(vt.range,gt.range,mt.range,yt.range,bt.range,xt.range,_t.range,it((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/ct}),(function(t){return t.getUTCDate()-1}))),kt=wt;wt.range;function Mt(t){return it((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/st}))}var Ot=Mt(0),Et=Mt(1),St=Mt(2),Dt=Mt(3),Ct=Mt(4),At=Mt(5),Tt=Mt(6),Ft=(Ot.range,Et.range,St.range,Dt.range,Ct.range,At.range,Tt.range,it((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));Ft.every=function(t){return isFinite(t=Math.floor(t))&&t>0?it((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var jt=Ft,Zt=(Ft.range,it((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Nt=Zt,zt=(Zt.range,it((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*at-t.getMinutes()*ot)}),(function(t,n){t.setTime(+t+n*ut)}),(function(t,n){return(n-t)/ut}),(function(t){return t.getHours()}))),Ut=zt,Pt=(zt.range,it((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*at)}),(function(t,n){t.setTime(+t+n*ot)}),(function(t,n){return(n-t)/ot}),(function(t){return t.getMinutes()}))),Rt=Pt,Lt=(Pt.range,it((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*at)}),(function(t,n){return(n-t)/at}),(function(t){return t.getUTCSeconds()}))),It=Lt,Bt=(Lt.range,it((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t})));Bt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?it((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Bt:null};var qt=Bt,Ht=(Bt.range,it((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ht.every=function(t){return isFinite(t=Math.floor(t))&&t>0?it((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var Wt,Yt,Xt,Gt,Jt,$t,Vt,Kt=Ht,Qt=(Ht.range,it((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),tn=Qt,nn=(Qt.range,it((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*ut)}),(function(t,n){return(n-t)/ut}),(function(t){return t.getUTCHours()}))),en=nn,rn=(nn.range,it((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*ot)}),(function(t,n){return(n-t)/ot}),(function(t){return t.getUTCMinutes()}))),an=rn,on=(rn.range,"year"),un="quarter",cn="month",sn="week",ln="date",fn="day",hn="dayofyear",dn="hours",pn="minutes",vn="seconds",gn="milliseconds",mn=[on,un,cn,sn,ln,fn,hn,dn,pn,vn,gn].reduce((function(t,n,e){return t[n]=1+e,t}),{});var yn=(Wt={},(0,nt.Z)(Wt,on,"%Y "),(0,nt.Z)(Wt,un,"Q%q "),(0,nt.Z)(Wt,cn,"%b "),(0,nt.Z)(Wt,ln,"%d "),(0,nt.Z)(Wt,sn,"W%U "),(0,nt.Z)(Wt,fn,"%a "),(0,nt.Z)(Wt,hn,"%j "),(0,nt.Z)(Wt,dn,"%H:00"),(0,nt.Z)(Wt,pn,"00:%M"),(0,nt.Z)(Wt,vn,":%S"),(0,nt.Z)(Wt,gn,".%L"),(0,nt.Z)(Wt,"".concat(on,"-").concat(cn),"%Y-%m "),(0,nt.Z)(Wt,"".concat(on,"-").concat(cn,"-").concat(ln),"%Y-%m-%d "),(0,nt.Z)(Wt,"".concat(dn,"-").concat(pn),"%H:%M"),Wt);var bn=new Date;function xn(t){return bn.setFullYear(t),bn.setMonth(0),bn.setDate(1),bn.setHours(0,0,0,0),bn}function _n(t){return dt.count(xn(t.getFullYear())-1,t)}function wn(t){return vt.count(xn(t.getFullYear())-1,t)}function kn(t){return xn(t).getDay()}function Mn(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return kt.count(n-1,t)}function On(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return Ot.count(n-1,t)}function En(t){return bn.setTime(Date.UTC(t,0,1)),bn.getUTCDay()}function Sn(t,n,e){return n+7*t-(e+6)%7}Yt={},(0,nt.Z)(Yt,on,(function(t){return t.getFullYear()})),(0,nt.Z)(Yt,un,(function(t){return Math.floor(t.getMonth()/3)})),(0,nt.Z)(Yt,cn,(function(t){return t.getMonth()})),(0,nt.Z)(Yt,ln,(function(t){return t.getDate()})),(0,nt.Z)(Yt,dn,(function(t){return t.getHours()})),(0,nt.Z)(Yt,pn,(function(t){return t.getMinutes()})),(0,nt.Z)(Yt,vn,(function(t){return t.getSeconds()})),(0,nt.Z)(Yt,gn,(function(t){return t.getMilliseconds()})),(0,nt.Z)(Yt,hn,(function(t){return _n(t)})),(0,nt.Z)(Yt,sn,(function(t){return wn(t)})),(0,nt.Z)(Yt,sn+fn,(function(t,n){return Sn(wn(t),t.getDay(),kn(n))})),(0,nt.Z)(Yt,fn,(function(t,n){return Sn(1,t.getDay(),kn(n))})),Xt={},(0,nt.Z)(Xt,un,(function(t){return 3*t})),(0,nt.Z)(Xt,sn,(function(t,n){return Sn(t,0,kn(n))}));Gt={},(0,nt.Z)(Gt,on,(function(t){return t.getUTCFullYear()})),(0,nt.Z)(Gt,un,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,nt.Z)(Gt,cn,(function(t){return t.getUTCMonth()})),(0,nt.Z)(Gt,ln,(function(t){return t.getUTCDate()})),(0,nt.Z)(Gt,dn,(function(t){return t.getUTCHours()})),(0,nt.Z)(Gt,pn,(function(t){return t.getUTCMinutes()})),(0,nt.Z)(Gt,vn,(function(t){return t.getUTCSeconds()})),(0,nt.Z)(Gt,gn,(function(t){return t.getUTCMilliseconds()})),(0,nt.Z)(Gt,hn,(function(t){return Mn(t)})),(0,nt.Z)(Gt,sn,(function(t){return On(t)})),(0,nt.Z)(Gt,fn,(function(t,n){return Sn(1,t.getUTCDay(),En(n))})),(0,nt.Z)(Gt,sn+fn,(function(t,n){return Sn(On(t),t.getUTCDay(),En(n))})),Jt={},(0,nt.Z)(Jt,un,(function(t){return 3*t})),(0,nt.Z)(Jt,sn,(function(t,n){return Sn(t,0,En(n))}));var Dn=($t={},(0,nt.Z)($t,on,jt),(0,nt.Z)($t,un,Nt.every(3)),(0,nt.Z)($t,cn,Nt),(0,nt.Z)($t,sn,vt),(0,nt.Z)($t,ln,dt),(0,nt.Z)($t,fn,dt),(0,nt.Z)($t,hn,dt),(0,nt.Z)($t,dn,Ut),(0,nt.Z)($t,pn,Rt),(0,nt.Z)($t,vn,It),(0,nt.Z)($t,gn,qt),$t),Cn=(Vt={},(0,nt.Z)(Vt,on,Kt),(0,nt.Z)(Vt,un,tn.every(3)),(0,nt.Z)(Vt,cn,tn),(0,nt.Z)(Vt,sn,Ot),(0,nt.Z)(Vt,ln,kt),(0,nt.Z)(Vt,fn,kt),(0,nt.Z)(Vt,hn,kt),(0,nt.Z)(Vt,dn,en),(0,nt.Z)(Vt,pn,an),(0,nt.Z)(Vt,vn,It),(0,nt.Z)(Vt,gn,qt),Vt);function An(t){return Dn[t]}function Tn(t){return Cn[t]}function Fn(t,n,e){return t?t.offset(n,e):void 0}function jn(t,n,e,r){return t?t.range(n,e,r):void 0}var Zn=[on,cn,ln,dn,pn,vn,gn],Nn=Zn.slice(0,-1),zn=Nn.slice(0,-1),Un=zn.slice(0,-1);Un.slice(0,-1);function Pn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ln(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function In(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,c=t.shortMonths,s=te(i),l=ne(i),f=te(a),h=ne(a),d=te(o),p=ne(o),v=te(u),g=ne(u),m=te(c),y=ne(c),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:we,e:we,f:Se,g:Pe,G:Le,H:ke,I:Me,j:Oe,L:Ee,m:De,M:Ce,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:sr,s:lr,S:Ae,u:Te,U:Fe,V:Ze,w:Ne,W:ze,x:null,X:null,y:Ue,Y:Re,Z:Ie,"%":cr},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Be,e:Be,f:Xe,g:ir,G:or,H:qe,I:He,j:We,L:Ye,m:Ge,M:Je,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:sr,s:lr,S:$e,u:Ve,U:Ke,V:tr,w:nr,W:er,x:null,X:null,y:rr,Y:ar,Z:ur,"%":cr},_={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=m.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:he,e:he,f:ye,g:ce,G:ue,H:pe,I:pe,j:de,L:me,m:fe,M:ve,p:function(t,n,e){var r=s.exec(n.slice(e));return r?(t.p=l.get(r[0].toLowerCase()),e+r[0].length):-1},q:le,Q:xe,s:_e,S:ge,u:re,U:ie,V:ae,w:ee,W:oe,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:ce,Y:ue,Z:se,"%":be};function w(t,n){return function(e){var r,i,a,o=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(o.push(t.slice(c,u)),null!=(i=Gn[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=n[r])&&(r=a(e,i)),o.push(r),c=u+1);return o.push(t.slice(c,u)),o.join("")}}function k(t,n){return function(e){var r,i,a=Ln(1900,void 0,1);if(M(a,t,e+="",0)!=e.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(n&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Rn(Ln(a.y,0,1))).getUTCDay(),r=i>4||0===i?Et.ceil(r):Et(r),r=kt.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Pn(Ln(a.y,0,1))).getDay(),r=i>4||0===i?gt.ceil(r):gt(r),r=dt.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Rn(Ln(a.y,0,1)).getUTCDay():Pn(Ln(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Rn(a)):Pn(a)}}function M(t,n,e,r){for(var i,a,o=0,u=n.length,c=e.length;o<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(o++))){if(i=n.charAt(o++),!(a=_[i in Gn?n.charAt(o++):i])||(r=a(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),x.x=w(e,x),x.X=w(r,x),x.c=w(n,x),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=k(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var n=k(t+="",!0);return n.toString=function(){return t},n}}}var Bn,qn,Hn,Wn,Yn,Xn,Gn={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,$n=/^%/,Vn=/[\\^$*+?|[\]().{}]/g;function Kn(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function Qn(t){return t.replace(Vn,"\\$&")}function te(t){return new RegExp("^(?:"+t.map(Qn).join("|")+")","i")}function ne(t){return new Map(t.map((function(t,n){return[t.toLowerCase(),n]})))}function ee(t,n,e){var r=Jn.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function re(t,n,e){var r=Jn.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function ie(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function ae(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function oe(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function ue(t,n,e){var r=Jn.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function ce(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function se(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function le(t,n,e){var r=Jn.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function fe(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function he(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function de(t,n,e){var r=Jn.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function pe(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ve(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ge(t,n,e){var r=Jn.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function me(t,n,e){var r=Jn.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ye(t,n,e){var r=Jn.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function be(t,n,e){var r=$n.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function xe(t,n,e){var r=Jn.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function _e(t,n,e){var r=Jn.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function we(t,n){return Kn(t.getDate(),n,2)}function ke(t,n){return Kn(t.getHours(),n,2)}function Me(t,n){return Kn(t.getHours()%12||12,n,2)}function Oe(t,n){return Kn(1+dt.count(jt(t),t),n,3)}function Ee(t,n){return Kn(t.getMilliseconds(),n,3)}function Se(t,n){return Ee(t,n)+"000"}function De(t,n){return Kn(t.getMonth()+1,n,2)}function Ce(t,n){return Kn(t.getMinutes(),n,2)}function Ae(t,n){return Kn(t.getSeconds(),n,2)}function Te(t){var n=t.getDay();return 0===n?7:n}function Fe(t,n){return Kn(vt.count(jt(t)-1,t),n,2)}function je(t){var n=t.getDay();return n>=4||0===n?bt(t):bt.ceil(t)}function Ze(t,n){return t=je(t),Kn(bt.count(jt(t),t)+(4===jt(t).getDay()),n,2)}function Ne(t){return t.getDay()}function ze(t,n){return Kn(gt.count(jt(t)-1,t),n,2)}function Ue(t,n){return Kn(t.getFullYear()%100,n,2)}function Pe(t,n){return Kn((t=je(t)).getFullYear()%100,n,2)}function Re(t,n){return Kn(t.getFullYear()%1e4,n,4)}function Le(t,n){var e=t.getDay();return Kn((t=e>=4||0===e?bt(t):bt.ceil(t)).getFullYear()%1e4,n,4)}function Ie(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Kn(n/60|0,"0",2)+Kn(n%60,"0",2)}function Be(t,n){return Kn(t.getUTCDate(),n,2)}function qe(t,n){return Kn(t.getUTCHours(),n,2)}function He(t,n){return Kn(t.getUTCHours()%12||12,n,2)}function We(t,n){return Kn(1+kt.count(Kt(t),t),n,3)}function Ye(t,n){return Kn(t.getUTCMilliseconds(),n,3)}function Xe(t,n){return Ye(t,n)+"000"}function Ge(t,n){return Kn(t.getUTCMonth()+1,n,2)}function Je(t,n){return Kn(t.getUTCMinutes(),n,2)}function $e(t,n){return Kn(t.getUTCSeconds(),n,2)}function Ve(t){var n=t.getUTCDay();return 0===n?7:n}function Ke(t,n){return Kn(Ot.count(Kt(t)-1,t),n,2)}function Qe(t){var n=t.getUTCDay();return n>=4||0===n?Ct(t):Ct.ceil(t)}function tr(t,n){return t=Qe(t),Kn(Ct.count(Kt(t),t)+(4===Kt(t).getUTCDay()),n,2)}function nr(t){return t.getUTCDay()}function er(t,n){return Kn(Et.count(Kt(t)-1,t),n,2)}function rr(t,n){return Kn(t.getUTCFullYear()%100,n,2)}function ir(t,n){return Kn((t=Qe(t)).getUTCFullYear()%100,n,2)}function ar(t,n){return Kn(t.getUTCFullYear()%1e4,n,4)}function or(t,n){var e=t.getUTCDay();return Kn((t=e>=4||0===e?Ct(t):Ct.ceil(t)).getUTCFullYear()%1e4,n,4)}function ur(){return"+0000"}function cr(){return"%"}function sr(t){return+t}function lr(t){return Math.floor(+t/1e3)}function fr(t){var n={};return function(e){return n[e]||(n[e]=t(e))}}function hr(t){var n=fr(t.format),e=t.formatPrefix;return{format:n,formatPrefix:e,formatFloat:function(t){var e,r,i=B(t||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return e=n(i),r=n(".1f")(1)[1],function(t){var n=e(t),i=n.indexOf(r);if(i<0)return n;for(var a=function(t,n){var e,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>n;)if((e=t.charCodeAt(r))>=48&&e<=57)return r+1}(n,i),o=a<n.length?n.slice(a):"";--a>i;)if("0"!==n[a]){++a;break}return n.slice(0,a)+o}}return n(i)},formatSpan:function(t,r,i,a){a=B(null==a?",f":a);var o,u=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=U?i*=10:a>=P?i*=5:a>=R&&(i*=2),n<t?-i:i}(t,r,i),c=Math.max(Math.abs(t),Math.abs(r));if(null==a.precision)switch(a.type){case"s":return isNaN(o=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(W(n)/3)))-W(Math.abs(t)))}(u,c))||(a.precision=o),e(a,c);case"":case"e":case"g":case"p":case"r":isNaN(o=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,W(n)-W(t))+1}(u,c))||(a.precision=o-("e"===a.type));break;case"f":case"%":isNaN(o=function(t){return Math.max(0,-W(Math.abs(t)))}(u))||(a.precision=o-2*("%"===a.type))}return n(a)}}}function dr(){return hr({format:$,formatPrefix:V})}function pr(t,n,e){e=e||{},(0,g.Kn)(e)||(0,g.vU)("Invalid time multi-format specifier: ".concat(e));var r=n(vn),i=n(pn),a=n(dn),o=n(ln),u=n(sn),c=n(cn),s=n(un),l=n(on),f=t(e[gn]||".%L"),h=t(e[vn]||":%S"),d=t(e[pn]||"%I:%M"),p=t(e[dn]||"%I %p"),v=t(e[ln]||e[fn]||"%a %d"),m=t(e[sn]||"%b %d"),y=t(e[cn]||"%B"),b=t(e[un]||"%B"),x=t(e[on]||"%Y");return function(t){return(r(t)<t?f:i(t)<t?h:a(t)<t?d:o(t)<t?p:c(t)<t?u(t)<t?v:m:l(t)<t?s(t)<t?y:b:x)(t)}}function vr(t){var n=fr(t.format),e=fr(t.utcFormat);return{timeFormat:function(t){return(0,g.HD)(t)?n(t):pr(n,An,t)},utcFormat:function(t){return(0,g.HD)(t)?e(t):pr(e,Tn,t)},timeParse:fr(t.parse),utcParse:fr(t.utcParse)}}function gr(){return Xn=vr({format:qn,parse:Hn,utcFormat:Wn,utcParse:Yn})}function mr(t){return vr(In(t))}function yr(t){return arguments.length?Xn=mr(t):Xn}!function(t){Bn=In(t),qn=Bn.format,Hn=Bn.parse,Wn=Bn.utcFormat,Yn=Bn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),dr(),gr();var br=/^(data:|([A-Za-z]+:)?\/\/)/,xr=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_r=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,wr="file://";function kr(t,n){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(n,e);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,e));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Or(t,n){return Er.apply(this,arguments)}function Er(){return Er=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i,a,o,u,c,s;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,g.l7)({},this.options,e),r=this.fileAccess,i={href:null},c=xr.test(n.replace(_r,"")),null!=n&&"string"===typeof n&&c||(0,g.vU)("Sanitize failure, invalid URI: "+(0,g.m8)(n)),s=br.test(n),(u=e.baseURL)&&!s&&(n.startsWith("/")||u.endsWith("/")||(n="/"+n),n=u+n),o=(a=n.startsWith(wr))||"file"===e.mode||"http"!==e.mode&&!s&&r,a?n=n.slice(wr.length):n.startsWith("//")&&("file"===e.defaultProtocol?(n=n.slice(2),o=!0):n=(e.defaultProtocol||"http")+":"+n),Object.defineProperty(i,"localFile",{value:!!o}),i.href=n,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),Er.apply(this,arguments)}function Sr(t){return t?function(n){return new Promise((function(e,r){t.readFile(n,(function(t,n){t?r(t):e(n)}))}))}:Dr}function Dr(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ar(t){return t?function(){var n=(0,y.Z)((0,m.Z)().mark((function n(e,r){var i,a,o;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,g.l7)({},this.options.http,r),a=r&&r.response,n.next=4,t(e,i);case 4:return o=n.sent,n.abrupt("return",o.ok?(0,g.mf)(o[a])?o[a]():o.text():(0,g.vU)(o.status+""+o.statusText));case 6:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}():Tr}function Tr(){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var jr=function(t){return null!=t&&t===t},Zr=function(t){return!Number.isNaN(+t)&&!(t instanceof Date)},Nr={boolean:g.sw,integer:g.He,number:g.He,date:g.ZU,string:g.BB,unknown:g.yR},zr=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return Zr(t)&&Number.isInteger(+t)},Zr,function(t){return!Number.isNaN(Date.parse(t))}],Ur=["boolean","integer","number","date"];function Pr(t,n){return n.reduce((function(n,e){return n[e]=function(t,n){if(!t||!t.length)return"unknown";for(var e,r,i=t.length,a=zr.length,o=zr.map((function(t,n){return n+1})),u=0,c=0;u<i;++u)for(r=n?t[u][n]:t[u],e=0;e<a;++e)if(o[e]&&jr(r)&&!zr[e](r)&&(o[e]=0,++c===zr.length))return"string";return Ur[o.reduce((function(t,n){return 0===t?n:t}),0)-1]}(t,e),n}),{})}function Rr(t){var n=function(n,e){var r={delimiter:t};return Lr(n,e?(0,g.l7)(e,r):r)};return n.responseType="text",n}function Lr(t,n){return n.header&&(t=n.header.map(g.m8).join(n.delimiter)+"\n"+t),C(n.delimiter).parse(t+"")}function Ir(t,n){var e,r=n&&n.property?(0,g.EP)(n.property):g.yR;return!(0,g.Kn)(t)||(e=t,"function"===typeof Buffer&&(0,g.mf)(Buffer.isBuffer)&&Buffer.isBuffer(e))?r(JSON.parse(t)):function(t,n){!(0,g.kJ)(t)&&(0,g.TW)(t)&&(t=(0,b.Z)(t));return n&&n.copy?JSON.parse(JSON.stringify(t)):t}(r(t),n)}Lr.responseType="text",Ir.responseType="json";var Br={interior:function(t,n){return t!==n},exterior:function(t,n){return t===n}};function qr(t,n){var e,r,i,a;return t=Ir(t,n),n&&n.feature?(e=T,i=n.feature):n&&n.mesh?(e=N,i=n.mesh,a=Br[n.filter]):(0,g.vU)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?e(t,r,a):(0,g.vU)("Invalid TopoJSON object: "+i))&&r.features||[r]}qr.responseType="json";var Hr={dsv:Lr,csv:Rr(","),tsv:Rr("\t"),json:Ir,topojson:qr};function Wr(t,n){return arguments.length>1?(Hr[t]=n,this):(0,g.nr)(Hr,t)?Hr[t]:null}function Yr(t){var n=Wr(t);return n&&n.responseType||"text"}function Xr(t,n,e,r){var i=Wr((n=n||{}).type||"json");return i||(0,g.vU)("Unknown data format type: "+n.type),t=i(t,n),n.parse&&function(t,n,e,r){if(!t.length)return;var i=yr();e=e||i.timeParse,r=r||i.utcParse;var a,o,u,c,s,l,f=t.columns||Object.keys(t[0]);"auto"===n&&(n=Pr(t,f));var h=(f=Object.keys(n)).map((function(t){var i,a,o=n[t];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(a=(i=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),("utc"===i[0]?r:e)(a);if(!Nr[o])throw Error("Illegal format pattern: "+t+":"+o);return Nr[o]}));for(u=0,s=t.length,l=f.length;u<s;++u)for(a=t[u],c=0;c<l;++c)a[o=f[c]]=h[c](a[o])}(t,n.parse,e,r),(0,g.nr)(t,"columns")&&delete t.columns,t}var Gr=function(t,n){return function(e){return{options:e||{},sanitize:Or,load:kr,fileAccess:!!n,file:Sr(n),http:Ar(t)}}}("undefined"!==typeof fetch&&fetch,null),Jr=Math.sqrt(50),$r=Math.sqrt(10),Vr=Math.sqrt(2);var Kr,Qr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ti(t){if(!(n=Qr.exec(t)))throw new Error("invalid format: "+t);var n;return new ni({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function ni(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ei(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function ri(t){return(t=ei(Math.abs(t)))?t[1]:NaN}function ii(t,n){var e=ei(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ti.prototype=ni.prototype,ni.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ai={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return ii(100*t,n)},r:ii,s:function(t,n){var e=ei(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Kr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ei(t,Math.max(0,n+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function oi(t){return t}var ui,ci,si,li,fi,hi=Array.prototype.map,di=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function pi(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?oi:(n=hi.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[o=(o+1)%n.length];return a.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?oi:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(hi.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=ti(t)).fill,e=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):ai[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?c:"",_=ai[y],w=/[defgprs%]/.test(y);function k(t){var i,a,c,h=b,k=x;if("c"===y)k=_(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),m&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0===+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===y?di[8+Kr/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(c=t.charCodeAt(i))||c>57){k=(46===c?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var O=h.length+t.length+k.length,E=O<p?new Array(p-O+1).join(n):"";switch(v&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),e){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,O=E.length>>1)+h+t+k+E.slice(O);break;default:t=E+h+t+k}return u(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,n){var e=f(((t=ti(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ri(n)/3))),i=Math.pow(10,-r),a=di[8+r/3];return function(t){return e(i*t)+a}}}}function vi(t){var n={};return function(e){return n[e]||(n[e]=t(e))}}function gi(t){var n=vi(t.format),e=t.formatPrefix;return{format:n,formatPrefix:e,formatFloat:function(t){var e,r,i=ti(t||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return e=n(i),r=n(".1f")(1)[1],function(t){var n=e(t),i=n.indexOf(r);if(i<0)return n;for(var a=function(t,n){var e,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>n;)if((e=t.charCodeAt(r))>=48&&e<=57)return r+1}(n,i),o=a<n.length?n.slice(a):"";--a>i;)if("0"!==n[a]){++a;break}return n.slice(0,a)+o}}return n(i)},formatSpan:function(t,r,i,a){a=ti(null==a?",f":a);var o,u=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Jr?i*=10:a>=$r?i*=5:a>=Vr&&(i*=2),n<t?-i:i}(t,r,i),c=Math.max(Math.abs(t),Math.abs(r));if(null==a.precision)switch(a.type){case"s":return isNaN(o=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ri(n)/3)))-ri(Math.abs(t)))}(u,c))||(a.precision=o),e(a,c);case"":case"e":case"g":case"p":case"r":isNaN(o=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,ri(n)-ri(t))+1}(u,c))||(a.precision=o-("e"===a.type));break;case"f":case"%":isNaN(o=function(t){return Math.max(0,-ri(Math.abs(t)))}(u))||(a.precision=o-2*("%"===a.type))}return n(a)}}}function mi(){return li=gi({format:ci,formatPrefix:si})}function yi(t){return gi(pi(t))}function bi(t){return arguments.length?li=yi(t):li}function xi(t,n,e){e=e||{},(0,g.Kn)(e)||(0,g.vU)("Invalid time multi-format specifier: ".concat(e));var r=n(vn),i=n(pn),a=n(dn),o=n(ln),u=n(sn),c=n(cn),s=n(un),l=n(on),f=t(e[gn]||".%L"),h=t(e[vn]||":%S"),d=t(e[pn]||"%I:%M"),p=t(e[dn]||"%I %p"),v=t(e[ln]||e[fn]||"%a %d"),m=t(e[sn]||"%b %d"),y=t(e[cn]||"%B"),b=t(e[un]||"%B"),x=t(e[on]||"%Y");return function(t){return(r(t)<t?f:i(t)<t?h:a(t)<t?d:o(t)<t?p:c(t)<t?u(t)<t?v:m:l(t)<t?s(t)<t?y:b:x)(t)}}function _i(t){var n=vi(t.format),e=vi(t.utcFormat);return{timeFormat:function(t){return(0,g.HD)(t)?n(t):xi(n,An,t)},utcFormat:function(t){return(0,g.HD)(t)?e(t):xi(e,Tn,t)},timeParse:vi(t.parse),utcParse:vi(t.utcParse)}}function wi(){return fi=_i({format:qn,parse:Hn,utcFormat:Wn,utcParse:Yn})}function ki(t){return _i(In(t))}function Mi(t){return arguments.length?fi=ki(t):fi}!function(t){ui=pi(t),ci=ui.format,si=ui.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]}),mi(),wi();var Oi=function(t,n){return(0,g.l7)({},t,n)};function Ei(t,n){var e=arguments.length;return e&&2!==e&&(0,g.vU)("defaultLocale expects either zero or two arguments."),e?Oi(bi(t),Mi(n)):Oi(bi(),Mi())}function Si(t){var n=t||g.yR,e=[],r={};return e.add=function(t){var i=n(t);return r[i]||(r[i]=1,e.push(t)),e},e.remove=function(t){var i=n(t);if(r[i]){r[i]=0;var a=e.indexOf(t);a>=0&&e.splice(a,1)}return e},e}function Di(t,n){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,y.Z)((0,m.Z)().mark((function t(n,e){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(n);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),n.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),Ci.apply(this,arguments)}var Ai=Symbol("vega_id"),Ti=1;function Fi(t){return!(!t||!ji(t))}function ji(t){return t[Ai]}function Zi(t,n){return t[Ai]=n,t}function Ni(t){var n=t===Object(t)?t:{data:t};return ji(n)?n:Zi(n,Ti++)}function zi(t){return Ui(t,Ni({}))}function Ui(t,n){for(var e in t)n[e]=t[e];return n}function Pi(t,n){return Zi(n,ji(t))}function Ri(t,n){return t?n?function(e,r){return t(e,r)||ji(n(e))-ji(n(r))}:function(n,e){return t(n,e)||ji(n)-ji(e)}:null}function Li(t){return t&&t.constructor===Ii}function Ii(){var t=[],n=[],e=[],r=[],i=[],a=null,o=!1;return{constructor:Ii,insert:function(n){for(var e=(0,g.IX)(n),r=e.length,i=0;i<r;++i)t.push(e[i]);return this},remove:function(t){for(var e=(0,g.mf)(t)?r:n,i=(0,g.IX)(t),a=i.length,o=0;o<a;++o)e.push(i[o]);return this},modify:function(t,n,r){var a={field:n,value:(0,g.a9)(r)};return(0,g.mf)(t)?(a.filter=t,i.push(a)):(a.tuple=t,e.push(a)),this},encode:function(t,n){return(0,g.mf)(t)?i.push({filter:t,field:n}):e.push({tuple:t,field:n}),this},clean:function(t){return a=t,this},reflow:function(){return o=!0,this},pulse:function(u,c){var s,l,f,h,d,p,v={},g={};for(s=0,l=c.length;s<l;++s)v[ji(c[s])]=1;for(s=0,l=n.length;s<l;++s)v[ji(d=n[s])]=-1;for(s=0,l=r.length;s<l;++s)h=r[s],c.forEach((function(t){h(t)&&(v[ji(t)]=-1)}));for(s=0,l=t.length;s<l;++s)p=ji(d=t[s]),v[p]?v[p]=1:u.add.push(Ni(t[s]));for(s=0,l=c.length;s<l;++s)d=c[s],v[ji(d)]<0&&u.rem.push(d);function m(t,n,e){e?t[n]=e(t):u.encode=n,o||(g[ji(t)]=t)}for(s=0,l=e.length;s<l;++s)d=(f=e[s]).tuple,h=f.field,(p=v[ji(d)])>0&&(m(d,h,f.value),u.modifies(h));for(s=0,l=i.length;s<l;++s)f=i[s],h=f.filter,c.forEach((function(t){h(t)&&v[ji(t)]>0&&m(t,f.field,f.value)})),u.modifies(f.field);if(o)u.mod=n.length||r.length?c.filter((function(t){return v[ji(t)]>0})):c.slice();else for(p in g)u.mod.push(g[p]);return(a||null==a&&(n.length||r.length))&&u.clean(!0),u}}}var Bi="_:mod:_";function qi(){Object.defineProperty(this,Bi,{writable:!0,value:{}})}qi.prototype={set:function(t,n,e,r){var i=this,a=i[t],o=i[Bi];return null!=n&&n>=0?(a[n]!==e||r)&&(a[n]=e,o[n+":"+t]=-1,o[t]=-1):(a!==e||r)&&(i[t]=e,o[t]=(0,g.kJ)(e)?1+e.length:-1),i},modified:function(t,n){var e=this[Bi];if(!arguments.length){for(var r in e)if(e[r])return!0;return!1}if((0,g.kJ)(t)){for(var i=0;i<t.length;++i)if(e[t[i]])return!0;return!1}return null!=n&&n>=0?n+1<e[t]||!!e[n+":"+t]:!!e[t]},clear:function(){return this[Bi]={},this}};var Hi=0,Wi=new qi;function Yi(t,n,e,r){this.id=++Hi,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,n&&(this._update=n),e&&this.parameters(e,r)}function Xi(t){return function(n){var e=this.flags;return 0===arguments.length?!!(e&t):(this.flags=n?e|t:e&~t,this)}}Yi.prototype={targets:function(){return this._targets||(this._targets=Si(g.id))},set:function(t){return this.value!==t?(this.value=t,1):0},skip:Xi(1),modified:Xi(2),parameters:function(t,n,e){var r=this;n=!1!==n;var i,a,o,u,c=this._argval=this._argval||new qi,s=this._argops=this._argops||[],l=[],f=function(t,e,i){i instanceof Yi?(i!==r&&(n&&i.targets().add(r),l.push(i)),s.push({op:i,name:t,index:e})):c.set(t,e,i)};for(i in t)if(a=t[i],"pulse"===i)(0,g.IX)(a).forEach((function(t){t instanceof Yi?t!==r&&(t.targets().add(r),l.push(t)):(0,g.vU)("Pulse parameters must be operator instances.")})),this.source=a;else if((0,g.kJ)(a))for(c.set(i,-1,Array(o=a.length)),u=0;u<o;++u)f(i,u,a[u]);else f(i,-1,a);return this.marshall().clear(),e&&(s.initonly=!0),l},marshall:function(t){var n,e,r,i,a=this._argval||Wi,o=this._argops;if(o){var u=o.length;for(e=0;e<u;++e)i=(r=(n=o[e]).op).modified()&&r.stamp===t,a.set(n.name,n.index,r.value,i);if(o.initonly){for(e=0;e<u;++e)(n=o[e]).op.targets().remove(this);this._argops=null,this._update=null}}return a},detach:function(){var t,n,e,r=this._argops;if(r)for(t=0,n=r.length;t<n;++t)(e=r[t].op)._targets&&e._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(t){var n=this._update;if(n){var e=this.marshall(t.stamp),r=n.call(this,e,t);if(e.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run:function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),n=0):n=this.evaluate(t),this.pulse=n||t);var n}};var Gi=0;function Ji(t,n,e){this.id=++Gi,this.value=null,e&&(this.receive=e),t&&(this._filter=t),n&&(this._apply=n)}function $i(t,n,e){return new Ji(t,n,e)}function Vi(){return Vi=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i=0,t.prev=2,t.next=5,r.loader().load(n,{context:"dataflow",response:Yr(e&&e.type)});case 5:a=t.sent;try{a=r.parse(a,e)}catch(o){i=-2,r.warn("Data ingestion failed",n,o)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i=-1,r.warn("Loading failed",n,t.t0);case 13:return t.abrupt("return",{data:a,status:i});case 14:case"end":return t.stop()}}),t,this,[[2,9]])}))),Vi.apply(this,arguments)}function Ki(){return Ki=(0,y.Z)((0,m.Z)().mark((function t(n,e,r){var i,a,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=(i=this)._pending||Qi(i)).requests+=1,t.next=4,i.request(e,r);case 4:return o=t.sent,i.pulse(n,i.changeset().remove(g.yb).insert(o.data||[])),a.done(),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t,this)}))),Ki.apply(this,arguments)}function Qi(t){var n,e=new Promise((function(t){return n=t}));return e.requests=0,e.done=function(){0===--e.requests&&(t._pending=null,n(t))},t._pending=e}Ji.prototype={_filter:g.yb,_apply:g.yR,targets:function(){return this._targets||(this._targets=Si(g.id))},consume:function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive:function(t){if(this._filter(t)){for(var n=this.value=this._apply(t),e=this._targets,r=e?e.length:0,i=0;i<r;++i)e[i].receive(n);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter:function(t){var n=$i(t);return this.targets().add(n),n},apply:function(t){var n=$i(null,t);return this.targets().add(n),n},merge:function(){var t=$i();this.targets().add(t);for(var n=0,e=arguments.length;n<e;++n)arguments[n].targets().add(t);return t},throttle:function(t){var n=-1;return this.filter((function(){var e=Date.now();return e-n>t?(n=e,1):0}))},debounce:function(t){var n=$i();return this.targets().add($i(null,null,(0,g.Ds)(t,(function(t){var e=t.dataflow;n.receive(t),e&&e.run&&e.run()})))),n},between:function(t,n){var e=!1;return t.targets().add($i(null,null,(function(){return e=!0}))),n.targets().add($i(null,null,(function(){return e=!1}))),this.filter((function(){return e}))},detach:function(){this._filter=g.yb,this._targets=null}};var ta={skip:!0};function na(t,n,e,r,i,a){var o,u,c=(0,g.l7)({},a,ta);(0,g.mf)(e)||(e=(0,g.a9)(e)),void 0===r?o=function(n){return t.touch(e(n))}:(0,g.mf)(r)?(u=new Yi(null,r,i,!1),o=function(n){u.evaluate(n);var r=e(n),i=u.value;Li(i)?t.pulse(r,i,a):t.update(r,i,c)}):o=function(n){return t.update(e(n),r,c)},n.apply(o)}function ea(t,n,e,r,i,a){if(void 0===r)n.targets().add(e);else{var o=a||{},u=new Yi(null,function(t,n){return n=(0,g.mf)(n)?n:(0,g.a9)(n),t?function(e,r){var i=n(e,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:n}(e,r),i,!1);u.modified(o.force),u.rank=n.rank,n.targets().add(u),e&&(u.skip(!0),u.value=e.value,u.targets().add(e),t.connect(e,[u]))}}var ra={};function ia(t,n,e){this.dataflow=t,this.stamp=null==n?-1:n,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=e||null}function aa(t,n){var e=[];return(0,g.FP)(t,n,(function(t){return e.push(t)})),e}function oa(t,n){var e={};return t.visit(n,(function(t){e[ji(t)]=1})),function(t){return e[ji(t)]?null:t}}function ua(t,n){return t?function(e,r){return t(e,r)&&n(e,r)}:n}function ca(t,n,e,r){var i=this,a=e.length,o=0;this.dataflow=t,this.stamp=n,this.fields=null,this.encode=r||null,this.pulses=e;for(var u=0;u<a;++u){var c=e[u];if(c.stamp===n){if(c.fields){var s=i.fields||(i.fields={});for(var l in c.fields)s[l]=1}c.changed(i.ADD)&&(o|=i.ADD),c.changed(i.REM)&&(o|=i.REM),c.changed(i.MOD)&&(o|=i.MOD)}}this.changes=o}function sa(){return sa=(0,y.Z)((0,m.Z)().mark((function t(n,e,r){var i,a,o,u,c,s,l,f,h;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!(i=this)._pulse){t.next=3;break}return t.abrupt("return",fa(i));case 3:if(!i._pending){t.next=6;break}return t.next=6,i._pending;case 6:if(!e){t.next=9;break}return t.next=9,Di(i,e);case 9:if(i._touched.length){t.next=12;break}return i.debug("Dataflow invoked, but nothing to do."),t.abrupt("return",i);case 12:o=++i._clock,i._pulse=new ia(i,o,n),i._touched.forEach((function(t){return i._enqueue(t,!0)})),i._touched=Si(g.id),u=0,t.prev=17;case 18:if(!(i._heap.size()>0)){t.next=35;break}if((c=i._heap.pop()).rank===c.qrank){t.next=23;break}return i._enqueue(c,!0),t.abrupt("continue",18);case 23:if(!(s=c.run(i._getPulse(c,n))).then){t.next=30;break}return t.next=27,s;case 27:s=t.sent,t.next=31;break;case 30:s.async&&(a.push(s.async),s=ra);case 31:s!==ra&&c._targets&&c._targets.forEach((function(t){return i._enqueue(t)})),++u,t.next=18;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(17),i._heap.clear(),l=t.t0;case 41:if(i._input={},i._pulse=null,i.debug("Pulse ".concat(o,": ").concat(u," operators")),l&&(i._postrun=[],i.error(l)),!i._postrun.length){t.next=55;break}f=i._postrun.sort((function(t,n){return n.priority-t.priority})),i._postrun=[],h=0;case 49:if(!(h<f.length)){t.next=55;break}return t.next=52,Di(i,f[h].callback);case 52:++h,t.next=49;break;case 55:if(!r){t.next=58;break}return t.next=58,Di(i,r);case 58:return a.length&&Promise.all(a).then((function(t){return i.runAsync(null,(function(){t.forEach((function(t){try{t(i)}catch(n){i.error(n)}}))}))})),t.abrupt("return",i);case 60:case"end":return t.stop()}}),t,this,[[17,37]])}))),sa.apply(this,arguments)}function la(){return la=(0,y.Z)((0,m.Z)().mark((function t(n,e,r){var i,a=this;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._running){t.next=5;break}return t.next=3,this._running;case 3:t.next=0;break;case 5:return i=function(){return a._running=null},(this._running=this.evaluate(n,e,r)).then(i,i),t.abrupt("return",this._running);case 8:case"end":return t.stop()}}),t,this)}))),la.apply(this,arguments)}function fa(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}ia.prototype={StopPropagation:ra,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(t){return new ia(this.dataflow).init(this,t)},clone:function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},addAll:function(){var t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||((t=new ia(this.dataflow).init(this)).add=t.source,t.rem=[]),t},init:function(t,n){var e=this;return e.stamp=t.stamp,e.encode=t.encode,!t.fields||64&n||(e.fields=t.fields),1&n?(e.addF=t.addF,e.add=t.add):(e.addF=null,e.add=[]),2&n?(e.remF=t.remF,e.rem=t.rem):(e.remF=null,e.rem=[]),4&n?(e.modF=t.modF,e.mod=t.mod):(e.modF=null,e.mod=[]),32&n?(e.srcF=null,e.source=null):(e.srcF=t.srcF,e.source=t.source,t.cleans&&(e.cleans=t.cleans)),e},runAfter:function(t){this.dataflow.runAfter(t)},changed:function(t){var n=t||7;return 1&n&&this.add.length||2&n&&this.rem.length||4&n&&this.mod.length},reflow:function(t){if(t)return this.fork(7).reflow();var n=this.add.length,e=this.source&&this.source.length;return e&&e!==n&&(this.mod=this.source,n&&this.filter(4,oa(this,1))),this},clean:function(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies:function(t){var n=this.fields||(this.fields={});return(0,g.kJ)(t)?t.forEach((function(t){return n[t]=!0})):n[t]=!0,this},modified:function(t,n){var e=this.fields;return!(!n&&!this.mod.length||!e)&&(arguments.length?(0,g.kJ)(t)?t.some((function(t){return e[t]})):e[t]:!!e)},filter:function(t,n){var e=this;return 1&t&&(e.addF=ua(e.addF,n)),2&t&&(e.remF=ua(e.remF,n)),4&t&&(e.modF=ua(e.modF,n)),16&t&&(e.srcF=ua(e.srcF,n)),e},materialize:function(t){var n=this;return 1&(t=t||7)&&n.addF&&(n.add=aa(n.add,n.addF),n.addF=null),2&t&&n.remF&&(n.rem=aa(n.rem,n.remF),n.remF=null),4&t&&n.modF&&(n.mod=aa(n.mod,n.modF),n.modF=null),16&t&&n.srcF&&(n.source=n.source.filter(n.srcF),n.srcF=null),n},visit:function(t,n){var e=this,r=n;if(16&t)return(0,g.FP)(e.source,e.srcF,r),e;1&t&&(0,g.FP)(e.add,e.addF,r),2&t&&(0,g.FP)(e.rem,e.remF,r),4&t&&(0,g.FP)(e.mod,e.modF,r);var i=e.source;if(8&t&&i){var a=e.add.length+e.mod.length;a===i.length||(a?(0,g.FP)(i,oa(e,5),r):(0,g.FP)(i,e.srcF,r))}return e}},(0,g.XW)(ca,ia,{fork:function(t){var n=new ia(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&n.ADD&&this.visit(n.ADD,(function(t){return n.add.push(t)})),t&n.REM&&this.visit(n.REM,(function(t){return n.rem.push(t)})),t&n.MOD&&this.visit(n.MOD,(function(t){return n.mod.push(t)}))),n},changed:function(t){return this.changes&t},modified:function(t){var n=this,e=n.fields;return e&&n.changes&n.MOD?(0,g.kJ)(t)?t.some((function(t){return e[t]})):e[t]:0},filter:function(){(0,g.vU)("MultiPulse does not support filtering.")},materialize:function(){(0,g.vU)("MultiPulse does not support materialization.")},visit:function(t,n){var e=this,r=e.pulses,i=r.length,a=0;if(t&e.SOURCE)for(;a<i;++a)r[a].visit(t,n);else for(;a<i;++a)r[a].stamp===e.stamp&&r[a].visit(t,n);return e}});var ha={skip:!1,force:!1};function da(t){var n=[];return{clear:function(){return n=[]},size:function(){return n.length},peek:function(){return n[0]},push:function(e){return n.push(e),pa(n,0,n.length-1,t)},pop:function(){var e,r=n.pop();return n.length?(e=n[0],n[0]=r,function(t,n,e){var r,i=n,a=t.length,o=t[n],u=1+(n<<1);for(;u<a;)(r=u+1)<a&&e(t[u],t[r])>=0&&(u=r),t[n]=t[u],u=1+((n=u)<<1);t[n]=o,pa(t,i,n,e)}(n,0,t)):e=r,e}}}function pa(t,n,e,r){for(var i,a,o=t[e];e>n&&r(o,i=t[a=e-1>>1])<0;)t[e]=i,e=a;return t[e]=o}function va(){this.logger((0,g.kg)()),this.logLevel(g.jj),this._clock=0,this._rank=0,this._locale=Ei();try{this._loader=Gr()}catch(t){}this._touched=Si(g.id),this._input={},this._pulse=null,this._heap=da((function(t,n){return t.qrank-n.qrank})),this._postrun=[]}function ga(t){return function(){return this._log[t].apply(this,arguments)}}function ma(t,n){Yi.call(this,t,null,n)}va.prototype={stamp:function(){return this._clock},loader:function(t){return arguments.length?(this._loader=t,this):this._loader},locale:function(t){return arguments.length?(this._locale=t,this):this._locale},logger:function(t){return arguments.length?(this._log=t,this):this._log},error:ga("error"),warn:ga("warn"),info:ga("info"),debug:ga("debug"),logLevel:ga("level"),cleanThreshold:1e4,add:function(t,n,e,r){var i,a=1;return t instanceof Yi?i=t:t&&t.prototype instanceof Yi?i=new t:(0,g.mf)(t)?i=new Yi(null,t):(a=0,i=new Yi(t,n)),this.rank(i),a&&(r=e,e=n),e&&this.connect(i,i.parameters(e,r)),this.touch(i),i},connect:function(t,n){for(var e=t.rank,r=n.length,i=0;i<r;++i)if(e<n[i].rank)return void this.rerank(t)},rank:function(t){t.rank=++this._rank},rerank:function(t){for(var n,e,r,i=[t];i.length;)if(this.rank(n=i.pop()),e=n._targets)for(r=e.length;--r>=0;)i.push(n=e[r]),n===t&&(0,g.vU)("Cycle detected in dataflow graph.")},pulse:function(t,n,e){this.touch(t,e||ha);var r=new ia(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=n.pulse(r,i),this},touch:function(t,n){var e=n||ha;return this._pulse?this._enqueue(t):this._touched.add(t),e.skip&&t.skip(!0),this},update:function(t,n,e){var r=e||ha;return(t.set(n)||r.force)&&this.touch(t,r),this},changeset:Ii,ingest:function(t,n,e){return n=this.parse(n,e),this.pulse(t,this.changeset().insert(n))},parse:function(t,n){var e=this.locale();return Xr(t,n,e.timeParse,e.utcParse)},preload:function(t,n,e){return Ki.apply(this,arguments)},request:function(t,n){return Vi.apply(this,arguments)},events:function(t,n,e,r){for(var i,a=this,o=$i(e,r),u=function(t){t.dataflow=a;try{o.receive(t)}catch(n){a.error(n)}finally{a.run()}},c=(i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):(0,g.IX)(t)).length,s=0;s<c;++s)i[s].addEventListener(n,u);return o},on:function(t,n,e,r,i){return(t instanceof Yi?ea:na)(this,t,n,e,r,i),this},evaluate:function(t,n,e){return sa.apply(this,arguments)},run:function(t,n,e){return this._pulse?fa(this):(this.evaluate(t,n,e),this)},runAsync:function(t,n,e){return la.apply(this,arguments)},runAfter:function(t,n,e){if(this._pulse||n)this._postrun.push({priority:e||0,callback:t});else try{t(this)}catch(r){this.error(r)}},_enqueue:function(t,n){var e=t.stamp<this._clock;e&&(t.stamp=this._clock),(e||n)&&(t.qrank=t.rank,this._heap.push(t))},_getPulse:function(t,n){var e=t.source,r=this._clock;return e&&(0,g.kJ)(e)?new ca(this,r,e.map((function(t){return t.pulse})),n):this._input[t.id]||function(t,n){if(n&&n.stamp===t.stamp)return n;t=t.fork(),n&&n!==ra&&(t.source=n.source);return t}(this._pulse,e&&e.pulse)}},(0,g.XW)(ma,Yi,{run:function(t){var n,e=this;return t.stamp<this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):n=this.evaluate(t),(n=n||t).then?n=n.then((function(t){return e.pulse=t})):n!==t.StopPropagation&&(this.pulse=n),n)},evaluate:function(t){var n=this.marshall(t.stamp),e=this.transform(n,t);return n.clear(),e},transform:function(){}});var ya={};function ba(t){var n=xa(t);return n&&n.Definition||null}function xa(t){return t=t&&t.toLowerCase(),(0,g.nr)(ya,t)?ya[t]:null}var _a=e(47427);function wa(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function ka(t,n){var e;if(void 0===n){var r,i=(0,_a.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(e<a||void 0===e&&a>=a)&&(e=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;null!=(s=n(s,++u,t))&&(e<s||void 0===e&&s>=s)&&(e=s)}}catch(l){c.e(l)}finally{c.f()}}return e}function Ma(t,n){var e;if(void 0===n){var r,i=(0,_a.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(e>a||void 0===e&&a>=a)&&(e=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;null!=(s=n(s,++u,t))&&(e>s||void 0===e&&s>=s)&&(e=s)}}catch(l){c.e(l)}finally{c.f()}}return e}function Oa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa;if(t===wa)return Ea;if("function"!==typeof t)throw new TypeError("compare is not a function");return function(n,e){var r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function Ea(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}function Sa(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=void 0===i?Ea:Oa(i);r>e;){if(r-e>600){var a=r-e+1,o=n-e+1,u=Math.log(a),c=.5*Math.exp(2*u/3),s=.5*Math.sqrt(u*c*(a-c)/a)*(o-a/2<0?-1:1);Sa(t,n,Math.max(e,Math.floor(n-o*c/a+s)),Math.min(r,Math.floor(n+(a-o)*c/a+s)),i)}var l=t[n],f=e,h=r;for(Da(t,e,n),i(t[r],l)>0&&Da(t,e,r);f<h;){for(Da(t,f,h),++f,--h;i(t[f],l)<0;)++f;for(;i(t[h],l)>0;)--h}0===i(t[e],l)?Da(t,e,h):Da(t,++h,r),h<=n&&(e=h+1),n<=h&&(r=h-1)}return t}function Da(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}var Ca=(0,m.Z)().mark(Ta);function Aa(t){return null===t?NaN:+t}function Ta(t,n){var e,r,i,a,o,u,c;return(0,m.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==n){s.next=21;break}e=(0,_a.Z)(t),s.prev=2,e.s();case 4:if((r=e.n()).done){s.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){s.next=9;break}return s.next=9,i;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),e.e(s.t0);case 16:return s.prev=16,e.f(),s.finish(16);case 19:s.next=40;break;case 21:a=-1,o=(0,_a.Z)(t),s.prev=23,o.s();case 25:if((u=o.n()).done){s.next=32;break}if(c=u.value,!(null!=(c=n(c,++a,t))&&(c=+c)>=c)){s.next=30;break}return s.next=30,c;case 30:s.next=25;break;case 32:s.next=37;break;case 34:s.prev=34,s.t1=s.catch(23),o.e(s.t1);case 37:return s.prev=37,o.f(),s.finish(37);case 40:case"end":return s.stop()}}),Ca,null,[[2,13,16,19],[23,34,37,40]])}function Fa(t,n,e){if((r=(t=Float64Array.from(Ta(t,e))).length)&&!isNaN(n=+n)){if(n<=0||r<2)return Ma(t);if(n>=1)return ka(t);var r,i=(r-1)*n,a=Math.floor(i),o=ka(Sa(t,a).subarray(0,a+1));return o+(Ma(t.subarray(a+1))-o)*(i-a)}}function ja(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Aa;if((r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,a=Math.floor(i),o=+e(t[a],a,t);return o+(+e(t[a+1],a+1,t)-o)*(i-a)}}function Za(t,n){var e=function(t,n){var e,r=0,i=0,a=0;if(void 0===n){var o,u=(0,_a.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=c&&(c=+c)>=c&&(a+=(e=c-i)*(c-(i+=e/++r)))}}catch(d){u.e(d)}finally{u.f()}}else{var s,l=-1,f=(0,_a.Z)(t);try{for(f.s();!(s=f.n()).done;){var h=s.value;null!=(h=n(h,++l,t))&&(h=+h)>=h&&(a+=(e=h-i)*(h-(i+=e/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return a/(r-1)}(t,n);return e?Math.sqrt(e):e}var Na=(0,m.Z)().mark(za);function za(t,n){var e,r,i,a,o,u,c;return(0,m.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=n){s.next=21;break}e=(0,_a.Z)(t),s.prev=2,e.s();case 4:if((r=e.n()).done){s.next=11;break}if(!(null!=(i=r.value)&&""!==i&&(i=+i)>=i)){s.next=9;break}return s.next=9,i;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),e.e(s.t0);case 16:return s.prev=16,e.f(),s.finish(16);case 19:s.next=41;break;case 21:a=-1,o=(0,_a.Z)(t),s.prev=23,o.s();case 25:if((u=o.n()).done){s.next=33;break}if(c=u.value,!(null!=(c=n(c,++a,t))&&""!==c&&(c=+c)>=c)){s.next=31;break}return s.next=31,c;case 31:s.next=25;break;case 33:s.next=38;break;case 35:s.prev=35,s.t1=s.catch(23),o.e(s.t1);case 38:return s.prev=38,o.f(),s.finish(38);case 41:case"end":return s.stop()}}),Na,null,[[2,13,16,19],[23,35,38,41]])}function Ua(t,n,e){var r=Float64Array.from(za(t,e));return r.sort(wa),n.map((function(t){return ja(r,t)}))}function Pa(t,n){return Ua(t,[.25,.5,.75],n)}var Ra=Math.random;function La(t,n,e,r){r=r||function(t){return t};for(var i,a=t.length,o=new Float64Array(a),u=0,c=1,s=r(t[0]),l=s,f=s+n;c<a;++c){if((i=r(t[c]))>=f){for(l=(s+l)/2;u<c;++u)o[u]=l;f=i+n,s=i}l=i}for(l=(s+l)/2;u<c;++u)o[u]=l;return e?function(t,n){var e,r,i=t.length,a=0,o=1;for(;t[a]===t[o];)++o;for(;o<i;){for(e=o+1;t[o]===t[e];)++e;if(t[o]-t[o-1]<n){for(r=o+(a+e-o-o>>1);r<o;)t[r++]=t[o];for(;r>o;)t[r--]=t[a]}a=o,o=e}return t}(o,n+n/4):o}var Ia=Math.sqrt(2*Math.PI),Ba=Math.SQRT2,qa=NaN;function Ha(t,n){t=t||0,n=null==n?1:n;var e,r,i=0,a=0;if(qa===qa)i=qa,qa=NaN;else{do{e=(i=2*Ra()-1)*i+(a=2*Ra()-1)*a}while(0===e||e>1);i*=r=Math.sqrt(-2*Math.log(e)/e),qa=a*r}return t+i*n}function Wa(t,n,e){var r,i=(t-(n=n||0))/(e=null==e?1:e),a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r}function Ya(t,n,e){return t<0||t>1?NaN:(n||0)+(null==e?1:e)*Ba*function(t){var n,e=-Math.log((1-t)*(1+t));n=e<6.25?1.6536545626831027+(n=.24015818242558962+(n=(n=(n=.00018673420803405714+(n=(n=(n=4.2347877827932404e-7+(n=(n=(n=1.0512122733215323e-9+(n=(n=(n=26335093153082323e-28+(n=(n=(n=6637638134358324e-30+(n=20972767875968562e-33+(n=(n=11157877678025181e-33+(n=128584807152564e-32+(n=(n=-364441206401782e-35)*(e-=3.125)-16850591381820166e-35)*e)*e)*e-1333171662854621e-31)*e)*e)*e-4054566272975207e-29)*e-8151934197605472e-29)*e)*e-12975133253453532e-27)*e-5415412054294628e-26)*e)*e-4.112633980346984e-9)*e-2.9070369957882005e-8)*e)*e-13654692000834679e-22)*e-13882523362786469e-21)*e)*e-.000740702534166267)*e-.006033670871430149)*e)*e:e<16?3.0838856104922208+(n=1.0052589676941592+(n=.005370914553590064+(n=(n=.002491442096107851+(n=(n=.0009532893797373805+(n=(n=24031110387097894e-21+(n=6828485145957318e-20+(n=(n=12475304481671779e-21+(n=29234449089955446e-22+(n=(n=15027403968909828e-22+(n=1.8239629214389228e-8+(n=(n=9.075656193888539e-8+(n=2.2137376921775787e-9)*(e=Math.sqrt(e)-3.25))*e-2.7517406297064545e-7)*e)*e)*e-4013867526981546e-21)*e)*e)*e-47318229009055734e-21)*e)*e)*e-.0003550375203628475)*e)*e-.0016882755560235047)*e)*e-.003751208507569241)*e)*e)*e:Number.isFinite(e)?4.849906401408584+(n=1.0103004648645344+(n=(n=(n=7599527703001776e-20+(n=(n=4526062597223154e-21+(n=(n=2.2900482228026655e-7+(n=(n=2.914795345090108e-8+(n=(n=7.61570120807834e-9+(n=(n=1.5076572693500548e-9+(n=(n=-27109920616438573e-27)*(e=Math.sqrt(e)-5)-2.555641816996525e-10)*e)*e-3.789465440126737e-9)*e)*e-1.496002662714924e-8)*e)*e-6.771199775845234e-8)*e)*e-9.9298272942317e-7)*e)*e-1968177810553167e-20)*e)*e-.00021503011930044477)*e-.00013871931833623122)*e)*e:1/0;return n*t}(2*t-1)}function Xa(t,n){var e,r,i={mean:function(t){return arguments.length?(e=t||0,i):e},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return Ha(e,r)},pdf:function(t){return function(t,n,e){var r=(t-(n||0))/(e=null==e?1:e);return Math.exp(-.5*r*r)/(e*Ia)}(t,e,r)},cdf:function(t){return Wa(t,e,r)},icdf:function(t){return Ya(t,e,r)}};return i.mean(t).stdev(n)}function Ga(t,n){var e=Xa(),r=0,i={data:function(e){return arguments.length?(t=e,r=e?e.length:0,i.bandwidth(n)):t},bandwidth:function(e){return arguments.length?(!(n=e)&&t&&(n=function(t,n){var e=t.length,r=Za(t,n),i=Pa(t,n),a=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(e,-.2)}(t)),i):n},sample:function(){return t[~~(Ra()*r)]+n*e.sample()},pdf:function(i){for(var a=0,o=0;o<r;++o)a+=e.pdf((i-t[o])/n);return a/n/r},cdf:function(i){for(var a=0,o=0;o<r;++o)a+=e.cdf((i-t[o])/n);return a/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(t)}var Ja=.5*Math.PI/180;function $a(t,n,e,r){e=e||25,r=Math.max(e,r||200);var i=function(n){return[n,t(n)]},a=n[0],o=n[1],u=o-a,c=u/r,s=[i(a)],l=[];if(e===r){for(var f=1;f<r;++f)s.push(i(a+f/e*u));return s.push(i(o)),s}l.push(i(o));for(var h=e;--h>0;)l.push(i(a+h/e*u));for(var d=s[0],p=l[l.length-1],v=1/u,g=function(t,n){for(var e=t,r=t,i=n.length,a=0;a<i;++a){var o=n[a][1];o<e&&(e=o),o>r&&(r=o)}return 1/(r-e)}(d[1],l);p;){var m=i((d[0]+p[0])/2);m[0]-d[0]>=c&&Va(d,m,p,v,g)>Ja?l.push(m):(d=p,s.push(p),l.pop()),p=l[l.length-1]}return s}function Va(t,n,e,r,i){var a=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0])),o=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0]));return Math.abs(a-o)}function Ka(t,n){return Fa(t,.5,n)}function Qa(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);++r<i;)a[r]=t+r*e;return a}function to(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function no(t){var n,e,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==n(r,r))return a;do{var o=i+a>>>1;e(t[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==t.length?(n=wa,e=function(n,e){return wa(t(n),e)},r=function(n,e){return t(n)-e}):(n=t===wa||t===to?t:eo,e=t,r=t),{left:i,center:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=i(t,n,e,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return a>e&&r(t[a-1],n)>-r(t[a],n)?a-1:a},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==n(r,r))return a;do{var o=i+a>>>1;e(t[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function eo(){return 0}var ro=new Date,io=new Date;function ao(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return ao((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return ro.setTime(+n),io.setTime(+r),t(ro),t(io),Math.floor(e(ro,io))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var oo=1e3,uo=6e4,co=60*uo,so=24*co,lo=7*so,fo=ao((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*uo)/so}),(function(t){return t.getDate()-1})),ho=(fo.range,ao((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/so}),(function(t){return t.getUTCDate()-1}))),po=(ho.range,ao((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/so}),(function(t){return Math.floor(t/so)})));po.range;function vo(t){return ao((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*uo)/lo}))}var go=vo(0),mo=vo(1),yo=vo(2),bo=vo(3),xo=vo(4),_o=vo(5),wo=vo(6);go.range,mo.range,yo.range,bo.range,xo.range,_o.range,wo.range;function ko(t){return ao((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/lo}))}var Mo=ko(0),Oo=ko(1),Eo=ko(2),So=ko(3),Do=ko(4),Co=ko(5),Ao=ko(6),To=(Mo.range,Oo.range,Eo.range,So.range,Do.range,Co.range,Ao.range,ao((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));To.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ao((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};To.range;var Fo=ao((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Fo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ao((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};Fo.range;var jo=ao((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Zo=(jo.range,ao((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),No=(Zo.range,ao((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oo-t.getMinutes()*uo)}),(function(t,n){t.setTime(+t+n*co)}),(function(t,n){return(n-t)/co}),(function(t){return t.getHours()}))),zo=(No.range,ao((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*co)}),(function(t,n){return(n-t)/co}),(function(t){return t.getUTCHours()}))),Uo=(zo.range,ao((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oo)}),(function(t,n){t.setTime(+t+n*uo)}),(function(t,n){return(n-t)/uo}),(function(t){return t.getMinutes()}))),Po=(Uo.range,ao((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*uo)}),(function(t,n){return(n-t)/uo}),(function(t){return t.getUTCMinutes()}))),Ro=(Po.range,ao((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*oo)}),(function(t,n){return(n-t)/oo}),(function(t){return t.getUTCSeconds()}))),Lo=(Ro.range,ao((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t})));Lo.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ao((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Lo:null};Lo.range;var Io,Bo,qo,Ho,Wo,Yo,Xo,Go=e(19065),Jo=Math.sqrt(50),$o=Math.sqrt(10),Vo=Math.sqrt(2);function Ko(t,n,e){var r,i,a,o=(n-t)/Math.max(0,e),u=Math.floor(Math.log10(o)),c=o/Math.pow(10,u),s=c>=Jo?10:c>=$o?5:c>=Vo?2:1;return u<0?(a=Math.pow(10,-u)/s,(r=Math.round(t*a))/a<t&&++r,(i=Math.round(n*a))/a>n&&--i,a=-a):(a=Math.pow(10,u)*s,(r=Math.round(t/a))*a<t&&++r,(i=Math.round(n/a))*a>n&&--i),i<r&&.5<=e&&e<2?Ko(t,n,2*e):[r,i,a]}function Qo(t,n,e){if(!((e=+e)>0))return[];if((t=+t)===(n=+n))return[t];var r=n<t,i=r?Ko(n,t,e):Ko(t,n,e),a=(0,Go.Z)(i,3),o=a[0],u=a[1],c=a[2];if(!(u>=o))return[];var s=u-o+1,l=new Array(s);if(r)if(c<0)for(var f=0;f<s;++f)l[f]=(u-f)/-c;else for(var h=0;h<s;++h)l[h]=(u-h)*c;else if(c<0)for(var d=0;d<s;++d)l[d]=(o+d)/-c;else for(var p=0;p<s;++p)l[p]=(o+p)*c;return l}function tu(t,n,e){return Ko(t=+t,n=+n,e=+e)[2]}function nu(t,n,e){e=+e;var r=(n=+n)<(t=+t),i=r?tu(n,t,e):tu(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}var eu="year",ru="quarter",iu="month",au="week",ou="date",uu="day",cu="dayofyear",su="hours",lu="minutes",fu="seconds",hu="milliseconds",du=[eu,ru,iu,au,ou,uu,cu,su,lu,fu,hu],pu=du.reduce((function(t,n,e){return t[n]=1+e,t}),{});function vu(t){var n=(0,g.IX)(t).slice(),e={};return n.length||(0,g.vU)("Missing time unit."),n.forEach((function(t){(0,g.nr)(pu,t)?e[t]=1:(0,g.vU)("Invalid time unit: ".concat(t,"."))})),(e[au]||e[uu]?1:0)+(e[ru]||e[iu]||e[ou]?1:0)+(e[cu]?1:0)>1&&(0,g.vU)("Incompatible time units: ".concat(t)),n.sort((function(t,n){return pu[t]-pu[n]})),n}Io={},(0,nt.Z)(Io,eu,"%Y "),(0,nt.Z)(Io,ru,"Q%q "),(0,nt.Z)(Io,iu,"%b "),(0,nt.Z)(Io,ou,"%d "),(0,nt.Z)(Io,au,"W%U "),(0,nt.Z)(Io,uu,"%a "),(0,nt.Z)(Io,cu,"%j "),(0,nt.Z)(Io,su,"%H:00"),(0,nt.Z)(Io,lu,"00:%M"),(0,nt.Z)(Io,fu,":%S"),(0,nt.Z)(Io,hu,".%L"),(0,nt.Z)(Io,"".concat(eu,"-").concat(iu),"%Y-%m "),(0,nt.Z)(Io,"".concat(eu,"-").concat(iu,"-").concat(ou),"%Y-%m-%d "),(0,nt.Z)(Io,"".concat(su,"-").concat(lu),"%H:%M");var gu=new Date;function mu(t){return gu.setFullYear(t),gu.setMonth(0),gu.setDate(1),gu.setHours(0,0,0,0),gu}function yu(t){return fo.count(mu(t.getFullYear())-1,t)}function bu(t){return go.count(mu(t.getFullYear())-1,t)}function xu(t){return mu(t).getDay()}function _u(t,n,e,r,i,a,o){if(0<=t&&t<100){var u=new Date(-1,n,e,r,i,a,o);return u.setFullYear(t),u}return new Date(t,n,e,r,i,a,o)}function wu(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return ho.count(n-1,t)}function ku(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return Mo.count(n-1,t)}function Mu(t){return gu.setTime(Date.UTC(t,0,1)),gu.getUTCDay()}function Ou(t,n,e,r,i,a,o){if(0<=t&&t<100){var u=new Date(Date.UTC(-1,n,e,r,i,a,o));return u.setUTCFullYear(e.y),u}return new Date(Date.UTC(t,n,e,r,i,a,o))}function Eu(t,n,e,r,i){var a=n||1,o=(0,g.fj)(t),u=function(t,n,i){return function(t,n,e,r){var i=e<=1?t:r?function(n,i){return r+e*Math.floor((t(n,i)-r)/e)}:function(n,r){return e*Math.floor(t(n,r)/e)};return n?function(t,e){return n(i(t,e),e)}:i}(e[i=i||t],r[i],t===o&&a,n)},c=new Date,s=(0,g.Rg)(t),l=s[eu]?u(eu):(0,g.a9)(2012),f=s[iu]?u(iu):s[ru]?u(ru):g.bM,h=s[au]&&s[uu]?u(uu,1,au+uu):s[au]?u(au,1):s[uu]?u(uu,1):s[ou]?u(ou,1):s[cu]?u(cu,1):g.kX,d=s[su]?u(su):g.bM,p=s[lu]?u(lu):g.bM,v=s[fu]?u(fu):g.bM,m=s[hu]?u(hu):g.bM;return function(t){c.setTime(+t);var n=l(c);return i(n,f(c),h(c,n),d(c),p(c),v(c),m(c))}}function Su(t,n,e){return n+7*t-(e+6)%7}var Du=(Bo={},(0,nt.Z)(Bo,eu,(function(t){return t.getFullYear()})),(0,nt.Z)(Bo,ru,(function(t){return Math.floor(t.getMonth()/3)})),(0,nt.Z)(Bo,iu,(function(t){return t.getMonth()})),(0,nt.Z)(Bo,ou,(function(t){return t.getDate()})),(0,nt.Z)(Bo,su,(function(t){return t.getHours()})),(0,nt.Z)(Bo,lu,(function(t){return t.getMinutes()})),(0,nt.Z)(Bo,fu,(function(t){return t.getSeconds()})),(0,nt.Z)(Bo,hu,(function(t){return t.getMilliseconds()})),(0,nt.Z)(Bo,cu,(function(t){return yu(t)})),(0,nt.Z)(Bo,au,(function(t){return bu(t)})),(0,nt.Z)(Bo,au+uu,(function(t,n){return Su(bu(t),t.getDay(),xu(n))})),(0,nt.Z)(Bo,uu,(function(t,n){return Su(1,t.getDay(),xu(n))})),Bo),Cu=(qo={},(0,nt.Z)(qo,ru,(function(t){return 3*t})),(0,nt.Z)(qo,au,(function(t,n){return Su(t,0,xu(n))})),qo);function Au(t,n){return Eu(t,n||1,Du,Cu,_u)}var Tu=(Ho={},(0,nt.Z)(Ho,eu,(function(t){return t.getUTCFullYear()})),(0,nt.Z)(Ho,ru,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,nt.Z)(Ho,iu,(function(t){return t.getUTCMonth()})),(0,nt.Z)(Ho,ou,(function(t){return t.getUTCDate()})),(0,nt.Z)(Ho,su,(function(t){return t.getUTCHours()})),(0,nt.Z)(Ho,lu,(function(t){return t.getUTCMinutes()})),(0,nt.Z)(Ho,fu,(function(t){return t.getUTCSeconds()})),(0,nt.Z)(Ho,hu,(function(t){return t.getUTCMilliseconds()})),(0,nt.Z)(Ho,cu,(function(t){return wu(t)})),(0,nt.Z)(Ho,au,(function(t){return ku(t)})),(0,nt.Z)(Ho,uu,(function(t,n){return Su(1,t.getUTCDay(),Mu(n))})),(0,nt.Z)(Ho,au+uu,(function(t,n){return Su(ku(t),t.getUTCDay(),Mu(n))})),Ho),Fu=(Wo={},(0,nt.Z)(Wo,ru,(function(t){return 3*t})),(0,nt.Z)(Wo,au,(function(t,n){return Su(t,0,Mu(n))})),Wo);function ju(t,n){return Eu(t,n||1,Tu,Fu,Ou)}var Zu=(Yo={},(0,nt.Z)(Yo,eu,To),(0,nt.Z)(Yo,ru,jo.every(3)),(0,nt.Z)(Yo,iu,jo),(0,nt.Z)(Yo,au,go),(0,nt.Z)(Yo,ou,fo),(0,nt.Z)(Yo,uu,fo),(0,nt.Z)(Yo,cu,fo),(0,nt.Z)(Yo,su,No),(0,nt.Z)(Yo,lu,Uo),(0,nt.Z)(Yo,fu,Ro),(0,nt.Z)(Yo,hu,Lo),Yo),Nu=(Xo={},(0,nt.Z)(Xo,eu,Fo),(0,nt.Z)(Xo,ru,Zo.every(3)),(0,nt.Z)(Xo,iu,Zo),(0,nt.Z)(Xo,au,Mo),(0,nt.Z)(Xo,ou,ho),(0,nt.Z)(Xo,uu,ho),(0,nt.Z)(Xo,cu,ho),(0,nt.Z)(Xo,su,zo),(0,nt.Z)(Xo,lu,Po),(0,nt.Z)(Xo,fu,Ro),(0,nt.Z)(Xo,hu,Lo),Xo);function zu(t){return Zu[t]}function Uu(t){return Nu[t]}var Pu=1e3,Ru=6e4,Lu=36e5,Iu=864e5,Bu=2592e6,qu=31536e6,Hu=[eu,iu,ou,su,lu,fu,hu],Wu=Hu.slice(0,-1),Yu=Wu.slice(0,-1),Xu=Yu.slice(0,-1),Gu=Xu.slice(0,-1),Ju=[eu,iu],$u=[eu],Vu=[[Wu,1,Pu],[Wu,5,5e3],[Wu,15,15e3],[Wu,30,3e4],[Yu,1,Ru],[Yu,5,3e5],[Yu,15,9e5],[Yu,30,18e5],[Xu,1,Lu],[Xu,3,108e5],[Xu,6,216e5],[Xu,12,432e5],[Gu,1,Iu],[[eu,au],1,6048e5],[Ju,1,Bu],[Ju,3,7776e6],[$u,1,qu]];function Ku(t){return t&&t.length?1===t.length?t[0]:(n=t,function(t){for(var e=n.length,r=1,i=String(n[0](t));r<e;++r)i+="|"+n[r](t);return i}):function(){return""};var n}function Qu(t,n,e){return e||t+(n?"_"+n:"")}var tc=function(){},nc={init:tc,add:tc,rem:tc,idx:0},ec={values:{init:function(t){return t.cell.store=!0},value:function(t){return t.cell.data.values()},idx:-1},count:{value:function(t){return t.cell.num}},__count__:{value:function(t){return t.missing+t.valid}},missing:{value:function(t){return t.missing}},valid:{value:function(t){return t.valid}},sum:{init:function(t){return t.sum=0},value:function(t){return t.sum},add:function(t,n){return t.sum+=+n},rem:function(t,n){return t.sum-=n}},product:{init:function(t){return t.product=1},value:function(t){return t.valid?t.product:void 0},add:function(t,n){return t.product*=n},rem:function(t,n){return t.product/=n}},mean:{init:function(t){return t.mean=0},value:function(t){return t.valid?t.mean:void 0},add:function(t,n){return t.mean_d=n-t.mean,t.mean+=t.mean_d/t.valid},rem:function(t,n){return t.mean_d=n-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}},average:{value:function(t){return t.valid?t.mean:void 0},req:["mean"],idx:1},variance:{init:function(t){return t.dev=0},value:function(t){return t.valid>1?t.dev/(t.valid-1):void 0},add:function(t,n){return t.dev+=t.mean_d*(n-t.mean)},rem:function(t,n){return t.dev-=t.mean_d*(n-t.mean)},req:["mean"],idx:1},variancep:{value:function(t){return t.valid>1?t.dev/t.valid:void 0},req:["variance"],idx:2},stdev:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(t){return t.valid>1?Math.sqrt(t.dev/t.valid):void 0},req:["variance"],idx:2},stderr:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(t){return t.cell.data.distinct(t.get)},req:["values"],idx:3},ci0:{value:function(t){return t.cell.data.ci0(t.get)},req:["values"],idx:3},ci1:{value:function(t){return t.cell.data.ci1(t.get)},req:["values"],idx:3},median:{value:function(t){return t.cell.data.q2(t.get)},req:["values"],idx:3},q1:{value:function(t){return t.cell.data.q1(t.get)},req:["values"],idx:3},q3:{value:function(t){return t.cell.data.q3(t.get)},req:["values"],idx:3},min:{init:function(t){return t.min=void 0},value:function(t){return t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min},add:function(t,n){(n<t.min||void 0===t.min)&&(t.min=n)},rem:function(t,n){n<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:function(t){return t.max=void 0},value:function(t){return t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max},add:function(t,n){(n>t.max||void 0===t.max)&&(t.max=n)},rem:function(t,n){n>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:function(t){return t.argmin=void 0},value:function(t){return t.argmin||t.cell.data.argmin(t.get)},add:function(t,n,e){n<t.min&&(t.argmin=e)},rem:function(t,n){n<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(t){return t.argmax=void 0},value:function(t){return t.argmax||t.cell.data.argmax(t.get)},add:function(t,n,e){n>t.max&&(t.argmax=e)},rem:function(t,n){n>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},rc=Object.keys(ec);function ic(t,n){return ec[t](n)}function ac(t,n){return t.idx-n.idx}function oc(){var t=this;this.valid=0,this.missing=0,this._ops.forEach((function(n){return n.init(t)}))}function uc(t,n){var e=this;null!=t&&""!==t?t===t&&(++this.valid,this._ops.forEach((function(r){return r.add(e,t,n)}))):++this.missing}function cc(t,n){var e=this;null!=t&&""!==t?t===t&&(--this.valid,this._ops.forEach((function(r){return r.rem(e,t,n)}))):--this.missing}function sc(t){var n=this;return this._out.forEach((function(e){return t[e.out]=e.value(n)})),t}function lc(t,n){var e=n||g.yR,r=function(t){var n={};return t.forEach((function(t){return n[t.name]=t})),t.forEach((function t(e){e.req&&e.req.forEach((function(e){n[e]||t(n[e]=ec[e]())}))})),Object.values(n).sort(ac)}(t),i=t.slice().sort(ac);function a(t){this._ops=r,this._out=i,this.cell=t,this.init()}return a.prototype.init=oc,a.prototype.add=uc,a.prototype.rem=cc,a.prototype.set=sc,a.prototype.get=e,a.fields=t.map((function(t){return t.out})),a}function fc(t){this._key=t?(0,g.EP)(t):ji,this.reset()}rc.forEach((function(t){ec[t]=function(t,n){return function(e){return(0,g.l7)({name:t,out:e||t},nc,n)}}(t,ec[t])}));var hc=fc.prototype;function dc(t){ma.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}hc.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},hc.add=function(t){this._add.push(t)},hc.rem=function(t){this._rem.push(t)},hc.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,n,e,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,c=Array(o-u),s={};for(t=0;t<u;++t)s[a(i[t])]=1;for(t=0,n=0;t<o;++t)s[a(e=r[t])]?s[a(e)]=0:c[n++]=e;return this._rem=[],this._add=c},hc.distinct=function(t){for(var n,e=this.values(),r={},i=e.length,a=0;--i>=0;)n=t(e[i])+"",(0,g.nr)(r,n)||(r[n]=1,++a);return a},hc.extent=function(t){if(this._get!==t||!this._ext){var n=this.values(),e=(0,g.dI)(n,t);this._ext=[n[e[0]],n[e[1]]],this._get=t}return this._ext},hc.argmin=function(t){return this.extent(t)[0]||{}},hc.argmax=function(t){return this.extent(t)[1]||{}},hc.min=function(t){var n=this.extent(t)[0];return null!=n?t(n):void 0},hc.max=function(t){var n=this.extent(t)[1];return null!=n?t(n):void 0},hc.quartile=function(t){return this._get===t&&this._q||(this._q=Pa(this.values(),t),this._get=t),this._q},hc.q1=function(t){return this.quartile(t)[0]},hc.q2=function(t){return this.quartile(t)[1]},hc.q3=function(t){return this.quartile(t)[2]},hc.ci=function(t){return this._get===t&&this._ci||(this._ci=function(t,n,e,r){if(!t.length)return[void 0,void 0];var i,a,o,u,c=Float64Array.from(za(t,r)),s=c.length,l=n;for(o=0,u=Array(l);o<l;++o){for(i=0,a=0;a<s;++a)i+=c[~~(Ra()*s)];u[o]=i/s}return u.sort(wa),[Fa(u,e/2),Fa(u,1-e/2)]}(this.values(),1e3,.05,t),this._get=t),this._ci},hc.ci0=function(t){return this.ci(t)[0]},hc.ci1=function(t){return this.ci(t)[1]},dc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rc},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},(0,g.XW)(dc,ma,{transform:function(t,n){var e=this,r=this,i=n.fork(n.NO_SOURCE|n.NO_FIELDS),a=t.modified();return r.stamp=i.stamp,r.value&&(a||n.modified(r._inputs,!0))?(r._prev=r.value,r.value=a?r.init(t):{},n.visit(n.SOURCE,(function(t){return r.add(t)}))):(r.value=r.value||r.init(t),n.visit(n.REM,(function(t){return r.rem(t)})),n.visit(n.ADD,(function(t){return r.add(t)}))),i.modifies(r._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),n.clean()&&r._drop&&i.clean(!0).runAfter((function(){return e.clean()})),r.changes(i)},cross:function(){var t=this,n=t.value,e=t._dnames,r=e.map((function(){return{}})),i=e.length;function a(t){var n,a,o,u;for(n in t)for(o=t[n].tuple,a=0;a<i;++a)r[a][u=o[e[a]]]=u}a(t._prev),a(n),function a(o,u,c){var s=e[c],l=r[c++];for(var f in l){var h=o?o+"|"+f:f;u[s]=l[f],c<i?a(h,u,c):n[h]||t.cell(h,u)}}("",{},0)},init:function(t){var n=this._inputs=[],e=this._outputs=[],r={};function i(t){for(var e,i=(0,g.IX)((0,g.Oj)(t)),a=i.length,o=0;o<a;++o)r[e=i[o]]||(r[e]=1,n.push(e))}this._dims=(0,g.IX)(t.groupby),this._dnames=this._dims.map((function(t){var n=(0,g.el)(t);return i(t),e.push(n),n})),this.cellkey=t.key?t.key:Ku(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,c,s,l,f=t.fields||[null],h=t.ops||["count"],d=t.as||[],p=f.length,v={};for(p!==h.length&&(0,g.vU)("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)a=f[l],o=h[l],null==a&&"count"!==o&&(0,g.vU)("Null aggregate field specified."),s=Qu(o,c=(0,g.el)(a),d[l]),e.push(s),"count"!==o?((u=v[c])||(i(a),(u=v[c]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(ic(o,s))):this._counts.push(s);return this._measures=this._measures.map((function(t){return lc(t,t.field)})),{}},cellkey:Ku(),cell:function(t,n){var e=this.value[t];return e?0===e.num&&this._drop&&e.stamp<this.stamp?(e.stamp=this.stamp,this._adds[this._alen++]=e):e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e):(e=this.value[t]=this.newcell(t,n),this._adds[this._alen++]=e),e},newcell:function(t,n){var e={key:t,num:0,agg:null,tuple:this.newtuple(n,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,i=r.length;e.agg=Array(i);for(var a=0;a<i;++a)e.agg[a]=new r[a](e)}return e.store&&(e.data=new fc),e},newtuple:function(t,n){for(var e=this._dnames,r=this._dims,i=r.length,a={},o=0;o<i;++o)a[e[o]]=r[o](t);return n?Pi(n.tuple,a):Ni(a)},clean:function(){var t=this.value;for(var n in t)0===t[n].num&&delete t[n]},add:function(t){var n=this.cellkey(t),e=this.cell(n,t);if(e.num+=1,!this._countOnly){e.store&&e.data.add(t);for(var r=e.agg,i=0,a=r.length;i<a;++i)r[i].add(r[i].get(t),t)}},rem:function(t){var n=this.cellkey(t),e=this.cell(n,t);if(e.num-=1,!this._countOnly){e.store&&e.data.rem(t);for(var r=e.agg,i=0,a=r.length;i<a;++i)r[i].rem(r[i].get(t),t)}},celltuple:function(t){var n=t.tuple,e=this._counts;t.store&&t.data.values();for(var r=0,i=e.length;r<i;++r)n[e[r]]=t.num;if(!this._countOnly)for(var a=t.agg,o=0,u=a.length;o<u;++o)a[o].set(n);return n},changes:function(t){var n,e,r,i,a=this._adds,o=this._mods,u=this._prev,c=this._drop,s=t.add,l=t.rem,f=t.mod;if(u)for(e in u)n=u[e],c&&!n.num||l.push(n.tuple);for(r=0,i=this._alen;r<i;++r)s.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(n=o[r]).num&&c?l:f).push(this.celltuple(n)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t}});function pc(t){ma.call(this,null,t)}function vc(t,n,e){var r=t,i=n||[],a=e||[],o={},u=0;return{add:function(t){return a.push(t)},remove:function(t){return o[r(t)]=++u},size:function(){return i.length},data:function(t,n){return u&&(i=i.filter((function(t){return!o[r(t)]})),o={},u=0),n&&t&&i.sort(t),a.length&&(i=t?(0,g.TS)(t,i,a.sort(t)):i.concat(a),a=[]),i}}}function gc(t){ma.call(this,[],t)}function mc(t){Yi.call(this,null,yc,t)}function yc(t){return this.value&&!t.modified()?this.value:(0,g.qu)(t.fields,t.orders)}function bc(t){ma.call(this,null,t)}function xc(t){ma.call(this,null,t)}pc.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},(0,g.XW)(pc,ma,{transform:function(t,n){var e,r=!1!==t.interval,i=this._bins(t),a=i.start,o=i.step,u=t.as||["bin0","bin1"],c=u[0],s=u[1];return e=t.modified()?(n=n.reflow(!0)).SOURCE:n.modified((0,g.Oj)(t.field))?n.ADD_MOD:n.ADD,n.visit(e,r?function(t){var n=i(t);t[c]=n,t[s]=null==n?null:a+o*(1+(n-a)/o)}:function(t){return t[c]=i(t)}),n.modifies(r?u:c)},_bins:function(t){if(this.value&&!t.modified())return this.value;var n,e,r=t.field,i=function(t){var n,e,r,i,a,o,u=t.maxbins||20,c=t.base||10,s=Math.log(c),l=t.divide||[5,2],f=t.extent[0],h=t.extent[1],d=t.span||h-f||Math.abs(f)||1;if(t.step)n=t.step;else if(t.steps){for(i=d/u,a=0,o=t.steps.length;a<o&&t.steps[a]<i;++a);n=t.steps[Math.max(0,a-1)]}else{for(e=Math.ceil(Math.log(u)/s),r=t.minstep||0,n=Math.max(r,Math.pow(c,Math.round(Math.log(d)/s)-e));Math.ceil(d/n)>u;)n*=c;for(a=0,o=l.length;a<o;++a)(i=n/l[a])>=r&&d/i<=u&&(n=i)}var p=(i=Math.log(n))>=0?0:1+~~(-i/s),v=Math.pow(c,-p-1);return(t.nice||void 0===t.nice)&&(f=f<(i=Math.floor(f/n+v)*n)?i-n:i,h=Math.ceil(h/n)*n),{start:f,stop:h===f?f+n:h,step:n}}(t),a=i.step,o=i.start,u=o+Math.ceil((i.stop-o)/a)*a;null!=(n=t.anchor)&&(e=n-(o+a*Math.floor((n-o)/a)),o+=e,u+=e);var c=function(t){var n=(0,g.He)(r(t));return null==n?null:n<o?-1/0:n>u?1/0:(n=Math.max(o,Math.min(n,u-a)),o+a*Math.floor(1e-14+(n-o)/a))};return c.start=o,c.stop=i.stop,c.step=a,this.value=(0,g.ZE)(c,(0,g.Oj)(r),t.name||"bin_"+(0,g.el)(r))}}),gc.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},(0,g.XW)(gc,ma,{transform:function(t,n){var e=n.fork(n.ALL),r=vc(ji,this.value,e.materialize(e.ADD).add),i=t.sort,a=n.changed()||i&&(t.modified("sort")||n.modified(i.fields));return e.visit(e.REM,r.remove),this.modified(a),this.value=e.source=r.data(Ri(i),a),n.source&&n.source.root&&(this.value.root=n.source.root),e}}),(0,g.XW)(mc,Yi),bc.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},(0,g.XW)(bc,ma,{transform:function(t,n){var e=function(n){return function(e){for(var r,i=function(t,n,e){switch(n){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(e)}(u(e),t.case,a)||[],c=0,s=i.length;c<s;++c)o.test(r=i[c])||n(r)}},r=this._parameterCheck(t,n),i=this._counts,a=this._match,o=this._stop,u=t.field,c=t.as||["text","count"],s=e((function(t){return i[t]=1+(i[t]||0)})),l=e((function(t){return i[t]-=1}));return r?n.visit(n.SOURCE,s):(n.visit(n.ADD,s),n.visit(n.REM,l)),this._finish(n,c)},_parameterCheck:function(t,n){var e=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),e=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),e=!0),(t.modified("field")||n.modified(t.field.fields))&&(e=!0),e&&(this._counts={}),e},_finish:function(t,n){var e,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=n[0],c=n[1],s=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(e in a)r=o[e],i=a[e]||0,!r&&i?(o[e]=r=Ni({}),r[u]=e,r[c]=i,s.add.push(r)):0===i?(r&&s.rem.push(r),a[e]=null,o[e]=null):r[c]!==i&&(r[c]=i,s.mod.push(r));return s.modifies(n)}}),xc.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},(0,g.XW)(xc,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE),r=t.as||["a","b"],i=r[0],a=r[1],o=!this.value||n.changed(n.ADD_REM)||t.modified("as")||t.modified("filter"),u=this.value;return o?(u&&(e.rem=u),u=n.materialize(n.SOURCE).source,e.add=this.value=function(t,n,e,r){for(var i,a,o=[],u={},c=t.length,s=0;s<c;++s)for(u[n]=a=t[s],i=0;i<c;++i)u[e]=t[i],r(u)&&(o.push(Ni(u)),(u={})[n]=a);return o}(u,i,a,t.filter||g.yb)):e.mod=u,e.source=this.value,e.modifies(r)}});var _c={kde:Ga,mixture:function(t,n){var e,r=0,i={weights:function(t){return arguments.length?(e=function(t){var n,e=[],i=0;for(n=0;n<r;++n)i+=e[n]=null==t[n]?1:+t[n];for(n=0;n<r;++n)e[n]/=i;return e}(n=t||[]),i):n},distributions:function(e){return arguments.length?(e?(r=e.length,t=e):(r=0,t=[]),i.weights(n)):t},sample:function(){for(var n=Ra(),i=t[r-1],a=e[0],o=0;o<r-1;a+=e[++o])if(n<a){i=t[o];break}return i.sample()},pdf:function(n){for(var i=0,a=0;a<r;++a)i+=e[a]*t[a].pdf(n);return i},cdf:function(n){for(var i=0,a=0;a<r;++a)i+=e[a]*t[a].cdf(n);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(t).weights(n)},normal:Xa,lognormal:function(t,n){var e,r,i={mean:function(t){return arguments.length?(e=t||0,i):e},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return function(t,n){return t=t||0,n=null==n?1:n,Math.exp(t+Ha()*n)}(e,r)},pdf:function(t){return function(t,n,e){if(t<=0)return 0;n=n||0,e=null==e?1:e;var r=(Math.log(t)-n)/e;return Math.exp(-.5*r*r)/(e*Ia*t)}(t,e,r)},cdf:function(t){return function(t,n,e){return Wa(Math.log(t),n,e)}(t,e,r)},icdf:function(t){return function(t,n,e){return Math.exp(Ya(t,n,e))}(t,e,r)}};return i.mean(t).stdev(n)},uniform:function(t,n){var e,r,i={min:function(t){return arguments.length?(e=t||0,i):e},max:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return function(t,n){return null==n&&(n=null==t?1:t,t=0),t+(n-t)*Ra()}(e,r)},pdf:function(t){return function(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=n&&t<=e?1/(e-n):0}(t,e,r)},cdf:function(t){return function(t,n,e){return null==e&&(e=null==n?1:n,n=0),t<n?0:t>e?1:(t-n)/(e-n)}(t,e,r)},icdf:function(t){return function(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=0&&t<=1?n+t*(e-n):NaN}(t,e,r)}};return null==n&&(n=null==t?1:t,t=0),i.min(t).max(n)}},wc="distributions",kc="function",Mc="field";function Oc(t,n){var e=t[kc];(0,g.nr)(_c,e)||(0,g.vU)("Unknown distribution function: "+e);var r=_c[e]();for(var i in t)i===Mc?r.data((t.from||n()).map(t[i])):i===wc?r[i](t[i].map((function(t){return Oc(t,n)}))):typeof r[i]===kc&&r[i](t[i]);return r}function Ec(t){ma.call(this,null,t)}var Sc=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Dc={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Sc},{name:"weights",type:"number",array:!0}]};function Cc(t,n){return t?t.map((function(t,e){return n[e]||(0,g.el)(t)})):null}function Ac(t,n,e){var r,i,a,o,u,c,s=[],l=function(t){return t(o)};if(null==n)s.push(t.map(e));else for(r={},i=0,a=t.length;i<a;++i)o=t[i],(c=r[u=n.map(l)])||(r[u]=c=[],c.dims=u,s.push(c)),c.push(e(o));return s}Ec.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Sc.concat(Dc)},{name:"as",type:"string",array:!0,default:["value","density"]}]},(0,g.XW)(Ec,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||t.modified()){var r=Oc(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(n)),i=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200,o=t.method||"pdf";"pdf"!==o&&"cdf"!==o&&(0,g.vU)("Invalid density method: "+o),t.extent||r.data||(0,g.vU)("Missing density extent parameter."),o=r[o];var u=t.as||["value","density"],c=$a(o,t.extent||(0,g.We)(r.data()),i,a).map((function(t){var n={};return n[u[0]]=t[0],n[u[1]]=t[1],Ni(n)}));this.value&&(e.rem=this.value),this.value=e.add=e.source=c}return e}});function Tc(t){ma.call(this,null,t)}Tc.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function Fc(t){Yi.call(this,null,jc,t),this.modified(!0)}function jc(t){var n=t.expr;return this.value&&!t.modified("expr")?this.value:(0,g.ZE)((function(e){return n(e,t)}),(0,g.Oj)(n),(0,g.el)(n))}function Zc(t){ma.call(this,[void 0,void 0],t)}function Nc(t,n){Yi.call(this,t),this.parent=n,this.count=0}function zc(t){ma.call(this,{},t),this._keys=(0,g.Xr)();var n=this._targets=[];n.active=0,n.forEach=function(t){for(var e=0,r=n.active;e<r;++e)t(n[e],e,n)}}function Uc(t){Yi.call(this,null,Pc,t)}function Pc(t){return this.value&&!t.modified()?this.value:(0,g.kJ)(t.name)?(0,g.IX)(t.name).map((function(t){return(0,g.EP)(t)})):(0,g.EP)(t.name,t.as)}function Rc(t){ma.call(this,(0,g.Xr)(),t)}function Lc(t){ma.call(this,[],t)}function Ic(t){ma.call(this,[],t)}function Bc(t){ma.call(this,null,t)}function qc(t){ma.call(this,[],t)}(0,g.XW)(Tc,ma,{transform:function(t,n){if(this.value&&!t.modified()&&!n.changed())return n;for(var e,r=n.materialize(n.SOURCE).source,i=Ac(n.source,t.groupby,g.yR),a=t.smooth||!1,o=t.field,u=t.step||function(t,n){return(0,g.yP)((0,g.We)(t,n))/30}(r,o),c=Ri((function(t,n){return o(t)-o(n)})),s=t.as||"bin",l=i.length,f=1/0,h=-1/0,d=0;d<l;++d){var p=i[d].sort(c);e=-1;var v,m=(0,_a.Z)(La(p,u,a,o));try{for(m.s();!(v=m.n()).done;){var y=v.value;y<f&&(f=y),y>h&&(h=y),p[++e][s]=y}}catch(b){m.e(b)}finally{m.f()}}return this.value={start:f,stop:h,step:u},n.reflow(!0).modifies(s)}}),(0,g.XW)(Fc,Yi),Zc.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},(0,g.XW)(Zc,ma,{transform:function(t,n){var e=this.value,r=t.field,i=n.changed()||n.modified(r.fields)||t.modified("field"),a=e[0],o=e[1];if((i||null==a)&&(a=1/0,o=-1/0),n.visit(i?n.SOURCE:n.ADD,(function(t){var n=(0,g.He)(r(t));null!=n&&(n<a&&(a=n),n>o&&(o=n))})),!Number.isFinite(a)||!Number.isFinite(o)){var u=(0,g.el)(r);u&&(u=' for field "'.concat(u,'"')),n.dataflow.warn("Infinite extent".concat(u,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]}}),(0,g.XW)(Nc,Yi,{connect:function(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add:function(t){this.count+=1,this.value.add.push(t)},rem:function(t){this.count-=1,this.value.rem.push(t)},mod:function(t){this.value.mod.push(t)},init:function(t){this.value.init(t,t.NO_SOURCE)},evaluate:function(){return this.value}}),(0,g.XW)(zc,ma,{activate:function(t){this._targets[this._targets.active++]=t},subflow:function(t,n,e,r){var i,a,o=this.value,u=(0,g.nr)(o,t)&&o[t];return u?u.value.stamp<e.stamp&&(u.init(e),this.activate(u)):(a=r||(a=this._group[t])&&a.tuple,i=e.dataflow,u=new Nc(e.fork(e.NO_SOURCE),this),i.add(u).connect(n(i,t,a)),o[t]=u,this.activate(u)),u},clean:function(){var t=this.value,n=0;for(var e in t)if(0===t[e].count){var r=t[e].detachSubflow;r&&r(),delete t[e],++n}if(n){var i=this._targets.filter((function(t){return t&&t.count>0}));this.initTargets(i)}},initTargets:function(t){for(var n=this._targets,e=n.length,r=t?t.length:0,i=0;i<r;++i)n[i]=t[i];for(;i<e&&null!=n[i];++i)n[i]=null;n.active=r},transform:function(t,n){var e=this,r=n.dataflow,i=t.key,a=t.subflow,o=this._keys,u=t.modified("key"),c=function(t){return e.subflow(t,a,n)};return this._group=t.group||{},this.initTargets(),n.visit(n.REM,(function(t){var n=ji(t),e=o.get(n);void 0!==e&&(o.delete(n),c(e).rem(t))})),n.visit(n.ADD,(function(t){var n=i(t);o.set(ji(t),n),c(n).add(t)})),u||n.modified(i.fields)?n.visit(n.MOD,(function(t){var n=ji(t),e=o.get(n),r=i(t);e===r?c(r).mod(t):(o.set(n,r),c(e).rem(t),c(r).add(t))})):n.changed(n.MOD)&&n.visit(n.MOD,(function(t){c(o.get(ji(t))).mod(t)})),u&&n.visit(n.REFLOW,(function(t){var n=ji(t),e=o.get(n),r=i(t);e!==r&&(o.set(n,r),c(e).rem(t),c(r).add(t))})),n.clean()?r.runAfter((function(){e.clean(),o.clean()})):o.empty>r.cleanThreshold&&r.runAfter(o.clean),n}}),(0,g.XW)(Uc,Yi),Rc.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},(0,g.XW)(Rc,ma,{transform:function(t,n){var e=n.dataflow,r=this.value,i=n.fork(),a=i.add,o=i.rem,u=i.mod,c=t.expr,s=!0;function l(n){var e=ji(n),i=c(n,t),l=r.get(e);i&&l?(r.delete(e),a.push(n)):i||l?s&&i&&!l&&u.push(n):(r.set(e,1),o.push(n))}return n.visit(n.REM,(function(t){var n=ji(t);r.has(n)?r.delete(n):o.push(t)})),n.visit(n.ADD,(function(n){c(n,t)?a.push(n):r.set(ji(n),1)})),n.visit(n.MOD,l),t.modified()&&(s=!1,n.visit(n.REFLOW,l)),r.empty>e.cleanThreshold&&e.runAfter(r.clean),i}}),Lc.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},(0,g.XW)(Lc,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE),r=t.fields,i=Cc(r,t.as||[]),a=t.index||null,o=i.length;return e.rem=this.value,n.visit(n.SOURCE,(function(t){for(var n,u,c,s=r.map((function(n){return n(t)})),l=s.reduce((function(t,n){return Math.max(t,n.length)}),0),f=0;f<l;++f){for(u=zi(t),n=0;n<o;++n)u[i[n]]=null==(c=s[n][f])?null:c;a&&(u[a]=f),e.add.push(u)}})),this.value=e.source=e.add,a&&e.modifies(a),e.modifies(i)}}),Ic.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},(0,g.XW)(Ic,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE),r=t.fields,i=r.map(g.el),a=t.as||["key","value"],o=a[0],u=a[1],c=r.length;return e.rem=this.value,n.visit(n.SOURCE,(function(t){for(var n,a=0;a<c;++a)(n=zi(t))[o]=i[a],n[u]=r[a](t),e.add.push(n)})),this.value=e.source=e.add,e.modifies(a)}}),Bc.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},(0,g.XW)(Bc,ma,{transform:function(t,n){var e=t.expr,r=t.as,i=t.modified(),a=t.initonly?n.ADD:i?n.SOURCE:n.modified(e.fields)||n.modified(r)?n.ADD_MOD:n.ADD;return i&&(n=n.materialize().reflow(!0)),t.initonly||n.modifies(r),n.visit(a,(function(n){return n[r]=e(n,t)}))}}),(0,g.XW)(qc,ma,{transform:function(t,n){var e,r,i,a=n.fork(n.ALL),o=t.generator,u=this.value,c=t.size-u.length;if(c>0){for(e=[];--c>=0;)e.push(i=Ni(o(t))),u.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(e):e}else r=u.slice(0,-c),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,u=u.slice(-c);return a.source=this.value=u,a}});var Hc={value:"value",median:Ka,mean:function(t,n){var e=0,r=0;if(void 0===n){var i,a=(0,_a.Z)(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(o=+o)>=o&&(++e,r+=o)}}catch(f){a.e(f)}finally{a.f()}}else{var u,c=-1,s=(0,_a.Z)(t);try{for(s.s();!(u=s.n()).done;){var l=u.value;null!=(l=n(l,++c,t))&&(l=+l)>=l&&(++e,r+=l)}}catch(f){s.e(f)}finally{s.f()}}if(e)return r/e},min:Ma,max:ka},Wc=[];function Yc(t){ma.call(this,[],t)}function Xc(t){dc.call(this,t)}function Gc(t){ma.call(this,null,t)}function Jc(t){Yi.call(this,null,$c,t)}function $c(t){return this.value&&!t.modified()?this.value:(0,g.Jy)(t.fields,t.flat)}function Vc(t){ma.call(this,[],t),this._pending=null}function Kc(t,n,e){e.forEach(Ni);var r=n.fork(n.NO_FIELDS&n.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=e,t._pending=null,r.rem.length&&r.clean(!0),r}function Qc(t){ma.call(this,{},t)}function ts(t){Yi.call(this,null,ns,t)}function ns(t){if(this.value&&!t.modified())return this.value;var n,e,r=t.extents,i=r.length,a=1/0,o=-1/0;for(n=0;n<i;++n)(e=r[n])[0]<a&&(a=e[0]),e[1]>o&&(o=e[1]);return[a,o]}function es(t){Yi.call(this,null,rs,t)}function rs(t){return this.value&&!t.modified()?this.value:t.values.reduce((function(t,n){return t.concat(n)}),[])}function is(t){ma.call(this,null,t)}function as(t){dc.call(this,t)}function os(t){zc.call(this,t)}function us(t){ma.call(this,null,t)}function cs(t){ma.call(this,null,t)}function ss(t){ma.call(this,null,t)}Yc.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},(0,g.XW)(Yc,ma,{transform:function(t,n){var e,r,i,a,o,u,c,s,l,f,h=n.fork(n.ALL),d=function(t){var n,e=t.method||Hc.value;if(null!=Hc[e])return e===Hc.value?(n=void 0!==t.value?t.value:0,function(){return n}):Hc[e];(0,g.vU)("Unrecognized imputation method: "+e)}(t),p=function(t){var n=t.field;return function(t){return t?n(t):NaN}}(t),v=(0,g.el)(t.field),m=(0,g.el)(t.key),y=(t.groupby||[]).map(g.el),b=function(t,n,e,r){var i,a,o,u,c,s,l,f,h=function(t){return t(f)},d=[],p=r?r.slice():[],v={},g={};for(p.forEach((function(t,n){return v[t]=n+1})),u=0,l=t.length;u<l;++u)s=e(f=t[u]),c=v[s]||(v[s]=p.push(s)),(o=g[a=(i=n?n.map(h):Wc)+""])||(o=g[a]=[],d.push(o),o.values=i),o[c-1]=f;return d.domain=p,d}(n.source,t.groupby,t.key,t.keyvals),x=[],_=this.value,w=b.domain.length;for(o=0,s=b.length;o<s;++o)for(i=(e=b[o]).values,r=NaN,c=0;c<w;++c)if(null==e[c]){for(a=b.domain[c],f={_impute:!0},u=0,l=i.length;u<l;++u)f[y[u]]=i[u];f[m]=a,f[v]=Number.isNaN(r)?r=d(e,p):r,x.push(Ni(f))}return x.length&&(h.add=h.materialize(h.ADD).add.concat(x)),_.length&&(h.rem=h.materialize(h.REM).rem.concat(_)),this.value=x,h}}),Xc.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:rc},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},(0,g.XW)(Xc,dc,{transform:function(t,n){var e,r=this,i=t.modified();return r.value&&(i||n.modified(r._inputs,!0))?(e=r.value=i?r.init(t):{},n.visit(n.SOURCE,(function(t){return r.add(t)}))):(e=r.value=r.value||this.init(t),n.visit(n.REM,(function(t){return r.rem(t)})),n.visit(n.ADD,(function(t){return r.add(t)}))),r.changes(),n.visit(n.SOURCE,(function(t){(0,g.l7)(t,e[r.cellkey(t)].tuple)})),n.reflow(i).modifies(this._outputs)},changes:function(){var t,n,e=this._adds,r=this._mods;for(t=0,n=this._alen;t<n;++t)this.celltuple(e[t]),e[t]=null;for(t=0,n=this._mlen;t<n;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0}}),Gc.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},(0,g.XW)(Gc,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||t.modified()){var r=n.materialize(n.SOURCE).source,i=Ac(r,t.groupby,t.field),a=(t.groupby||[]).map(g.el),o=t.bandwidth,u=t.cumulative?"cdf":"pdf",c=t.as||["value","density"],s=[],l=t.extent,f=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;"pdf"!==u&&"cdf"!==u&&(0,g.vU)("Invalid density method: "+u),"shared"===t.resolve&&(l||(l=(0,g.We)(r,t.field)),f=h=t.steps||h),i.forEach((function(n){var e=Ga(n,o)[u],r=t.counts?n.length:1;$a(e,l||(0,g.We)(n),f,h).forEach((function(t){for(var e={},i=0;i<a.length;++i)e[a[i]]=n.dims[i];e[c[0]]=t[0],e[c[1]]=t[1]*r,s.push(Ni(e))}))})),this.value&&(e.rem=this.value),this.value=e.add=e.source=s}return e}}),(0,g.XW)(Jc,Yi),(0,g.XW)(Vc,ma,{transform:function(t,n){var e=this,r=n.dataflow;if(this._pending)return Kc(this,n,this._pending);if(function(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}(t))return n.StopPropagation;if(t.values)return Kc(this,n,r.parse(t.values,t.format));if(t.async){var i=r.request(t.url,t.format).then((function(t){return e._pending=(0,g.IX)(t.data),function(t){return t.touch(e)}}));return{async:i}}return r.request(t.url,t.format).then((function(t){return Kc(e,n,(0,g.IX)(t.data))}))}}),Qc.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},(0,g.XW)(Qc,ma,{transform:function(t,n){var e,r,i,a=t.fields,o=t.index,u=t.values,c=null==t.default?null:t.default,s=t.modified(),l=a.length,f=s?n.SOURCE:n.ADD,h=n,d=t.as;return u?(r=u.length,l>1&&!d&&(0,g.vU)('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*r&&(0,g.vU)('The "as" parameter has too few output field names.'),d=d||u.map(g.el),e=function(t){for(var n,e,i=0,s=0;i<l;++i)if(null==(e=o.get(a[i](t))))for(n=0;n<r;++n,++s)t[d[s]]=c;else for(n=0;n<r;++n,++s)t[d[s]]=u[n](e)}):(d||(0,g.vU)("Missing output field names."),e=function(t){for(var n,e=0;e<l;++e)n=o.get(a[e](t)),t[d[e]]=null==n?c:n}),s?h=n.reflow(!0):(i=a.some((function(t){return n.modified(t.fields)})),f|=i?n.MOD:0),n.visit(f,e),h.modifies(d)}}),(0,g.XW)(ts,Yi),(0,g.XW)(es,Yi),(0,g.XW)(is,ma,{transform:function(t,n){return this.modified(t.modified()),this.value=t,n.fork(n.NO_SOURCE|n.NO_FIELDS)}}),as.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:rc,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},(0,g.XW)(as,dc,{_transform:dc.prototype.transform,transform:function(t,n){return this._transform(function(t,n){var e=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",a=(0,g.Oj)(e).concat((0,g.Oj)(r)),o=function(t,n,e){var r={},i=[];return e.visit(e.SOURCE,(function(n){var e=t(n);r[e]||(r[e]=1,i.push(e))})),i.sort(g.j2),n?i.slice(0,n):i}(e,t.limit||0,n);n.changed()&&t.set("__pivot__",null,null,!0);return{key:t.key,groupby:t.groupby,ops:o.map((function(){return i})),fields:o.map((function(t){return function(t,n,e,r){return(0,g.ZE)((function(r){return n(r)===t?e(r):NaN}),r,t+"")}(t,e,r,a)})),as:o.map((function(t){return t+""})),modified:t.modified.bind(t)}}(t,n),n)}}),(0,g.XW)(os,zc,{transform:function(t,n){var e=this,r=t.subflow,i=t.field,a=function(t){return e.subflow(ji(t),r,n,t)};return(t.modified("field")||i&&n.modified((0,g.Oj)(i)))&&(0,g.vU)("PreFacet does not support field modification."),this.initTargets(),i?(n.visit(n.MOD,(function(t){var n=a(t);i(t).forEach((function(t){return n.mod(t)}))})),n.visit(n.ADD,(function(t){var n=a(t);i(t).forEach((function(t){return n.add(Ni(t))}))})),n.visit(n.REM,(function(t){var n=a(t);i(t).forEach((function(t){return n.rem(t)}))}))):(n.visit(n.MOD,(function(t){return a(t).mod(t)})),n.visit(n.ADD,(function(t){return a(t).add(t)})),n.visit(n.REM,(function(t){return a(t).rem(t)}))),n.clean()&&n.runAfter((function(){return e.clean()})),n}}),us.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},(0,g.XW)(us,ma,{transform:function(t,n){var e,r=n.fork(n.NO_SOURCE),i=t.fields,a=Cc(t.fields,t.as||[]),o=i?function(t,n){return function(t,n,e,r){for(var i=0,a=e.length;i<a;++i)n[r[i]]=e[i](t);return n}(t,n,i,a)}:Ui;return this.value?e=this.value:(n=n.addAll(),e=this.value={}),n.visit(n.REM,(function(t){var n=ji(t);r.rem.push(e[n]),e[n]=null})),n.visit(n.ADD,(function(t){var n=o(t,Ni({}));e[ji(t)]=n,r.add.push(n)})),n.visit(n.MOD,(function(t){r.mod.push(o(t,e[ji(t)]))})),r}}),(0,g.XW)(cs,ma,{transform:function(t,n){return this.value=t.value,t.modified("value")?n.fork(n.NO_SOURCE|n.NO_FIELDS):n.StopPropagation}}),ss.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function ls(t){ma.call(this,null,t)}function fs(t){ma.call(this,[],t),this.count=0}function hs(t){ma.call(this,null,t)}function ds(t){ma.call(this,null,t),this.modified(!0)}function ps(t){ma.call(this,null,t)}(0,g.XW)(ss,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!n.changed())return e.source=this.value,e;var i=Ac(n.materialize(n.SOURCE).source,t.groupby,t.field),a=(t.groupby||[]).map(g.el),o=[],u=t.step||.01,c=t.probs||Qa(u/2,1-1e-14,u),s=c.length;return i.forEach((function(t){for(var n=Ua(t,c),e=0;e<s;++e){for(var i={},u=0;u<a.length;++u)i[a[u]]=t.dims[u];i[r[0]]=c[e],i[r[1]]=n[e],o.push(Ni(i))}})),this.value&&(e.rem=this.value),this.value=e.add=e.source=o,e}}),(0,g.XW)(ls,ma,{transform:function(t,n){var e,r;return this.value?r=this.value:(e=n=n.addAll(),r=this.value={}),t.derive&&(e=n.fork(n.NO_SOURCE),n.visit(n.REM,(function(t){var n=ji(t);e.rem.push(r[n]),r[n]=null})),n.visit(n.ADD,(function(t){var n=zi(t);r[ji(t)]=n,e.add.push(n)})),n.visit(n.MOD,(function(t){var n=r[ji(t)];for(var i in t)n[i]=t[i],e.modifies(i);e.mod.push(n)}))),e}}),fs.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},(0,g.XW)(fs,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE),r=t.modified("size"),i=t.size,a=this.value.reduce((function(t,n){return t[ji(n)]=1,t}),{}),o=this.value,u=this.count,c=0;function s(t){var n,r;o.length<i?o.push(t):(r=~~((u+1)*Ra()))<o.length&&r>=c&&(n=o[r],a[ji(n)]&&e.rem.push(n),o[r]=t),++u}if(n.rem.length&&(n.visit(n.REM,(function(t){var n=ji(t);a[n]&&(a[n]=-1,e.rem.push(t)),--u})),o=o.filter((function(t){return-1!==a[ji(t)]}))),(n.rem.length||r)&&o.length<i&&n.source&&(c=u=o.length,n.visit(n.SOURCE,(function(t){a[ji(t)]||s(t)})),c=-1),r&&o.length>i){for(var l=o.length-i,f=0;f<l;++f)a[ji(o[f])]=-1,e.rem.push(o[f]);o=o.slice(l)}return n.mod.length&&n.visit(n.MOD,(function(t){a[ji(t)]&&e.mod.push(t)})),n.add.length&&n.visit(n.ADD,s),(n.add.length||c<0)&&(e.add=o.filter((function(t){return!a[ji(t)]}))),this.count=u,this.value=e.source=o,e}}),hs.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},(0,g.XW)(hs,ma,{transform:function(t,n){if(!this.value||t.modified()){var e=n.materialize().fork(n.MOD),r=t.as||"data";return e.rem=this.value?n.rem.concat(this.value):n.rem,this.value=Qa(t.start,t.stop,t.step||1).map((function(t){var n={};return n[r]=t,Ni(n)})),e.add=n.add.concat(this.value),e}}}),(0,g.XW)(ds,ma,{transform:function(t,n){return this.value=n.source,n.changed()?n.fork(n.NO_SOURCE|n.NO_FIELDS):n.StopPropagation}});var vs=["unit0","unit1"];function gs(t){ma.call(this,(0,g.Xr)(),t)}function ms(t){ma.call(this,null,t)}ps.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:du,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vs}]},(0,g.XW)(ps,ma,{transform:function(t,n){var e=t.field,r=!1!==t.interval,i="utc"===t.timezone,a=this._floor(t,n),o=(i?Uu:zu)(a.unit).offset,u=t.as||vs,c=u[0],s=u[1],l=a.step,f=a.start||1/0,h=a.stop||-1/0,d=n.ADD;return(t.modified()||n.changed(n.REM)||n.modified((0,g.Oj)(e)))&&(d=(n=n.reflow(!0)).SOURCE,f=1/0,h=-1/0),n.visit(d,(function(t){var n,i,u=e(t);null==u?(t[c]=null,r&&(t[s]=null)):(t[c]=n=i=a(u),r&&(t[s]=i=o(n,l)),n<f&&(f=n),i>h&&(h=i))})),a.start=f,a.stop=h,n.modifies(r?u:c)},_floor:function(t,n){var e="utc"===t.timezone,r=t.units?{units:t.units,step:t.step||1}:function(t){var n,e,r=t.extent,i=t.maxbins||40,a=Math.abs((0,g.yP)(r))/i,o=no((function(t){return t[2]})).right(Vu,a);return o===Vu.length?(n=$u,e=nu(r[0]/qu,r[1]/qu,i)):o?(n=(o=Vu[a/Vu[o-1][2]<Vu[o][2]/a?o-1:o])[0],e=o[1]):(n=Hu,e=Math.max(nu(r[0],r[1],i),1)),{units:n,step:e}}({extent:t.extent||(0,g.We)(n.materialize(n.SOURCE).source,t.field),maxbins:t.maxbins}),i=r.units,a=r.step,o=vu(i),u=this.value||{},c=(e?ju:Au)(o,a);return c.unit=(0,g.fj)(o),c.units=o,c.step=a,c.start=u.start,c.stop=u.stop,this.value=c}}),(0,g.XW)(gs,ma,{transform:function(t,n){var e=n.dataflow,r=t.field,i=this.value,a=function(t){return i.set(r(t),t)},o=!0;return t.modified("field")||n.modified(r.fields)?(i.clear(),n.visit(n.SOURCE,a)):n.changed()?(n.visit(n.REM,(function(t){return i.delete(r(t))})),n.visit(n.ADD,a)):o=!1,this.modified(o),i.empty>e.cleanThreshold&&e.runAfter(i.clean),n.fork()}}),(0,g.XW)(ms,ma,{transform:function(t,n){(!this.value||t.modified("field")||t.modified("sort")||n.changed()||t.sort&&n.modified(t.sort.fields))&&(this.value=(t.sort?n.source.slice().sort(Ri(t.sort)):n.source).map(t.field))}});var ys={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){return t=1},next:function(n){var e=n.index,r=n.data;return e&&n.compare(r[e-1],r[e])?t=e+1:t}}},dense_rank:function(){var t;return{init:function(){return t=1},next:function(n){var e=n.index,r=n.data;return e&&n.compare(r[e-1],r[e])?++t:t}}},percent_rank:function(){var t=ys.rank(),n=t.next;return{init:t.init,next:function(t){return(n(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){return t=0},next:function(n){var e=n.data,r=n.compare,i=n.index;if(t<i){for(;i+1<e.length&&!r(e[i],e[i+1]);)++i;t=i}return(1+t)/e.length}}},ntile:function(t,n){(n=+n)>0||(0,g.vU)("ntile num must be greater than zero.");var e=ys.cume_dist(),r=e.next;return{init:e.init,next:function(t){return Math.ceil(n*r(t))}}},lag:function(t,n){return n=+n||1,{next:function(e){var r=e.index-n;return r>=0?t(e.data[r]):null}}},lead:function(t,n){return n=+n||1,{next:function(e){var r=e.index+n,i=e.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(n){return t(n.data[n.i0])}}},last_value:function(t){return{next:function(n){return t(n.data[n.i1-1])}}},nth_value:function(t,n){return(n=+n)>0||(0,g.vU)("nth_value nth must be greater than zero."),{next:function(e){var r=e.i0+(n-1);return r<e.i1?t(e.data[r]):null}}},prev_value:function(t){var n;return{init:function(){return n=null},next:function(e){var r=t(e.data[e.index]);return null!=r?n=r:n}}},next_value:function(t){var n,e;return{init:function(){return n=null,e=-1},next:function(r){var i=r.data;return r.index<=e?n:(e=function(t,n,e){for(var r=n.length;e<r;++e){if(null!=t(n[e]))return e}return-1}(t,i,r.index))<0?(e=i.length,n=null):n=t(i[e])}}}};var bs=Object.keys(ys);function xs(t){var n=(0,g.IX)(t.ops),e=(0,g.IX)(t.fields),r=(0,g.IX)(t.params),i=(0,g.IX)(t.as),a=this.outputs=[],o=this.windows=[],u={},c={},s=[],l=[],f=!0;function h(t){(0,g.IX)((0,g.Oj)(t)).forEach((function(t){return u[t]=1}))}h(t.sort),n.forEach((function(t,n){var u=e[n],d=(0,g.el)(u),p=Qu(t,d,i[n]);if(h(u),a.push(p),(0,g.nr)(ys,t))o.push(function(t,n,e,r){var i=ys[t](n,e);return{init:i.init||g.bM,update:function(t,n){n[r]=i.next(t)}}}(t,e[n],r[n],p));else{if(null==u&&"count"!==t&&(0,g.vU)("Null aggregate field specified."),"count"===t)return void s.push(p);f=!1;var v=c[d];v||((v=c[d]=[]).field=u,l.push(v)),v.push(ic(t,p))}})),(s.length||l.length)&&(this.cell=function(t,n,e){t=t.map((function(t){return lc(t,t.field)}));var r={num:0,agg:null,store:!1,count:n};if(!e)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var u=r.data=new fc;return r.add=function(t){if(r.num+=1,!e){u&&u.add(t);for(var n=0;n<i;++n)a[n].add(a[n].get(t),t)}},r.rem=function(t){if(r.num-=1,!e){u&&u.rem(t);for(var n=0;n<i;++n)a[n].rem(a[n].get(t),t)}},r.set=function(t){var i,o;for(u&&u.values(),i=0,o=n.length;i<o;++i)t[n[i]]=r.num;if(!e)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,u&&u.reset();for(var t=0;t<i;++t)a[t].init()},r}(l,s,f)),this.inputs=Object.keys(u)}var _s=xs.prototype;function ws(t){ma.call(this,{},t),this._mlen=0,this._mods=[]}function ks(t,n,e,r){var i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],u=t.data(e),c=u.length,s=a?no(i):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:i||(0,g.a9)(-1)};n.init();for(var f=0;f<c;++f)Ms(l,o,f,c),a&&Os(l,s),n.update(l,u[f])}function Ms(t,n,e,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==n[0]?0:Math.max(0,e-Math.abs(n[0])),t.i1=null==n[1]?r:Math.min(r,e+Math.abs(n[1])+1),t.index=e}function Os(t,n){var e=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;e>0&&!i(a[e],a[e-1])&&(t.i0=n.left(a,a[e])),r<o&&!i(a[r],a[r+1])&&(t.i1=n.right(a,a[r]))}function Es(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Ss(t){this._context=t}function Ds(){}function Cs(t){this._context=t}function As(t){this._context=t}function Ts(t,n){this._basis=new Ss(t),this._beta=n}_s.init=function(){this.windows.forEach((function(t){return t.init()})),this.cell&&this.cell.init()},_s.update=function(t,n){var e,r=this.cell,i=this.windows,a=t.data,o=i&&i.length;if(r){for(e=t.p0;e<t.i0;++e)r.rem(a[e]);for(e=t.p1;e<t.i1;++e)r.add(a[e]);r.set(n)}for(e=0;e<o;++e)i[e].update(t,n)},ws.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bs.concat(rc)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},(0,g.XW)(ws,ma,{transform:function(t,n){var e=this;this.stamp=n.stamp;var r=t.modified(),i=Ri(t.sort),a=Ku(t.groupby),o=function(t){return e.group(a(t))},u=this.state;u&&!r||(u=this.state=new xs(t)),r||n.modified(u.inputs)?(this.value={},n.visit(n.SOURCE,(function(t){return o(t).add(t)}))):(n.visit(n.REM,(function(t){return o(t).remove(t)})),n.visit(n.ADD,(function(t){return o(t).add(t)})));for(var c=0,s=this._mlen;c<s;++c)ks(this._mods[c],u,i,t);return this._mlen=0,this._mods=[],n.reflow(r).modifies(u.outputs)},group:function(t){var n=this.value[t];return n||(n=this.value[t]=vc(ji),n.stamp=-1),n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n),n}}),Ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Es(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Es(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Cs.prototype={areaStart:Ds,areaEnd:Ds,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Es(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Es(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Ts.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],a=n[0],o=t[e]-i,u=n[e]-a,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*o),this._beta*n[c]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var Fs=function t(n){function e(t){return 1===n?new Ss(t):new Ts(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function js(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Zs(t,n){this._context=t,this._k=(1-n)/6}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:js(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:js(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Ns=function t(n){function e(t){return new Zs(t,n)}return e.tension=function(n){return t(+n)},e}(0);function zs(t,n){this._context=t,this._k=(1-n)/6}zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:js(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Us=function t(n){function e(t){return new zs(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Ps(t,n){this._context=t,this._k=(1-n)/6}Ps.prototype={areaStart:Ds,areaEnd:Ds,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:js(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Rs=function t(n){function e(t){return new Ps(t,n)}return e.tension=function(n){return t(+n)},e}(0),Ls=Math.abs,Is=Math.atan2,Bs=Math.cos,qs=Math.max,Hs=Math.min,Ws=Math.sin,Ys=Math.sqrt,Xs=1e-12,Gs=Math.PI,Js=Gs/2,$s=2*Gs;function Vs(t){return t>=1?Js:t<=-1?-Js:Math.asin(t)}function Ks(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Xs){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Xs){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-n*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Qs(t,n){this._context=t,this._alpha=n}Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ks(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var tl=function t(n){function e(t){return n?new Qs(t,n):new Zs(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function nl(t,n){this._context=t,this._alpha=n}nl.prototype={areaStart:Ds,areaEnd:Ds,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ks(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var el=function t(n){function e(t){return n?new nl(t,n):new Ps(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function rl(t,n){this._context=t,this._alpha=n}rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ks(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var il=function t(n){function e(t){return n?new rl(t,n):new zs(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function al(t){this._context=t}function ol(t){return new al(t)}function ul(t){this._context=t}function cl(t){return t<0?-1:1}function sl(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(cl(a)+cl(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function ll(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function fl(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*n,a-u,o-u*e,a,o)}function hl(t){this._context=t}function dl(t){this._context=new pl(t)}function pl(t){this._context=t}function vl(t){this._context=t}function gl(t){var n,e,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/a[n-1],a[n]-=e,o[n]-=e*o[n-1];for(i[r-1]=o[r-1]/a[r-1],n=r-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function ml(t,n){this._context=t,this._t=n}al.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},ul.prototype={areaStart:Ds,areaEnd:Ds,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fl(this,this._t0,ll(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,fl(this,ll(this,e=sl(this,t,n)),e);break;default:fl(this,this._t0,e=sl(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(dl.prototype=Object.create(hl.prototype)).point=function(t,n){hl.prototype.point.call(this,n,t)},pl.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}},vl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=gl(t),i=gl(n),a=0,o=1;o<e;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},ml.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var yl=Math.PI,bl=2*yl,xl=1e-6,_l=bl-xl;function wl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function kl(){return new wl}wl.prototype=kl.prototype={constructor:wl,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,u=e-t,c=r-n,s=a-t,l=o-n,f=s*s+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>xl)if(Math.abs(l*u-c*s)>xl&&i){var h=e-a,d=r-o,p=u*u+c*c,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((yl-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>xl&&(this._+="L"+(t+b*s)+","+(n+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>s*d)+","+(this._x1=t+x*u)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,a){t=+t,n=+n,a=!!a;var o=(e=+e)*Math.cos(r),u=e*Math.sin(r),c=t+o,s=n+u,l=1^a,f=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+s:(Math.abs(this._x1-c)>xl||Math.abs(this._y1-s)>xl)&&(this._+="L"+c+","+s),e&&(f<0&&(f=f%bl+bl),f>_l?this._+="A"+e+","+e+",0,1,"+l+","+(t-o)+","+(n-u)+"A"+e+","+e+",0,1,"+l+","+(this._x1=c)+","+(this._y1=s):f>xl&&(this._+="A"+e+","+e+",0,"+ +(f>=yl)+","+l+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var Ml=kl;function Ol(t){return function(){return t}}function El(t){return t.innerRadius}function Sl(t){return t.outerRadius}function Dl(t){return t.startAngle}function Cl(t){return t.endAngle}function Al(t){return t&&t.padAngle}function Tl(t,n,e,r,i,a,o){var u=t-e,c=n-r,s=(o?a:-a)/Ys(u*u+c*c),l=s*c,f=-s*u,h=t+l,d=n+f,p=e+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,_=i-a,w=h*v-p*d,k=(b<0?-1:1)*Ys(qs(0,_*_*x-w*w)),M=(w*b-y*k)/x,O=(-w*y-b*k)/x,E=(w*b+y*k)/x,S=(-w*y+b*k)/x,D=M-g,C=O-m,A=E-g,T=S-m;return D*D+C*C>A*A+T*T&&(M=E,O=S),{cx:M,cy:O,x01:-l,y01:-f,x11:M*(i/_-1),y11:O*(i/_-1)}}Array.prototype.slice;function Fl(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function jl(t){return t[0]}function Zl(t){return t[1]}function Nl(t,n){var e=Ol(!0),r=null,i=ol,a=null;function o(o){var u,c,s,l=(o=Fl(o)).length,f=!1;for(null==r&&(a=i(s=Ml())),u=0;u<=l;++u)!(u<l&&e(c=o[u],u,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,u,o),+n(c,u,o));if(s)return a=null,s+""||null}return t="function"===typeof t?t:void 0===t?jl:Ol(t),n="function"===typeof n?n:void 0===n?Zl:Ol(n),o.x=function(n){return arguments.length?(t="function"===typeof n?n:Ol(+n),o):t},o.y=function(t){return arguments.length?(n="function"===typeof t?t:Ol(+t),o):n},o.defined=function(t){return arguments.length?(e="function"===typeof t?t:Ol(!!t),o):e},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o}function zl(t,n,e){var r=null,i=Ol(!0),a=null,o=ol,u=null;function c(c){var s,l,f,h,d,p=(c=Fl(c)).length,v=!1,g=new Array(p),m=new Array(p);for(null==a&&(u=o(d=Ml())),s=0;s<=p;++s){if(!(s<p&&i(h=c[s],s,c))===v)if(v=!v)l=s,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=s-1;f>=l;--f)u.point(g[f],m[f]);u.lineEnd(),u.areaEnd()}v&&(g[s]=+t(h,s,c),m[s]=+n(h,s,c),u.point(r?+r(h,s,c):g[s],e?+e(h,s,c):m[s]))}if(d)return u=null,d+""||null}function s(){return Nl().defined(i).curve(o).context(a)}return t="function"===typeof t?t:void 0===t?jl:Ol(+t),n="function"===typeof n?n:Ol(void 0===n?0:+n),e="function"===typeof e?e:void 0===e?Zl:Ol(+e),c.x=function(n){return arguments.length?(t="function"===typeof n?n:Ol(+n),r=null,c):t},c.x0=function(n){return arguments.length?(t="function"===typeof n?n:Ol(+n),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Ol(+t),c):r},c.y=function(t){return arguments.length?(n="function"===typeof t?t:Ol(+t),e=null,c):n},c.y0=function(t){return arguments.length?(n="function"===typeof t?t:Ol(+t),c):n},c.y1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:Ol(+t),c):e},c.lineX0=c.lineY0=function(){return s().x(t).y(n)},c.lineY1=function(){return s().x(t).y(e)},c.lineX1=function(){return s().x(r).y(n)},c.defined=function(t){return arguments.length?(i="function"===typeof t?t:Ol(!!t),c):i},c.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),c):a},c}var Ul={draw:function(t,n){var e=Math.sqrt(n/Gs);t.moveTo(e,0),t.arc(0,0,e,0,$s)}},Pl=(Math.sqrt(1/3),Math.sin(Gs/10)/Math.sin(7*Gs/10));Math.sin($s/10),Math.cos($s/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function Rl(t,n){if("undefined"!==typeof document&&document.createElement){var e=document.createElement("canvas");if(e&&e.getContext)return e.width=t,e.height=n,e}return null}var Ll=function(){return"undefined"!==typeof Image?Image:null};function Il(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Bl(t){var n=t,e=t;function r(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}return 1===t.length&&(n=function(n,e){return t(n)-e},e=function(t){return function(n,e){return Il(t(n),e)}}(t)),{left:r,center:function(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);var o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function ql(t){return null===t?NaN:+t}var Hl=Bl(Il),Wl=Hl.right,Yl=(Hl.left,Bl(ql).center,Wl);function Xl(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Gl(t,n){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof n?this.interpolator(n):this.range(n)}return this}var Jl=Symbol("implicit");function $l(){var t=new Map,n=[],e=[],r=Jl;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==Jl)return r;t.set(a,o=n.push(i))}return e[(o-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;var r,a=(0,_a.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o+"";t.has(u)||t.set(u,n.push(o))}}catch(c){a.e(c)}finally{a.f()}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return $l(n,e).unknown(r)},Xl.apply(i,arguments),i}var Vl=Math.sqrt(50),Kl=Math.sqrt(10),Ql=Math.sqrt(2);function tf(t,n,e){var r,i,a,o,u=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(o=nf(t,n,e))||!isFinite(o))return[];if(o>0){var c=Math.round(t/o),s=Math.round(n/o);for(c*o<t&&++c,s*o>n&&--s,a=new Array(i=s-c+1);++u<i;)a[u]=(c+u)*o}else{o=-o;var l=Math.round(t*o),f=Math.round(n*o);for(l/o<t&&++l,f/o>n&&--f,a=new Array(i=f-l+1);++u<i;)a[u]=(l+u)/o}return r&&a.reverse(),a}function nf(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Vl?10:a>=Kl?5:a>=Ql?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Vl?10:a>=Kl?5:a>=Ql?2:1)}var ef,rf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function af(t){if(!(n=rf.exec(t)))throw new Error("invalid format: "+t);var n;return new of({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function of(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function uf(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function cf(t){return(t=uf(Math.abs(t)))?t[1]:NaN}function sf(t,n){var e=uf(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}af.prototype=of.prototype,of.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var lf={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return sf(100*t,n)},r:sf,s:function(t,n){var e=uf(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(ef=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+uf(t,Math.max(0,n+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ff(t){return t}var hf,df,pf,vf=Array.prototype.map,gf=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function mf(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?ff:(n=vf.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[o=(o+1)%n.length];return a.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?ff:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(vf.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=af(t)).fill,e=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):lf[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?c:"",_=lf[y],w=/[defgprs%]/.test(y);function k(t){var i,a,c,h=b,k=x;if("c"===y)k=_(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),m&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0===+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===y?gf[8+ef/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(c=t.charCodeAt(i))||c>57){k=(46===c?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var O=h.length+t.length+k.length,E=O<p?new Array(p-O+1).join(n):"";switch(v&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),e){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,O=E.length>>1)+h+t+k+E.slice(O);break;default:t=E+h+t+k}return u(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,n){var e=f(((t=af(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(cf(n)/3))),i=Math.pow(10,-r),a=gf[8+r/3];return function(t){return e(i*t)+a}}}}function yf(t,n,e,r){var i,a=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Vl?i*=10:a>=Kl?i*=5:a>=Ql&&(i*=2),n<t?-i:i}(t,n,e);switch((r=af(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(cf(n)/3)))-cf(Math.abs(t)))}(a,o))||(r.precision=i),pf(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,cf(n)-cf(t))+1}(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-cf(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return df(r)}function bf(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function xf(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function _f(){}!function(t){hf=mf(t),df=hf.format,pf=hf.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var wf=.7,kf=1/wf,Mf="\\s*([+-]?\\d+)\\s*",Of="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ef="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sf=/^#([0-9a-f]{3,8})$/,Df=new RegExp("^rgb\\("+[Mf,Mf,Mf]+"\\)$"),Cf=new RegExp("^rgb\\("+[Ef,Ef,Ef]+"\\)$"),Af=new RegExp("^rgba\\("+[Mf,Mf,Mf,Of]+"\\)$"),Tf=new RegExp("^rgba\\("+[Ef,Ef,Ef,Of]+"\\)$"),Ff=new RegExp("^hsl\\("+[Of,Ef,Ef]+"\\)$"),jf=new RegExp("^hsla\\("+[Of,Ef,Ef,Of]+"\\)$"),Zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Nf(){return this.rgb().formatHex()}function zf(){return this.rgb().formatRgb()}function Uf(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Sf.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Pf(n):3===e?new Bf(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Rf(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Rf(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Df.exec(t))?new Bf(n[1],n[2],n[3],1):(n=Cf.exec(t))?new Bf(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Af.exec(t))?Rf(n[1],n[2],n[3],n[4]):(n=Tf.exec(t))?Rf(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Ff.exec(t))?Yf(n[1],n[2]/100,n[3]/100,1):(n=jf.exec(t))?Yf(n[1],n[2]/100,n[3]/100,n[4]):Zf.hasOwnProperty(t)?Pf(Zf[t]):"transparent"===t?new Bf(NaN,NaN,NaN,0):null}function Pf(t){return new Bf(t>>16&255,t>>8&255,255&t,1)}function Rf(t,n,e,r){return r<=0&&(t=n=e=NaN),new Bf(t,n,e,r)}function Lf(t){return t instanceof _f||(t=Uf(t)),t?new Bf((t=t.rgb()).r,t.g,t.b,t.opacity):new Bf}function If(t,n,e,r){return 1===arguments.length?Lf(t):new Bf(t,n,e,null==r?1:r)}function Bf(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function qf(){return"#"+Wf(this.r)+Wf(this.g)+Wf(this.b)}function Hf(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Wf(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Yf(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Jf(t,n,e,r)}function Xf(t){if(t instanceof Jf)return new Jf(t.h,t.s,t.l,t.opacity);if(t instanceof _f||(t=Uf(t)),!t)return new Jf;if(t instanceof Jf)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,u=a-i,c=(a+i)/2;return u?(o=n===a?(e-r)/u+6*(e<r):e===a?(r-n)/u+2:(n-e)/u+4,u/=c<.5?a+i:2-a-i,o*=60):u=c>0&&c<1?0:o,new Jf(o,u,c,t.opacity)}function Gf(t,n,e,r){return 1===arguments.length?Xf(t):new Jf(t,n,e,null==r?1:r)}function Jf(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function $f(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Vf(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}function Kf(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<n-1?t[r+2]:2*a-i;return Vf((e-r/n)*n,o,i,a,u)}}function Qf(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],a=t[r%n],o=t[(r+1)%n],u=t[(r+2)%n];return Vf((e-r/n)*n,i,a,o,u)}}bf(_f,Uf,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Nf,formatHex:Nf,formatHsl:function(){return Xf(this).formatHsl()},formatRgb:zf,toString:zf}),bf(Bf,If,xf(_f,{brighter:function(t){return t=null==t?kf:Math.pow(kf,t),new Bf(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?wf:Math.pow(wf,t),new Bf(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qf,formatHex:qf,formatRgb:Hf,toString:Hf})),bf(Jf,Gf,xf(_f,{brighter:function(t){return t=null==t?kf:Math.pow(kf,t),new Jf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?wf:Math.pow(wf,t),new Jf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Bf($f(t>=240?t-240:t+120,i,r),$f(t,i,r),$f(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var th=function(t){return function(){return t}};function nh(t,n){return function(e){return t+e*n}}function eh(t,n){var e=n-t;return e?nh(t,e>180||e<-180?e-360*Math.round(e/360):e):th(isNaN(t)?n:t)}function rh(t){return 1===(t=+t)?ih:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):th(isNaN(n)?e:n)}}function ih(t,n){var e=n-t;return e?nh(t,e):th(isNaN(t)?n:t)}var ah=function t(n){var e=rh(n);function r(t,n){var r=e((t=If(t)).r,(n=If(n)).r),i=e(t.g,n.g),a=e(t.b,n.b),o=ih(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=a(n),t.opacity=o(n),t+""}}return r.gamma=t,r}(1);function oh(t){return function(n){var e,r,i=n.length,a=new Array(i),o=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=If(n[e]),a[e]=r.r||0,o[e]=r.g||0,u[e]=r.b||0;return a=t(a),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=u(t),r+""}}}var uh=oh(Kf),ch=oh(Qf);function sh(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}}function lh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fh(t,n){return(lh(n)?sh:hh)(t,n)}function hh(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=bh(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}function dh(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ph(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function vh(t,n){var e,r={},i={};for(e in null!==t&&"object"===typeof t||(t={}),null!==n&&"object"===typeof n||(n={}),n)e in t?r[e]=bh(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var gh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mh=new RegExp(gh.source,"g");function yh(t,n){var e,r,i,a=gh.lastIndex=mh.lastIndex=0,o=-1,u=[],c=[];for(t+="",n+="";(e=gh.exec(t))&&(r=mh.exec(n));)(i=r.index)>a&&(i=n.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(e=e[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,c.push({i:o,x:ph(e,r)})),a=mh.lastIndex;return a<n.length&&(i=n.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function bh(t,n){var e,r=typeof n;return null==n||"boolean"===r?th(n):("number"===r?ph:"string"===r?(e=Uf(n))?(n=e,ah):yh:n instanceof Uf?ah:n instanceof Date?dh:lh(n)?sh:Array.isArray(n)?hh:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?vh:ph)(t,n)}function xh(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function _h(t){return+t}var wh=[0,1];function kh(t){return t}function Mh(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function Oh(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=Mh(i,r),a=e(o,a)):(r=Mh(r,i),a=e(a,o)),function(t){return a(r(t))}}function Eh(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=Mh(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=Yl(t,n,1,r)-1;return a[e](i[e](n))}}function Sh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Dh(){var t,n,e,r,i,a,o=wh,u=wh,c=bh,s=kh;function l(){var t=Math.min(o.length,u.length);return s!==kh&&(s=function(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}(o[0],o[t-1])),r=t>2?Eh:Oh,i=a=null,f}function f(n){return null==n||isNaN(n=+n)?e:(i||(i=r(o.map(t),u,c)))(t(s(n)))}return f.invert=function(e){return s(n((a||(a=r(u,o.map(t),ph)))(e)))},f.domain=function(t){return arguments.length?(o=Array.from(t,_h),l()):o.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),l()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),c=xh,l()},f.clamp=function(t){return arguments.length?(s=!!t||kh,l()):s!==kh},f.interpolate=function(t){return arguments.length?(c=t,l()):c},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,l()}}function Ch(){return Dh()(kh,kh)}function Ah(t){var n=t.domain;return t.ticks=function(t){var e=n();return tf(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return yf(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,u=a.length-1,c=a[o],s=a[u],l=10;for(s<c&&(i=c,c=s,s=i,i=o,o=u,u=i);l-- >0;){if((i=nf(c,s,e))===r)return a[o]=c,a[u]=s,n(a);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function Th(t,n){var e,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(e=r,r=i,i=e,e=a,a=o,o=e),t[r]=n.floor(a),t[i]=n.ceil(o),t}function Fh(t){return Math.log(t)}function jh(t){return Math.exp(t)}function Zh(t){return-Math.log(-t)}function Nh(t){return-Math.exp(-t)}function zh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Uh(t){return function(n){return-t(-n)}}function Ph(t){var n,e,r=t(Fh,jh),i=r.domain,a=10;function o(){return n=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}(a),e=function(t){return 10===t?zh:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}(a),i()[0]<0?(n=Uh(n),e=Uh(e),t(Zh,Nh)):t(Fh,jh),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),u=o[0],c=o[o.length-1];(r=c<u)&&(h=u,u=c,c=h);var s,l,f,h=n(u),d=n(c),p=null==t?10:+t,v=[];if(!(a%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(l=1,s=e(h);l<a;++l)if(!((f=s*l)<u)){if(f>c)break;v.push(f)}}else for(;h<=d;++h)for(l=a-1,s=e(h);l>=1;--l)if(!((f=s*l)<u)){if(f>c)break;v.push(f)}2*v.length<p&&(v=tf(u,c,p))}else v=tf(h,d,Math.min(d-h,p)).map(e);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=df(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/e(Math.round(n(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(Th(i(),{floor:function(t){return e(Math.floor(n(t)))},ceil:function(t){return e(Math.ceil(n(t)))}}))},r}function Rh(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Lh(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ih(t){return t<0?-t*t:t*t}function Bh(t){var n=t(kh,kh),e=1;return n.exponent=function(n){return arguments.length?1===(e=+n)?t(kh,kh):.5===e?t(Lh,Ih):t(Rh(e),Rh(1/e)):e},Ah(n)}function qh(){var t=Bh(Dh());return t.copy=function(){return Sh(t,qh()).exponent(t.exponent())},Xl.apply(t,arguments),t}function Hh(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Wh(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Yh(t){var n=1,e=t(Hh(n),Wh(n));return e.constant=function(e){return arguments.length?t(Hh(n=+e),Wh(n)):n},Ah(e)}function Xh(t){var n=t,e=t;function r(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}return 1===t.length&&(n=function(n,e){return t(n)-e},e=function(t){return function(n,e){return function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}(t(n),e)}}(t)),{left:r,center:function(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);var o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}var Gh=Math.sqrt(50),Jh=Math.sqrt(10),$h=Math.sqrt(2);function Vh(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Gh?i*=10:a>=Jh?i*=5:a>=$h&&(i*=2),n<t?-i:i}function Kh(t,n,e,r,i,a){var o=[[It,1,at],[It,5,5*at],[It,15,15*at],[It,30,30*at],[a,1,ot],[a,5,5*ot],[a,15,15*ot],[a,30,30*ot],[i,1,ut],[i,3,3*ut],[i,6,6*ut],[i,12,12*ut],[r,1,ct],[r,2,2*ct],[e,1,st],[n,1,lt],[n,3,3*lt],[t,1,ft]];function u(n,e,r){var i=Math.abs(e-n)/r,a=Xh((function(t){return(0,Go.Z)(t,3)[2]})).right(o,i);if(a===o.length)return t.every(Vh(n/ft,e/ft,r));if(0===a)return qt.every(Math.max(Vh(n,e,r),1));var u=(0,Go.Z)(o[i/o[a-1][2]<o[a][2]/i?a-1:a],2),c=u[0],s=u[1];return c.every(s)}return[function(t,n,e){var r=n<t;if(r){var i=[n,t];t=i[0],n=i[1]}var a=e&&"function"===typeof e.range?e:u(t,n,e),o=a?a.range(t,+n+1):[];return r?o.reverse():o},u]}var Qh=Kh(Kt,tn,Ot,kt,en,an),td=(0,Go.Z)(Qh,2),nd=td[0],ed=td[1],rd=Kh(jt,Nt,vt,dt,Ut,Rt),id=(0,Go.Z)(rd,2),ad=id[0],od=id[1];function ud(t){return new Date(t)}function cd(t){return t instanceof Date?+t:+new Date(+t)}function sd(t,n,e,r,i,a,o,u,c,s){var l=Ch(),f=l.invert,h=l.domain,d=s(".%L"),p=s(":%S"),v=s("%I:%M"),g=s("%I %p"),m=s("%a %d"),y=s("%b %d"),b=s("%B"),x=s("%Y");function _(t){return(c(t)<t?d:u(t)<t?p:o(t)<t?v:a(t)<t?g:r(t)<t?i(t)<t?m:y:e(t)<t?b:x)(t)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Array.from(t,cd)):h().map(ud)},l.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},l.tickFormat=function(t,n){return null==n?_:s(n)},l.nice=function(t){var e=h();return t&&"function"===typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(Th(e,t)):l},l.copy=function(){return Sh(l,sd(t,n,e,r,i,a,o,u,c,s))},l}function ld(){var t,n,e,r,i,a=0,o=1,u=kh,c=!1;function s(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}function l(t){return function(n){var e,r,i;return arguments.length?(r=(e=(0,Go.Z)(n,2))[0],i=e[1],u=t(r,i),s):[u(0),u(1)]}}return s.domain=function(i){var u;return arguments.length?(u=(0,Go.Z)(i,2),a=u[0],o=u[1],t=r(a=+a),n=r(o=+o),e=t===n?0:1/(n-t),s):[a,o]},s.clamp=function(t){return arguments.length?(c=!!t,s):c},s.interpolator=function(t){return arguments.length?(u=t,s):u},s.range=l(bh),s.rangeRound=l(xh),s.unknown=function(t){return arguments.length?(i=t,s):i},function(i){return r=i,t=i(a),n=i(o),e=t===n?0:1/(n-t),s}}function fd(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hd(){var t=Ah(ld()(kh));return t.copy=function(){return fd(t,hd())},Gl.apply(t,arguments)}function dd(){var t=Bh(ld());return t.copy=function(){return fd(t,dd()).exponent(t.exponent())},Gl.apply(t,arguments)}function pd(t,n){void 0===n&&(n=t,t=bh);for(var e=0,r=n.length-1,i=n[0],a=new Array(r<0?0:r);e<r;)a[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[n](t-n)}}function vd(){var t,n,e,r,i,a,o,u=0,c=.5,s=1,l=1,f=kh,h=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-n)*(l*t<l*n?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(n){var e,r,i,a;return arguments.length?(r=(e=(0,Go.Z)(n,3))[0],i=e[1],a=e[2],f=pd(t,[r,i,a]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f;return arguments.length?(f=(0,Go.Z)(o,3),u=f[0],c=f[1],s=f[2],t=a(u=+u),n=a(c=+c),e=a(s=+s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),l=n<t?-1:1,d):[u,c,s]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(bh),d.rangeRound=p(xh),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(u),n=o(c),e=o(s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),l=n<t?-1:1,d}}function gd(){var t=Bh(vd());return t.copy=function(){return fd(t,gd()).exponent(t.exponent())},Gl.apply(t,arguments)}function md(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ql;if(r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,a=Math.floor(i),o=+e(t[a],a,t);return o+(+e(t[a+1],a+1,t)-o)*(i-a)}}function yd(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function bd(t,n){var e=eh(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}}var xd,_d=180/Math.PI,wd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kd(t,n,e,r,i,a){var o,u,c;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*_d,skewX:Math.atan(c)*_d,scaleX:o,scaleY:u}}function Md(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var u=[],c=[];return a=t(a),o=t(o),function(t,r,i,a,o,u){if(t!==i||r!==a){var c=o.push("translate(",null,n,null,e);u.push({i:c-4,x:ph(t,i)},{i:c-2,x:ph(r,a)})}else(i||a)&&o.push("translate("+i+n+a+e)}(a.translateX,a.translateY,o.translateX,o.translateY,u,c),function(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(i(e)+"rotate(",null,r)-2,x:ph(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(a.rotate,o.rotate,u,c),function(t,n,e,a){t!==n?a.push({i:e.push(i(e)+"skewX(",null,r)-2,x:ph(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(a.skewX,o.skewX,u,c),function(t,n,e,r,a,o){if(t!==e||n!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:ph(t,e)},{i:u-2,x:ph(n,r)})}else 1===e&&1===r||a.push(i(a)+"scale("+e+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,c),a=o=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var Od=Md((function(t){var n=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?wd:kd(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),Ed=Md((function(t){return null==t?wd:(xd||(xd=document.createElementNS("http://www.w3.org/2000/svg","g")),xd.setAttribute("transform",t),(t=xd.transform.baseVal.consolidate())?kd((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):wd)}),", ",")",")"),Sd=1e-12;function Dd(t){return((t=Math.exp(t))+1/t)/2}var Cd=function t(n,e,r){function i(t,i){var a,o,u=t[0],c=t[1],s=t[2],l=i[0],f=i[1],h=i[2],d=l-u,p=f-c,v=d*d+p*p;if(v<Sd)o=Math.log(h/s)/n,a=function(t){return[u+t*d,c+t*p,s*Math.exp(n*t*o)]};else{var g=Math.sqrt(v),m=(h*h-s*s+r*v)/(2*s*e*g),y=(h*h-s*s-r*v)/(2*h*e*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/n,a=function(t){var r=t*o,i=Dd(b),a=s/(e*g)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*r+b)-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[u+a*d,c+a*p,s*i/Dd(n*r+b)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function Ad(t){return function(n,e){var r=t((n=Gf(n)).h,(e=Gf(e)).h),i=ih(n.s,e.s),a=ih(n.l,e.l),o=ih(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=a(t),n.opacity=o(t),n+""}}}var Td=Ad(eh),Fd=Ad(ih),jd=Math.PI/180,Zd=180/Math.PI,Nd=.96422,zd=1,Ud=.82521,Pd=4/29,Rd=6/29,Ld=3*Rd*Rd,Id=Rd*Rd*Rd;function Bd(t){if(t instanceof Hd)return new Hd(t.l,t.a,t.b,t.opacity);if(t instanceof Vd)return Kd(t);t instanceof Bf||(t=Lf(t));var n,e,r=Gd(t.r),i=Gd(t.g),a=Gd(t.b),o=Wd((.2225045*r+.7168786*i+.0606169*a)/zd);return r===i&&i===a?n=e=o:(n=Wd((.4360747*r+.3850649*i+.1430804*a)/Nd),e=Wd((.0139322*r+.0971045*i+.7141733*a)/Ud)),new Hd(116*o-16,500*(n-o),200*(o-e),t.opacity)}function qd(t,n,e,r){return 1===arguments.length?Bd(t):new Hd(t,n,e,null==r?1:r)}function Hd(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Wd(t){return t>Id?Math.pow(t,1/3):t/Ld+Pd}function Yd(t){return t>Rd?t*t*t:Ld*(t-Pd)}function Xd(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Gd(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Jd(t){if(t instanceof Vd)return new Vd(t.h,t.c,t.l,t.opacity);if(t instanceof Hd||(t=Bd(t)),0===t.a&&0===t.b)return new Vd(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Zd;return new Vd(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $d(t,n,e,r){return 1===arguments.length?Jd(t):new Vd(t,n,e,null==r?1:r)}function Vd(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Kd(t){if(isNaN(t.h))return new Hd(t.l,0,0,t.opacity);var n=t.h*jd;return new Hd(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function Qd(t,n){var e=ih((t=qd(t)).l,(n=qd(n)).l),r=ih(t.a,n.a),i=ih(t.b,n.b),a=ih(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=a(n),t+""}}function tp(t){return function(n,e){var r=t((n=$d(n)).h,(e=$d(e)).h),i=ih(n.c,e.c),a=ih(n.l,e.l),o=ih(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=a(t),n.opacity=o(t),n+""}}}bf(Hd,qd,xf(_f,{brighter:function(t){return new Hd(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Hd(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Bf(Xd(3.1338561*(n=Nd*Yd(n))-1.6168667*(t=zd*Yd(t))-.4906146*(e=Ud*Yd(e))),Xd(-.9787684*n+1.9161415*t+.033454*e),Xd(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),bf(Vd,$d,xf(_f,{brighter:function(t){return new Vd(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Vd(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Kd(this).rgb()}}));var np=tp(eh),ep=tp(ih),rp=-.14861,ip=1.78277,ap=-.29227,op=-.90649,up=1.97294,cp=up*op,sp=up*ip,lp=ip*ap-op*rp;function fp(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof hp)return new hp(t.h,t.s,t.l,t.opacity);t instanceof Bf||(t=Lf(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(lp*r+cp*n-sp*e)/(lp+cp-sp),a=r-i,o=(up*(e-i)-ap*a)/op,u=Math.sqrt(o*o+a*a)/(up*i*(1-i)),c=u?Math.atan2(o,a)*Zd-120:NaN;return new hp(c<0?c+360:c,u,i,t.opacity)}(t):new hp(t,n,e,null==r?1:r)}function hp(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function dp(t){return function n(e){function r(n,r){var i=t((n=fp(n)).h,(r=fp(r)).h),a=ih(n.s,r.s),o=ih(n.l,r.l),u=ih(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=a(t),n.l=o(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}bf(hp,fp,xf(_f,{brighter:function(t){return t=null==t?kf:Math.pow(kf,t),new hp(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?wf:Math.pow(wf,t),new hp(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*jd,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Bf(255*(n+e*(rp*r+ip*i)),255*(n+e*(ap*r+op*i)),255*(n+e*(up*r)),this.opacity)}}));var pp,vp,gp=dp(eh),mp=dp(ih);function yp(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function bp(t,n,e){var r=t-n+2*e;return t?r>0?r:1:0}var xp="linear",_p="log",wp="pow",kp="sqrt",Mp="symlog",Op="time",Ep="utc",Sp="sequential",Dp="diverging",Cp="quantile",Ap="quantize",Tp="threshold",Fp="ordinal",jp="point",Zp="band",Np="bin-ordinal",zp="continuous",Up="discrete",Pp="discretizing",Rp="interpolating",Lp="temporal";function Ip(){var t,n,e=$l().unknown(void 0),r=e.domain,i=e.range,a=[0,1],o=!1,u=0,c=0,s=.5;function l(){var e=r().length,l=a[1]<a[0],f=a[1-l],h=bp(e,u,c),d=a[l-0];t=(f-d)/(h||1),o&&(t=Math.floor(t)),d+=(f-d-t*(e-u))*s,n=t*(1-u),o&&(d=Math.round(d),n=Math.round(n));var p=function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);++r<i;)a[r]=t+r*e;return a}(e).map((function(n){return d+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},e.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(o=!!t,l()):o},e.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u=c,l()):u},e.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},e.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,o,u,c=a[1]<a[0],s=c?i().reverse():i(),l=s.length-1,f=+t[0],h=+t[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<s[0]||f>a[1-c])))return e=Math.max(0,Wl(s,f)-1),o=f===h?e:Wl(s,h)-1,f-s[e]>n+1e-10&&++e,c&&(u=e,e=l-o,o=l-u),e>o?void 0:r().slice(e,o+1)}},e.invert=function(t){var n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return Ip().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(c).align(s)},l()}function Bp(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Bp(n())},t}var qp=Array.prototype.map;var Hp=Array.prototype.slice;var Wp={};function Yp(t,n,e){return arguments.length>1?(Wp[t]=function(t,n,e){var r=function(){var e=n();return e.invertRange||(e.invertRange=e.invert?function(t){return function(n){var e,r=n[0],i=n[1];return i<r&&(e=r,r=i,i=e),[t.invert(r),t.invert(i)]}}(e):e.invertExtent?function(t){return function(n){var e,r,i,a,o=t.range(),u=n[0],c=n[1],s=-1;for(c<u&&(r=u,u=c,c=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=c&&(s<0&&(s=i),e=i);if(!(s<0))return u=t.invertExtent(o[s]),c=t.invertExtent(o[e]),[void 0===u[0]?u[1]:u[0],void 0===c[1]?c[0]:c[1]]}}(e):void 0),e.type=t,e};return r.metadata=(0,g.Rg)((0,g.IX)(e)),r}(t,n,e),this):Xp(t)?Wp[t]:void 0}function Xp(t){return(0,g.nr)(Wp,t)}function Gp(t,n){var e=Wp[t];return e&&e.metadata[n]}function Jp(t){return Gp(t,zp)}function $p(t){return Gp(t,Up)}function Vp(t){return Gp(t,Pp)}function Kp(t){return Gp(t,_p)}function Qp(t){return Gp(t,Rp)}function tv(t){return Gp(t,Cp)}Yp("identity",(function t(n){var e;function r(t){return null==t||isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=Array.from(t,_h),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?Array.from(n,_h):[0,1],Ah(r)})),Yp(xp,(function t(){var n=Ch();return n.copy=function(){return Sh(n,t())},Xl.apply(n,arguments),Ah(n)}),zp),Yp(_p,(function t(){var n=Ph(Dh()).domain([1,10]);return n.copy=function(){return Sh(n,t()).base(n.base())},Xl.apply(n,arguments),n}),[zp,_p]),Yp(wp,qh,zp),Yp(kp,(function(){return qh.apply(null,arguments).exponent(.5)}),zp),Yp(Mp,(function t(){var n=Yh(Dh());return n.copy=function(){return Sh(n,t()).constant(n.constant())},Xl.apply(n,arguments)}),zp),Yp(Op,(function(){return Xl.apply(sd(ad,od,jt,Nt,vt,dt,Ut,Rt,It,qn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[zp,Lp]),Yp(Ep,(function(){return Xl.apply(sd(nd,ed,Kt,tn,Ot,kt,en,an,It,Wn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[zp,Lp]),Yp(Sp,hd,[zp,Rp]),Yp("".concat(Sp,"-").concat(xp),hd,[zp,Rp]),Yp("".concat(Sp,"-").concat(_p),(function t(){var n=Ph(ld()).domain([1,10]);return n.copy=function(){return fd(n,t()).base(n.base())},Gl.apply(n,arguments)}),[zp,Rp,_p]),Yp("".concat(Sp,"-").concat(wp),dd,[zp,Rp]),Yp("".concat(Sp,"-").concat(kp),(function(){return dd.apply(null,arguments).exponent(.5)}),[zp,Rp]),Yp("".concat(Sp,"-").concat(Mp),(function t(){var n=Yh(ld());return n.copy=function(){return fd(n,t()).constant(n.constant())},Gl.apply(n,arguments)}),[zp,Rp]),Yp("".concat(Dp,"-").concat(xp),(function t(){var n=Ah(vd()(kh));return n.copy=function(){return fd(n,t())},Gl.apply(n,arguments)}),[zp,Rp]),Yp("".concat(Dp,"-").concat(_p),(function t(){var n=Ph(vd()).domain([.1,1,10]);return n.copy=function(){return fd(n,t()).base(n.base())},Gl.apply(n,arguments)}),[zp,Rp,_p]),Yp("".concat(Dp,"-").concat(wp),gd,[zp,Rp]),Yp("".concat(Dp,"-").concat(kp),(function(){return gd.apply(null,arguments).exponent(.5)}),[zp,Rp]),Yp("".concat(Dp,"-").concat(Mp),(function t(){var n=Yh(vd());return n.copy=function(){return fd(n,t()).constant(n.constant())},Gl.apply(n,arguments)}),[zp,Rp]),Yp(Cp,(function t(){var n,e=[],r=[],i=[];function a(){var t=0,n=Math.max(1,r.length);for(i=new Array(n-1);++t<n;)i[t-1]=md(e,t/n);return o}function o(t){return null==t||isNaN(t=+t)?n:r[Yl(i,t)]}return o.invertExtent=function(t){var n=r.indexOf(t);return n<0?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];var n,r=(0,_a.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;null==i||isNaN(i=+i)||e.push(i)}}catch(o){r.e(o)}finally{r.f()}return e.sort(Il),a()},o.range=function(t){return arguments.length?(r=Array.from(t),a()):r.slice()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(e).range(r).unknown(n)},Xl.apply(o,arguments)}),[Pp,Cp]),Yp(Ap,(function t(){var n,e=0,r=1,i=1,a=[.5],o=[0,1];function u(t){return null!=t&&t<=t?o[Yl(a,t,0,i)]:n}function c(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*e)/(i+1);return u}return u.domain=function(t){var n;return arguments.length?(n=(0,Go.Z)(t,2),e=n[0],r=n[1],e=+e,r=+r,c()):[e,r]},u.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,c()):o.slice()},u.invertExtent=function(t){var n=o.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,a[0]]:n>=i?[a[i-1],r]:[a[n-1],a[n]]},u.unknown=function(t){return arguments.length?(n=t,u):u},u.thresholds=function(){return a.slice()},u.copy=function(){return t().domain([e,r]).range(o).unknown(n)},Xl.apply(Ah(u),arguments)}),Pp),Yp(Tp,(function t(){var n,e=[.5],r=[0,1],i=1;function a(t){return null!=t&&t<=t?r[Yl(e,t,0,i)]:n}return a.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,r.length-1),a):e.slice()},a.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(e.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return t().domain(e).range(r).unknown(n)},Xl.apply(a,arguments)}),Pp),Yp(Np,(function t(){var n=[],e=[];function r(t){return null==t||t!==t?void 0:e[(Yl(n,t)-1)%e.length]}return r.domain=function(t){return arguments.length?(n=function(t){return qp.call(t,g.He)}(t),r):n.slice()},r.range=function(t){return arguments.length?(e=Hp.call(t),r):e.slice()},r.tickFormat=function(t,e){return yf(n[0],(0,g.fj)(n),null==t?10:t,e)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),[Up,Pp]),Yp(Fp,$l,Up),Yp(Zp,Ip,Up),Yp(jp,(function(){return Bp(Ip().paddingInner(1))}),Up);var nv=["clamp","base","constant","exponent"];function ev(t,n,e){return pd(iv(n||"rgb",e),t)}function rv(t,n,e){var r,i,a,o=e-n;return o&&Number.isFinite(o)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=Yp(i)().domain([n,e]).range([0,1]),nv.forEach((function(n){return t[n]?a[n](t[n]()):0})),a):(0,g.a9)(.5)}function iv(t,n){var e=i[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=n&&e&&e.gamma?e.gamma(n):e}function av(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}function ov(t,n){for(var e in t)cv(e,n(t[e]))}var uv={};function cv(t,n){return t=t&&t.toLowerCase(),arguments.length>1?(uv[t]=n,this):uv[t]}ov({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},av),ov({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return ev(av(t))}));var sv="symbol",lv="discrete",fv=function(t){return(0,g.kJ)(t)?t.map((function(t){return String(t)})):String(t)},hv=function(t,n){return t[1]-n[1]},dv=function(t,n){return n[1]-t[1]};function pv(t,n,e){var r;return(0,g.hj)(n)&&(t.bins&&(n=Math.max(n,t.bins.length)),null!=e&&(n=Math.min(n,Math.floor((0,g.yP)(t.domain())/e||1)))),(0,g.Kn)(n)&&(r=n.step,n=n.interval),(0,g.HD)(n)&&(n=t.type===Op?An(n):t.type==Ep?Tn(n):(0,g.vU)("Only time and utc scales accept interval strings."),r&&(n=n.every(r))),n}function vv(t,n,e){var r=t.range(),i=r[0],a=(0,g.fj)(r),o=hv;if(i>a&&(r=a,a=i,i=r,o=dv),i=Math.floor(i),a=Math.ceil(a),n=n.map((function(n){return[n,t(n)]})).filter((function(t){return i<=t[1]&&t[1]<=a})).sort(o).map((function(t){return t[0]})),e>0&&n.length>1){for(var u=[n[0],(0,g.fj)(n)];n.length>e&&n.length>=3;)n=n.filter((function(t,n){return!(n%2)}));n.length<3&&(n=u)}return n}function gv(t,n){return t.bins?vv(t,t.bins):t.ticks?t.ticks(n):t.domain()}function mv(t,n,e,r,i,a){var o=n.type,u=fv;if(o===Op||i===Op)u=t.timeFormat(r);else if(o===Ep||i===Ep)u=t.utcFormat(r);else if(Kp(o)){var c=t.formatFloat(r);if(a||n.bins)u=c;else{var s=yv(n,e,!1);u=function(t){return s(t)?c(t):""}}}else if(n.tickFormat){var l=n.domain();u=t.formatSpan(l[0],l[l.length-1],e,r)}else r&&(u=t.format(r));return u}function yv(t,n,e){var r=gv(t,n),i=t.base(),a=Math.log(i),o=Math.max(1,i*n/r.length),u=function(t){var n=t/Math.pow(i,Math.round(Math.log(t)/a));return n*i<i-.5&&(n*=i),n<=o};return e?r.filter(u):u}var bv=(pp={},(0,nt.Z)(pp,Cp,"quantiles"),(0,nt.Z)(pp,Ap,"thresholds"),(0,nt.Z)(pp,Tp,"domain"),pp),xv=(vp={},(0,nt.Z)(vp,Cp,"quantiles"),(0,nt.Z)(vp,Ap,"domain"),vp);function _v(t,n){return t.bins?function(t){var n=t.slice(0,-1);return n.max=(0,g.fj)(t),n}(t.bins):t.type===_p?yv(t,n,!0):bv[t.type]?function(t){var n=[-1/0].concat(t);return n.max=1/0,n}(t[bv[t.type]]()):gv(t,n)}var wv=function(t){return bv[t.type]||t.bins};function kv(t,n,e,r,i,a,o){var u=xv[n.type]&&a!==Op&&a!==Ep?function(t,n,e){var r,i=n[xv[n.type]](),a=i.length,o=a>1?i[1]-i[0]:i[0];for(r=1;r<a;++r)o=Math.min(o,i[r]-i[r-1]);return t.formatSpan(0,o,30,e)}(t,n,i):mv(t,n,e,i,a,o);return r===sv&&wv(n)?Mv(u):r===lv?Ev(u):Sv(u)}var Mv=function(t){return function(n,e,r){var i=Ov(r[e+1],Ov(r.max,1/0)),a=Dv(n,t),o=Dv(i,t);return a&&o?a+" \u2013 "+o:o?"< "+o:"\u2265 "+a}},Ov=function(t,n){return null!=t?t:n},Ev=function(t){return function(n,e){return e?t(n):null}},Sv=function(t){return function(n){return t(n)}},Dv=function(t,n){return Number.isFinite(t)?n(t):null};function Cv(t,n,e,r){var i=r||n.type;return(0,g.HD)(e)&&function(t){return Gp(t,Lp)}(i)&&(e=e.replace(/%a/g,"%A").replace(/%b/g,"%B")),e||i!==Op?e||i!==Ep?kv(t,n,5,null,e,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function Av(t,n,e){e=e||{};var r=Math.max(3,e.maxlen||7),i=Cv(t,n,e.format,e.formatType);if(Vp(n.type)){var a=_v(n).slice(1).map(i),o=a.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(a.join(", "))}if($p(n.type)){var u=n.domain(),c=u.length,s=c>r?u.slice(0,r-2).map(i).join(", ")+", ending with "+u.slice(-1).map(i):u.map(i).join(", ");return"".concat(c," value").concat(1===c?"":"s",": ").concat(s)}var l=n.domain();return"values from ".concat(i(l[0])," to ").concat(i((0,g.fj)(l)))}var Tv=0;var Fv="p_";function jv(t){return t&&t.gradient}function Zv(t,n,e){var r=t.gradient,i=t.id,a="radial"===r?Fv:"";return i||(i=t.id="gradient_"+Tv++,"radial"===r?(t.x1=Nv(t.x1,.5),t.y1=Nv(t.y1,.5),t.r1=Nv(t.r1,0),t.x2=Nv(t.x2,.5),t.y2=Nv(t.y2,.5),t.r2=Nv(t.r2,.5),a=Fv):(t.x1=Nv(t.x1,0),t.y1=Nv(t.y1,0),t.x2=Nv(t.x2,1),t.y2=Nv(t.y2,0))),n[i]=t,"url("+(e||"")+"#"+a+i+")"}function Nv(t,n){return null!=t?t:n}function zv(t,n){var e,r=[];return e={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:n?n[0]:1,y2:n?n[1]:0,stops:r,stop:function(t,n){return r.push({offset:t,color:n}),e}}}var Uv={basis:{curve:function(t){return new Ss(t)}},"basis-closed":{curve:function(t){return new Cs(t)}},"basis-open":{curve:function(t){return new As(t)}},bundle:{curve:Fs,tension:"beta",value:.85},cardinal:{curve:Ns,tension:"tension",value:0},"cardinal-open":{curve:Us,tension:"tension",value:0},"cardinal-closed":{curve:Rs,tension:"tension",value:0},"catmull-rom":{curve:tl,tension:"alpha",value:.5},"catmull-rom-closed":{curve:el,tension:"alpha",value:.5},"catmull-rom-open":{curve:il,tension:"alpha",value:.5},linear:{curve:ol},"linear-closed":{curve:function(t){return new ul(t)}},monotone:{horizontal:function(t){return new dl(t)},vertical:function(t){return new hl(t)}},natural:{curve:function(t){return new vl(t)}},step:{curve:function(t){return new ml(t,.5)}},"step-after":{curve:function(t){return new ml(t,1)}},"step-before":{curve:function(t){return new ml(t,0)}}};function Pv(t,n,e){var r=(0,g.nr)(Uv,t)&&Uv[t],i=null;return r&&(i=r.curve||r[n||"vertical"],r.tension&&null!=e&&(i=i[r.tension](e))),i}var Rv={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Lv=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Iv(t){var n,e,r,i,a,o,u,c,s,l,f=[],h=t.slice().replace(Lv[0],"###$1").split(Lv[1]).slice(1);for(u=0,s=h.length;u<s;++u){for(e=(n=h[u]).slice(1).trim().replace(Lv[2],"$1###$2").replace(Lv[3],"$1###$2").split(Lv[4]),r=[a=n.charAt(0)],c=0,l=e.length;c<l;++c)(i=+e[c])===i&&r.push(i);if(o=Rv[a.toLowerCase()],r.length-1>o){var d=r.length;for(c=1,f.push([a].concat(r.slice(c,c+=o))),a="M"===a?"L":"m"===a?"l":a;c<d;c+=o)f.push([a].concat(r.slice(c,c+o)))}else f.push(r)}return f}var Bv=Math.PI/180,qv=1e-14,Hv=Math.PI/2,Wv=2*Math.PI,Yv=Math.sqrt(3)/2,Xv={},Gv={},Jv=[].join;function $v(t){var n=Jv.call(t);if(Gv[n])return Gv[n];var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],l=s*o,f=-c*u,h=c*o,d=s*u,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),_=e+p-x*v,w=r+v+x*p,k=e+g,M=r+m,O=k+x*m,E=M-x*g;return Gv[n]=[l*_+f*w,h*_+d*w,l*O+f*E,h*O+d*E,l*k+f*M,h*k+d*M]}var Vv=["l",0,0,0,0,0,0,0];function Kv(t,n,e){var r=Vv[0]=t[0];if("a"===r||"A"===r)Vv[1]=n*t[1],Vv[2]=e*t[2],Vv[3]=t[3],Vv[4]=t[4],Vv[5]=t[5],Vv[6]=n*t[6],Vv[7]=e*t[7];else if("h"===r||"H"===r)Vv[1]=n*t[1];else if("v"===r||"V"===r)Vv[1]=e*t[1];else for(var i=1,a=t.length;i<a;++i)Vv[i]=(i%2==1?n:e)*t[i];return Vv}function Qv(t,n,e,r,i,a){var o,u,c,s,l,f=null,h=0,d=0,p=0,v=0;null==e&&(e=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var g=0,m=n.length;g<m;++g){switch(o=n[g],1===i&&1===a||(o=Kv(o,i,a)),o[0]){case"l":h+=o[1],d+=o[2],t.lineTo(h+e,d+r);break;case"L":h=o[1],d=o[2],t.lineTo(h+e,d+r);break;case"h":h+=o[1],t.lineTo(h+e,d+r);break;case"H":h=o[1],t.lineTo(h+e,d+r);break;case"v":d+=o[1],t.lineTo(h+e,d+r);break;case"V":d=o[1],t.lineTo(h+e,d+r);break;case"m":h+=o[1],d+=o[2],t.moveTo(h+e,d+r);break;case"M":h=o[1],d=o[2],t.moveTo(h+e,d+r);break;case"c":u=h+o[5],c=d+o[6],p=h+o[3],v=d+o[4],t.bezierCurveTo(h+o[1]+e,d+o[2]+r,p+e,v+r,u+e,c+r),h=u,d=c;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],t.bezierCurveTo(o[1]+e,o[2]+r,p+e,v+r,h+e,d+r);break;case"s":u=h+o[3],c=d+o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,h+o[1]+e,d+o[2]+r,u+e,c+r),p=h+o[1],v=d+o[2],h=u,d=c;break;case"S":u=o[3],c=o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"q":u=h+o[3],c=d+o[4],p=h+o[1],v=d+o[2],t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"Q":u=o[3],c=o[4],t.quadraticCurveTo(o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"t":u=h+o[1],c=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-s,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),s=p,l=v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),d=c,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],c=o[2],p=2*h-p,v=2*d-v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"a":tg(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+e,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":tg(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+e,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":t.closePath()}f=o}}function tg(t,n,e,r){for(var i=function(t,n,e,r,i,a,o,u,c){var s=Jv.call(arguments);if(Xv[s])return Xv[s];var l=o*Bv,f=Math.sin(l),h=Math.cos(l),d=h*(u-t)*.5+f*(c-n)*.5,p=h*(c-n)*.5-f*(u-t)*.5,v=d*d/((e=Math.abs(e))*e)+p*p/((r=Math.abs(r))*r);v>1&&(e*=v=Math.sqrt(v),r*=v);var g=h/e,m=f/e,y=-f/r,b=h/r,x=g*u+m*c,_=y*u+b*c,w=g*t+m*n,k=y*t+b*n,M=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;M<0&&(M=0);var O=Math.sqrt(M);a==i&&(O=-O);var E=.5*(x+w)-O*(k-_),S=.5*(_+k)+O*(w-x),D=Math.atan2(_-S,x-E),C=Math.atan2(k-S,w-E)-D;C<0&&1===a?C+=Wv:C>0&&0===a&&(C-=Wv);for(var A=Math.ceil(Math.abs(C/(Hv+.001))),T=[],F=0;F<A;++F){var j=D+F*C/A,Z=D+(F+1)*C/A;T[F]=[E,S,j,Z,e,r,f,h]}return Xv[s]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],n,e),a=0;a<i.length;++a){var o=$v(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var ng=.5773502691896257,eg={circle:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(e,0),t.arc(0,0,e,0,Wv)}},cross:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/2.5;t.moveTo(-e,-r),t.lineTo(-e,r),t.lineTo(-r,r),t.lineTo(-r,e),t.lineTo(r,e),t.lineTo(r,r),t.lineTo(e,r),t.lineTo(e,-r),t.lineTo(r,-r),t.lineTo(r,-e),t.lineTo(-r,-e),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.closePath()}},square:{draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},arrow:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/7,i=e/2.5,a=e/8;t.moveTo(-r,e),t.lineTo(r,e),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-e),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e,i=r-e*ng,a=e/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e,i=r-e*ng;t.moveTo(0,-r-i),t.lineTo(-e,r-i),t.lineTo(e,r-i),t.closePath()}},"triangle-up":{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e;t.moveTo(0,-r),t.lineTo(-e,r),t.lineTo(e,r),t.closePath()}},"triangle-down":{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e;t.moveTo(0,r),t.lineTo(-e,-r),t.lineTo(e,-r),t.closePath()}},"triangle-right":{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e;t.moveTo(r,0),t.lineTo(-r,-e),t.lineTo(-r,e),t.closePath()}},"triangle-left":{draw:function(t,n){var e=Math.sqrt(n)/2,r=Yv*e;t.moveTo(-r,0),t.lineTo(r,-e),t.lineTo(r,e),t.closePath()}},stroke:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(e,0)}}};function rg(t){return(0,g.nr)(eg,t)?eg[t]:function(t){if(!(0,g.nr)(ig,t)){var n=Iv(t);ig[t]={draw:function(t,e){Qv(t,n,0,0,Math.sqrt(e)/2)}}}return ig[t]}(t)}var ig={};var ag=.448084975506;function og(t){return t.x}function ug(t){return t.y}function cg(t){return t.width}function sg(t){return t.height}function lg(t){return"function"===typeof t?t:function(){return+t}}function fg(t,n,e){return Math.max(n,Math.min(t,e))}function hg(t,n){return null!=t?t:n}var dg=function(t){return t.x||0},pg=function(t){return t.y||0},vg=function(t){return!(!1===t.defined)},gg=function(){var t=El,n=Sl,e=Ol(0),r=null,i=Dl,a=Cl,o=Al,u=null;function c(){var c,s,l=+t.apply(this,arguments),f=+n.apply(this,arguments),h=i.apply(this,arguments)-Js,d=a.apply(this,arguments)-Js,p=Ls(d-h),v=d>h;if(u||(u=c=Ml()),f<l&&(s=f,f=l,l=s),f>Xs)if(p>$s-Xs)u.moveTo(f*Bs(h),f*Ws(h)),u.arc(0,0,f,h,d,!v),l>Xs&&(u.moveTo(l*Bs(d),l*Ws(d)),u.arc(0,0,l,d,h,v));else{var g,m,y=h,b=d,x=h,_=d,w=p,k=p,M=o.apply(this,arguments)/2,O=M>Xs&&(r?+r.apply(this,arguments):Ys(l*l+f*f)),E=Hs(Ls(f-l)/2,+e.apply(this,arguments)),S=E,D=E;if(O>Xs){var C=Vs(O/l*Ws(M)),A=Vs(O/f*Ws(M));(w-=2*C)>Xs?(x+=C*=v?1:-1,_-=C):(w=0,x=_=(h+d)/2),(k-=2*A)>Xs?(y+=A*=v?1:-1,b-=A):(k=0,y=b=(h+d)/2)}var T=f*Bs(y),F=f*Ws(y),j=l*Bs(_),Z=l*Ws(_);if(E>Xs){var N,z=f*Bs(b),U=f*Ws(b),P=l*Bs(x),R=l*Ws(x);if(p<Gs&&(N=function(t,n,e,r,i,a,o,u){var c=e-t,s=r-n,l=o-i,f=u-a,h=f*c-l*s;if(!(h*h<Xs))return[t+(h=(l*(n-a)-f*(t-i))/h)*c,n+h*s]}(T,F,P,R,z,U,j,Z))){var L=T-N[0],I=F-N[1],B=z-N[0],q=U-N[1],H=1/Ws(function(t){return t>1?0:t<-1?Gs:Math.acos(t)}((L*B+I*q)/(Ys(L*L+I*I)*Ys(B*B+q*q)))/2),W=Ys(N[0]*N[0]+N[1]*N[1]);S=Hs(E,(l-W)/(H-1)),D=Hs(E,(f-W)/(H+1))}}k>Xs?D>Xs?(g=Tl(P,R,T,F,f,D,v),m=Tl(z,U,j,Z,f,D,v),u.moveTo(g.cx+g.x01,g.cy+g.y01),D<E?u.arc(g.cx,g.cy,D,Is(g.y01,g.x01),Is(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,D,Is(g.y01,g.x01),Is(g.y11,g.x11),!v),u.arc(0,0,f,Is(g.cy+g.y11,g.cx+g.x11),Is(m.cy+m.y11,m.cx+m.x11),!v),u.arc(m.cx,m.cy,D,Is(m.y11,m.x11),Is(m.y01,m.x01),!v))):(u.moveTo(T,F),u.arc(0,0,f,y,b,!v)):u.moveTo(T,F),l>Xs&&w>Xs?S>Xs?(g=Tl(j,Z,z,U,l,-S,v),m=Tl(T,F,P,R,l,-S,v),u.lineTo(g.cx+g.x01,g.cy+g.y01),S<E?u.arc(g.cx,g.cy,S,Is(g.y01,g.x01),Is(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,S,Is(g.y01,g.x01),Is(g.y11,g.x11),!v),u.arc(0,0,l,Is(g.cy+g.y11,g.cx+g.x11),Is(m.cy+m.y11,m.cx+m.x11),v),u.arc(m.cx,m.cy,S,Is(m.y11,m.x11),Is(m.y01,m.x01),!v))):u.arc(0,0,l,_,x,v):u.lineTo(j,Z)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Gs/2;return[Bs(r)*e,Ws(r)*e]},c.innerRadius=function(n){return arguments.length?(t="function"===typeof n?n:Ol(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"===typeof t?t:Ol(+t),c):n},c.cornerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Ol(+t),c):e},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Ol(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:Ol(+t),c):i},c.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:Ol(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:Ol(+t),c):o},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius((function(t){return t.cornerRadius||0})),mg=zl().x(dg).y1(pg).y0((function(t){return(t.y||0)+(t.height||0)})).defined(vg),yg=zl().y(pg).x1(dg).x0((function(t){return(t.x||0)+(t.width||0)})).defined(vg),bg=Nl().x(dg).y(pg).defined(vg),xg=function(){var t=og,n=ug,e=cg,r=sg,i=lg(0),a=i,o=i,u=i,c=null;function s(s,l,f){var h,d=null!=l?l:+t.call(this,s),p=null!=f?f:+n.call(this,s),v=+e.call(this,s),g=+r.call(this,s),m=Math.min(v,g)/2,y=fg(+i.call(this,s),0,m),b=fg(+a.call(this,s),0,m),x=fg(+o.call(this,s),0,m),_=fg(+u.call(this,s),0,m);if(c||(c=h=Ml()),y<=0&&b<=0&&x<=0&&_<=0)c.rect(d,p,v,g);else{var w=d+v,k=p+g;c.moveTo(d+y,p),c.lineTo(w-b,p),c.bezierCurveTo(w-ag*b,p,w,p+ag*b,w,p+b),c.lineTo(w,k-_),c.bezierCurveTo(w,k-ag*_,w-ag*_,k,w-_,k),c.lineTo(d+x,k),c.bezierCurveTo(d+ag*x,k,d,k-ag*x,d,k-x),c.lineTo(d,p+y),c.bezierCurveTo(d,p+ag*y,d+ag*y,p,d+y,p),c.closePath()}if(h)return c=null,h+""||null}return s.x=function(n){return arguments.length?(t=lg(n),s):t},s.y=function(t){return arguments.length?(n=lg(t),s):n},s.width=function(t){return arguments.length?(e=lg(t),s):e},s.height=function(t){return arguments.length?(r=lg(t),s):r},s.cornerRadius=function(t,n,e,r){return arguments.length?(i=lg(t),a=null!=n?lg(n):i,u=null!=e?lg(e):i,o=null!=r?lg(r):a,s):i},s.context=function(t){return arguments.length?(c=null==t?null:t,s):c},s}().x(dg).y(pg).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius((function(t){return hg(t.cornerRadiusTopLeft,t.cornerRadius)||0}),(function(t){return hg(t.cornerRadiusTopRight,t.cornerRadius)||0}),(function(t){return hg(t.cornerRadiusBottomRight,t.cornerRadius)||0}),(function(t){return hg(t.cornerRadiusBottomLeft,t.cornerRadius)||0})),_g=function(t,n){var e=null;function r(){var r;if(e||(e=r=Ml()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return t="function"===typeof t?t:Ol(t||Ul),n="function"===typeof n?n:Ol(void 0===n?64:+n),r.type=function(n){return arguments.length?(t="function"===typeof n?n:Ol(n),r):t},r.size=function(t){return arguments.length?(n="function"===typeof t?t:Ol(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r}().type((function(t){return rg(t.shape||"circle")})).size((function(t){return hg(t.size,64)})),wg=function(){var t,n,e,r,i,a,o,u,c=null;function s(t,n,e){var r=e/2;if(i){var s=o-n,l=t-a;if(s||l){var f=Math.sqrt(s*s+l*l),h=(s/=f)*u,d=(l/=f)*u,p=Math.atan2(l,s);c.moveTo(a-h,o-d),c.lineTo(t-s*r,n-l*r),c.arc(t,n,r,p-Math.PI,p),c.lineTo(a+h,o+d),c.arc(a,o,u,p,p+Math.PI)}else c.arc(t,n,r,0,Wv);c.closePath()}else i=1;a=t,o=n,u=r}function l(a){var o,u,l,f=a.length,h=!1;for(null==c&&(c=l=Ml()),o=0;o<=f;++o)!(o<f&&r(u=a[o],o,a))===h&&(h=!h)&&(i=0),h&&s(+t(u,o,a),+n(u,o,a),+e(u,o,a));if(l)return c=null,l+""||null}return l.x=function(n){return arguments.length?(t=n,l):t},l.y=function(t){return arguments.length?(n=t,l):n},l.size=function(t){return arguments.length?(e=t,l):e},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(c=null==t?null:t,l):c},l}().x(dg).y(pg).defined(vg).size((function(t){return t.size||1}));function kg(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Mg(t,n,e,r){return xg.context(t)(n,e,r)}var Og=1;function Eg(t,n,e){var r=n.clip,i=t._defs,a=n.clip_id||(n.clip_id="clip"+Og++),o=i.clipping[a]||(i.clipping[a]={id:a});return(0,g.mf)(r)?o.path=r(null):kg(e)?o.path=Mg(null,e,0,0):(o.width=e.width||0,o.height=e.height||0),"url(#"+a+")"}function Sg(t){this.clear(),t&&this.union(t)}function Dg(t){this.mark=t,this.bounds=this.bounds||new Sg}function Cg(t){Dg.call(this,t),this.items=this.items||[]}function Ag(t){this._pending=0,this._loader=t||Gr()}function Tg(t){t._pending+=1}function Fg(t){t._pending-=1}function jg(t,n,e){if(n.stroke&&0!==n.opacity&&0!==n.strokeOpacity){var r=null!=n.strokeWidth?+n.strokeWidth:1;t.expand(r+(e?function(t,n){return t.strokeJoin&&"miter"!==t.strokeJoin?0:n}(n,r):0))}return t}Sg.prototype={clone:function(){return new Sg(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set:function(t,n,e,r){return e<t?(this.x2=t,this.x1=e):(this.x1=t,this.x2=e),r<n?(this.y2=n,this.y1=r):(this.y1=n,this.y2=r),this},add:function(t,n){return t<this.x1&&(this.x1=t),n<this.y1&&(this.y1=n),t>this.x2&&(this.x2=t),n>this.y2&&(this.y2=n),this},expand:function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate:function(t,n){return this.x1+=t,this.x2+=t,this.y1+=n,this.y2+=n,this},rotate:function(t,n,e){var r=this.rotatedPoints(t,n,e);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(t,n,e){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,u=Math.cos(t),c=Math.sin(t),s=n-n*u+e*c,l=e-n*c-e*u;return[u*r-c*i+s,c*r+u*i+l,u*r-c*o+s,c*r+u*o+l,u*a-c*i+s,c*a+u*i+l,u*a-c*o+s,c*a+u*o+l]},union:function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect:function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses:function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith:function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects:function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains:function(t,n){return!(t<this.x1||t>this.x2||n<this.y1||n>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},(0,g.XW)(Cg,Dg),Ag.prototype={pending:function(){return this._pending},sanitizeURL:function(t){var n=this;return Tg(n),n._loader.sanitize(t,{context:"href"}).then((function(t){return Fg(n),t})).catch((function(){return Fg(n),null}))},loadImage:function(t){var n=this,e=Ll();return Tg(n),n._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!e)throw{url:r};var i=new e,a=(0,g.nr)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=function(){return Fg(n)},i.onerror=function(){return Fg(n)},i.src=r,i})).catch((function(t){return Fg(n),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},ready:function(){var t=this;return new Promise((function(n){!function e(r){t.pending()?setTimeout((function(){e(!0)}),10):n(r)}(!1)}))}};var Zg,Ng,zg,Ug,Pg,Rg,Lg,Ig,Bg=Wv-1e-8,qg=function(t,n){return Zg.add(t,n)},Hg=function(t,n){return qg(Ng=t,zg=n)},Wg=function(t){return qg(t,Zg.y1)},Yg=function(t){return qg(Zg.x1,t)},Xg=function(t,n){return Pg*t+Lg*n},Gg=function(t,n){return Rg*t+Ig*n},Jg=function(t,n){return qg(Xg(t,n),Gg(t,n))},$g=function(t,n){return Hg(Xg(t,n),Gg(t,n))};function Vg(t,n){return Zg=t,n?(Ug=n*Bv,Pg=Ig=Math.cos(Ug),Rg=Math.sin(Ug),Lg=-Rg):(Pg=Ig=1,Ug=Rg=Lg=0),Kg}var Kg={beginPath:function(){},closePath:function(){},moveTo:$g,lineTo:$g,rect:function(t,n,e,r){Ug?(Jg(t+e,n),Jg(t+e,n+r),Jg(t,n+r),$g(t,n)):(qg(t+e,n+r),Hg(t,n))},quadraticCurveTo:function(t,n,e,r){var i=Xg(t,n),a=Gg(t,n),o=Xg(e,r),u=Gg(e,r);Qg(Ng,i,o,Wg),Qg(zg,a,u,Yg),Hg(o,u)},bezierCurveTo:function(t,n,e,r,i,a){var o=Xg(t,n),u=Gg(t,n),c=Xg(e,r),s=Gg(e,r),l=Xg(i,a),f=Gg(i,a);tm(Ng,o,c,l,Wg),tm(zg,u,s,f,Yg),Hg(l,f)},arc:function(t,n,e,r,i,a){if(r+=Ug,i+=Ug,Ng=e*Math.cos(i)+t,zg=e*Math.sin(i)+n,Math.abs(i-r)>Bg)qg(t-e,n-e),qg(t+e,n+e);else{var o,u,c=function(r){return qg(e*Math.cos(r)+t,e*Math.sin(r)+n)};if(c(r),c(i),i!==r)if((r%=Wv)<0&&(r+=Wv),(i%=Wv)<0&&(i+=Wv),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=Wv,o=r-r%Hv,u=0;u<4&&o>i;++u,o-=Hv)c(o);else for(o=r-r%Hv+Hv,u=0;u<4&&o<i;++u,o+=Hv)c(o)}}};function Qg(t,n,e,r){var i=(t-n)/(t+e-2*n);0<i&&i<1&&r(t+(n-t)*i)}function tm(t,n,e,r,i){var a,o=r-t+3*n-3*e,u=t+e-2*n,c=t-n,s=0,l=0;Math.abs(o)>qv?(a=u*u+c*o)>=0&&(s=(-u+(a=Math.sqrt(a)))/o,l=(-u-a)/o):s=.5*c/u,0<s&&s<1&&i(nm(s,t,n,e,r)),0<l&&l<1&&i(nm(l,t,n,e,r))}function nm(t,n,e,r,i){var a=1-t,o=a*a,u=t*t;return o*a*n+3*o*t*e+3*a*u*r+u*t*i}var em=(em=Rl(1,1))?em.getContext("2d"):null,rm=new Sg;function im(t){return function(n,e){if(!em)return!0;t(em,n),rm.clear().union(n.bounds).intersect(e).round();for(var r=rm.x1,i=rm.y1,a=rm.x2,o=rm.y2,u=i;u<=o;++u)for(var c=r;c<=a;++c)if(em.isPointInPath(c,u))return!0;return!1}}function am(t,n){return n.contains(t.x||0,t.y||0)}function om(t,n){var e=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return n.intersects(rm.set(e,r,e+i,r+a))}function um(t,n,e,r,i){var a,o,u,c,s=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-n,p=i-e,v=0,g=1;for(c=0;c<4;++c){if(0===c&&(a=-d,o=-(s-n)),1===c&&(a=d,o=f-n),2===c&&(a=-p,o=-(l-e)),3===c&&(a=p,o=h-e),Math.abs(a)<1e-10&&o<0)return!1;if(u=o/a,a<0){if(u>g)return!1;u>v&&(v=u)}else if(a>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function cm(t,n){t.globalCompositeOperation=n.blend||"source-over"}function sm(t,n){return null==t?n:t}function lm(t,n){for(var e=n.length,r=0;r<e;++r)t.addColorStop(n[r].offset,n[r].color);return t}function fm(t,n,e){return jv(e)?function(t,n,e){var r,i=e.width(),a=e.height();if("radial"===n.gradient)r=t.createRadialGradient(e.x1+sm(n.x1,.5)*i,e.y1+sm(n.y1,.5)*a,Math.max(i,a)*sm(n.r1,0),e.x1+sm(n.x2,.5)*i,e.y1+sm(n.y2,.5)*a,Math.max(i,a)*sm(n.r2,.5));else{var o=sm(n.x1,0),u=sm(n.y1,0),c=sm(n.x2,1),s=sm(n.y2,0);if(o!==c&&u!==s&&i!==a){var l=Rl(Math.ceil(i),Math.ceil(a)),f=l.getContext("2d");return f.scale(i,a),f.fillStyle=lm(f.createLinearGradient(o,u,c,s),n.stops),f.fillRect(0,0,i,a),t.createPattern(l,"no-repeat")}r=t.createLinearGradient(e.x1+o*i,e.y1+u*a,e.x1+c*i,e.y1+s*a)}return lm(r,n.stops)}(t,e,n.bounds):e}function hm(t,n,e){return(e*=null==n.fillOpacity?1:n.fillOpacity)>0&&(t.globalAlpha=e,t.fillStyle=fm(t,n,n.fill),!0)}var dm=[];function pm(t,n,e){var r=null!=(r=n.strokeWidth)?r:1;return!(r<=0)&&((e*=null==n.strokeOpacity?1:n.strokeOpacity)>0&&(t.globalAlpha=e,t.strokeStyle=fm(t,n,n.stroke),t.lineWidth=r,t.lineCap=n.strokeCap||"butt",t.lineJoin=n.strokeJoin||"miter",t.miterLimit=n.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(n.strokeDash||dm),t.lineDashOffset=n.strokeDashOffset||0),!0))}function vm(t,n){return t.zindex-n.zindex||t.index-n.index}function gm(t){if(!t.zdirty)return t.zitems;var n,e,r,i=t.items,a=[];for(e=0,r=i.length;e<r;++e)(n=i[e]).index=e,n.zindex&&a.push(n);return t.zdirty=!1,t.zitems=a.sort(vm)}function mm(t,n){var e,r,i=t.items;if(i&&i.length){var a=gm(t);if(a&&a.length){for(e=0,r=i.length;e<r;++e)i[e].zindex||n(i[e]);i=a}for(e=0,r=i.length;e<r;++e)n(i[e])}}function ym(t,n){var e,r,i=t.items;if(!i||!i.length)return null;var a=gm(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(e=n(i[r]))return e;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(e=n(i[r])))return e;return null}function bm(t){return function(n,e,r){mm(e,(function(e){r&&!r.intersects(e.bounds)||_m(t,n,e,e)}))}}function xm(t){return function(n,e,r){!e.items.length||r&&!r.intersects(e.bounds)||_m(t,n,e.items[0],e.items)}}function _m(t,n,e,r){var i=null==e.opacity?1:e.opacity;0!==i&&(t(n,r)||(cm(n,e),e.fill&&hm(n,e,i)&&n.fill(),e.stroke&&pm(n,e,i)&&n.stroke()))}function wm(t){return t=t||g.yb,function(n,e,r,i,a,o){return r*=n.pixelRatio,i*=n.pixelRatio,ym(e,(function(e){var u=e.bounds;if((!u||u.contains(a,o))&&u)return t(n,e,r,i,a,o)?e:void 0}))}}function km(t,n){return function(e,r,i,a){var o,u,c=Array.isArray(r)?r[0]:r,s=null==n?c.fill:n,l=c.stroke&&e.isPointInStroke;return l&&(o=c.strokeWidth,u=c.strokeCap,e.lineWidth=null!=o?o:1,e.lineCap=null!=u?u:"butt"),!t(e,r)&&(s&&e.isPointInPath(i,a)||l&&e.isPointInStroke(i,a))}}function Mm(t){return wm(km(t))}function Om(t,n){return"translate("+t+","+n+")"}function Em(t){return"rotate("+t+")"}function Sm(t){return Om(t.x||0,t.y||0)}function Dm(t,n,e){function r(t,e){var r=e.x||0,i=e.y||0,a=e.angle||0;t.translate(r,i),a&&t.rotate(a*=Bv),t.beginPath(),n(t,e),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,e){t("transform",function(t){return Om(t.x||0,t.y||0)+(t.angle?" "+Em(t.angle):"")}(e)),t("d",n(null,e))},bound:function(t,e){return n(Vg(t,e.angle),e),jg(t,e).translate(e.x||0,e.y||0)},draw:bm(r),pick:Mm(r),isect:e||im(r)}}var Cm=Dm("arc",(function(t,n){return gg.context(t)(n)}));function Am(t,n,e){function r(t,e){t.beginPath(),n(t,e)}var i=km(r);return{type:t,tag:"path",nested:!0,attr:function(t,e){var r=e.mark.items;r.length&&t("d",n(null,r))},bound:function(t,e){var r=e.items;return 0===r.length?t:(n(Vg(t),r),jg(t,r[0]))},draw:xm(r),pick:function(t,n,e,r,a,o){var u=n.items,c=n.bounds;return!u||!u.length||c&&!c.contains(a,o)?null:(e*=t.pixelRatio,r*=t.pixelRatio,i(t,u,e,r)?u[0]:null)},isect:am,tip:e}}var Tm=Am("area",(function(t,n){var e=n[0],r=e.interpolate||"linear";return("horizontal"===e.orient?yg:mg).curve(Pv(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i="horizontal"===t[0].orient?n[1]:n[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,u=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<u&&(u=r,e=t[o]);return e}));function Fm(t,n){t.beginPath(),kg(n)?Mg(t,n,0,0):t.rect(0,0,n.width||0,n.height||0),t.clip()}function jm(t){var n=sm(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&n>.5&&n<1.5?.5-Math.abs(n-1):0}function Zm(t,n){var e=jm(n);t("d",Mg(null,n,e,e))}function Nm(t,n,e,r){var i=jm(n);t.beginPath(),Mg(t,n,(e||0)+i,(r||0)+i)}var zm=km(Nm),Um=km(Nm,!1),Pm=km(Nm,!0);var Rm={type:"group",tag:"g",nested:!1,attr:function(t,n){t("transform",Sm(n))},bound:function(t,n){if(!n.clip&&n.items)for(var e=n.items,r=e.length,i=0;i<r;++i)t.union(e[i].bounds);return(n.clip||n.width||n.height)&&!n.noBound&&t.add(0,0).add(n.width||0,n.height||0),jg(t,n),t.translate(n.x||0,n.y||0)},draw:function(t,n,e){var r=this;mm(n,(function(n){var i=n.x||0,a=n.y||0,o=n.strokeForeground,u=null==n.opacity?1:n.opacity;(n.stroke||n.fill)&&u&&(Nm(t,n,i,a),cm(t,n),n.fill&&hm(t,n,u)&&t.fill(),n.stroke&&!o&&pm(t,n,u)&&t.stroke()),t.save(),t.translate(i,a),n.clip&&Fm(t,n),e&&e.translate(-i,-a),mm(n,(function(n){r.draw(t,n,e)})),e&&e.translate(i,a),t.restore(),o&&n.stroke&&u&&(Nm(t,n,i,a),cm(t,n),pm(t,n,u)&&t.stroke())}))},pick:function(t,n,e,r,i,a){var o=this;if(n.bounds&&!n.bounds.contains(i,a)||!n.items)return null;var u=e*t.pixelRatio,c=r*t.pixelRatio;return ym(n,(function(s){var l,f,h,d=s.bounds;if(!d||d.contains(i,a)){f=s.x||0,h=s.y||0;var p=f+(s.width||0),v=h+(s.height||0),g=s.clip;if(!g||!(i<f||i>p||a<h||a>v)){if(t.save(),t.translate(f,h),f=i-f,h=a-h,g&&kg(s)&&!Pm(t,s,u,c))return t.restore(),null;var m=s.strokeForeground,y=!1!==n.interactive;return y&&m&&s.stroke&&Um(t,s,u,c)?(t.restore(),s):(!(l=ym(s,(function(t){return function(t,n,e){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(n,e)}(t,f,h)?o.pick(t,e,r,f,h):null})))&&y&&(s.fill||!m&&s.stroke)&&zm(t,s,u,c)&&(l=s),t.restore(),l||null)}}}))},isect:om,content:function(t,n,e){t("clip-path",n.clip?Eg(e,n,n):null)},background:function(t,n){t("class","background"),t("aria-hidden",!0),Zm(t,n)},foreground:function(t,n){t("class","foreground"),t("aria-hidden",!0),n.strokeForeground?Zm(t,n):t("d","")}},Lm={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Im(t,n){var e=t.image;return(!e||t.url&&t.url!==e.url)&&(e={complete:!1,width:0,height:0},n.loadImage(t.url).then((function(n){t.image=n,t.image.url=t.url}))),e}function Bm(t,n){return null!=t.width?t.width:n&&n.width?!1!==t.aspect&&t.height?t.height*n.width/n.height:n.width:0}function qm(t,n){return null!=t.height?t.height:n&&n.height?!1!==t.aspect&&t.width?t.width*n.height/n.width:n.height:0}function Hm(t,n){return"center"===t?n/2:"right"===t?n:0}function Wm(t,n){return"middle"===t?n/2:"bottom"===t?n:0}var Ym={type:"image",tag:"image",nested:!1,attr:function(t,n,e){var r=Im(n,e),i=Bm(n,r),a=qm(n,r),o=(n.x||0)-Hm(n.align,i),u=(n.y||0)-Wm(n.baseline,a);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Lm["xmlns:xlink"],"xlink:href"),t("transform",Om(o,u)),t("width",i),t("height",a),t("preserveAspectRatio",!1===n.aspect?"none":"xMidYMid")},bound:function(t,n){var e=n.image,r=Bm(n,e),i=qm(n,e),a=(n.x||0)-Hm(n.align,r),o=(n.y||0)-Wm(n.baseline,i);return t.set(a,o,a+r,o+i)},draw:function(t,n,e){var r=this;mm(n,(function(n){if(!e||e.intersects(n.bounds)){var i=Im(n,r),a=Bm(n,i),o=qm(n,i);if(0!==a&&0!==o){var u,c,s,l,f=(n.x||0)-Hm(n.align,a),h=(n.y||0)-Wm(n.baseline,o);!1!==n.aspect&&(c=i.width/i.height,s=n.width/n.height,c===c&&s===s&&c!==s&&(s<c?(h+=(o-(l=a/c))/2,o=l):(f+=(a-(l=o*c))/2,a=l))),(i.complete||i.toDataURL)&&(cm(t,n),t.globalAlpha=null!=(u=n.opacity)?u:1,t.imageSmoothingEnabled=!1!==n.smooth,t.drawImage(i,f,h,a,o))}}}))},pick:wm(),isect:g.yb,get:Im,xOffset:Hm,yOffset:Wm},Xm=Am("line",(function(t,n){var e=n[0],r=e.interpolate||"linear";return bg.curve(Pv(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(e=t[a].x-n[0])*e+(r=t[a].y-n[1])*r<i)return t[a];return null}));function Gm(t,n){var e=n.path;if(null==e)return!0;var r=n.x||0,i=n.y||0,a=n.scaleX||1,o=n.scaleY||1,u=(n.angle||0)*Bv,c=n.pathCache;c&&c.path===e||((n.pathCache=c=Iv(e)).path=e),u&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(u),Qv(t,c,0,0,a,o),t.rotate(-u),t.translate(-r,-i)):Qv(t,c,r,i,a,o)}var Jm={type:"path",tag:"path",nested:!1,attr:function(t,n){var e=n.scaleX||1,r=n.scaleY||1;1===e&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return Om(t.x||0,t.y||0)+(t.angle?" "+Em(t.angle):"")+(t.scaleX||t.scaleY?" "+function(t,n){return"scale("+t+","+n+")"}(t.scaleX||1,t.scaleY||1):"")}(n)),t("d",n.path)},bound:function(t,n){return Gm(Vg(t,n.angle),n)?t.set(0,0,0,0):jg(t,n,!0)},draw:bm(Gm),pick:Mm(Gm),isect:im(Gm)};function $m(t,n){t.beginPath(),Mg(t,n)}var Vm={type:"rect",tag:"path",nested:!1,attr:function(t,n){t("d",Mg(null,n))},bound:function(t,n){var e,r;return jg(t.set(e=n.x||0,r=n.y||0,e+n.width||0,r+n.height||0),n)},draw:bm($m),pick:Mm($m),isect:om};function Km(t,n,e){var r,i,a,o;return!(!n.stroke||!pm(t,n,e))&&(r=n.x||0,i=n.y||0,a=null!=n.x2?n.x2:r,o=null!=n.y2?n.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var Qm={type:"rule",tag:"line",nested:!1,attr:function(t,n){t("transform",Sm(n)),t("x2",null!=n.x2?n.x2-(n.x||0):0),t("y2",null!=n.y2?n.y2-(n.y||0):0)},bound:function(t,n){var e,r;return jg(t.set(e=n.x||0,r=n.y||0,null!=n.x2?n.x2:e,null!=n.y2?n.y2:r),n)},draw:function(t,n,e){mm(n,(function(n){if(!e||e.intersects(n.bounds)){var r=null==n.opacity?1:n.opacity;r&&Km(t,n,r)&&(cm(t,n),t.stroke())}}))},pick:wm((function(t,n,e,r){return!!t.isPointInStroke&&(Km(t,n,1)&&t.isPointInStroke(e,r))})),isect:function(t,n){var e=t.x||0,r=t.y||0;return um(n,e,r,null!=t.x2?t.x2:e,null!=t.y2?t.y2:r)}},ty=Dm("shape",(function(t,n){return(n.mark.shape||n.shape).context(t)(n)})),ny=Dm("symbol",(function(t,n){return _g.context(t)(n)}),am),ey=(0,g.$m)(),ry={height:sy,measureWidth:uy,estimateWidth:ay,width:ay,canvas:iy};function iy(t){ry.width=t&&em?uy:ay}function ay(t,n){return oy(dy(t,n),sy(t))}function oy(t,n){return~~(.8*t.length*n)}function uy(t,n){return sy(t)<=0||!(n=dy(t,n))?0:cy(n,vy(t))}function cy(t,n){var e="(".concat(n,") ").concat(t),r=ey.get(e);return void 0===r&&(em.font=n,r=em.measureText(t).width,ey.set(e,r)),r}function sy(t){return null!=t.fontSize?+t.fontSize||0:11}function ly(t){return null!=t.lineHeight?t.lineHeight:sy(t)+2}function fy(t){return n=t.lineBreak&&t.text&&!(0,g.kJ)(t.text)?t.text.split(t.lineBreak):t.text,(0,g.kJ)(n)?n.length>1?n:n[0]:n;var n}function hy(t){var n=fy(t);return((0,g.kJ)(n)?n.length-1:0)*ly(t)}function dy(t,n){var e=null==n?"":(n+"").trim();return t.limit>0&&e.length?function(t,n){var e=+t.limit,r=function(t){if(ry.width===uy){var n=vy(t);return function(t){return cy(t,n)}}var e=sy(t);return function(t){return oy(t,e)}}(t);if(r(n)<e)return n;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,u=0,c=n.length;if(e-=r(a),o){for(;u<c;)i=u+c>>>1,r(n.slice(i))>e?u=i+1:c=i;return a+n.slice(u)}for(;u<c;)i=1+(u+c>>>1),r(n.slice(0,i))<e?u=i:c=i-1;return n.slice(0,u)+a}(t,e):e}function py(t,n){var e=t.font;return(n&&e?String(e).replace(/"/g,"'"):e)||"sans-serif"}function vy(t,n){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+sy(t)+"px "+py(t,n)}function gy(t){var n=t.baseline,e=sy(t);return Math.round("top"===n?.79*e:"middle"===n?.3*e:"bottom"===n?-.21*e:"line-top"===n?.29*e+.5*ly(t):"line-bottom"===n?.29*e-.5*ly(t):0)}iy(!0);var my={left:"start",center:"middle",right:"end"},yy=new Sg;function by(t){var n,e=t.x||0,r=t.y||0,i=t.radius||0;return i&&(n=(t.theta||0)-Hv,e+=i*Math.cos(n),r+=i*Math.sin(n)),yy.x1=e,yy.y1=r,yy}function xy(t,n,e){var r,i=ry.height(n),a=n.align,o=by(n),u=o.x1,c=o.y1,s=n.dx||0,l=(n.dy||0)+gy(n)-Math.round(.8*i),f=fy(n);if((0,g.kJ)(f)?(i+=ly(n)*(f.length-1),r=f.reduce((function(t,e){return Math.max(t,ry.width(n,e))}),0)):r=ry.width(n,f),"center"===a?s-=r/2:"right"===a&&(s-=r),t.set(s+=u,l+=c,s+r,l+i),n.angle&&!e)t.rotate(n.angle*Bv,u,c);else if(2===e)return t.rotatedPoints(n.angle*Bv,u,c);return t}var _y={type:"text",tag:"text",nested:!1,attr:function(t,n){var e,r=n.dx||0,i=(n.dy||0)+gy(n),a=by(n),o=a.x1,u=a.y1,c=n.angle||0;t("text-anchor",my[n.align]||"start"),c?(e=Om(o,u)+" "+Em(c),(r||i)&&(e+=" "+Om(r,i))):e=Om(o+r,u+i),t("transform",e)},bound:xy,draw:function(t,n,e){mm(n,(function(n){var r,i,a,o,u,c,s,l=null==n.opacity?1:n.opacity;if(!(e&&!e.intersects(n.bounds)||0===l||n.fontSize<=0||null==n.text||0===n.text.length)){if(t.font=vy(n),t.textAlign=n.align||"left",i=(r=by(n)).x1,a=r.y1,n.angle&&(t.save(),t.translate(i,a),t.rotate(n.angle*Bv),i=a=0),i+=n.dx||0,a+=(n.dy||0)+gy(n),c=fy(n),cm(t,n),(0,g.kJ)(c))for(u=ly(n),o=0;o<c.length;++o)s=dy(n,c[o]),n.fill&&hm(t,n,l)&&t.fillText(s,i,a),n.stroke&&pm(t,n,l)&&t.strokeText(s,i,a),a+=u;else s=dy(n,c),n.fill&&hm(t,n,l)&&t.fillText(s,i,a),n.stroke&&pm(t,n,l)&&t.strokeText(s,i,a);n.angle&&t.restore()}}))},pick:wm((function(t,n,e,r,i,a){if(n.fontSize<=0)return!1;if(!n.angle)return!0;var o=by(n),u=o.x1,c=o.y1,s=xy(yy,n,1),l=-n.angle*Bv,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(u-f*u+h*c),p=h*i+f*a+(c-h*u-f*c);return s.contains(d,p)})),isect:function(t,n){var e=xy(yy,t,2);return um(n,e[0],e[1],e[2],e[3])||um(n,e[0],e[1],e[4],e[5])||um(n,e[4],e[5],e[6],e[7])||um(n,e[2],e[3],e[6],e[7])}},wy=Am("trail",(function(t,n){return wg.context(t)(n)}),(function(t,n){for(var e,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(e=t[i].x-n[0])*e+(r=t[i].y-n[1])*r<(e=t[i].size||1)*e)return t[i];return null})),ky={arc:Cm,area:Tm,group:Rm,image:Ym,line:Xm,path:Jm,rect:Vm,rule:Qm,shape:ty,symbol:ny,text:_y,trail:wy};function My(t,n,e){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?e?t.createElementNS(e,n):t.createElement(n):null}function Oy(t,n){n=n.toLowerCase();for(var e=t.childNodes,r=0,i=e.length;r<i;++r)if(e[r].tagName.toLowerCase()===n)return e[r]}function Ey(t,n,e,r){var i,a=t.childNodes[n];return a&&a.tagName.toLowerCase()===e.toLowerCase()||(i=a||null,a=My(t.ownerDocument,e,r),t.insertBefore(a,i)),a}function Sy(t,n){for(var e=t.childNodes,r=e.length;r>n;)t.removeChild(e[--r]);return t}function Dy(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Cy(t,n){var e=n.getBoundingClientRect();return[t.clientX-e.left-(n.clientLeft||0),t.clientY-e.top-(n.clientTop||0)]}function Ay(t,n){this._active=null,this._handlers={},this._loader=t||Gr(),this._tooltip=n||Ty}function Ty(t,n,e,r){t.element().setAttribute("title",r||"")}function Fy(t){this._el=null,this._bgcolor=null,this._loader=new Ag(t)}Ay.prototype={initialize:function(t,n,e){return this._el=t,this._obj=e||null,this.origin(n)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene:function(t){return arguments.length?(this._scene=t,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(t,n,e){for(var r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!e||t[r].handler===e))return r;return-1},handlers:function(t){var n=this._handlers,e=[];if(t)e.push.apply(e,(0,b.Z)(n[this.eventName(t)]));else for(var r in n)e.push.apply(e,(0,b.Z)(n[r]));return e},eventName:function(t){var n=t.indexOf(".");return n<0?t:t.slice(0,n)},handleHref:function(t,n,e){this._loader.sanitize(e,{context:"href"}).then((function(n){var e=new MouseEvent(t.type,t),r=My(null,"a");for(var i in n)r.setAttribute(i,n[i]);r.dispatchEvent(e)})).catch((function(){}))},handleTooltip:function(t,n,e){if(n&&null!=n.tooltip){n=function(t,n,e,r){var i,a,o=t&&t.mark;if(o&&(i=ky[o.marktype]).tip){for((a=Cy(n,e))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(n,t,this.canvas(),this._origin);var r=e&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}},getItemBoundingClientRect:function(t){var n=this.canvas();if(n){for(var e=n.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height(),u=i.x1+r[0]+e.left,c=i.y1+r[1]+e.top;t.mark&&(t=t.mark.group);)u+=t.x||0,c+=t.y||0;return{x:u,y:c,width:a,height:o,left:u,top:c,right:u+a,bottom:c+o}}}},Fy.prototype={initialize:function(t,n,e,r,i){return this._el=t,this.resize(n,e,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize:function(t,n,e,r){return this._width=t,this._height=n,this._origin=e||[0,0],this._scale=r||1,this},dirty:function(){},render:function(t){var n=this;return n._call=function(){n._render(t)},n._call(),n._call=null,n},_render:function(){},renderAsync:function(t){var n=this.render(t);return this._ready?this._ready.then((function(){return n})):Promise.resolve(n)},_load:function(t,n){var e=this,r=e._loader[t](n);if(!e._ready){var i=e._call;e._ready=e._loader.ready().then((function(t){t&&i(),e._ready=null}))}return r},sanitizeURL:function(t){return this._load("sanitizeURL",t)},loadImage:function(t){return this._load("loadImage",t)}};var jy="dragenter",Zy="dragleave",Ny="dragover",zy="mousedown",Uy="mousemove",Py="mouseout",Ry="mouseover",Ly="click",Iy="mousewheel",By="touchstart",qy="touchmove",Hy="touchend",Wy=["keydown","keypress","keyup",jy,Zy,Ny,zy,"mouseup",Uy,Py,Ry,Ly,"dblclick","wheel",Iy,By,qy,Hy],Yy=Uy,Xy=Py,Gy=Ly;function Jy(t,n){Ay.call(this,t,n),this._down=null,this._touch=null,this._first=!0,this._events={}}var $y=function(t){return t===By||t===qy||t===Hy?[By,qy,Hy]:[t]};function Vy(t,n){$y(n).forEach((function(n){return function(t,n){var e=t.canvas();e&&!t._events[n]&&(t._events[n]=1,e.addEventListener(n,t[n]?function(e){return t[n](e)}:function(e){return t.fire(n,e)}))}(t,n)}))}function Ky(t,n,e){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(e,r),this._active=a,this.fire(n,r)),this.fire(t,r)}}function Qy(t){return function(n){this.fire(t,n),this._active=null}}(0,g.XW)(Jy,Ay,{initialize:function(t,n,e){var r=this;return this._canvas=t&&Oy(t,"canvas"),[Ly,zy,Uy,Py,Zy].forEach((function(t){return Vy(r,t)})),Ay.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:Wy,DOMMouseScroll:function(t){this.fire(Iy,t)},mousemove:Ky(Uy,Ry,Py),dragover:Ky(Ny,jy,Zy),mouseout:Qy(Py),dragleave:Qy(Zy),mousedown:function(t){this._down=this._active,this.fire(zy,t)},click:function(t){this._down===this._active&&(this.fire(Ly,t),this._down=null)},touchstart:function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(By,t,!0)},touchmove:function(t){this.fire(qy,t,!0)},touchend:function(t){this.fire(Hy,t,!0),this._touch=null},fire:function(t,n,e){var r=e?this._touch:this._active,i=this._handlers[t];if(n.vegaType=t,t===Gy&&r&&r.href?this.handleHref(n,r,r.href):t!==Yy&&t!==Xy||this.handleTooltip(n,r,t!==Xy),i)for(var a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,n,r)},on:function(t,n){var e=this.eventName(t),r=this._handlers;return this._handlerIndex(r[e],t,n)<0&&(Vy(this,t),(r[e]||(r[e]=[])).push({type:t,handler:n})),this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&r.splice(i,1),this},pickEvent:function(t){var n=Cy(t,this._canvas),e=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-e[0],n[1]-e[1])},pick:function(t,n,e,r,i){var a=this.context();return ky[t.marktype].pick.call(this,a,t,n,e,r,i)}});var tb="undefined"!==typeof window&&window.devicePixelRatio||1;function nb(t){Fy.call(this,t),this._options={},this._redraw=!1,this._dirty=new Sg,this._tempb=new Sg}var eb=Fy.prototype;function rb(t,n){Ay.call(this,t,n);var e=this;e._hrefHandler=ib(e,(function(t,n){n&&n.href&&e.handleHref(t,n,n.href)})),e._tooltipHandler=ib(e,(function(t,n){e.handleTooltip(t,n,t.type!==Xy)}))}(0,g.XW)(nb,Fy,{initialize:function(t,n,e,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Rl(1,1,this._options.type),t&&this._canvas&&(Sy(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),eb.initialize.call(this,t,n,e,r,i)},resize:function(t,n,e,r){if(eb.resize.call(this,t,n,e,r),this._canvas)!function(t,n,e,r,i,a){var o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=o?tb:i;for(var s in t.width=n*c,t.height=e*c,a)u[s]=a[s];o&&1!==c&&(t.style.width=n+"px",t.style.height=e+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var i=this._options.externalContext;i||(0,g.vU)("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(t){for(var n=this._tempb.clear().union(t.bounds),e=t.mark.group;e;)n.translate(e.x||0,e.y||0),e=e.mark.group;this._dirty.union(n)},_render:function(t){var n=this.context(),e=this._origin,r=this._width,i=this._height,a=this._dirty,o=function(t,n,e){return(new Sg).set(0,0,n,e).translate(-t[0],-t[1])}(e,r,i);n.save();var u=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):function(t,n,e){return n.expand(1).round(),t.pixelRatio%1&&n.scale(t.pixelRatio).round().scale(1/t.pixelRatio),n.translate(-e[0]%1,-e[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),n}(n,o.intersect(a),e);return this.clear(-e[0],-e[1],r,i),this.draw(n,t,u),n.restore(),a.clear(),this},draw:function(t,n,e){var r=ky[n.marktype];n.clip&&function(t,n){var e=n.clip;t.save(),(0,g.mf)(e)?(t.beginPath(),e(t),t.clip()):Fm(t,n.group)}(t,n),r.draw.call(this,t,n,e),n.clip&&t.restore()},clear:function(t,n,e,r){var i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,n,e,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,e,r))}});var ib=function(t,n){return function(e){var r=e.target.__data__;r=Array.isArray(r)?r[0]:r,e.vegaType=e.type,n.call(t._obj,e,r)}};(0,g.XW)(rb,Ay,{initialize:function(t,n,e){var r=this._svg;return r&&(r.removeEventListener(Gy,this._hrefHandler),r.removeEventListener(Yy,this._tooltipHandler),r.removeEventListener(Xy,this._tooltipHandler)),this._svg=r=t&&Oy(t,"svg"),r&&(r.addEventListener(Gy,this._hrefHandler),r.addEventListener(Yy,this._tooltipHandler),r.addEventListener(Xy,this._tooltipHandler)),Ay.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._svg},on:function(t,n){var e=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[e],t,n)<0){var i={type:t,handler:n,listener:ib(this,n)};(r[e]||(r[e]=[])).push(i),this._svg&&this._svg.addEventListener(e,i.listener)}return this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&(this._svg&&this._svg.removeEventListener(e,r[i].listener),r.splice(i,1)),this}});var ab="aria-hidden",ob="aria-label",ub="role",cb="aria-roledescription",sb="graphics-object",lb="graphics-symbol",fb=function(t,n,e){var r;return r={},(0,nt.Z)(r,ub,t),(0,nt.Z)(r,cb,n),(0,nt.Z)(r,ob,e||void 0),r},hb=(0,g.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),db={axis:{desc:"axis",caption:function(t){var n=t.datum,e=t.orient,r=n.title?yb(t):null,i=t.context,a=i.scales[n.scale].value,o=i.dataflow.locale(),u=a.type;return"".concat("left"===e||"right"===e?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat($p(u)?"discrete":u," scale")+" with ".concat(Av(o,a,t))}},legend:{desc:"legend",caption:function(t){var n=t.datum,e=n.title?yb(t):null,r="".concat(n.type||""," legend").trim(),i=n.scales,a=Object.keys(i),o=t.context,u=o.scales[i[a[0]]].value,c=o.dataflow.locale();return function(t){return t.length?t[0].toUpperCase()+t.slice(1):t}(r)+(e?" titled '".concat(e,"'"):"")+" for ".concat(function(t){return t=t.map((function(t){return t+("fill"===t||"stroke"===t?" color":"")})),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+(0,g.fj)(t)}(a))+" with ".concat(Av(c,u,t))}},"title-text":{desc:"title",caption:function(t){return"Title text '".concat(mb(t),"'")}},"title-subtitle":{desc:"subtitle",caption:function(t){return"Subtitle text '".concat(mb(t),"'")}}},pb={ariaRole:ub,ariaRoleDescription:cb,description:ob};function vb(t,n){var e=!1===n.aria;if(t(ab,e||void 0),e||null==n.description)for(var r in pb)t(pb[r],void 0);else{var i=n.mark.marktype;t(ob,n.description),t(ub,n.ariaRole||("group"===i?sb:lb)),t(cb,n.ariaRoleDescription||"".concat(i," mark"))}}function gb(t){return!1===t.aria?(0,nt.Z)({},ab,!0):hb[t.role]?null:db[t.role]?function(t,n){try{var e=t.items[0],r=n.caption||function(){return""};return fb(n.role||lb,n.desc,e.description||r(e))}catch(i){return null}}(t,db[t.role]):function(t){var n=t.marktype,e="group"===n||"text"===n||t.items.some((function(t){return null!=t.description&&!1!==t.aria}));return fb(e?sb:lb,"".concat(n," mark container"),t.description)}(t)}function mb(t){return(0,g.IX)(t.text).join(" ")}function yb(t){try{return(0,g.IX)((0,g.fj)(t.items).items[0].text).join(" ")}catch(n){return null}}var bb=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},xb=function(t){return bb(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")};function _b(){var t="",n="",e="",r=[],i=function(){return n=e=""},a=function(a){n&&(t+="".concat(n,">").concat(e),i()),r.push(a)},o=function(t,e){return null!=e&&(n+=" ".concat(t,'="').concat(xb(e),'"')),u},u={open:function(t){a(t),n="<"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var c=0,s=r;c<s.length;c++){var l=s[c];for(var f in l)o(f,l[f])}return u},close:function(){var a=r.pop();return t+=n?n+(e?">".concat(e,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),u},attr:o,text:function(t){return e+=bb(t),u},toString:function(){return t}};return u}var wb=function(t){return kb(_b(),t)+""};function kb(t,n){if(t.open(n.tagName),n.hasAttributes())for(var e=n.attributes,r=e.length,i=0;i<r;++i)t.attr(e[i].name,e[i].value);if(n.hasChildNodes())for(var a=n.childNodes,o=a.length,u=0;u<o;u++){var c=a[u];3===c.nodeType?t.text(c.nodeValue):kb(t,c)}return t.close()}var Mb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Ob={fill:"none","stroke-miterlimit":10},Eb="http://www.w3.org/2000/xmlns/",Sb=Lm.xmlns;function Db(t){Fy.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Cb=Fy.prototype;function Ab(t,n){for(;t&&t.dirty!==n;t=t.mark.group){if(t.dirty=n,!t.mark||t.mark.dirty===n)return;t.mark.dirty=n}}function Tb(t,n,e){var r,i,a;if("radial"===n.gradient){var o=Ey(t,e++,"pattern",Sb);Rb(o,{id:Fv+n.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Rb(o=Ey(o,0,"rect",Sb),{width:1,height:1,fill:"url(".concat(Ib(),"#").concat(n.id,")")}),Rb(t=Ey(t,e++,"radialGradient",Sb),{id:n.id,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})}else Rb(t=Ey(t,e++,"linearGradient",Sb),{id:n.id,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2});for(r=0,i=n.stops.length;r<i;++r)(a=Ey(t,r,"stop",Sb)).setAttribute("offset",n.stops[r].offset),a.setAttribute("stop-color",n.stops[r].color);return Sy(t,r),e}function Fb(t,n,e){return(t=Ey(t,e,"clipPath",Sb)).setAttribute("id",n.id),n.path?Ey(t,0,"path",Sb).setAttribute("d",n.path):Rb(Ey(t,0,"rect",Sb),{x:0,y:0,width:n.width,height:n.height}),Sy(t,1),e+1}function jb(t,n,e,r,i){var a,o=t._svg;if(!o&&(o=My(a=n.ownerDocument,r,Sb),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var u=My(a,"path",Sb);o.appendChild(u),u.__data__=t;var c=My(a,"g",Sb);o.appendChild(c),c.__data__=t;var s=My(a,"path",Sb);o.appendChild(s),s.__data__=t,s.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(t,n){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=n}(o,e))&&n.insertBefore(o,e?e.nextSibling:n.firstChild),o}(0,g.XW)(Db,Fy,{initialize:function(t,n,e,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=Ey(t,0,"svg",Sb),this._svg.setAttributeNS(Eb,"xmlns",Sb),this._svg.setAttributeNS(Eb,"xmlns:xlink",Lm["xmlns:xlink"]),this._svg.setAttribute("version",Lm.version),this._svg.setAttribute("class","marks"),Sy(t,1),this._root=Ey(this._svg,0,"g",Sb),Rb(this._root,Ob),Sy(this._svg,1)),this.background(this._bgcolor),Cb.initialize.call(this,t,n,e,r,i)},background:function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Cb.background.apply(this,arguments)},resize:function(t,n,e,r){return Cb.resize.call(this,t,n,e,r),this._svg&&(Rb(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var t,n=this._svg,e=this._bgcolor;if(!n)return null;e&&(n.removeAttribute("style"),Rb(t=Ey(n,0,"rect",Sb),{width:this._width,height:this._height,fill:e}));var r=wb(n);return e&&(n.removeChild(t),this._svg.style.setProperty("background-color",e)),r},_render:function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Sy(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty:function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var n,e,r,i,a,o,u,c=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(e=(n=t[a]).mark).marktype!==r&&(r=e.marktype,i=ky[r]),e.zdirty&&e.dirty!==c&&(this._dirtyAll=!1,Ab(n,c),e.items.forEach((function(t){t.dirty=c}))),e.zdirty||(n.exit?(i.nested&&e.items.length?(u=e.items[0])._svg&&this._update(i,u._svg,u):n._svg&&(u=n._svg.parentNode)&&u.removeChild(n._svg),n._svg=null):(n=i.nested?e.items[0]:n)._update!==c&&(n._svg&&n._svg.ownerSVGElement?this._update(i,n._svg,n):(this._dirtyAll=!1,Ab(n,c)),n._update=c));return!this._dirtyAll},mark:function(t,n,e){var r=this;if(!this.isDirty(n))return n._svg;var i=this._svg,a=ky[n.marktype],o=!1===n.interactive?"none":null,u="g"===a.tag,c=null,s=0,l=jb(n,t,e,"g",i);l.setAttribute("class",Dy(n));var f=gb(n);for(var h in f)Lb(l,h,f[h]);u||Lb(l,"pointer-events",o),Lb(l,"clip-path",n.clip?Eg(this,n,n.group):null);var d=function(t){var n=r.isDirty(t),e=jb(t,l,c,a.tag,i);n&&(r._update(a,e,t),u&&function(t,n,e){n=n.lastChild.previousSibling;var r,i=0;mm(e,(function(e){r=t.mark(n,e,r),++i})),Sy(n,1+i)}(r,e,t)),c=e,++s};return a.nested?n.items.length&&d(n.items[0]):mm(n,d),Sy(l,s),l},_update:function(t,n,e){Zb=n,Nb=n.__values__,vb(Ub,e),t.attr(Ub,e,this);var r=zb[t.type];r&&r.call(this,t,n,e),Zb&&this.style(Zb,e)},style:function(t,n){if(null!=n)for(var e in Mb){var r="font"===e?py(n):n[e];if(r!==Nb[e]){var i=Mb[e];null==r?t.removeAttribute(i):(jv(r)&&(r=Zv(r,this._defs.gradient,Ib())),t.setAttribute(i,r+"")),Nb[e]=r}}},defs:function(){var t=this._svg,n=this._defs,e=n.el,r=0;for(var i in n.gradient)e||(n.el=e=Ey(t,1,"defs",Sb)),r=Tb(e,n.gradient[i],r);for(var a in n.clipping)e||(n.el=e=Ey(t,1,"defs",Sb)),r=Fb(e,n.clipping[a],r);e&&(0===r?(t.removeChild(e),n.el=null):Sy(e,r))},_clearDefs:function(){var t=this._defs;t.gradient={},t.clipping={}}});var Zb=null,Nb=null,zb={group:function(t,n,e){var r=Zb=n.childNodes[2];Nb=r.__values__,t.foreground(Ub,e,this),Nb=n.__values__,Zb=n.childNodes[1],t.content(Ub,e,this);var i=Zb=n.childNodes[0];t.background(Ub,e,this);var a=!1===e.mark.interactive?"none":null;if(a!==Nb.events&&(Lb(r,"pointer-events",a),Lb(i,"pointer-events",a),Nb.events=a),e.strokeForeground&&e.stroke){var o=e.fill;Lb(r,"display",null),this.style(i,e),Lb(i,"stroke",null),o&&(e.fill=null),Nb=r.__values__,this.style(r,e),o&&(e.fill=o),Zb=null}else Lb(r,"display","none")},image:function(t,n,e){!1===e.smooth?(Pb(n,"image-rendering","optimizeSpeed"),Pb(n,"image-rendering","pixelated")):Pb(n,"image-rendering",null)},text:function(t,n,e){var r,i,a,o,u=fy(e);(0,g.kJ)(u)?(r=(i=u.map((function(t){return dy(e,t)}))).join("\n"))!==Nb.text&&(Sy(n,0),a=n.ownerDocument,o=ly(e),i.forEach((function(t,r){var i=My(a,"tspan",Sb);i.__data__=e,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),n.appendChild(i)})),Nb.text=r):(i=dy(e,u))!==Nb.text&&(n.textContent=i,Nb.text=i),Lb(n,"font-family",py(e)),Lb(n,"font-size",sy(e)+"px"),Lb(n,"font-style",e.fontStyle),Lb(n,"font-variant",e.fontVariant),Lb(n,"font-weight",e.fontWeight)}};function Ub(t,n,e){n!==Nb[t]&&(e?function(t,n,e,r){null!=e?t.setAttributeNS(r,n,e):t.removeAttributeNS(r,n)}(Zb,t,n,e):Lb(Zb,t,n),Nb[t]=n)}function Pb(t,n,e){e!==Nb[n]&&(null==e?t.style.removeProperty(n):t.style.setProperty(n,e+""),Nb[n]=e)}function Rb(t,n){for(var e in n)Lb(t,e,n[e])}function Lb(t,n,e){null!=e?t.setAttribute(n,e):t.removeAttribute(n)}function Ib(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Bb(t){Fy.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}(0,g.XW)(Bb,Fy,{svg:function(){return this._text},_render:function(t){var n=_b();n.open("svg",(0,g.l7)({},Lm,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var e=this._bgcolor;return e&&"transparent"!==e&&"none"!==e&&n.open("rect",{width:this._width,height:this._height,fill:e}).close(),n.open("g",Ob,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this},mark:function(t,n){var e=this,r=ky[n.marktype],i=r.tag,a=[vb,r.attr];t.open("g",{class:Dy(n),"clip-path":n.clip?Eg(this,n,n.group):null},gb(n),{"pointer-events":"g"!==i&&!1===n.interactive?"none":null});var o=function(o){var u=e.href(o);if(u&&t.open("a",u),t.open(i,e.attr(n,o,a,"g"!==i?i:null)),"text"===i){var c=fy(o);if((0,g.kJ)(c))for(var s={x:0,dy:ly(o)},l=0;l<c.length;++l)t.open("tspan",l?s:null).text(dy(o,c[l])).close();else t.text(dy(o,c))}else if("g"===i){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),t.open("path",e.attr(n,o,r.background,"bgrect")).close(),t.open("g",e.attr(n,o,r.content)),mm(o,(function(n){return e.mark(t,n)})),t.close(),f&&d?(h&&(o.fill=null),o.stroke=d,t.open("path",e.attr(n,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):t.open("path",e.attr(n,o,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):mm(n,o),t.close()},href:function(t){var n,e=this,r=t.href;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(e._hrefs||(e._hrefs={}))[r]=t}))}return null},attr:function(t,n,e,r){var i=this,a={},o=function(t,n,e,r){a[r||t]=n};return Array.isArray(e)?e.forEach((function(t){return t(o,n,i)})):e(o,n,this),r&&function(t,n,e,r,i){if(null==n)return t;"bgrect"===r&&!1===e.interactive&&(t["pointer-events"]="none");if("bgfore"===r&&(!1===e.interactive&&(t["pointer-events"]="none"),t.display="none",null!==n.fill))return t;"image"===r&&!1===n.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(t["font-family"]=py(n),t["font-size"]=sy(n)+"px",t["font-style"]=n.fontStyle,t["font-variant"]=n.fontVariant,t["font-weight"]=n.fontWeight);for(var a in Mb){var o=n[a],u=Mb[a];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(jv(o)&&(o=Zv(o,i.gradient,"")),t[u]=o)}}(a,n,t,r,this._defs),a},defs:function(t){var n=this._defs.gradient,e=this._defs.clipping;if(0!==Object.keys(n).length+Object.keys(e).length){for(var r in t.open("defs"),n){var i=n[r],a=i.stops;"radial"===i.gradient?(t.open("pattern",{id:Fv+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(var o=0;o<a.length;++o)t.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();t.close()}for(var u in e){var c=e[u];t.open("clipPath",{id:u}),c.path?t.open("path",{d:c.path}).close():t.open("rect",{x:0,y:0,width:c.width,height:c.height}).close(),t.close()}t.close()}}});var qb="canvas",Hb="none",Wb={};function Yb(t,n,e){var r=[],i=(new Sg).union(n),a=t.marktype;return a?Xb(t,i,e,r):"group"===a?Gb(t,i,e,r):(0,g.vU)("Intersect scene must be mark node or group item.")}function Xb(t,n,e,r){if(function(t,n,e){return t.bounds&&n.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!e||e(t)))}(t,n,e)){var i=t.items,a=t.marktype,o=i.length,u=0;if("group"===a)for(;u<o;++u)Gb(i[u],n,e,r);else for(var c=ky[a].isect;u<o;++u){var s=i[u];Jb(s,n,c)&&r.push(s)}}return r}function Gb(t,n,e,r){e&&e(t.mark)&&Jb(t,n,ky.group.isect)&&r.push(t);var i=t.items,a=i&&i.length;if(a){var o=t.x||0,u=t.y||0;n.translate(-o,-u);for(var c=0;c<a;++c)Xb(i[c],n,e,r);n.translate(o,u)}return r}function Jb(t,n,e){var r=t.bounds;return n.encloses(r)||n.intersects(r)&&e(t,n)}Wb[qb]=Wb.png={renderer:nb,headless:nb,handler:Jy},Wb.svg={renderer:Db,headless:Bb,handler:rb},Wb[Hb]={};var $b=new Sg;var Vb="top",Kb="left",Qb="right",tx="bottom",nx="top-left",ex="top-right",rx="bottom-left",ix="bottom-right",ax="start",ox="middle",ux="end",cx="x",sx="y",lx="group",fx="axis",hx="title",dx="frame",px="scope",vx="legend",gx="row-header",mx="row-footer",yx="row-title",bx="column-header",xx="column-footer",_x="column-title",wx="padding",kx="symbol",Mx="fit",Ox="fit-x",Ex="fit-y",Sx="pad",Dx="none",Cx="all",Ax="each",Tx="flush",Fx="column",jx="row";function Zx(t){ma.call(this,null,t)}function Nx(t,n,e){return n(t.bounds.clear(),t,e)}(0,g.XW)(Zx,ma,{transform:function(t,n){var e,r=n.dataflow,i=t.mark,a=i.marktype,o=ky[a],u=o.bound,c=i.bounds;if(o.nested)i.items.length&&r.dirty(i.items[0]),c=Nx(i,u),i.items.forEach((function(t){t.bounds.clear().union(c)}));else if(a===lx||t.modified())switch(n.visit(n.MOD,(function(t){return r.dirty(t)})),c.clear(),i.items.forEach((function(t){return c.union(Nx(t,u))})),i.role){case fx:case vx:case hx:n.reflow()}else e=n.changed(n.REM),n.visit(n.ADD,(function(t){c.union(Nx(t,u))})),n.visit(n.MOD,(function(t){e=e||c.alignsWith(t.bounds),r.dirty(t),c.union(Nx(t,u))})),e&&(c.clear(),i.items.forEach((function(t){return c.union(t.bounds)})));return function(t){var n=t.clip;if((0,g.mf)(n))n(Vg($b.clear()));else{if(!n)return;$b.set(0,0,t.group.width,t.group.height)}t.bounds.intersect($b)}(i),n.modifies("bounds")}});var zx=":vega_identifier:";function Ux(t){ma.call(this,0,t)}function Px(t){ma.call(this,null,t)}function Rx(t){ma.call(this,null,t)}Ux.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},(0,g.XW)(Ux,ma,{transform:function(t,n){var e,r=(e=n.dataflow)._signals[zx]||(e._signals[zx]=e.add(0)),i=t.as,a=r.value;return n.visit(n.ADD,(function(t){return t[i]=t[i]||++a})),r.set(this.value=a),n}}),(0,g.XW)(Px,ma,{transform:function(t,n){var e=this.value;e||((e=n.dataflow.scenegraph().mark(t.markdef,function(t){var n=t.groups,e=t.parent;return n&&1===n.size?n.get(Object.keys(n.object)[0]):n&&e?n.lookup(e):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=e.group),e.source=this.source,e.clip=t.clip,e.interactive=t.interactive,this.value=e);var r=e.marktype===lx?Cg:Dg;return n.visit(n.ADD,(function(t){return r.call(t,e)})),(t.modified("clip")||t.modified("interactive"))&&(e.clip=t.clip,e.interactive=!!t.interactive,e.zdirty=!0,n.reflow()),e.items=n.source,n}});var Lx={parity:function(t){return t.filter((function(t,n){return n%2?t.opacity=0:1}))},greedy:function(t,n){var e;return t.filter((function(t,r){return r&&Ix(e.bounds,t.bounds,n)?t.opacity=0:(e=t,1)}))}},Ix=function(t,n,e){return e>Math.max(n.x1-t.x2,t.x1-n.x2,n.y1-t.y2,t.y1-n.y2)},Bx=function(t,n){for(var e,r=1,i=t.length,a=t[0].bounds;r<i;a=e,++r)if(Ix(a,e=t[r].bounds,n))return!0},qx=function(t){var n=t.bounds;return n.width()>1&&n.height()>1},Hx=function(t){return t.forEach((function(t){return t.opacity=1})),t},Wx=function(t,n){return t.reflow(n.modified()).modifies("opacity")};function Yx(t){ma.call(this,null,t)}(0,g.XW)(Rx,ma,{transform:function(t,n){var e,r,i=Lx[t.method]||Lx.parity,a=t.separation||0,o=n.materialize(n.SOURCE).source;if(o&&o.length){if(!t.method)return t.modified("method")&&(Hx(o),n=Wx(n,t)),n;if((o=o.filter(qx)).length){if(t.sort&&(o=o.slice().sort(t.sort)),e=Hx(o),n=Wx(n,t),e.length>=3&&Bx(e,a)){do{e=i(e,a)}while(e.length>=3&&Bx(e,a));e.length<3&&!(0,g.fj)(o).opacity&&(e.length>1&&((0,g.fj)(e).opacity=0),(0,g.fj)(o).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(r=function(t,n,e){var r=t.range(),i=new Sg;return n===Vb||n===tx?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(e||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),o.forEach((function(t){r(t)||(t.opacity=0)})));var u=e[0].mark.bounds.clear();return o.forEach((function(t){t.opacity&&u.union(t.bounds)})),n}}}}),(0,g.XW)(Yx,ma,{transform:function(t,n){var e=n.dataflow;if(n.visit(n.ALL,(function(t){return e.dirty(t)})),n.fields&&n.fields.zindex){var r=n.source&&n.source[0];r&&(r.mark.zdirty=!0)}}});var Xx=new Sg;function Gx(t,n,e){return t[n]===e?0:(t[n]=e,1)}function Jx(t){var n=t.items[0].orient;return n===Kb||n===Qb}function $x(t,n,e,r){var i,a,o=n.items[0],u=o.datum,c=null!=o.translate?o.translate:.5,s=o.orient,l=function(t){var n=+t.grid;return[t.ticks?n++:-1,t.labels?n++:-1,n+ +t.domain]}(u),f=o.range,h=o.offset,d=o.position,p=o.minExtent,v=o.maxExtent,g=u.title&&o.items[l[2]].items[0],m=o.titlePadding,y=o.bounds,b=g&&hy(g),x=0,_=0;switch(Xx.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(o.items[i].bounds),(i=l[1])>-1&&y.union(o.items[i].bounds),s){case Vb:x=d||0,_=-h,a=Math.max(p,Math.min(v,-y.y1)),y.add(0,-a).add(f,0),g&&Vx(t,g,a,m,b,0,-1,y);break;case Kb:x=-h,_=d||0,a=Math.max(p,Math.min(v,-y.x1)),y.add(-a,0).add(0,f),g&&Vx(t,g,a,m,b,1,-1,y);break;case Qb:x=e+h,_=d||0,a=Math.max(p,Math.min(v,y.x2)),y.add(0,0).add(a,f),g&&Vx(t,g,a,m,b,1,1,y);break;case tx:x=d||0,_=r+h,a=Math.max(p,Math.min(v,y.y2)),y.add(0,0).add(f,a),g&&Vx(t,g,a,m,0,0,1,y);break;default:x=o.x,_=o.y}return jg(y.translate(x,_),o),Gx(o,"x",x+c)|Gx(o,"y",_+c)&&(o.bounds=Xx,t.dirty(o),o.bounds=y,t.dirty(o)),o.mark.bounds.clear().union(y)}function Vx(t,n,e,r,i,a,o,u){var c=n.bounds;if(n.auto){var s=o*(e+i+r),l=0,f=0;t.dirty(n),a?l=(n.x||0)-(n.x=s):f=(n.y||0)-(n.y=s),n.mark.bounds.clear().union(c.translate(-l,-f)),t.dirty(n)}u.union(c)}var Kx=function(t,n){return Math.floor(Math.min(t,n))},Qx=function(t,n){return Math.ceil(Math.max(t,n))};function t_(t){return(new Sg).set(0,0,t.width||0,t.height||0)}function n_(t){var n=t.bounds.clone();return n.empty()?n.set(0,0,0,0):n.translate(-(t.x||0),-(t.y||0))}function e_(t,n,e){var r=(0,g.Kn)(t)?t[n]:t;return null!=r?r:void 0!==e?e:0}function r_(t){return t<0?Math.ceil(-t):0}function i_(t,n,e){var r,i,a,o,u,c,s,l,f,h,d,p=!e.nodirty,v=e.bounds===Tx?t_:n_,g=Xx.set(0,0,0,0),m=e_(e.align,Fx),y=e_(e.align,jx),b=e_(e.padding,Fx),x=e_(e.padding,jx),_=e.columns||n.length,w=_<=0?1:Math.ceil(n.length/_),k=n.length,M=Array(k),O=Array(_),E=0,S=Array(k),D=Array(w),C=0,A=Array(k),T=Array(k),F=Array(k);for(i=0;i<_;++i)O[i]=0;for(i=0;i<w;++i)D[i]=0;for(i=0;i<k;++i)c=n[i],u=F[i]=v(c),c.x=c.x||0,A[i]=0,c.y=c.y||0,T[i]=0,a=i%_,o=~~(i/_),E=Math.max(E,s=Math.ceil(u.x2)),C=Math.max(C,l=Math.ceil(u.y2)),O[a]=Math.max(O[a],s),D[o]=Math.max(D[o],l),M[i]=b+r_(u.x1),S[i]=x+r_(u.y1),p&&t.dirty(n[i]);for(i=0;i<k;++i)i%_===0&&(M[i]=0),i<_&&(S[i]=0);if(m===Ax)for(a=1;a<_;++a){for(d=0,i=a;i<k;i+=_)d<M[i]&&(d=M[i]);for(i=a;i<k;i+=_)M[i]=d+O[a-1]}else if(m===Cx){for(d=0,i=0;i<k;++i)i%_&&d<M[i]&&(d=M[i]);for(i=0;i<k;++i)i%_&&(M[i]=d+E)}else for(m=!1,a=1;a<_;++a)for(i=a;i<k;i+=_)M[i]+=O[a-1];if(y===Ax)for(o=1;o<w;++o){for(d=0,r=(i=o*_)+_;i<r;++i)d<S[i]&&(d=S[i]);for(i=o*_;i<r;++i)S[i]=d+D[o-1]}else if(y===Cx){for(d=0,i=_;i<k;++i)d<S[i]&&(d=S[i]);for(i=_;i<k;++i)S[i]=d+C}else for(y=!1,o=1;o<w;++o)for(r=(i=o*_)+_;i<r;++i)S[i]+=D[o-1];for(f=0,i=0;i<k;++i)f=M[i]+(i%_?f:0),A[i]+=f-n[i].x;for(a=0;a<_;++a)for(h=0,i=a;i<k;i+=_)h+=S[i],T[i]+=h-n[i].y;if(m&&e_(e.center,Fx)&&w>1)for(i=0;i<k;++i)(f=(u=m===Cx?E:O[i%_])-F[i].x2-n[i].x-A[i])>0&&(A[i]+=f/2);if(y&&e_(e.center,jx)&&1!==_)for(i=0;i<k;++i)(h=(u=y===Cx?C:D[~~(i/_)])-F[i].y2-n[i].y-T[i])>0&&(T[i]+=h/2);for(i=0;i<k;++i)g.union(F[i].translate(A[i],T[i]));switch(f=e_(e.anchor,cx),h=e_(e.anchor,sx),e_(e.anchor,Fx)){case ux:f-=g.width();break;case ox:f-=g.width()/2}switch(e_(e.anchor,jx)){case ux:h-=g.height();break;case ox:h-=g.height()/2}for(f=Math.round(f),h=Math.round(h),g.clear(),i=0;i<k;++i)n[i].mark.bounds.clear();for(i=0;i<k;++i)(c=n[i]).x+=A[i]+=f,c.y+=T[i]+=h,g.union(c.mark.bounds.union(c.bounds.translate(A[i],T[i]))),p&&t.dirty(c);return g}function a_(t,n,e){var r,i,a,o,u,c,s,l=function(t){for(var n,e,r,i,a,o,u,c=t.items,s=c.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<s;++l)if(u=(o=c[l]).items,o.marktype===lx)switch(o.role){case fx:case vx:case hx:break;case gx:(n=f.rowheaders).push.apply(n,(0,b.Z)(u));break;case mx:(e=f.rowfooters).push.apply(e,(0,b.Z)(u));break;case bx:(r=f.colheaders).push.apply(r,(0,b.Z)(u));break;case xx:(i=f.colfooters).push.apply(i,(0,b.Z)(u));break;case yx:f.rowtitle=u[0];break;case _x:f.coltitle=u[0];break;default:(a=f.marks).push.apply(a,(0,b.Z)(u))}return f}(n),f=l.marks,h=e.bounds===Tx?o_:u_,d=e.offset,p=e.columns||f.length,v=p<=0?1:Math.ceil(f.length/p),g=v*p,m=i_(t,f,e);m.empty()&&m.set(0,0,0,0),l.rowheaders&&(c=e_(e.headerBand,jx,null),r=c_(t,l.rowheaders,f,p,v,-e_(d,"rowHeader"),Kx,0,h,"x1",0,p,1,c)),l.colheaders&&(c=e_(e.headerBand,Fx,null),i=c_(t,l.colheaders,f,p,p,-e_(d,"columnHeader"),Kx,1,h,"y1",0,1,p,c)),l.rowfooters&&(c=e_(e.footerBand,jx,null),a=c_(t,l.rowfooters,f,p,v,e_(d,"rowFooter"),Qx,0,h,"x2",p-1,p,1,c)),l.colfooters&&(c=e_(e.footerBand,Fx,null),o=c_(t,l.colfooters,f,p,p,e_(d,"columnFooter"),Qx,1,h,"y2",g-p,1,p,c)),l.rowtitle&&(u=e_(e.titleAnchor,jx),s=e_(d,"rowTitle"),s=u===ux?a+s:r-s,c=e_(e.titleBand,jx,.5),s_(t,l.rowtitle,s,0,m,c)),l.coltitle&&(u=e_(e.titleAnchor,Fx),s=e_(d,"columnTitle"),s=u===ux?o+s:i-s,c=e_(e.titleBand,Fx,.5),s_(t,l.coltitle,s,1,m,c))}function o_(t,n){return"x1"===n?t.x||0:"y1"===n?t.y||0:"x2"===n?(t.x||0)+(t.width||0):"y2"===n?(t.y||0)+(t.height||0):void 0}function u_(t,n){return t.bounds[n]}function c_(t,n,e,r,i,a,o,u,c,s,l,f,h,d){var p,v,g,m,y,b,x,_,w,k=e.length,M=0,O=0;if(!k)return M;for(p=l;p<k;p+=f)e[p]&&(M=o(M,c(e[p],s)));if(!n.length)return M;for(n.length>i&&(t.warn("Grid headers exceed limit: "+i),n=n.slice(0,i)),M+=a,v=0,m=n.length;v<m;++v)t.dirty(n[v]),n[v].mark.bounds.clear();for(p=l,v=0,m=n.length;v<m;++v,p+=f){for(y=(b=n[v]).mark.bounds,g=p;g>=0&&null==(x=e[g]);g-=h);u?(_=null==d?x.x:Math.round(x.bounds.x1+d*x.bounds.width()),w=M):(_=M,w=null==d?x.y:Math.round(x.bounds.y1+d*x.bounds.height())),y.union(b.bounds.translate(_-(b.x||0),w-(b.y||0))),b.x=_,b.y=w,t.dirty(b),O=o(O,y[s])}return O}function s_(t,n,e,r,i,a){if(n){t.dirty(n);var o=e,u=e;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),n.bounds.translate(o-(n.x||0),u-(n.y||0)),n.mark.bounds.clear().union(n.bounds),n.x=o,n.y=u,t.dirty(n)}}function l_(t,n,e,r,i,a,o){var u=function(t,n){var e=t[n]||{};return function(n,r){return null!=e[n]?e[n]:null!=t[n]?t[n]:r}}(e,n),c=function(t,n){var e=-1/0;return t.forEach((function(t){null!=t.offset&&(e=Math.max(e,t.offset))})),e>-1/0?e:n}(t,u("offset",0)),s=u("anchor",ax),l=s===ux?1:s===ox?.5:0,f={align:Ax,bounds:u("bounds",Tx),columns:"vertical"===u("direction")?1:t.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(n){case Kb:f.anchor={x:Math.floor(r.x1)-c,column:ux,y:l*(o||r.height()+2*r.y1),row:s};break;case Qb:f.anchor={x:Math.ceil(r.x2)+c,y:l*(o||r.height()+2*r.y1),row:s};break;case Vb:f.anchor={y:Math.floor(i.y1)-c,row:ux,x:l*(a||i.width()+2*i.x1),column:s};break;case tx:f.anchor={y:Math.ceil(i.y2)+c,x:l*(a||i.width()+2*i.x1),column:s};break;case nx:f.anchor={x:c,y:c};break;case ex:f.anchor={x:a-c,y:c,column:ux};break;case rx:f.anchor={x:c,y:o-c,row:ux};break;case ix:f.anchor={x:a-c,y:o-c,column:ux,row:ux}}return f}function f_(t,n){var e,r,i=n.items[0],a=i.datum,o=i.orient,u=i.bounds,c=i.x,s=i.y;return i._bounds?i._bounds.clear().union(u):i._bounds=u.clone(),u.clear(),function(t,n,e){var r=n.padding,i=r-e.x,a=r-e.y;if(n.datum.title){var o=n.items[1].items[0],u=o.anchor,c=n.titlePadding||0,s=r-o.x,l=r-o.y;switch(o.orient){case Kb:i+=Math.ceil(o.bounds.width())+c;break;case Qb:case tx:break;default:a+=o.bounds.height()+c}switch((i||a)&&d_(t,e,i,a),o.orient){case Kb:l+=h_(n,e,o,u,1,1);break;case Qb:s+=h_(n,e,o,ux,0,0)+c,l+=h_(n,e,o,u,1,1);break;case tx:s+=h_(n,e,o,u,0,0),l+=h_(n,e,o,ux,-1,0,1)+c;break;default:s+=h_(n,e,o,u,0,0)}(s||l)&&d_(t,o,s,l),(s=Math.round(o.bounds.x1-r))<0&&(d_(t,e,-s,0),d_(t,o,-s,0))}else(i||a)&&d_(t,e,i,a)}(t,i,i.items[0].items[0]),u=function(t,n){return t.items.forEach((function(t){return n.union(t.bounds)})),n.x1=t.padding,n.y1=t.padding,n}(i,u),e=2*i.padding,r=2*i.padding,u.empty()||(e=Math.ceil(u.width()+e),r=Math.ceil(u.height()+r)),a.type===kx&&function(t){var n=t.reduce((function(t,n){return t[n.column]=Math.max(n.bounds.x2-n.x,t[n.column]||0),t}),{});t.forEach((function(t){t.width=n[t.column],t.height=t.bounds.y2-t.y}))}(i.items[0].items[0].items[0].items),o!==Dx&&(i.x=c=0,i.y=s=0),i.width=e,i.height=r,jg(u.set(c,s,c+e,s+r),i),i.mark.bounds.clear().union(u),i}function h_(t,n,e,r,i,a,o){var u="symbol"!==t.datum.type,c=e.datum.vgrad,s=(!u||!a&&c||o?n:n.items[0]).bounds[i?"y2":"x2"]-t.padding,l=c&&a?s:0,f=c&&a?0:s,h=i<=0?0:hy(e);return Math.round(r===ax?l:r===ux?f-h:.5*(s-h))}function d_(t,n,e,r){n.x+=e,n.y+=r,n.bounds.translate(e,r),n.mark.bounds.translate(e,r),t.dirty(n)}function p_(t){ma.call(this,null,t)}function v_(t,n){var e=0;if(void 0===n){var r,i=(0,_a.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;(a=+a)&&(e+=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;(s=+n(s,++u,t))&&(e+=s)}}catch(l){c.e(l)}finally{c.f()}}return e}function g_(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}(0,g.XW)(p_,ma,{transform:function(t,n){var e=n.dataflow;return t.mark.items.forEach((function(n){t.layout&&a_(e,n,t.layout),function(t,n,e){var r,i,a,o,u,c=n.items,s=Math.max(0,n.width||0),l=Math.max(0,n.height||0),f=(new Sg).set(0,0,s,l),h=f.clone(),d=f.clone(),p=[];for(o=0,u=c.length;o<u;++o)switch((i=c[o]).role){case fx:(Jx(i)?h:d).union($x(t,i,s,l));break;case hx:r=i;break;case vx:p.push(f_(t,i));break;case dx:case px:case gx:case mx:case yx:case bx:case xx:case _x:h.union(i.bounds),d.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){var v={};for(var g in p.forEach((function(t){(a=t.orient||Qb)!==Dx&&(v[a]||(v[a]=[])).push(t)})),v){var m=v[g];i_(t,m,l_(m,g,e.legends,h,d,s,l))}p.forEach((function(n){var r=n.bounds;if(r.equals(n._bounds)||(n.bounds=n._bounds,t.dirty(n),n.bounds=r,t.dirty(n)),e.autosize&&e.autosize.type===Mx)switch(n.orient){case Kb:case Qb:f.add(r.x1,0).add(r.x2,0);break;case Vb:case tx:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(h).union(d),r&&f.union(function(t,n,e,r,i){var a,o=n.items[0],u=o.frame,c=o.orient,s=o.anchor,l=o.offset,f=o.padding,h=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=c===Kb||c===Qb?r:e,v=0,g=0,m=0,y=0,b=0;if(u!==lx?c===Kb?(v=i.y2,p=i.y1):c===Qb?(v=i.y1,p=i.y2):(v=i.x1,p=i.x2):c===Kb&&(v=r,p=0),a=s===ax?v:s===ux?p:(v+p)/2,d&&d.text){switch(c){case Vb:case tx:b=h.bounds.height()+f;break;case Kb:y=h.bounds.width()+f;break;case Qb:y=-h.bounds.width()-f}Xx.clear().union(d.bounds),Xx.translate(y-(d.x||0),b-(d.y||0)),Gx(d,"x",y)|Gx(d,"y",b)&&(t.dirty(d),d.bounds.clear().union(Xx),d.mark.bounds.clear().union(Xx),t.dirty(d)),Xx.clear().union(d.bounds)}else Xx.clear();switch(Xx.union(h.bounds),c){case Vb:g=a,m=i.y1-Xx.height()-l;break;case Kb:g=i.x1-Xx.width()-l,m=a;break;case Qb:g=i.x2+Xx.width()+l,m=a;break;case tx:g=a,m=i.y2+l;break;default:g=o.x,m=o.y}return Gx(o,"x",g)|Gx(o,"y",m)&&(Xx.translate(g,m),t.dirty(o),o.bounds.clear().union(Xx),n.bounds.clear().union(Xx),t.dirty(o)),o.bounds}(t,r,s,l,f));n.clip&&f.set(0,0,n.width||0,n.height||0);!function(t,n,e,r){var i=r.autosize||{},a=i.type;if(t._autosize<1||!a)return;var o=t._width,u=t._height,c=Math.max(0,n.width||0),s=Math.max(0,Math.ceil(-e.x1)),l=Math.max(0,n.height||0),f=Math.max(0,Math.ceil(-e.y1)),h=Math.max(0,Math.ceil(e.x2-c)),d=Math.max(0,Math.ceil(e.y2-l));if(i.contains===wx){var p=t.padding();o-=p.left+p.right,u-=p.top+p.bottom}a===Dx?(s=0,f=0,c=o,l=u):a===Mx?(c=Math.max(0,o-s-h),l=Math.max(0,u-f-d)):a===Ox?(c=Math.max(0,o-s-h),u=l+f+d):a===Ex?(o=c+s+h,l=Math.max(0,u-f-d)):a===Sx&&(o=c+s+h,u=l+f+d);t._resizeView(o,u,c,l,[s,f],i.resize)}(t,n,f,e)}(e,n,t)})),function(t){return t&&"legend-entry"!==t.mark.role}(t.mark.group)?n.reflow():n}});var m_=e(36586),y_=e(77382);function b_(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}}function x_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function __(t,n){return(x_(n)?b_:w_)(t,n)}function w_(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=D_(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}function k_(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}var M_=e(72675);function O_(t,n){var e,r={},i={};for(e in null!==t&&"object"===typeof t||(t={}),null!==n&&"object"===typeof n||(n={}),n)e in t?r[e]=D_(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var E_=e(68019),S_=e(57454);function D_(t,n){var e,r=typeof n;return null==n||"boolean"===r?(0,S_.Z)(n):("number"===r?M_.Z:"string"===r?(e=(0,m_.ZP)(n))?(n=e,y_.ZP):E_.Z:n instanceof m_.ZP?y_.ZP:n instanceof Date?k_:x_(n)?b_:Array.isArray(n)?w_:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?O_:M_.Z)(t,n)}function C_(t){ma.call(this,null,t)}function A_(t){ma.call(this,null,t)}function T_(){return Ni({})}function F_(t){ma.call(this,null,t)}function j_(t){ma.call(this,[],t)}(0,g.XW)(C_,ma,{transform:function(t,n){if(this.value&&!t.modified())return n.StopPropagation;var e=n.dataflow.locale(),r=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=this.value,a=t.scale,o=pv(a,null==t.count?t.values?t.values.length:10:t.count,t.minstep),u=t.format||mv(e,a,o,t.formatSpecifier,t.formatType,!!t.values),c=t.values?vv(a,t.values,o):gv(a,o);return i&&(r.rem=i),i=c.map((function(t,n){return Ni({index:n/(c.length-1||1),value:t,label:u(t)})})),t.extra&&i.length&&i.push(Ni({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),(0,g.XW)(A_,ma,{transform:function(t,n){var e=n.dataflow,r=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=t.item||T_,a=t.key||ji,o=this.value;return(0,g.kJ)(r.encode)&&(r.encode=null),o&&(t.modified("key")||n.modified(a))&&(0,g.vU)("DataJoin does not support modified key function or fields."),o||(n=n.addAll(),this.value=o=function(t){var n=(0,g.Xr)().test((function(t){return t.exit}));return n.lookup=function(e){return n.get(t(e))},n}(a)),n.visit(n.ADD,(function(t){var n=a(t),e=o.get(n);e?e.exit?(o.empty--,r.add.push(e)):r.mod.push(e):(e=i(t),o.set(n,e),r.add.push(e)),e.datum=t,e.exit=!1})),n.visit(n.MOD,(function(t){var n=a(t),e=o.get(n);e&&(e.datum=t,r.mod.push(e))})),n.visit(n.REM,(function(t){var n=a(t),e=o.get(n);t!==e.datum||e.exit||(r.rem.push(e),e.exit=!0,++o.empty)})),n.changed(n.ADD_MOD)&&r.modifies("datum"),(n.clean()||t.clean&&o.empty>e.cleanThreshold)&&e.runAfter(o.clean),r}}),(0,g.XW)(F_,ma,{transform:function(t,n){var e=n.fork(n.ADD_REM),r=t.mod||!1,i=t.encoders,a=n.encode;if((0,g.kJ)(a)){if(!e.changed()&&!a.every((function(t){return i[t]})))return n.StopPropagation;a=a[0],e.encode=null}var o="enter"===a,u=i.update||g.k,c=i.enter||g.k,s=i.exit||g.k,l=(a&&!o?i[a]:u)||g.k;if(n.changed(n.ADD)&&(n.visit(n.ADD,(function(n){c(n,t),u(n,t)})),e.modifies(c.output),e.modifies(u.output),l!==g.k&&l!==u&&(n.visit(n.ADD,(function(n){l(n,t)})),e.modifies(l.output))),n.changed(n.REM)&&s!==g.k&&(n.visit(n.REM,(function(n){s(n,t)})),e.modifies(s.output)),o||l!==g.k){var f=n.MOD|(t.modified()?n.REFLOW:0);o?(n.visit(f,(function(n){var i=c(n,t)||r;(l(n,t)||i)&&e.mod.push(n)})),e.mod.length&&e.modifies(c.output)):n.visit(f,(function(n){(l(n,t)||r)&&e.mod.push(n)})),e.mod.length&&e.modifies(l.output)}return e.changed()?e:n.StopPropagation}}),(0,g.XW)(j_,ma,{transform:function(t,n){if(null!=this.value&&!t.modified())return n.StopPropagation;var e,r,i,a,o,u=n.dataflow.locale(),c=n.fork(n.NO_SOURCE|n.NO_FIELDS),s=this.value,l=t.type||sv,f=t.scale,h=+t.limit,d=pv(f,null==t.count?5:t.count,t.minstep),p=!!t.values||l===sv,v=t.format||kv(u,f,d,l,t.formatSpecifier,t.formatType,p),m=t.values||_v(f,d);return s&&(c.rem=s),l===sv?(h&&m.length>h?(n.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=m.slice(0,h-1),o=!0):s=m,(0,g.mf)(i=t.size)?(t.values||0!==f(s[0])||(s=s.slice(1)),a=s.reduce((function(n,e){return Math.max(n,i(e,t))}),0)):i=(0,g.a9)(a=i||8),s=s.map((function(n,e){return Ni({index:e,label:v(n,e,s),value:n,offset:a,size:i(n,t)})})),o&&(o=m[s.length],s.push(Ni({index:s.length,label:"\u2026".concat(m.length-s.length," entries"),value:o,offset:a,size:i(o,t)})))):"gradient"===l?(e=f.domain(),r=rv(f,e[0],(0,g.fj)(e)),m.length<3&&!t.values&&e[0]!==(0,g.fj)(e)&&(m=[e[0],(0,g.fj)(e)]),s=m.map((function(t,n){return Ni({index:n,label:v(t,n,m),value:t,perc:r(t)})}))):(i=m.length-1,r=function(t){var n=t.domain(),e=n.length-1,r=+n[0],i=+(0,g.fj)(n),a=i-r;if(t.type===Tp){var o=e?a/e:.1;a=(i+=o)-(r-=o)}return function(t){return(t-r)/a}}(f),s=m.map((function(t,n){return Ni({index:n,label:v(t,n,m),value:t,perc:n?r(t):0,perc2:n===i?1:r(m[n+1])})}))),c.source=s,c.add=s,this.value=s,c}});var Z_=function(t){return t.source.x},N_=function(t){return t.source.y},z_=function(t){return t.target.x},U_=function(t){return t.target.y};function P_(t){ma.call(this,{},t)}P_.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},(0,g.XW)(P_,ma,{transform:function(t,n){var e=t.sourceX||Z_,r=t.sourceY||N_,i=t.targetX||z_,a=t.targetY||U_,o=t.as||"path",u=t.orient||"vertical",c=t.shape||"line",s=B_.get(c+"-"+u)||B_.get(c);return s||(0,g.vU)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),n.visit(n.SOURCE,(function(t){t[o]=s(e(t),r(t),i(t),a(t))})),n.reflow(t.modified()).modifies(o)}});var R_=function(t,n,e,r){return"M"+t+","+n+"L"+e+","+r},L_=function(t,n,e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a)/2;return"M"+t+","+n+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+e+","+r},I_=function(t,n,e,r){var i=e-t,a=r-n,o=.2*(i+a),u=.2*(a-i);return"M"+t+","+n+"C"+(t+o)+","+(n+u)+" "+(e+u)+","+(r-o)+" "+e+","+r},B_=(0,g.Xr)({line:R_,"line-radial":function(t,n,e,r){return R_(n*Math.cos(t),n*Math.sin(t),r*Math.cos(e),r*Math.sin(e))},arc:L_,"arc-radial":function(t,n,e,r){return L_(n*Math.cos(t),n*Math.sin(t),r*Math.cos(e),r*Math.sin(e))},curve:I_,"curve-radial":function(t,n,e,r){return I_(n*Math.cos(t),n*Math.sin(t),r*Math.cos(e),r*Math.sin(e))},"orthogonal-horizontal":function(t,n,e,r){return"M"+t+","+n+"V"+r+"H"+e},"orthogonal-vertical":function(t,n,e,r){return"M"+t+","+n+"H"+e+"V"+r},"orthogonal-radial":function(t,n,e,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(e),u=Math.sin(e);return"M"+n*i+","+n*a+"A"+n+","+n+" 0 0,"+((Math.abs(e-t)>Math.PI?e<=t:e>t)?1:0)+" "+n*o+","+n*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(t,n,e,r){var i=(t+e)/2;return"M"+t+","+n+"C"+i+","+n+" "+i+","+r+" "+e+","+r},"diagonal-vertical":function(t,n,e,r){var i=(n+r)/2;return"M"+t+","+n+"C"+t+","+i+" "+e+","+i+" "+e+","+r},"diagonal-radial":function(t,n,e,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(e),u=Math.sin(e),c=(n+r)/2;return"M"+n*i+","+n*a+"C"+c*i+","+c*a+" "+c*o+","+c*u+" "+r*o+","+r*u}});function q_(t){ma.call(this,null,t)}q_.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},(0,g.XW)(q_,ma,{transform:function(t,n){var e,r,i,a=t.as||["startAngle","endAngle"],o=a[0],u=a[1],c=t.field||g.kX,s=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,f=n.source,h=f.map(c),d=h.length,p=s,v=(l-s)/v_(h),m=Qa(d);for(t.sort&&m.sort((function(t,n){return h[t]-h[n]})),e=0;e<d;++e)i=h[m[e]],(r=f[m[e]])[o]=p,r[u]=p+=i*v;return this.value=h,n.reflow(t.modified()).modifies(a)}});var H_=5;function W_(t){return Jp(t)&&t!==Sp}var Y_=(0,g.Rg)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function X_(t){ma.call(this,null,t),this.modified(!0)}function G_(t,n,e){if(Kp(t)){var r=Math.abs(n.reduce((function(t,n){return t+(n<0?-1:n>0?1:0)}),0));r!==n.length&&e.warn("Log scale domain includes zero: "+(0,g.m8)(n))}return n}function J_(t,n,e){return(0,g.mf)(t)&&(n||e)?function(t,n){var e=n[0],r=(0,g.fj)(n)-e;return function(n){return t(e+n*r)}}(t,$_(n||[0,1],e)):t}function $_(t,n){return n?t.slice().reverse():t}function V_(t){ma.call(this,null,t)}(0,g.XW)(X_,ma,{transform:function(t,n){var e=n.dataflow,r=this.value,i=function(t){var n,e=t.type,r="";if(e===Sp)return Sp+"-"+xp;(function(t){var n=t.type;return Jp(n)&&n!==Op&&n!==Ep&&(t.scheme||t.range&&t.range.length&&t.range.every(g.HD))})(t)&&(r=2===(n=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0)?Sp+"-":3===n?Dp+"-":"");return(r+e||xp).toLowerCase()}(t);for(i in r&&i===r.type||(this.value=r=Yp(i)()),t)if(!Y_[i]){if("padding"===i&&W_(r.type))continue;(0,g.mf)(r[i])?r[i](t[i]):e.warn("Unsupported scale property: "+i)}return function(t,n,e){var r=t.type,i=n.round||!1,a=n.range;if(null!=n.rangeStep)a=function(t,n,e){t!==Zp&&t!==jp&&(0,g.vU)("Only band and point scales support rangeStep.");var r=(null!=n.paddingOuter?n.paddingOuter:n.padding)||0,i=t===jp?1:(null!=n.paddingInner?n.paddingInner:n.padding)||0;return[0,n.rangeStep*bp(e,i,r)]}(r,n,e);else if(n.scheme&&(a=function(t,n,e){var r,i=n.schemeExtent;(0,g.kJ)(n.scheme)?r=ev(n.scheme,n.interpolate,n.interpolateGamma):(r=cv(n.scheme.toLowerCase()))||(0,g.vU)("Unrecognized scheme name: ".concat(n.scheme));return e=t===Tp?e+1:t===Np?e-1:t===Cp||t===Ap?+n.schemeCount||H_:e,Qp(t)?J_(r,i,n.reverse):(0,g.mf)(r)?function(t,n){for(var e=new Array(n),r=n+1,i=0;i<n;)e[i]=t(++i/r);return e}(J_(r,i),e):t===Fp?r:r.slice(0,e)}(r,n,e),(0,g.mf)(a))){if(t.interpolator)return t.interpolator(a);(0,g.vU)("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&Qp(r))return t.interpolator(ev($_(a,n.reverse),n.interpolate,n.interpolateGamma));a&&n.interpolate&&t.interpolate?t.interpolate(iv(n.interpolate,n.interpolateGamma)):(0,g.mf)(t.round)?t.round(i):(0,g.mf)(t.rangeRound)&&t.interpolate(i?g_:D_);a&&t.range($_(a,n.reverse))}(r,t,function(t,n,e){var r=n.bins;if(r&&!(0,g.kJ)(r)){var i=t.domain(),a=i[0],o=(0,g.fj)(i),u=r.step,c=null==r.start?a:r.start,s=null==r.stop?o:r.stop;u||(0,g.vU)("Scale bins parameter missing step property."),c<a&&(c=u*Math.ceil(a/u)),s>o&&(s=u*Math.floor(o/u)),r=Qa(c,s+u/2,u)}r?t.bins=r:t.bins&&delete t.bins;t.type===Np&&(r?n.domain||n.domainRaw||(t.domain(r),e=r.length):t.bins=t.domain());return e}(r,t,function(t,n,e){var r=function(t,n,e){return n?(t.domain(G_(t.type,n,e)),n.length):-1}(t,n.domainRaw,e);if(r>-1)return r;var i,a,o=n.domain,u=t.type,c=n.zero||void 0===n.zero&&function(t){var n=t.type;return!t.bins&&(n===xp||n===wp||n===kp)}(t);if(!o)return 0;W_(u)&&n.padding&&o[0]!==(0,g.fj)(o)&&(o=function(t,n,e,r,i,a){var o=Math.abs((0,g.fj)(e)-e[0]),u=o/(o-2*r),c=t===_p?(0,g.dH)(n,null,u):t===kp?(0,g.mK)(n,null,u,.5):t===wp?(0,g.mK)(n,null,u,i||1):t===Mp?(0,g.bV)(n,null,u,a||1):(0,g.ay)(n,null,u);return n=n.slice(),n[0]=c[0],n[n.length-1]=c[1],n}(u,o,n.range,n.padding,n.exponent,n.constant));if((c||null!=n.domainMin||null!=n.domainMax||null!=n.domainMid)&&(i=(o=o.slice()).length-1||1,c&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=n.domainMin&&(o[0]=n.domainMin),null!=n.domainMax&&(o[i]=n.domainMax),null!=n.domainMid)){var s=(a=n.domainMid)>o[i]?i+1:a<o[0]?0:i;s!==i&&e.warn("Scale domainMid exceeds domain min or max.",a),o.splice(s,0,a)}t.domain(G_(u,o,e)),u===Fp&&t.unknown(n.domainImplicit?Jl:void 0);n.nice&&t.nice&&t.nice(!0!==n.nice&&pv(t,n.nice)||null);return o.length}(r,t,e))),n.fork(n.NO_SOURCE|n.NO_FIELDS)}}),(0,g.XW)(V_,ma,{transform:function(t,n){var e=t.modified("sort")||n.changed(n.ADD)||n.modified(t.sort.fields)||n.modified("datum");return e&&n.source.sort(Ri(t.sort)),this.modified(e),n}});var K_="zero",Q_="center",tw="normalize",nw=["y0","y1"];function ew(t){ma.call(this,null,t)}function rw(t,n,e,r,i){for(var a,o=(n-t.sum)/2,u=t.length,c=0;c<u;++c)(a=t[c])[r]=o,a[i]=o+=Math.abs(e(a))}function iw(t,n,e,r,i){for(var a,o=1/t.sum,u=0,c=t.length,s=0,l=0;s<c;++s)(a=t[s])[r]=u,a[i]=u=o*(l+=Math.abs(e(a)))}function aw(t,n,e,r,i){for(var a,o,u=0,c=0,s=t.length,l=0;l<s;++l)(a=+e(o=t[l]))<0?(o[r]=c,o[i]=c+=a):(o[r]=u,o[i]=u+=a)}function ow(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function uw(t,n){var e;if(void 0===n){var r,i=(0,_a.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(e<a||void 0===e&&a>=a)&&(e=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;null!=(s=n(s,++u,t))&&(e<s||void 0===e&&s>=s)&&(e=s)}}catch(l){c.e(l)}finally{c.f()}}return e}function cw(t,n){var e;if(void 0===n){var r,i=(0,_a.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(e>a||void 0===e&&a>=a)&&(e=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;null!=(s=n(s,++u,t))&&(e>s||void 0===e&&s>=s)&&(e=s)}}catch(l){c.e(l)}finally{c.f()}}return e}function sw(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ow;r>e;){if(r-e>600){var a=r-e+1,o=n-e+1,u=Math.log(a),c=.5*Math.exp(2*u/3),s=.5*Math.sqrt(u*c*(a-c)/a)*(o-a/2<0?-1:1);sw(t,n,Math.max(e,Math.floor(n-o*c/a+s)),Math.min(r,Math.floor(n+(a-o)*c/a+s)),i)}var l=t[n],f=e,h=r;for(lw(t,e,n),i(t[r],l)>0&&lw(t,e,r);f<h;){for(lw(t,f,h),++f,--h;i(t[f],l)<0;)++f;for(;i(t[h],l)>0;)--h}0===i(t[e],l)?lw(t,e,h):lw(t,++h,r),h<=n&&(e=h+1),n<=h&&(r=h-1)}return t}function lw(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}ew.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:K_,values:[K_,Q_,tw]},{name:"as",type:"string",array:!0,length:2,default:nw}]},(0,g.XW)(ew,ma,{transform:function(t,n){var e,r,i,a,o=t.as||nw,u=o[0],c=o[1],s=Ri(t.sort),l=t.field||g.kX,f=t.offset===Q_?rw:t.offset===tw?iw:aw;for(e=function(t,n,e,r){var i,a,o,u,c,s,l,f,h,d=[],p=function(t){return t(c)};if(null==n)d.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)c=t[a],(l=i[s=n.map(p)])||(i[s]=l=[],d.push(l)),l.push(c);for(s=0,h=0,u=d.length;s<u;++s){for(a=0,f=0,o=(l=d[s]).length;a<o;++a)f+=Math.abs(r(l[a]));l.sum=f,f>h&&(h=f),e&&l.sort(e)}return d.max=h,d}(n.source,t.groupby,s,l),r=0,i=e.length,a=e.max;r<i;++r)f(e[r],a,l,u,c);return n.reflow(t.modified()).modifies(o)}});var fw=(0,m.Z)().mark(dw);function hw(t){return null===t?NaN:+t}function dw(t,n){var e,r,i,a,o,u,c;return(0,m.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==n){s.next=21;break}e=(0,_a.Z)(t),s.prev=2,e.s();case 4:if((r=e.n()).done){s.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){s.next=9;break}return s.next=9,i;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),e.e(s.t0);case 16:return s.prev=16,e.f(),s.finish(16);case 19:s.next=40;break;case 21:a=-1,o=(0,_a.Z)(t),s.prev=23,o.s();case 25:if((u=o.n()).done){s.next=32;break}if(c=u.value,!(null!=(c=n(c,++a,t))&&(c=+c)>=c)){s.next=30;break}return s.next=30,c;case 30:s.next=25;break;case 32:s.next=37;break;case 34:s.prev=34,s.t1=s.catch(23),o.e(s.t1);case 37:return s.prev=37,o.f(),s.finish(37);case 40:case"end":return s.stop()}}),fw,null,[[2,13,16,19],[23,34,37,40]])}function pw(t,n,e){if(r=(t=Float64Array.from(dw(t,e))).length){if((n=+n)<=0||r<2)return cw(t);if(n>=1)return uw(t);var r,i=(r-1)*n,a=Math.floor(i),o=uw(sw(t,a).subarray(0,a+1));return o+(cw(t.subarray(a+1))-o)*(i-a)}}function vw(t,n){var e=function(t,n){var e,r=0,i=0,a=0;if(void 0===n){var o,u=(0,_a.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=c&&(c=+c)>=c&&(a+=(e=c-i)*(c-(i+=e/++r)))}}catch(d){u.e(d)}finally{u.f()}}else{var s,l=-1,f=(0,_a.Z)(t);try{for(f.s();!(s=f.n()).done;){var h=s.value;null!=(h=n(h,++l,t))&&(h=+h)>=h&&(a+=(e=h-i)*(h-(i+=e/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return a/(r-1)}(t,n);return e?Math.sqrt(e):e}function gw(t,n){return pw(t,.5,n)}var mw=(0,m.Z)().mark(yw);function yw(t,n){var e,r,i,a,o,u,c;return(0,m.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=n){s.next=21;break}e=(0,_a.Z)(t),s.prev=2,e.s();case 4:if((r=e.n()).done){s.next=11;break}if(!(null!=(i=r.value)&&""!==i&&(i=+i)>=i)){s.next=9;break}return s.next=9,i;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),e.e(s.t0);case 16:return s.prev=16,e.f(),s.finish(16);case 19:s.next=41;break;case 21:a=-1,o=(0,_a.Z)(t),s.prev=23,o.s();case 25:if((u=o.n()).done){s.next=33;break}if(c=u.value,!(null!=(c=n(c,++a,t))&&""!==c&&(c=+c)>=c)){s.next=31;break}return s.next=31,c;case 31:s.next=25;break;case 33:s.next=38;break;case 35:s.prev=35,s.t1=s.catch(23),o.e(s.t1);case 38:return s.prev=38,o.f(),s.finish(38);case 41:case"end":return s.stop()}}),mw,null,[[2,13,16,19],[23,35,38,41]])}function bw(t,n,e){var r=Float64Array.from(yw(t,e));return r.sort(ow),n.map((function(t){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hw;if(r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,a=Math.floor(i),o=+e(t[a],a,t);return o+(+e(t[a+1],a+1,t)-o)*(i-a)}}(r,t)}))}function xw(t,n){var e=t.length,r=vw(t,n),i=function(t,n){return bw(t,[.25,.5,.75],n)}(t,n),a=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(e,-.2)}var _w=Math.random;var ww=Math.sqrt(2*Math.PI),kw=Math.SQRT2,Mw=NaN;function Ow(t,n){t=t||0,n=null==n?1:n;var e,r,i=0,a=0;if(Mw===Mw)i=Mw,Mw=NaN;else{do{e=(i=2*_w()-1)*i+(a=2*_w()-1)*a}while(0===e||e>1);i*=r=Math.sqrt(-2*Math.log(e)/e),Mw=a*r}return t+i*n}function Ew(t,n,e){var r=(t-(n||0))/(e=null==e?1:e);return Math.exp(-.5*r*r)/(e*ww)}function Sw(t,n,e){var r,i=(t-(n=n||0))/(e=null==e?1:e),a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r}function Dw(t,n,e){return t<0||t>1?NaN:(n||0)+(null==e?1:e)*kw*function(t){var n,e=-Math.log((1-t)*(1+t));n=e<6.25?1.6536545626831027+(n=.24015818242558962+(n=(n=(n=.00018673420803405714+(n=(n=(n=4.2347877827932404e-7+(n=(n=(n=1.0512122733215323e-9+(n=(n=(n=26335093153082323e-28+(n=(n=(n=6637638134358324e-30+(n=20972767875968562e-33+(n=(n=11157877678025181e-33+(n=128584807152564e-32+(n=(n=-364441206401782e-35)*(e-=3.125)-16850591381820166e-35)*e)*e)*e-1333171662854621e-31)*e)*e)*e-4054566272975207e-29)*e-8151934197605472e-29)*e)*e-12975133253453532e-27)*e-5415412054294628e-26)*e)*e-4.112633980346984e-9)*e-2.9070369957882005e-8)*e)*e-13654692000834679e-22)*e-13882523362786469e-21)*e)*e-.000740702534166267)*e-.006033670871430149)*e)*e:e<16?3.0838856104922208+(n=1.0052589676941592+(n=.005370914553590064+(n=(n=.002491442096107851+(n=(n=.0009532893797373805+(n=(n=24031110387097894e-21+(n=6828485145957318e-20+(n=(n=12475304481671779e-21+(n=29234449089955446e-22+(n=(n=15027403968909828e-22+(n=1.8239629214389228e-8+(n=(n=9.075656193888539e-8+(n=2.2137376921775787e-9)*(e=Math.sqrt(e)-3.25))*e-2.7517406297064545e-7)*e)*e)*e-4013867526981546e-21)*e)*e)*e-47318229009055734e-21)*e)*e)*e-.0003550375203628475)*e)*e-.0016882755560235047)*e)*e-.003751208507569241)*e)*e)*e:Number.isFinite(e)?4.849906401408584+(n=1.0103004648645344+(n=(n=(n=7599527703001776e-20+(n=(n=4526062597223154e-21+(n=(n=2.2900482228026655e-7+(n=(n=2.914795345090108e-8+(n=(n=7.61570120807834e-9+(n=(n=1.5076572693500548e-9+(n=(n=-27109920616438573e-27)*(e=Math.sqrt(e)-5)-2.555641816996525e-10)*e)*e-3.789465440126737e-9)*e)*e-1.496002662714924e-8)*e)*e-6.771199775845234e-8)*e)*e-9.9298272942317e-7)*e)*e-1968177810553167e-20)*e)*e-.00021503011930044477)*e-.00013871931833623122)*e)*e:1/0;return n*t}(2*t-1)}function Cw(t,n){return t=t||0,n=null==n?1:n,Math.exp(t+Ow()*n)}function Aw(t,n,e){if(t<=0)return 0;n=n||0,e=null==e?1:e;var r=(Math.log(t)-n)/e;return Math.exp(-.5*r*r)/(e*ww*t)}function Tw(t,n,e){return Sw(Math.log(t),n,e)}function Fw(t,n,e){return Math.exp(Dw(t,n,e))}function jw(t,n){return null==n&&(n=null==t?1:t,t=0),t+(n-t)*_w()}function Zw(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=n&&t<=e?1/(e-n):0}function Nw(t,n,e){return null==e&&(e=null==n?1:n,n=0),t<n?0:t>e?1:(t-n)/(e-n)}function zw(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=0&&t<=1?n+t*(e-n):NaN}function Uw(t,n,e,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(e-t*n)/i;return[n-a*t,a]}function Pw(t,n,e,r){t=t.filter((function(t){var r=n(t),i=e(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&t.sort((function(t,e){return n(t)-n(e)}));var i,a,o,u,c=t.length,s=new Float64Array(c),l=new Float64Array(c),f=0,h=0,d=0,p=(0,_a.Z)(t);try{for(p.s();!(u=p.n()).done;)o=u.value,s[f]=i=+n(o),l[f]=a=+e(o),h+=(i-h)/++f,d+=(a-d)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<c;++f)s[f]-=h,l[f]-=d;return[s,l,h,d]}function Rw(t,n,e,r){var i,a,o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;i=n(s),a=e(s),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++u)}}catch(l){c.e(l)}finally{c.f()}}function Lw(t,n,e,r,i){var a=0,o=0;return Rw(t,n,e,(function(t,n){var e=n-i(t),u=n-r;a+=e*e,o+=u*u})),1-a/o}function Iw(t,n,e){var r=0,i=0,a=0,o=0,u=0;Rw(t,n,e,(function(t,n){++u,r+=(t-r)/u,i+=(n-i)/u,a+=(t*n-a)/u,o+=(t*t-o)/u}));var c=Uw(r,i,a,o),s=function(t){return c[0]+c[1]*t};return{coef:c,predict:s,rSquared:Lw(t,n,e,i,s)}}function Bw(t,n,e){var r,i,a,o,u=Pw(t,n,e),c=(0,Go.Z)(u,4),s=c[0],l=c[1],f=c[2],h=c[3],d=s.length,p=0,v=0,g=0,m=0,y=0;for(r=0;r<d;)i=s[r],a=l[r++],p+=((o=i*i)-p)/r,v+=(o*i-v)/r,g+=(o*o-g)/r,m+=(i*a-m)/r,y+=(o*a-y)/r;var b=g-p*p,x=p*b-v*v,_=(y*p-m*v)/x,w=(m*b-y*v)/x,k=-_*p,M=function(t){return _*(t-=f)*t+w*t+k+h};return{coef:[k-w*f+_*f*f+h,w-2*_*f,_],predict:M,rSquared:Lw(t,n,e,h,M)}}function qw(t,n,e,r){var i,a,o,u,c=Array(t);for(i=0;i<t;++i)c[i]=0;for(i=t-1;i>=0;--i)for(o=n[i],u=1,c[i]+=o,a=1;a<=i;++a)u*=(i+1-a)/a,c[i-a]+=o*Math.pow(e,a)*u;return c[0]+=r,c}var Hw=2,Ww=1e-12;function Yw(t){return(t=1-t*t*t)*t*t}function Xw(t,n,e){var r=t[n],i=e[0],a=e[1]+1;if(!(a>=t.length))for(;n>i&&t[a]-r<=r-t[i];)e[0]=++i,e[1]=a,++a}var Gw=.5*Math.PI/180;function Jw(t,n,e,r,i){var a=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0])),o=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0]));return Math.abs(a-o)}var $w=function(t){return t};function Vw(t,n){t&&Qw.hasOwnProperty(t.type)&&Qw[t.type](t,n)}var Kw={Feature:function(t,n){Vw(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Vw(e[r].geometry,n)}},Qw={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){tk(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)tk(e[r],n,0)},Polygon:function(t,n){nk(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)nk(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Vw(e[r],n)}};function tk(t,n,e){var r,i=-1,a=t.length-e;for(n.lineStart();++i<a;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function nk(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)tk(t[e],n,1);n.polygonEnd()}function ek(t,n){t&&Kw.hasOwnProperty(t.type)?Kw[t.type](t,n):Vw(t,n)}var rk=e(57994),ik=e(98907),ak=function(){function t(){(0,rk.Z)(this,t),this._partials=new Float64Array(32),this._n=0}return(0,ik.Z)(t,[{key:"add",value:function(t){for(var n=this._partials,e=0,r=0;r<this._n&&r<32;r++){var i=n[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(n[e++]=o),t=a}return n[e]=t,this._n=e+1,this}},{key:"valueOf",value:function(){var t,n,e,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(e=(n=r[--i])-((a=t+n)-t))););i>0&&(e<0&&r[i-1]<0||e>0&&r[i-1]>0)&&(n=2*e)==(t=a+n)-a&&(a=t)}return a}}]),t}();var ok=1e-6,uk=1e-12,ck=Math.PI,sk=ck/2,lk=ck/4,fk=2*ck,hk=180/ck,dk=ck/180,pk=Math.abs,vk=Math.atan,gk=Math.atan2,mk=Math.cos,yk=(Math.ceil,Math.exp),bk=(Math.floor,Math.hypot,Math.log),xk=Math.pow,_k=Math.sin,wk=Math.sign||function(t){return t>0?1:t<0?-1:0},kk=Math.sqrt,Mk=Math.tan;function Ok(t){return t>1?0:t<-1?ck:Math.acos(t)}function Ek(t){return t>1?sk:t<-1?-sk:Math.asin(t)}function Sk(){}var Dk,Ck,Ak,Tk,Fk=new ak,jk=new ak,Zk={point:Sk,lineStart:Sk,lineEnd:Sk,polygonStart:function(){Zk.lineStart=Nk,Zk.lineEnd=Pk},polygonEnd:function(){Zk.lineStart=Zk.lineEnd=Zk.point=Sk,Fk.add(pk(jk)),jk=new ak},result:function(){var t=Fk/2;return Fk=new ak,t}};function Nk(){Zk.point=zk}function zk(t,n){Zk.point=Uk,Dk=Ak=t,Ck=Tk=n}function Uk(t,n){jk.add(Tk*t-Ak*n),Ak=t,Tk=n}function Pk(){Uk(Dk,Ck)}var Rk=Zk,Lk=1/0,Ik=Lk,Bk=-Lk,qk=Bk,Hk={point:function(t,n){t<Lk&&(Lk=t);t>Bk&&(Bk=t);n<Ik&&(Ik=n);n>qk&&(qk=n)},lineStart:Sk,lineEnd:Sk,polygonStart:Sk,polygonEnd:Sk,result:function(){var t=[[Lk,Ik],[Bk,qk]];return Bk=qk=-(Ik=Lk=1/0),t}};var Wk,Yk,Xk,Gk,Jk=Hk,$k=0,Vk=0,Kk=0,Qk=0,tM=0,nM=0,eM=0,rM=0,iM=0,aM={point:oM,lineStart:uM,lineEnd:lM,polygonStart:function(){aM.lineStart=fM,aM.lineEnd=hM},polygonEnd:function(){aM.point=oM,aM.lineStart=uM,aM.lineEnd=lM},result:function(){var t=iM?[eM/iM,rM/iM]:nM?[Qk/nM,tM/nM]:Kk?[$k/Kk,Vk/Kk]:[NaN,NaN];return $k=Vk=Kk=Qk=tM=nM=eM=rM=iM=0,t}};function oM(t,n){$k+=t,Vk+=n,++Kk}function uM(){aM.point=cM}function cM(t,n){aM.point=sM,oM(Xk=t,Gk=n)}function sM(t,n){var e=t-Xk,r=n-Gk,i=kk(e*e+r*r);Qk+=i*(Xk+t)/2,tM+=i*(Gk+n)/2,nM+=i,oM(Xk=t,Gk=n)}function lM(){aM.point=oM}function fM(){aM.point=dM}function hM(){pM(Wk,Yk)}function dM(t,n){aM.point=pM,oM(Wk=Xk=t,Yk=Gk=n)}function pM(t,n){var e=t-Xk,r=n-Gk,i=kk(e*e+r*r);Qk+=i*(Xk+t)/2,tM+=i*(Gk+n)/2,nM+=i,eM+=(i=Gk*t-Xk*n)*(Xk+t),rM+=i*(Gk+n),iM+=3*i,oM(Xk=t,Gk=n)}var vM=aM;function gM(t){this._context=t}gM.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,fk)}},result:Sk};var mM,yM,bM,xM,_M,wM=new ak,kM={point:Sk,lineStart:function(){kM.point=MM},lineEnd:function(){mM&&OM(yM,bM),kM.point=Sk},polygonStart:function(){mM=!0},polygonEnd:function(){mM=null},result:function(){var t=+wM;return wM=new ak,t}};function MM(t,n){kM.point=OM,yM=xM=t,bM=_M=n}function OM(t,n){xM-=t,_M-=n,wM.add(kk(xM*xM+_M*_M)),xM=t,_M=n}var EM=kM;function SM(){this._string=[]}function DM(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function CM(t,n){var e,r,i=4.5;function a(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),ek(t,e(r))),r.result()}return a.area=function(t){return ek(t,e(Rk)),Rk.result()},a.measure=function(t){return ek(t,e(EM)),EM.result()},a.bounds=function(t){return ek(t,e(Jk)),Jk.result()},a.centroid=function(t){return ek(t,e(vM)),vM.result()},a.projection=function(n){return arguments.length?(e=null==n?(t=null,$w):(t=n).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(n=null,new SM):new gM(n=t),"function"!==typeof i&&r.pointRadius(i),a):n},a.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(n)}function AM(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Sk,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function TM(t,n){return pk(t[0]-n[0])<ok&&pk(t[1]-n[1])<ok}function FM(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function jM(t,n,e,r,i){var a,o,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],o=t[n];if(TM(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<n;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*ok}u.push(e=new FM(r,t,null,!0)),c.push(e.o=new FM(r,null,e,!1)),u.push(e=new FM(o,t,null,!1)),c.push(e.o=new FM(o,null,e,!0))}})),u.length){for(c.sort(n),ZM(u),ZM(c),a=0,o=c.length;a<o;++a)c[a].e=e=!e;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=s.length;a<o;++a)i.point((l=s[a])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,a=s.length-1;a>=0;--a)i.point((l=s[a])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function ZM(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function NM(t){return[gk(t[1],t[0]),Ek(t[2])]}function zM(t){var n=t[0],e=t[1],r=mk(e);return[r*mk(n),r*_k(n),_k(e)]}function UM(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function PM(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function RM(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function LM(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function IM(t){var n=kk(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function BM(t){return pk(t[0])<=ck?t[0]:wk(t[0])*((pk(t[0])+ck)%fk-ck)}SM.prototype={_radius:4.5,_circle:DM(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=DM(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var qM=(0,m.Z)().mark(HM);function HM(t){var n,e,r;return(0,m.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=(0,_a.Z)(t),i.prev=1,n.s();case 3:if((e=n.n()).done){i.next=8;break}return r=e.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),n.e(i.t1);case 13:return i.prev=13,n.f(),i.finish(13);case 16:case"end":return i.stop()}}),qM,null,[[1,10,13,16]])}function WM(t){return Array.from(HM(t))}function YM(t,n,e,r){return function(i){var a,o,u,c=n(i),s=AM(),l=n(s),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=WM(o);var t=function(t,n){var e=BM(n),r=n[1],i=_k(r),a=[_k(e),-mk(e),0],o=0,u=0,c=new ak;1===i?r=sk+ok:-1===i&&(r=-sk-ok);for(var s=0,l=t.length;s<l;++s)if(h=(f=t[s]).length)for(var f,h,d=f[h-1],p=BM(d),v=d[1]/2+lk,g=_k(v),m=mk(v),y=0;y<h;++y,p=x,g=w,m=k,d=b){var b=f[y],x=BM(b),_=b[1]/2+lk,w=_k(_),k=mk(_),M=x-p,O=M>=0?1:-1,E=O*M,S=E>ck,D=g*w;if(c.add(gk(D*O*_k(E),m*k+D*mk(E))),o+=S?M+O*fk:M,S^p>=e^x>=e){var C=PM(zM(d),zM(b));IM(C);var A=PM(a,C);IM(A);var T=(S^M>=0?-1:1)*Ek(A[2]);(r>T||r===T&&(C[0]||C[1]))&&(u+=S^M>=0?1:-1)}}return(o<-ok||o<ok&&c<-uk)^1&u}(a,r);o.length?(f||(i.polygonStart(),f=!0),jM(o,GM,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function v(){h.point=p,c.lineStart()}function g(){h.point=d,c.lineEnd()}function m(t,n){u.push([t,n]),l.point(t,n)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var t,n,e,r,c=l.clean(),h=s.result(),d=h.length;if(u.pop(),a.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),o.push(h.filter(XM))}return h}}function XM(t){return t.length>1}function GM(t,n){return((t=t.x)[0]<0?t[1]-sk-ok:sk-t[1])-((n=n.x)[0]<0?n[1]-sk-ok:sk-n[1])}var JM=YM((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(a,o){var u=a>0?ck:-ck,c=pk(a-e);pk(c-ck)<ok?(t.point(e,r=(r+o)/2>0?sk:-sk),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),n=0):i!==u&&c>=ck&&(pk(e-i)<ok&&(e-=i*ok),pk(a-u)<ok&&(a-=u*ok),r=function(t,n,e,r){var i,a,o=_k(t-e);return pk(o)>ok?vk((_k(n)*(a=mk(r))*_k(e)-_k(r)*(i=mk(n))*_k(t))/(i*a*o)):(n+r)/2}(e,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=a,r=o),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*sk,r.point(-ck,i),r.point(0,i),r.point(ck,i),r.point(ck,0),r.point(ck,-i),r.point(0,-i),r.point(-ck,-i),r.point(-ck,0),r.point(-ck,i);else if(pk(t[0]-n[0])>ok){var a=t[0]<n[0]?ck:-ck;i=e*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(n[0],n[1])}),[-ck,-sk]);function $M(t,n,e,r,i,a){if(e){var o=mk(n),u=_k(n),c=r*e;null==i?(i=n+r*fk,a=n-c/2):(i=VM(o,i),a=VM(o,a),(r>0?i<a:i>a)&&(i+=r*fk));for(var s,l=i;r>0?l>a:l<a;l-=c)s=NM([o,-u*mk(l),-u*_k(l)]),t.point(s[0],s[1])}}function VM(t,n){(n=zM(n))[0]-=t,IM(n);var e=Ok(-n[1]);return((-n[2]<0?-e:e)+fk-ok)%fk}var KM=1e9,QM=-KM;function tO(t,n,e,r){function i(i,a){return t<=i&&i<=e&&n<=a&&a<=r}function a(i,a,u,s){var l=0,f=0;if(null==i||(l=o(i,u))!==(f=o(a,u))||c(i,a)<0^u>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+u+4)%4)!==f);else s.point(a[0],a[1])}function o(r,i){return pk(r[0]-t)<ok?i>0?0:3:pk(r[0]-e)<ok?i>0?2:1:pk(r[1]-n)<ok?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=o(t,1),r=o(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(o){var c,s,l,f,h,d,p,v,g,m,y,b=o,x=AM(),_={point:w,lineStart:function(){_.point=k,s&&s.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){c&&(k(f,h),d&&g&&x.rejoin(),c.push(x.result()));_.point=w,g&&b.lineEnd()},polygonStart:function(){b=x,c=[],s=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var a,o,u=s[e],c=1,l=u.length,f=u[0],h=f[0],d=f[1];c<l;++c)a=h,o=d,h=(f=u[c])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++n:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--n;return n}(),e=y&&n,i=(c=WM(c)).length;(e||i)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&jM(c,u,n,a,o),o.polygonEnd());b=o,c=s=l=null}};function w(t,n){i(t,n)&&b.point(t,n)}function k(a,o){var u=i(a,o);if(s&&l.push([a,o]),m)f=a,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(a,o));else if(u&&g)b.point(a,o);else{var c=[p=Math.max(QM,Math.min(KM,p)),v=Math.max(QM,Math.min(KM,v))],x=[a=Math.max(QM,Math.min(KM,a)),o=Math.max(QM,Math.min(KM,o))];!function(t,n,e,r,i,a){var o,u=t[0],c=t[1],s=0,l=1,f=n[0]-u,h=n[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<s)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>s&&(s=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>s&&(s=o)}else if(f>0){if(o<s)return;o<l&&(l=o)}if(o=r-c,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=a-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}return s>0&&(t[0]=u+s*f,t[1]=c+s*h),l<1&&(n[0]=u+l*f,n[1]=c+l*h),!0}}}}}(c,x,t,n,e,r)?u&&(b.lineStart(),b.point(a,o),y=!1):(g||(b.lineStart(),b.point(c[0],c[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=a,v=o,g=u}return _}}function nO(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function eO(t,n){return[pk(t)>ck?t+Math.round(-t/fk)*fk:t,n]}function rO(t,n,e){return(t%=fk)?n||e?nO(aO(t),oO(n,e)):aO(t):n||e?oO(n,e):eO}function iO(t){return function(n,e){return[(n+=t)>ck?n-fk:n<-ck?n+fk:n,e]}}function aO(t){var n=iO(t);return n.invert=iO(-t),n}function oO(t,n){var e=mk(t),r=_k(t),i=mk(n),a=_k(n);function o(t,n){var o=mk(n),u=mk(t)*o,c=_k(t)*o,s=_k(n),l=s*e+u*r;return[gk(c*i-l*a,u*e-s*r),Ek(l*i+c*a)]}return o.invert=function(t,n){var o=mk(n),u=mk(t)*o,c=_k(t)*o,s=_k(n),l=s*i-c*a;return[gk(c*i+s*a,u*e+l*r),Ek(l*e-u*r)]},o}function uO(t){return function(n){var e=new cO;for(var r in t)e[r]=t[r];return e.stream=n,e}}function cO(){}function sO(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),ek(e,t.stream(Jk)),n(Jk.result()),null!=r&&t.clipExtent(r),t}function lO(t,n,e){return sO(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),o=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([o,u])}),e)}function fO(t,n,e){return lO(t,[[0,0],n],e)}function hO(t,n,e){return sO(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),a=(r-i*(e[1][0]+e[0][0]))/2,o=-i*e[0][1];t.scale(150*i).translate([a,o])}),e)}function dO(t,n,e){return sO(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),a=-i*e[0][0],o=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([a,o])}),e)}eO.invert=eO,cO.prototype={constructor:cO,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pO=16,vO=mk(30*dk);function gO(t,n){return+n?function(t,n){function e(r,i,a,o,u,c,s,l,f,h,d,p,v,g){var m=s-r,y=l-i,b=m*m+y*y;if(b>4*n&&v--){var x=o+h,_=u+d,w=c+p,k=kk(x*x+_*_+w*w),M=Ek(w/=k),O=pk(pk(w)-1)<ok||pk(a-f)<ok?(a+f)/2:gk(_,x),E=t(O,M),S=E[0],D=E[1],C=S-r,A=D-i,T=y*C-m*A;(T*T/b>n||pk((m*C+y*A)/b-.5)>.3||o*h+u*d+c*p<vO)&&(e(r,i,a,o,u,c,S,D,O,x/=k,_/=k,w,v,g),g.point(S,D),e(S,D,O,x,_,w,s,l,f,h,d,p,v,g))}}return function(n){var r,i,a,o,u,c,s,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=x},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){l=NaN,v.point=y,n.lineStart()}function y(r,i){var a=zM([r,i]),o=t(r,i);e(l,f,s,h,d,p,l=o[0],f=o[1],s=r,h=a[0],d=a[1],p=a[2],pO,n),n.point(l,f)}function b(){v.point=g,n.lineEnd()}function x(){m(),v.point=_,v.lineEnd=w}function _(t,n){y(r=t,n),i=l,a=f,o=h,u=d,c=p,v.point=y}function w(){e(l,f,s,h,d,p,i,a,r,o,u,c,pO,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return uO({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var mO=uO({point:function(t,n){this.stream.point(t*dk,n*dk)}});function yO(t,n,e,r,i,a){if(!a)return function(t,n,e,r,i){function a(a,o){return[n+t*(a*=r),e-t*(o*=i)]}return a.invert=function(a,o){return[(a-n)/t*r,(e-o)/t*i]},a}(t,n,e,r,i);var o=mk(a),u=_k(a),c=o*t,s=u*t,l=o/t,f=u/t,h=(u*e-o*n)/t,d=(u*n+o*e)/t;function p(t,a){return[c*(t*=r)-s*(a*=i)+n,e-s*t-c*a]}return p.invert=function(t,n){return[r*(l*t-f*n+h),i*(d-f*t-l*n)]},p}function bO(t){return xO((function(){return t}))()}function xO(t){var n,e,r,i,a,o,u,c,s,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,_=1,w=null,k=JM,M=null,O=$w,E=.5;function S(t){return c(t[0]*dk,t[1]*dk)}function D(t){return(t=c.invert(t[0],t[1]))&&[t[0]*hk,t[1]*hk]}function C(){var t=yO(f,0,0,x,_,b).apply(null,n(p,v)),r=yO(f,h-t[0],d-t[1],x,_,b);return e=rO(g,m,y),u=nO(n,r),c=nO(e,u),o=gO(u,E),A()}function A(){return s=l=null,S}return S.stream=function(t){return s&&l===t?s:s=mO(function(t){return uO({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(k(o(O(l=t)))))},S.preclip=function(t){return arguments.length?(k=t,w=void 0,A()):k},S.postclip=function(t){return arguments.length?(O=t,M=r=i=a=null,A()):O},S.clipAngle=function(t){return arguments.length?(k=+t?function(t){var n=mk(t),e=6*dk,r=n>0,i=pk(n)>ok;function a(t,e){return mk(t)*mk(e)>n}function o(t,e,r){var i=[1,0,0],a=PM(zM(t),zM(e)),o=UM(a,a),u=a[0],c=o-u*u;if(!c)return!r&&t;var s=n*o/c,l=-n*u/c,f=PM(i,a),h=LM(i,s);RM(h,LM(a,l));var d=f,p=UM(h,d),v=UM(d,d),g=p*p-v*(UM(h,h)-1);if(!(g<0)){var m=kk(g),y=LM(d,(-p-m)/v);if(RM(y,h),y=NM(y),!r)return y;var b,x=t[0],_=e[0],w=t[1],k=e[1];_<x&&(b=x,x=_,_=b);var M=_-x,O=pk(M-ck)<ok;if(!O&&k<w&&(b=w,w=k,k=b),O||M<ok?O?w+k>0^y[1]<(pk(y[0]-x)<ok?w:k):w<=y[1]&&y[1]<=k:M>ck^(x<=y[0]&&y[0]<=_)){var E=LM(d,(-p+m)/v);return RM(E,h),[y,NM(E)]}}}function u(n,e){var i=r?t:ck-t,a=0;return n<-i?a|=1:n>i&&(a|=2),e<-i?a|=4:e>i&&(a|=8),a}return YM(a,(function(t){var n,e,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var d,p=[f,h],v=a(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?ck:-ck),h):0;if(!n&&(s=c=v)&&t.lineStart(),v!==c&&(!(d=o(n,p))||TM(n,d)||TM(p,d))&&(p[2]=1),v!==c)l=0,v?(t.lineStart(),d=o(p,n),t.point(d[0],d[1])):(d=o(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^v){var m;g&e||!(m=o(p,n,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!v||n&&TM(n,p)||t.point(p[0],p[1]),n=p,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return l|(s&&c)<<1}}}),(function(n,r,i,a){$M(a,t,e,i,n,r)}),r?[0,-t]:[-ck,t-ck])}(w=t*dk):(w=null,JM),A()):w*hk},S.clipExtent=function(t){return arguments.length?(O=null==t?(M=r=i=a=null,$w):tO(M=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),A()):null==M?null:[[M,r],[i,a]]},S.scale=function(t){return arguments.length?(f=+t,C()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*dk,v=t[1]%360*dk,C()):[p*hk,v*hk]},S.rotate=function(t){return arguments.length?(g=t[0]%360*dk,m=t[1]%360*dk,y=t.length>2?t[2]%360*dk:0,C()):[g*hk,m*hk,y*hk]},S.angle=function(t){return arguments.length?(b=t%360*dk,C()):b*hk},S.reflectX=function(t){return arguments.length?(x=t?-1:1,C()):x<0},S.reflectY=function(t){return arguments.length?(_=t?-1:1,C()):_<0},S.precision=function(t){return arguments.length?(o=gO(u,E=t*t),A()):kk(E)},S.fitExtent=function(t,n){return lO(S,t,n)},S.fitSize=function(t,n){return fO(S,t,n)},S.fitWidth=function(t,n){return hO(S,t,n)},S.fitHeight=function(t,n){return dO(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&D,C()}}function _O(t){var n=0,e=ck/3,r=xO(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*dk,e=t[1]*dk):[n*hk,e*hk]},i}function wO(t,n){var e=_k(t),r=(e+_k(n))/2;if(pk(r)<ok)return function(t){var n=mk(t);function e(t,e){return[t*n,_k(e)/n]}return e.invert=function(t,e){return[t/n,Ek(e*n)]},e}(t);var i=1+e*(2*r-e),a=kk(i)/r;function o(t,n){var e=kk(i-2*r*_k(n))/r;return[e*_k(t*=r),a-e*mk(t)]}return o.invert=function(t,n){var e=a-n,o=gk(t,pk(e))*wk(e);return e*r<0&&(o-=ck*wk(t)*wk(e)),[o/r,Ek((i-(t*t+e*e)*r*r)/(2*r))]},o}function kO(){return _O(wO).scale(155.424).center([0,33.6442])}function MO(){return kO().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OO(t){return function(n,e){var r=mk(n),i=mk(e),a=t(r*i);return a===1/0?[2,0]:[a*i*_k(n),a*_k(e)]}}function EO(t){return function(n,e){var r=kk(n*n+e*e),i=t(r),a=_k(i),o=mk(i);return[gk(n*a,r*o),Ek(r&&e*a/r)]}}var SO=OO((function(t){return kk(2/(1+t))}));SO.invert=EO((function(t){return 2*Ek(t/2)}));var DO=OO((function(t){return(t=Ok(t))&&t/_k(t)}));function CO(t,n){return[t,bk(Mk((sk+n)/2))]}function AO(t){var n,e,r,i=bO(t),a=i.center,o=i.scale,u=i.translate,c=i.clipExtent,s=null;function l(){var a=ck*o(),u=i(function(t){function n(n){return(n=t(n[0]*dk,n[1]*dk))[0]*=hk,n[1]*=hk,n}return t=rO(t[0]*dk,t[1]*dk,t.length>2?t[2]*dk:0),n.invert=function(n){return(n=t.invert(n[0]*dk,n[1]*dk))[0]*=hk,n[1]*=hk,n},n}(i.rotate()).invert([0,0]));return c(null==s?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:t===CO?[[Math.max(u[0]-a,s),n],[Math.min(u[0]+a,e),r]]:[[s,Math.max(u[1]-a,n)],[e,Math.min(u[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),l()):o()},i.translate=function(t){return arguments.length?(u(t),l()):u()},i.center=function(t){return arguments.length?(a(t),l()):a()},i.clipExtent=function(t){return arguments.length?(null==t?s=n=e=r=null:(s=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),l()):null==s?null:[[s,n],[e,r]]},l()}function TO(t){return Mk((sk+t)/2)}function FO(t,n){var e=mk(t),r=t===n?_k(t):bk(e/mk(n))/bk(TO(n)/TO(t)),i=e*xk(TO(t),r)/r;if(!r)return CO;function a(t,n){i>0?n<-sk+ok&&(n=-sk+ok):n>sk-ok&&(n=sk-ok);var e=i/xk(TO(n),r);return[e*_k(r*t),i-e*mk(r*t)]}return a.invert=function(t,n){var e=i-n,a=wk(r)*kk(t*t+e*e),o=gk(t,pk(e))*wk(e);return e*r<0&&(o-=ck*wk(t)*wk(e)),[o/r,2*vk(xk(i/a,1/r))-sk]},a}function jO(t,n){return[t,n]}function ZO(t,n){var e=mk(t),r=t===n?_k(t):(e-mk(n))/(n-t),i=e/r+t;if(pk(r)<ok)return jO;function a(t,n){var e=i-n,a=r*t;return[e*_k(a),i-e*mk(a)]}return a.invert=function(t,n){var e=i-n,a=gk(t,pk(e))*wk(e);return e*r<0&&(a-=ck*wk(t)*wk(e)),[a/r,i-wk(r)*kk(t*t+e*e)]},a}DO.invert=EO((function(t){return t})),CO.invert=function(t,n){return[t,2*vk(yk(n))-sk]},jO.invert=jO;var NO=1.340264,zO=-.081106,UO=893e-6,PO=.003796,RO=kk(3)/2;function LO(t,n){var e=Ek(RO*_k(n)),r=e*e,i=r*r*r;return[t*mk(e)/(RO*(NO+3*zO*r+i*(7*UO+9*PO*r))),e*(NO+zO*r+i*(UO+PO*r))]}function IO(t,n){var e=mk(n),r=mk(t)*e;return[e*_k(t)/r,_k(n)/r]}function BO(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function qO(t,n){return[mk(n)*_k(t),_k(n)]}function HO(t,n){var e=mk(n),r=1+mk(t)*e;return[e*_k(t)/r,_k(n)/r]}function WO(t,n){return[bk(Mk((sk+n)/2)),-t]}function YO(){}function XO(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:YO,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}LO.invert=function(t,n){for(var e,r=n,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=e=(r*(NO+zO*i+a*(UO+PO*i))-n)/(NO+3*zO*i+a*(7*UO+9*PO*i)))*r)*i*i,!(pk(e)<uk));++o);return[RO*t*(NO+3*zO*i+a*(7*UO+9*PO*i))/mk(r),Ek(_k(r)/RO)]},IO.invert=EO(vk),BO.invert=function(t,n){var e,r=n,i=25;do{var a=r*r,o=a*a;r-=e=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-n)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(pk(e)>ok&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},qO.invert=EO(Ek),HO.invert=EO((function(t){return 2*vk(t)})),WO.invert=function(t,n){return[-n,2*vk(yk(t))-sk]};var GO=1e-6,JO=1e-12,$O=Math.PI,VO=$O/2,KO=$O/4,QO=2*$O,tE=180/$O,nE=$O/180,eE=Math.abs,rE=Math.atan,iE=Math.atan2,aE=Math.cos,oE=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),uE=Math.sign||function(t){return t>0?1:t<0?-1:0},cE=Math.sqrt;Math.tan;function sE(t){return t>1?VO:t<-1?-VO:Math.asin(t)}function lE(t,n){return eE(t[0]-n[0])<GO&&eE(t[1]-n[1])<GO}function fE(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function hE(t,n,e,r,i){var a,o,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],o=t[n];if(lE(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<n;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*GO}u.push(e=new fE(r,t,null,!0)),c.push(e.o=new fE(r,null,e,!1)),u.push(e=new fE(o,t,null,!1)),c.push(e.o=new fE(o,null,e,!0))}})),u.length){for(c.sort(n),dE(u),dE(c),a=0,o=c.length;a<o;++a)c[a].e=e=!e;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=s.length;a<o;++a)i.point((l=s[a])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,a=s.length-1;a>=0;--a)i.point((l=s[a])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function dE(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}var pE=function(){function t(){(0,rk.Z)(this,t),this._partials=new Float64Array(32),this._n=0}return(0,ik.Z)(t,[{key:"add",value:function(t){for(var n=this._partials,e=0,r=0;r<this._n&&r<32;r++){var i=n[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(n[e++]=o),t=a}return n[e]=t,this._n=e+1,this}},{key:"valueOf",value:function(){var t,n,e,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(e=(n=r[--i])-((a=t+n)-t))););i>0&&(e<0&&r[i-1]<0||e>0&&r[i-1]>0)&&(n=2*e)==(t=a+n)-a&&(a=t)}return a}}]),t}();function vE(t){return[iE(t[1],t[0]),sE(t[2])]}function gE(t){var n=t[0],e=t[1],r=aE(e);return[r*aE(n),r*oE(n),oE(e)]}function mE(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function yE(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function bE(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xE(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function _E(t){var n=cE(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function wE(t){return eE(t[0])<=$O?t[0]:uE(t[0])*((eE(t[0])+$O)%QO-$O)}var kE=(0,m.Z)().mark(ME);function ME(t){var n,e,r;return(0,m.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=(0,_a.Z)(t),i.prev=1,n.s();case 3:if((e=n.n()).done){i.next=8;break}return r=e.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),n.e(i.t1);case 13:return i.prev=13,n.f(),i.finish(13);case 16:case"end":return i.stop()}}),kE,null,[[1,10,13,16]])}function OE(t){return Array.from(ME(t))}function EE(t,n,e,r){return function(i){var a,o,u,c=n(i),s=XO(),l=n(s),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=OE(o);var t=function(t,n){var e=wE(n),r=n[1],i=oE(r),a=[oE(e),-aE(e),0],o=0,u=0,c=new pE;1===i?r=VO+GO:-1===i&&(r=-VO-GO);for(var s=0,l=t.length;s<l;++s)if(h=(f=t[s]).length)for(var f,h,d=f[h-1],p=wE(d),v=d[1]/2+KO,g=oE(v),m=aE(v),y=0;y<h;++y,p=x,g=w,m=k,d=b){var b=f[y],x=wE(b),_=b[1]/2+KO,w=oE(_),k=aE(_),M=x-p,O=M>=0?1:-1,E=O*M,S=E>$O,D=g*w;if(c.add(iE(D*O*oE(E),m*k+D*aE(E))),o+=S?M+O*QO:M,S^p>=e^x>=e){var C=yE(gE(d),gE(b));_E(C);var A=yE(a,C);_E(A);var T=(S^M>=0?-1:1)*sE(A[2]);(r>T||r===T&&(C[0]||C[1]))&&(u+=S^M>=0?1:-1)}}return(o<-GO||o<GO&&c<-JO)^1&u}(a,r);o.length?(f||(i.polygonStart(),f=!0),hE(o,DE,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function v(){h.point=p,c.lineStart()}function g(){h.point=d,c.lineEnd()}function m(t,n){u.push([t,n]),l.point(t,n)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var t,n,e,r,c=l.clean(),h=s.result(),d=h.length;if(u.pop(),a.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),o.push(h.filter(SE))}return h}}function SE(t){return t.length>1}function DE(t,n){return((t=t.x)[0]<0?t[1]-VO-GO:VO-t[1])-((n=n.x)[0]<0?n[1]-VO-GO:VO-n[1])}var CE=EE((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(a,o){var u=a>0?$O:-$O,c=eE(a-e);eE(c-$O)<GO?(t.point(e,r=(r+o)/2>0?VO:-VO),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),n=0):i!==u&&c>=$O&&(eE(e-i)<GO&&(e-=i*GO),eE(a-u)<GO&&(a-=u*GO),r=function(t,n,e,r){var i,a,o=oE(t-e);return eE(o)>GO?rE((oE(n)*(a=aE(r))*oE(e)-oE(r)*(i=aE(n))*oE(t))/(i*a*o)):(n+r)/2}(e,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=a,r=o),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*VO,r.point(-$O,i),r.point(0,i),r.point($O,i),r.point($O,0),r.point($O,-i),r.point(0,-i),r.point(-$O,-i),r.point(-$O,0),r.point(-$O,i);else if(eE(t[0]-n[0])>GO){var a=t[0]<n[0]?$O:-$O;i=e*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(n[0],n[1])}),[-$O,-VO]);function AE(t,n,e,r,i,a){if(e){var o=aE(n),u=oE(n),c=r*e;null==i?(i=n+r*QO,a=n-c/2):(i=TE(o,i),a=TE(o,a),(r>0?i<a:i>a)&&(i+=r*QO));for(var s,l=i;r>0?l>a:l<a;l-=c)s=vE([o,-u*aE(l),-u*oE(l)]),t.point(s[0],s[1])}}function TE(t,n){(n=gE(n))[0]-=t,_E(n);var e=function(t){return t>1?0:t<-1?$O:Math.acos(t)}(-n[1]);return((-n[2]<0?-e:e)+QO-GO)%QO}var FE=1e9,jE=-FE;function ZE(t,n,e,r){function i(i,a){return t<=i&&i<=e&&n<=a&&a<=r}function a(i,a,u,s){var l=0,f=0;if(null==i||(l=o(i,u))!==(f=o(a,u))||c(i,a)<0^u>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+u+4)%4)!==f);else s.point(a[0],a[1])}function o(r,i){return eE(r[0]-t)<GO?i>0?0:3:eE(r[0]-e)<GO?i>0?2:1:eE(r[1]-n)<GO?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=o(t,1),r=o(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(o){var c,s,l,f,h,d,p,v,g,m,y,b=o,x=XO(),_={point:w,lineStart:function(){_.point=k,s&&s.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){c&&(k(f,h),d&&g&&x.rejoin(),c.push(x.result()));_.point=w,g&&b.lineEnd()},polygonStart:function(){b=x,c=[],s=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var a,o,u=s[e],c=1,l=u.length,f=u[0],h=f[0],d=f[1];c<l;++c)a=h,o=d,h=(f=u[c])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++n:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--n;return n}(),e=y&&n,i=(c=OE(c)).length;(e||i)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&hE(c,u,n,a,o),o.polygonEnd());b=o,c=s=l=null}};function w(t,n){i(t,n)&&b.point(t,n)}function k(a,o){var u=i(a,o);if(s&&l.push([a,o]),m)f=a,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(a,o));else if(u&&g)b.point(a,o);else{var c=[p=Math.max(jE,Math.min(FE,p)),v=Math.max(jE,Math.min(FE,v))],x=[a=Math.max(jE,Math.min(FE,a)),o=Math.max(jE,Math.min(FE,o))];!function(t,n,e,r,i,a){var o,u=t[0],c=t[1],s=0,l=1,f=n[0]-u,h=n[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<s)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>s&&(s=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>s&&(s=o)}else if(f>0){if(o<s)return;o<l&&(l=o)}if(o=r-c,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=a-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}return s>0&&(t[0]=u+s*f,t[1]=c+s*h),l<1&&(n[0]=u+l*f,n[1]=c+l*h),!0}}}}}(c,x,t,n,e,r)?u&&(b.lineStart(),b.point(a,o),y=!1):(g||(b.lineStart(),b.point(c[0],c[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=a,v=o,g=u}return _}}function NE(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}var zE=function(t){return t};function UE(t,n){return[eE(t)>$O?t+Math.round(-t/QO)*QO:t,n]}function PE(t,n,e){return(t%=QO)?n||e?NE(LE(t),IE(n,e)):LE(t):n||e?IE(n,e):UE}function RE(t){return function(n,e){return[(n+=t)>$O?n-QO:n<-$O?n+QO:n,e]}}function LE(t){var n=RE(t);return n.invert=RE(-t),n}function IE(t,n){var e=aE(t),r=oE(t),i=aE(n),a=oE(n);function o(t,n){var o=aE(n),u=aE(t)*o,c=oE(t)*o,s=oE(n),l=s*e+u*r;return[iE(c*i-l*a,u*e-s*r),sE(l*i+c*a)]}return o.invert=function(t,n){var o=aE(n),u=aE(t)*o,c=oE(t)*o,s=oE(n),l=s*i-c*a;return[iE(c*i+s*a,u*e+l*r),sE(l*e-u*r)]},o}function BE(t){return function(n){var e=new qE;for(var r in t)e[r]=t[r];return e.stream=n,e}}function qE(){}function HE(t,n){t&&YE.hasOwnProperty(t.type)&&YE[t.type](t,n)}UE.invert=UE,qE.prototype={constructor:qE,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var WE={Feature:function(t,n){HE(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)HE(e[r].geometry,n)}},YE={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){XE(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)XE(e[r],n,0)},Polygon:function(t,n){GE(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)GE(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)HE(e[r],n)}};function XE(t,n,e){var r,i=-1,a=t.length-e;for(n.lineStart();++i<a;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function GE(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)XE(t[e],n,1);n.polygonEnd()}var JE=1/0,$E=JE,VE=-JE,KE=VE,QE={point:function(t,n){t<JE&&(JE=t);t>VE&&(VE=t);n<$E&&($E=n);n>KE&&(KE=n)},lineStart:YO,lineEnd:YO,polygonStart:YO,polygonEnd:YO,result:function(){var t=[[JE,$E],[VE,KE]];return VE=KE=-($E=JE=1/0),t}};var tS=QE;function nS(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,n){t&&WE.hasOwnProperty(t.type)?WE[t.type](t,n):HE(t,n)}(e,t.stream(tS)),n(tS.result()),null!=r&&t.clipExtent(r),t}function eS(t,n,e){return nS(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),o=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([o,u])}),e)}var rS=16,iS=aE(30*nE);function aS(t,n){return+n?function(t,n){function e(r,i,a,o,u,c,s,l,f,h,d,p,v,g){var m=s-r,y=l-i,b=m*m+y*y;if(b>4*n&&v--){var x=o+h,_=u+d,w=c+p,k=cE(x*x+_*_+w*w),M=sE(w/=k),O=eE(eE(w)-1)<GO||eE(a-f)<GO?(a+f)/2:iE(_,x),E=t(O,M),S=E[0],D=E[1],C=S-r,A=D-i,T=y*C-m*A;(T*T/b>n||eE((m*C+y*A)/b-.5)>.3||o*h+u*d+c*p<iS)&&(e(r,i,a,o,u,c,S,D,O,x/=k,_/=k,w,v,g),g.point(S,D),e(S,D,O,x,_,w,s,l,f,h,d,p,v,g))}}return function(n){var r,i,a,o,u,c,s,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=x},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){l=NaN,v.point=y,n.lineStart()}function y(r,i){var a=gE([r,i]),o=t(r,i);e(l,f,s,h,d,p,l=o[0],f=o[1],s=r,h=a[0],d=a[1],p=a[2],rS,n),n.point(l,f)}function b(){v.point=g,n.lineEnd()}function x(){m(),v.point=_,v.lineEnd=w}function _(t,n){y(r=t,n),i=l,a=f,o=h,u=d,c=p,v.point=y}function w(){e(l,f,s,h,d,p,i,a,r,o,u,c,rS,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return BE({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var oS=BE({point:function(t,n){this.stream.point(t*nE,n*nE)}});function uS(t,n,e,r,i,a){if(!a)return function(t,n,e,r,i){function a(a,o){return[n+t*(a*=r),e-t*(o*=i)]}return a.invert=function(a,o){return[(a-n)/t*r,(e-o)/t*i]},a}(t,n,e,r,i);var o=aE(a),u=oE(a),c=o*t,s=u*t,l=o/t,f=u/t,h=(u*e-o*n)/t,d=(u*n+o*e)/t;function p(t,a){return[c*(t*=r)-s*(a*=i)+n,e-s*t-c*a]}return p.invert=function(t,n){return[r*(l*t-f*n+h),i*(d-f*t-l*n)]},p}function cS(t){return function(t){var n,e,r,i,a,o,u,c,s,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,_=1,w=null,k=CE,M=null,O=zE,E=.5;function S(t){return c(t[0]*nE,t[1]*nE)}function D(t){return(t=c.invert(t[0],t[1]))&&[t[0]*tE,t[1]*tE]}function C(){var t=uS(f,0,0,x,_,b).apply(null,n(p,v)),r=uS(f,h-t[0],d-t[1],x,_,b);return e=PE(g,m,y),u=NE(n,r),c=NE(e,u),o=aS(u,E),A()}function A(){return s=l=null,S}return S.stream=function(t){return s&&l===t?s:s=oS(function(t){return BE({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(k(o(O(l=t)))))},S.preclip=function(t){return arguments.length?(k=t,w=void 0,A()):k},S.postclip=function(t){return arguments.length?(O=t,M=r=i=a=null,A()):O},S.clipAngle=function(t){return arguments.length?(k=+t?function(t){var n=aE(t),e=6*nE,r=n>0,i=eE(n)>GO;function a(t,e){return aE(t)*aE(e)>n}function o(t,e,r){var i=[1,0,0],a=yE(gE(t),gE(e)),o=mE(a,a),u=a[0],c=o-u*u;if(!c)return!r&&t;var s=n*o/c,l=-n*u/c,f=yE(i,a),h=xE(i,s);bE(h,xE(a,l));var d=f,p=mE(h,d),v=mE(d,d),g=p*p-v*(mE(h,h)-1);if(!(g<0)){var m=cE(g),y=xE(d,(-p-m)/v);if(bE(y,h),y=vE(y),!r)return y;var b,x=t[0],_=e[0],w=t[1],k=e[1];_<x&&(b=x,x=_,_=b);var M=_-x,O=eE(M-$O)<GO;if(!O&&k<w&&(b=w,w=k,k=b),O||M<GO?O?w+k>0^y[1]<(eE(y[0]-x)<GO?w:k):w<=y[1]&&y[1]<=k:M>$O^(x<=y[0]&&y[0]<=_)){var E=xE(d,(-p+m)/v);return bE(E,h),[y,vE(E)]}}}function u(n,e){var i=r?t:$O-t,a=0;return n<-i?a|=1:n>i&&(a|=2),e<-i?a|=4:e>i&&(a|=8),a}return EE(a,(function(t){var n,e,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var d,p=[f,h],v=a(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?$O:-$O),h):0;if(!n&&(s=c=v)&&t.lineStart(),v!==c&&(!(d=o(n,p))||lE(n,d)||lE(p,d))&&(p[2]=1),v!==c)l=0,v?(t.lineStart(),d=o(p,n),t.point(d[0],d[1])):(d=o(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^v){var m;g&e||!(m=o(p,n,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!v||n&&lE(n,p)||t.point(p[0],p[1]),n=p,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return l|(s&&c)<<1}}}),(function(n,r,i,a){AE(a,t,e,i,n,r)}),r?[0,-t]:[-$O,t-$O])}(w=t*nE):(w=null,CE),A()):w*tE},S.clipExtent=function(t){return arguments.length?(O=null==t?(M=r=i=a=null,zE):ZE(M=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),A()):null==M?null:[[M,r],[i,a]]},S.scale=function(t){return arguments.length?(f=+t,C()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*nE,v=t[1]%360*nE,C()):[p*tE,v*tE]},S.rotate=function(t){return arguments.length?(g=t[0]%360*nE,m=t[1]%360*nE,y=t.length>2?t[2]%360*nE:0,C()):[g*tE,m*tE,y*tE]},S.angle=function(t){return arguments.length?(b=t%360*nE,C()):b*tE},S.reflectX=function(t){return arguments.length?(x=t?-1:1,C()):x<0},S.reflectY=function(t){return arguments.length?(_=t?-1:1,C()):_<0},S.precision=function(t){return arguments.length?(o=aS(u,E=t*t),A()):cE(E)},S.fitExtent=function(t,n){return eS(S,t,n)},S.fitSize=function(t,n){return function(t,n,e){return eS(t,[[0,0],n],e)}(S,t,n)},S.fitWidth=function(t,n){return function(t,n,e){return nS(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),a=(r-i*(e[1][0]+e[0][0]))/2,o=-i*e[0][1];t.scale(150*i).translate([a,o])}),e)}(S,t,n)},S.fitHeight=function(t,n){return function(t,n,e){return nS(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),a=-i*e[0][0],o=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([a,o])}),e)}(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&D,C()}}((function(){return t}))()}var sS=Math.abs,lS=(Math.atan,Math.atan2,Math.ceil,Math.cos),fS=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),hS=(Math.tan,1e-6),dS=Math.PI,pS=dS/2,vS=(Math.SQRT1_2,mS(2));mS(dS);function gS(t){return t>1?pS:t<-1?-pS:Math.asin(t)}function mS(t){return t>0?Math.sqrt(t):0}function yS(t,n){var e,r=t*fS(n),i=30;do{n-=e=(n+fS(n)-r)/(1+lS(n))}while(sS(e)>hS&&--i>0);return n/2}var bS=function(t,n,e){function r(r,i){return[t*r*lS(i=yS(e,i)),n*fS(i)]}return r.invert=function(r,i){return i=gS(i/n),[r/(t*lS(i)),gS((2*i+fS(2*i))/e)]},r}(vS/pS,vS,dS);var xS=CM(),_S=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function wS(t,n){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(MS[t]=function(t,n){return function e(){var r=n();return r.type=t,r.path=CM().projection(r),r.copy=r.copy||function(){var t=e();return _S.forEach((function(n){r[n]&&t[n](r[n]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}(t,n),this):MS[t]||null}function kS(t){return t&&t.path||xS}var MS={albers:MO,albersusa:function(){var t,n,e,r,i,a,o=MO(),u=kO().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=kO().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){a=[t,n]}};function l(t){var n=t[0],o=t[1];return a=null,e.point(n,o),a||(r.point(n,o),a)||(i.point(n,o),a)}function f(){return t=n=null,l}return l.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:o).invert(t)},l.stream=function(e){return t&&n===e?t:t=function(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}([o.stream(n=e),u.stream(e),c.stream(e)])},l.precision=function(t){return arguments.length?(o.precision(t),u.precision(t),c.precision(t),f()):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),u.scale(.35*t),c.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var n=o.scale(),a=+t[0],l=+t[1];return e=o.translate(t).clipExtent([[a-.455*n,l-.238*n],[a+.455*n,l+.238*n]]).stream(s),r=u.translate([a-.307*n,l+.201*n]).clipExtent([[a-.425*n+ok,l+.12*n+ok],[a-.214*n-ok,l+.234*n-ok]]).stream(s),i=c.translate([a-.205*n,l+.212*n]).clipExtent([[a-.214*n+ok,l+.166*n+ok],[a-.115*n-ok,l+.234*n-ok]]).stream(s),f()},l.fitExtent=function(t,n){return lO(l,t,n)},l.fitSize=function(t,n){return fO(l,t,n)},l.fitWidth=function(t,n){return hO(l,t,n)},l.fitHeight=function(t,n){return dO(l,t,n)},l.scale(1070)},azimuthalequalarea:function(){return bO(SO).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return bO(DO).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return _O(FO).scale(109.5).parallels([30,30])},conicequalarea:kO,conicequidistant:function(){return _O(ZO).scale(131.154).center([0,13.9389])},equalEarth:function(){return bO(LO).scale(177.158)},equirectangular:function(){return bO(jO).scale(152.63)},gnomonic:function(){return bO(IO).scale(144.049).clipAngle(60)},identity:function(){var t,n,e,r,i,a,o,u=1,c=0,s=0,l=1,f=1,h=0,d=null,p=1,v=1,g=uO({point:function(t,n){var e=b([t,n]);this.stream.point(e[0],e[1])}}),m=$w;function y(){return p=u*l,v=u*f,a=o=null,b}function b(e){var r=e[0]*p,i=e[1]*v;if(h){var a=i*t-r*n;r=r*t+i*n,i=a}return[r+c,i+s]}return b.invert=function(e){var r=e[0]-c,i=e[1]-s;if(h){var a=i*t+r*n;r=r*t-i*n,i=a}return[r/p,i/v]},b.stream=function(t){return a&&o===t?a:a=g(m(o=t))},b.postclip=function(t){return arguments.length?(m=t,d=e=r=i=null,y()):m},b.clipExtent=function(t){return arguments.length?(m=null==t?(d=e=r=i=null,$w):tO(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,e],[r,i]]},b.scale=function(t){return arguments.length?(u=+t,y()):u},b.translate=function(t){return arguments.length?(c=+t[0],s=+t[1],y()):[c,s]},b.angle=function(e){return arguments.length?(n=_k(h=e%360*dk),t=mk(h),y()):h*hk},b.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.fitExtent=function(t,n){return lO(b,t,n)},b.fitSize=function(t,n){return fO(b,t,n)},b.fitWidth=function(t,n){return hO(b,t,n)},b.fitHeight=function(t,n){return dO(b,t,n)},b},mercator:function(){return AO(CO).scale(961/fk)},mollweide:function(){return cS(bS).scale(169.529)},naturalEarth1:function(){return bO(BO).scale(175.295)},orthographic:function(){return bO(qO).scale(249.5).clipAngle(90+ok)},stereographic:function(){return bO(HO).scale(250).clipAngle(142)},transversemercator:function(){var t=AO(WO),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)}};for(var OS in MS)wS(OS,MS[OS]);var ES=1e-6,SS=1e-12,DS=Math.PI,CS=DS/2,AS=DS/4,TS=2*DS,FS=180/DS,jS=DS/180,ZS=Math.abs,NS=Math.atan,zS=Math.atan2,US=Math.cos,PS=Math.ceil,RS=Math.exp,LS=(Math.floor,Math.hypot),IS=Math.log,BS=Math.pow,qS=Math.sin,HS=Math.sign||function(t){return t>0?1:t<0?-1:0},WS=Math.sqrt,YS=Math.tan;function XS(t){return t>1?0:t<-1?DS:Math.acos(t)}function GS(t){return t>1?CS:t<-1?-CS:Math.asin(t)}function JS(t,n,e){var r=Qa(t,n-ES,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function $S(t,n,e){var r=Qa(t,n-ES,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function VS(){var t,n,e,r,i,a,o,u,c,s,l,f,h=10,d=h,p=90,v=360,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return Qa(PS(r/p)*p,e,p).map(l).concat(Qa(PS(u/v)*v,o,v).map(f)).concat(Qa(PS(n/h)*h,t,h).filter((function(t){return ZS(t%p)>ES})).map(c)).concat(Qa(PS(a/d)*d,i,d).filter((function(t){return ZS(t%v)>ES})).map(s))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(e).reverse().slice(1),f(u).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),u>o&&(t=u,u=o,o=t),m.precision(g)):[[r,u],[e,o]]},m.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],a=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),a>i&&(e=a,a=i,i=e),m.precision(g)):[[n,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],m):[p,v]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(g=+h,c=JS(a,i,90),s=$S(n,t,g),l=JS(u,o,90),f=$S(r,e,g),m):g},m.extentMajor([[-180,-90+ES],[180,90-ES]]).extentMinor([[-180,-80-ES],[180,80+ES]])}function KS(){}var QS=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function tD(){var t=1,n=1,e=o;function r(t,n){return n.map((function(n){return i(t,n)}))}function i(r,i){var o=[],u=[];return function(e,r,i){var o,u,c,s,l,f,h=new Array,d=new Array;o=u=-1,s=e[0]>=r,QS[s<<1].forEach(p);for(;++o<t-1;)c=s,s=e[o+1]>=r,QS[c|s<<1].forEach(p);QS[s<<0].forEach(p);for(;++u<n-1;){for(o=-1,s=e[u*t+t]>=r,l=e[u*t]>=r,QS[s<<1|l<<2].forEach(p);++o<t-1;)c=s,s=e[u*t+t+o+1]>=r,f=l,l=e[u*t+o+1]>=r,QS[c|s<<1|l<<2|f<<3].forEach(p);QS[s|l<<3].forEach(p)}o=-1,l=e[u*t]>=r,QS[l<<2].forEach(p);for(;++o<t-1;)f=l,l=e[u*t+o+1]>=r,QS[l<<2|f<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],s=a(r),l=a(c);(n=d[s])?(e=h[l])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=l]=n):(n=h[l])?(e=d[s])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=s]=n):h[s]=d[l]={start:s,end:l,ring:[r,c]}}QS[l<<3].forEach(p)}(r,i,(function(t){e(t,r,i),function(t){var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];for(;++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)})),u.forEach((function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==nD((n=o[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function o(e,r,i){e.forEach((function(e){var a,o=e[0],u=e[1],c=0|o,s=0|u,l=r[s*t+c];o>0&&o<t&&c===o&&(a=r[s*t+c-1],e[0]=o+(i-a)/(l-a)-.5),u>0&&u<n&&s===u&&(a=r[(s-1)*t+c],e[1]=u+(i-a)/(l-a)-.5)}))}return r.contour=i,r.size=function(e){if(!arguments.length)return[t,n];var i=Math.floor(e[0]),a=Math.floor(e[1]);return i>=0&&a>=0||(0,g.vU)("invalid size"),t=i,n=a,r},r.smooth=function(t){return arguments.length?(e=t?o:KS,r):e===o},r}function nD(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=eD(t,n[r]))return e;return 0}function eD(t,n){for(var e=n[0],r=n[1],i=-1,a=0,o=t.length,u=o-1;a<o;u=a++){var c=t[a],s=c[0],l=c[1],f=t[u],h=f[0],d=f[1];if(rD(c,f,n))return 0;l>r!==d>r&&e<(h-s)*(r-l)/(d-l)+s&&(i=-i)}return i}function rD(t,n,e){var r,i,a,o;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],a=e[r],o=n[r],i<=a&&a<=o||o<=a&&a<=i)}function iD(t,n,e){return function(r){var i=(0,g.We)(r),a=e?Math.min(i[0],0):i[0],o=i[1],u=o-a,c=n?nu(a,o,t):u/(t+1);return Qa(a+c,o,c)}}function aD(t){ma.call(this,null,t)}function oD(t,n,e,r,i){var a=t.x1||0,o=t.y1||0,u=n*e<0;function c(t){t.forEach(s)}function s(t){u&&t.reverse(),t.forEach(l)}function l(t){t[0]=(t[0]-a)*n+r,t[1]=(t[1]-o)*e+i}return function(t){return t.coordinates.forEach(c),t}}function uD(t,n,e){var r=t>=0?t:xw(n,e);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function cD(t){return(0,g.mf)(t)?t:(0,g.a9)(+t)}function sD(){var t=function(t){return t[0]},n=function(t){return t[1]},e=g.kX,r=[-1,-1],i=960,a=500,o=2;function u(u,c){var s=uD(r[0],u,t)>>o,l=uD(r[1],u,n)>>o,f=s?s+2:0,h=l?l+2:0,d=2*f+(i>>o),p=2*h+(a>>o),v=new Float32Array(d*p),g=new Float32Array(d*p),m=v;u.forEach((function(r){var i=f+(+t(r)>>o),a=h+(+n(r)>>o);i>=0&&i<d&&a>=0&&a<p&&(v[i+a*d]+=+e(r))})),s>0&&l>0?(lD(d,p,v,g,s),fD(d,p,g,v,l),lD(d,p,v,g,s),fD(d,p,g,v,l),lD(d,p,v,g,s),fD(d,p,g,v,l)):s>0?(lD(d,p,v,g,s),lD(d,p,g,v,s),lD(d,p,v,g,s),m=g):l>0&&(fD(d,p,v,g,l),fD(d,p,g,v,l),fD(d,p,v,g,l),m=g);for(var y=c?Math.pow(2,-2*o):1/v_(m),b=0,x=d*p;b<x;++b)m[b]*=y;return{values:m,scale:1<<o,width:d,height:p,x1:f,y1:h,x2:f+(i>>o),y2:h+(a>>o)}}return u.x=function(n){return arguments.length?(t=cD(n),u):t},u.y=function(t){return arguments.length?(n=cD(t),u):n},u.weight=function(t){return arguments.length?(e=cD(t),u):e},u.size=function(t){if(!arguments.length)return[i,a];var n=+t[0],e=+t[1];return n>=0&&e>=0||(0,g.vU)("invalid size"),i=n,a=e,u},u.cellSize=function(t){return arguments.length?((t=+t)>=1||(0,g.vU)("invalid cell size"),o=Math.floor(Math.log(t)/Math.LN2),u):1<<o},u.bandwidth=function(t){return arguments.length?(1===(t=(0,g.IX)(t)).length&&(t=[+t[0],+t[0]]),2!==t.length&&(0,g.vU)("invalid bandwidth"),r=t,u):r},u}function lD(t,n,e,r,i){for(var a=1+(i<<1),o=0;o<n;++o)for(var u=0,c=0;u<t+i;++u)u<t&&(c+=e[u+o*t]),u>=i&&(u>=a&&(c-=e[u-a+o*t]),r[u-i+o*t]=c/Math.min(u+1,t-1+a-u,a))}function fD(t,n,e,r,i){for(var a=1+(i<<1),o=0;o<t;++o)for(var u=0,c=0;u<n+i;++u)u<n&&(c+=e[o+u*t]),u>=i&&(u>=a&&(c-=e[o+(u-a)*t]),r[o+(u-i)*t]=c/Math.min(u+1,n-1+a-u,a))}function hD(t){ma.call(this,null,t)}aD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},(0,g.XW)(aD,ma,{transform:function(t,n){if(this.value&&!n.changed()&&!t.modified())return n.StopPropagation;var e=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=n.materialize(n.SOURCE).source,i=t.field||g.yR,a=tD().smooth(!1!==t.smooth),o=t.thresholds||function(t,n,e){var r=iD(e.levels||10,e.nice,!1!==e.zero);return"shared"!==e.resolve?r:r(t.map((function(t){return ka(n(t).values)})))}(r,i,t),u=null===t.as?null:t.as||"contour",c=[];return r.forEach((function(n){var e=i(n),r=a.size([e.width,e.height])(e.values,(0,g.kJ)(o)?o:o(e.values));!function(t,n,e,r){var i=r.scale||n.scale,a=r.translate||n.translate;(0,g.mf)(i)&&(i=i(e,r));(0,g.mf)(a)&&(a=a(e,r));if((1===i||null==i)&&!a)return;var o=((0,g.hj)(i)?i:i[0])||1,u=((0,g.hj)(i)?i:i[1])||1,c=a&&a[0]||0,s=a&&a[1]||0;t.forEach(oD(n,o,u,c,s))}(r,e,n,t),r.forEach((function(t){c.push(Ui(n,Ni(null!=u?(0,nt.Z)({},u,t):t)))}))})),this.value&&(e.rem=this.value),this.value=e.source=e.add=c,e}}),hD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var dD=["x","y","weight","size","cellSize","bandwidth"];function pD(t,n){return dD.forEach((function(e){return null!=n[e]?t[e](n[e]):0})),t}function vD(t){ma.call(this,null,t)}(0,g.XW)(hD,ma,{transform:function(t,n){if(this.value&&!n.changed()&&!t.modified())return n.StopPropagation;var e,r=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=function(t,n){var e,r,i,a,o,u,c=[],s=function(t){return t(a)};if(null==n)c.push(t);else for(e={},r=0,i=t.length;r<i;++r)a=t[r],(u=e[o=n.map(s)])||(e[o]=u=[],u.dims=o,c.push(u)),u.push(a);return c}(n.materialize(n.SOURCE).source,t.groupby),a=(t.groupby||[]).map(g.el),o=pD(sD(),t),u=t.as||"grid";return e=i.map((function(n){return Ni(function(t,n){for(var e=0;e<a.length;++e)t[a[e]]=n[e];return t}((0,nt.Z)({},u,o(n,t.counts)),n.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=e,r}}),vD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},(0,g.XW)(vD,ma,{transform:function(t,n){if(this.value&&!n.changed()&&!t.modified())return n.StopPropagation;var e,r,i=n.fork(n.NO_SOURCE|n.NO_FIELDS),a=tD().smooth(!1!==t.smooth),o=t.values,u=t.thresholds||iD(t.count||10,t.nice,!!o),c=t.size;return o||(o=n.materialize(n.SOURCE).source,r=oD(e=pD(sD(),t)(o,!0),e.scale||1,e.scale||1,0,0),c=[e.width,e.height],o=e.values),u=(0,g.kJ)(u)?u:u(o),o=a.size(c)(o,u),r&&o.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(Ni),i}});var gD="Feature",mD="FeatureCollection";function yD(t){ma.call(this,null,t)}function bD(t){ma.call(this,null,t)}function xD(t){ma.call(this,null,t)}function _D(t){ma.call(this,null,t)}function wD(t){ma.call(this,[],t),this.generator=VS()}function kD(t){ma.call(this,null,t)}function MD(t){if(!(0,g.mf)(t))return!1;var n=(0,g.Rg)((0,g.Oj)(t));return n.$x||n.$y||n.$value||n.$max}function OD(t){ma.call(this,null,t),this.modified(!0)}function ED(t,n,e){(0,g.mf)(t[n])&&t[n](e)}function SD(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,a,o,u,c,s,l,f,h,d=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((s=n>=(a=(v+m)/2))?v=a:m=a,(l=e>=(o=(g+y)/2))?g=o:y=o,i=d,!(d=d[f=l<<1|s]))return i[f]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(s=n>=(a=(v+m)/2))?v=a:m=a,(l=e>=(o=(g+y)/2))?g=o:y=o}while((f=l<<1|s)===(h=(c>=o)<<1|u>=a));return i[h]=d,i[f]=p,t}function DD(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function CD(t){return t[0]}function AD(t){return t[1]}function TD(t,n,e){var r=new FD(null==n?CD:n,null==e?AD:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function FD(t,n,e,r,i,a){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function jD(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}yD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},(0,g.XW)(yD,ma,{transform:function(t,n){var e,r=this._features,i=this._points,a=t.fields,o=a&&a[0],u=a&&a[1],c=t.geojson||!a&&g.yR,s=n.ADD;e=t.modified()||n.changed(n.REM)||n.modified((0,g.Oj)(c))||o&&n.modified((0,g.Oj)(o))||u&&n.modified((0,g.Oj)(u)),this.value&&!e||(s=n.SOURCE,this._features=r=[],this._points=i=[]),c&&n.visit(s,(function(t){return r.push(c(t))})),o&&u&&(n.visit(s,(function(t){var n=o(t),e=u(t);null!=n&&null!=e&&(n=+n)===n&&(e=+e)===e&&i.push([n,e])})),r=r.concat({type:gD,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:mD,features:r}}}),bD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},(0,g.XW)(bD,ma,{transform:function(t,n){var e=n.fork(n.ALL),r=this.value,i=t.field||g.yR,a=t.as||"path",o=e.SOURCE;!r||t.modified()?(this.value=r=kS(t.projection),e.materialize().reflow()):o=i===g.yR||n.modified(i.fields)?e.ADD_MOD:e.ADD;var u=function(t,n){var e=t.pointRadius();t.context(null),null!=n&&t.pointRadius(n);return e}(r,t.pointRadius);return e.visit(o,(function(t){return t[a]=r(i(t))})),r.pointRadius(u),e.modifies(a)}}),xD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},(0,g.XW)(xD,ma,{transform:function(t,n){var e,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],u=o[0],c=o[1];function s(t){var n=r([i(t),a(t)]);n?(t[u]=n[0],t[c]=n[1]):(t[u]=void 0,t[c]=void 0)}return t.modified()?n=n.materialize().reflow(!0).visit(n.SOURCE,s):(e=n.modified(i.fields)||n.modified(a.fields),n.visit(e?n.ADD_MOD:n.ADD,s)),n.modifies(o)}}),_D.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},(0,g.XW)(_D,ma,{transform:function(t,n){var e=n.fork(n.ALL),r=this.value,i=t.as||"shape",a=e.ADD;return r&&!t.modified()||(this.value=r=function(t,n,e){var r=null==e?function(e){return t(n(e))}:function(r){var i=t.pointRadius(),a=t.pointRadius(e)(n(r));return t.pointRadius(i),a};return r.context=function(n){return t.context(n),r},r}(kS(t.projection),t.field||(0,g.EP)("datum"),t.pointRadius),e.materialize().reflow(),a=e.SOURCE),e.visit(a,(function(t){return t[i]=r})),e.modifies(i)}}),wD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},(0,g.XW)(wD,ma,{transform:function(t,n){var e,r=this.value,i=this.generator;if(!r.length||t.modified())for(var a in t)(0,g.mf)(i[a])&&i[a](t[a]);return e=i(),r.length?n.mod.push(Pi(r[0],e)):n.add.push(Ni(e)),r[0]=e,n}}),kD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},(0,g.XW)(kD,ma,{transform:function(t,n){if(!n.changed()&&!t.modified())return n.StopPropagation;var e=n.materialize(n.SOURCE).source,r="shared"===t.resolve,i=t.field||g.yR,a=function(t,n){var e;(0,g.mf)(t)?(e=function(e){return t(e,n)},e.dep=MD(t)):t?e=(0,g.a9)(t):(e=function(t){return t.$value/t.$max||0},e.dep=!0);return e}(t.opacity,t),o=function(t,n){var e;(0,g.mf)(t)?(e=function(e){return(0,m_.B8)(t(e,n))},e.dep=MD(t)):e=(0,g.a9)((0,m_.B8)(t||"#888"));return e}(t.color,t),u=t.as||"image",c={$x:0,$y:0,$value:0,$max:r?ka(e.map((function(t){return ka(i(t).values)}))):0};return e.forEach((function(t){var n=i(t),e=(0,g.l7)({},t,c);r||(e.$max=ka(n.values||[])),t[u]=function(t,n,e,r){for(var i=t.width,a=t.height,o=t.x1||0,u=t.y1||0,c=t.x2||i,s=t.y2||a,l=t.values,f=l?function(t){return l[t]}:g.bM,h=Rl(c-o,s-u),d=h.getContext("2d"),p=d.getImageData(0,0,c-o,s-u),v=p.data,m=u,y=0;m<s;++m){n.$y=m-u;for(var b=o,x=m*i;b<c;++b,y+=4){n.$x=b-o,n.$value=f(b+x);var _=e(n);v[y+0]=_.r,v[y+1]=_.g,v[y+2]=_.b,v[y+3]=~~(255*r(n))}}return d.putImageData(p,0,0),h}(n,e,o.dep?o:(0,g.a9)(o(e)),a.dep?a:(0,g.a9)(a(e)))})),n.reflow(!0).modifies(u)}}),(0,g.XW)(OD,ma,{transform:function(t,n){var e=this.value;return!e||t.modified("type")?(this.value=e=function(t){var n=wS((t||"mercator").toLowerCase());n||(0,g.vU)("Unrecognized projection type: "+t);return n()}(t.type),_S.forEach((function(n){null!=t[n]&&ED(e,n,t[n])}))):_S.forEach((function(n){t.modified(n)&&ED(e,n,t[n])})),null!=t.pointRadius&&e.path.pointRadius(t.pointRadius),t.fit&&function(t,n){var e=function(t){return t=(0,g.IX)(t),1===t.length?t[0]:{type:mD,features:t.reduce((function(t,n){return t.concat(function(t){return t.type===mD?t.features:(0,g.IX)(t).filter((function(t){return null!=t})).map((function(t){return t.type===gD?t:{type:gD,geometry:t}}))}(n))}),[])}}(n.fit);n.extent?t.fitExtent(n.extent,e):n.size&&t.fitSize(n.size,e)}(e,t),n.fork(n.NO_SOURCE|n.NO_FIELDS)}});var ZD=TD.prototype=FD.prototype;function ND(t){return function(){return t}}function zD(t){return 1e-6*(t()-.5)}function UD(t){return t.x+t.vx}function PD(t){return t.y+t.vy}ZD.copy=function(){var t,n,e=new FD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=jD(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=jD(n));return e},ZD.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return SD(this.cover(n,e),n,e,t)},ZD.addAll=function(t){var n,e,r,i,a=t.length,o=new Array(a),u=new Array(a),c=1/0,s=1/0,l=-1/0,f=-1/0;for(e=0;e<a;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(o[e]=r,u[e]=i,r<c&&(c=r),r>l&&(l=r),i<s&&(s=i),i>f&&(f=i));if(c>l||s>f)return this;for(this.cover(c,s).cover(l,f),e=0;e<a;++e)SD(this,o[e],u[e],t[e]);return this},ZD.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,a=(r=Math.floor(n))+1;else{for(var o,u,c=i-e||1,s=this._root;e>t||t>=i||r>n||n>=a;)switch(u=(n<r)<<1|t<e,(o=new Array(4))[u]=s,s=o,c*=2,u){case 0:i=e+c,a=r+c;break;case 1:e=i-c,a=r+c;break;case 2:i=e+c,r=a-c;break;case 3:e=i-c,r=a-c}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=a,this},ZD.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},ZD.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ZD.find=function(t,n,e){var r,i,a,o,u,c,s,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new DD(v,l,f,h,d)),null==e?e=1/0:(l=t-e,f=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(a=c.y0)>d||(o=c.x1)<l||(u=c.y1)<f))if(v.length){var g=(i+o)/2,m=(a+u)/2;p.push(new DD(v[3],g,m,o,u),new DD(v[2],i,m,g,u),new DD(v[1],g,a,o,m),new DD(v[0],i,a,g,m)),(s=(n>=m)<<1|t>=g)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=c)}else{var y=t-+this._x.call(null,v.data),b=n-+this._y.call(null,v.data),x=y*y+b*b;if(x<e){var _=Math.sqrt(e=x);l=t-_,f=n-_,h=t+_,d=n+_,r=v.data}}return r},ZD.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var n,e,r,i,a,o,u,c,s,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((s=a>=(u=(p+g)/2))?p=u:g=u,(l=o>=(c=(v+m)/2))?v=c:m=c,n=d,!(d=d[f=l<<1|s]))return this;if(!d.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(e=n,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[f]=i:delete n[f],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},ZD.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},ZD.root=function(){return this._root},ZD.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},ZD.visit=function(t){var n,e,r,i,a,o,u=[],c=this._root;for(c&&u.push(new DD(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,a=n.x1,o=n.y1)&&c.length){var s=(r+a)/2,l=(i+o)/2;(e=c[3])&&u.push(new DD(e,s,l,a,o)),(e=c[2])&&u.push(new DD(e,r,l,s,o)),(e=c[1])&&u.push(new DD(e,s,i,a,l)),(e=c[0])&&u.push(new DD(e,r,i,s,l))}return this},ZD.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new DD(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,u=n.y0,c=n.x1,s=n.y1,l=(o+c)/2,f=(u+s)/2;(a=i[0])&&e.push(new DD(a,o,u,l,f)),(a=i[1])&&e.push(new DD(a,l,u,c,f)),(a=i[2])&&e.push(new DD(a,o,f,l,s)),(a=i[3])&&e.push(new DD(a,l,f,c,s))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},ZD.x=function(t){return arguments.length?(this._x=t,this):this._x},ZD.y=function(t){return arguments.length?(this._y=t,this):this._y};var RD={value:function(){}};function LD(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ID(r)}function ID(t){this._=t}function BD(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function qD(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=RD,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}ID.prototype=LD.prototype={constructor:ID,on:function(t,n){var e,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),o=-1,u=a.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=a[o]).type)i[e]=qD(i[e],t.name,n);else if(null==n)for(e in i)i[e]=qD(i[e],t.name,null);return this}for(;++o<u;)if((e=(t=a[o]).type)&&(e=BD(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ID(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,e=(r=this._[t]).length;a<e;++a)r[a].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};var HD=LD,WD=e(1897),YD=1664525,XD=1013904223,GD=4294967296;function JD(t){return t.x}function $D(t){return t.y}var VD=10,KD=Math.PI*(3-Math.sqrt(5));function QD(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,u=new Map,c=(0,WD.HT)(f),s=HD("tick","end"),l=function(){var t=1;return function(){return(t=(YD*t+XD)%GD)/GD}}();function f(){h(),s.call("tick",n),e<r&&(c.stop(),s.call("end",n))}function h(r){var c,s,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(e+=(a-e)*i,u.forEach((function(t){t(e)})),c=0;c<l;++c)null==(s=t[c]).fx?s.x+=s.vx*=o:(s.x=s.fx,s.vx=0),null==s.fy?s.y+=s.vy*=o:(s.y=s.fy,s.vy=0);return n}function d(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=VD*Math.sqrt(.5+e),a=e*KD;n.x=i*Math.cos(a),n.y=i*Math.sin(a)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function p(n){return n.initialize&&n.initialize(t,l),n}return null==t&&(t=[]),d(),n={tick:h,restart:function(){return c.restart(f),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),u.forEach(p),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(o=1-t,n):1-o},randomSource:function(t){return arguments.length?(l=t,u.forEach(p),n):l},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,p(e)),n):u.get(t)},find:function(n,e,r){var i,a,o,u,c,s=0,l=t.length;for(null==r?r=1/0:r*=r,s=0;s<l;++s)(o=(i=n-(u=t[s]).x)*i+(a=e-u.y)*a)<r&&(c=u,r=o);return c},on:function(t,e){return arguments.length>1?(s.on(t,e),n):s.on(t)}}}function tC(t){return t.index}function nC(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}var eC={center:function(t,n){var e,r=1;function i(){var i,a,o=e.length,u=0,c=0;for(i=0;i<o;++i)u+=(a=e[i]).x,c+=a.y;for(u=(u/o-t)*r,c=(c/o-n)*r,i=0;i<o;++i)(a=e[i]).x-=u,a.y-=c}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i.strength=function(t){return arguments.length?(r=+t,i):r},i},collide:function(t){var n,e,r,i=1,a=1;function o(){for(var t,o,c,s,l,f,h,d=n.length,p=0;p<a;++p)for(o=TD(n,UD,PD).visitAfter(u),t=0;t<d;++t)c=n[t],f=e[c.index],h=f*f,s=c.x+c.vx,l=c.y+c.vy,o.visit(v);function v(t,n,e,a,o){var u=t.data,d=t.r,p=f+d;if(!u)return n>s+p||a<s-p||e>l+p||o<l-p;if(u.index>c.index){var v=s-u.x-u.vx,g=l-u.y-u.vy,m=v*v+g*g;m<p*p&&(0===v&&(m+=(v=zD(r))*v),0===g&&(m+=(g=zD(r))*g),m=(p-(m=Math.sqrt(m)))/m*i,c.vx+=(v*=m)*(p=(d*=d)/(h+d)),c.vy+=(g*=m)*p,u.vx-=v*(p=1-p),u.vy-=g*p)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function c(){if(n){var r,i,a=n.length;for(e=new Array(a),r=0;r<a;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!==typeof t&&(t=ND(null==t?1:+t)),o.initialize=function(t,e){n=t,r=e,c()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(n){return arguments.length?(t="function"===typeof n?n:ND(+n),c(),o):t},o},nbody:function(){var t,n,e,r,i,a=ND(-30),o=1,u=1/0,c=.81;function s(e){var i,a=t.length,o=TD(t,JD,$D).visitAfter(f);for(r=e,i=0;i<a;++i)n=t[i],o.visit(h)}function l(){if(t){var n,e,r=t.length;for(i=new Array(r),n=0;n<r;++n)e=t[n],i[e.index]=+a(e,n,t)}}function f(t){var n,e,r,a,o,u=0,c=0;if(t.length){for(r=a=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,r+=e*n.x,a+=e*n.y);t.x=r/c,t.y=a/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=i[n.data.index]}while(n=n.next)}t.value=u}function h(t,a,s,l){if(!t.value)return!0;var f=t.x-n.x,h=t.y-n.y,d=l-a,p=f*f+h*h;if(d*d/c<p)return p<u&&(0===f&&(p+=(f=zD(e))*f),0===h&&(p+=(h=zD(e))*h),p<o&&(p=Math.sqrt(o*p)),n.vx+=f*t.value*r/p,n.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==n||t.next)&&(0===f&&(p+=(f=zD(e))*f),0===h&&(p+=(h=zD(e))*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==n&&(d=i[t.data.index]*r/p,n.vx+=f*d,n.vy+=h*d)}while(t=t.next)}}return s.initialize=function(n,r){t=n,e=r,l()},s.strength=function(t){return arguments.length?(a="function"===typeof t?t:ND(+t),l(),s):a},s.distanceMin=function(t){return arguments.length?(o=t*t,s):Math.sqrt(o)},s.distanceMax=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s.theta=function(t){return arguments.length?(c=t*t,s):Math.sqrt(c)},s},link:function(t){var n,e,r,i,a,o,u=tC,c=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=ND(30),l=1;function f(r){for(var i=0,u=t.length;i<l;++i)for(var c,s,f,h,d,p,v,g=0;g<u;++g)s=(c=t[g]).source,h=(f=c.target).x+f.vx-s.x-s.vx||zD(o),d=f.y+f.vy-s.y-s.vy||zD(o),h*=p=((p=Math.sqrt(h*h+d*d))-e[g])/p*r*n[g],d*=p,f.vx-=h*(v=a[g]),f.vy-=d*v,s.vx+=h*(v=1-v),s.vy+=d*v}function h(){if(r){var o,c,s=r.length,l=t.length,f=new Map(r.map((function(t,n){return[u(t,n,r),t]})));for(o=0,i=new Array(s);o<l;++o)(c=t[o]).index=o,"object"!==typeof c.source&&(c.source=nC(f,c.source)),"object"!==typeof c.target&&(c.target=nC(f,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(o=0,a=new Array(l);o<l;++o)c=t[o],a[o]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(l),d(),e=new Array(l),p()}}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}return null==t&&(t=[]),f.initialize=function(t,n){r=t,o=n,h()},f.links=function(n){return arguments.length?(t=n,h(),f):t},f.id=function(t){return arguments.length?(u=t,f):u},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(c="function"===typeof t?t:ND(+t),d(),f):c},f.distance=function(t){return arguments.length?(s="function"===typeof t?t:ND(+t),p(),f):s},f},x:function(t){var n,e,r,i=ND(.1);function a(t){for(var i,a=0,o=n.length;a<o;++a)(i=n[a]).vx+=(r[a]-i.x)*e[a]*t}function o(){if(n){var a,o=n.length;for(e=new Array(o),r=new Array(o),a=0;a<o;++a)e[a]=isNaN(r[a]=+t(n[a],a,n))?0:+i(n[a],a,n)}}return"function"!==typeof t&&(t=ND(null==t?0:+t)),a.initialize=function(t){n=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:ND(+t),o(),a):i},a.x=function(n){return arguments.length?(t="function"===typeof n?n:ND(+n),o(),a):t},a},y:function(t){var n,e,r,i=ND(.1);function a(t){for(var i,a=0,o=n.length;a<o;++a)(i=n[a]).vy+=(r[a]-i.y)*e[a]*t}function o(){if(n){var a,o=n.length;for(e=new Array(o),r=new Array(o),a=0;a<o;++a)e[a]=isNaN(r[a]=+t(n[a],a,n))?0:+i(n[a],a,n)}}return"function"!==typeof t&&(t=ND(null==t?0:+t)),a.initialize=function(t){n=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:ND(+t),o(),a):i},a.y=function(n){return arguments.length?(t="function"===typeof n?n:ND(+n),o(),a):t},a}},rC="forces",iC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],aC=["static","iterations"],oC=["x","y","vx","vy"];function uC(t){ma.call(this,null,t)}function cC(t,n,e,r){var i,a,o,u,c=(0,g.IX)(n.forces);for(i=0,a=iC.length;i<a;++i)(o=iC[i])!==rC&&n.modified(o)&&t[o](n[o]);for(i=0,a=c.length;i<a;++i)u=rC+i,(o=e||n.modified(rC,i)?lC(c[i]):r&&sC(c[i],r)?t.force(u):null)&&t.force(u,o);for(a=t.numForces||0;i<a;++i)t.force(rC+i,null);return t.numForces=c.length,t}function sC(t,n){var e,r;for(e in t)if((0,g.mf)(r=t[e])&&n.modified((0,g.Oj)(r)))return 1;return 0}function lC(t){var n,e;for(e in(0,g.nr)(eC,t.force)||(0,g.vU)("Unrecognized force: "+t.force),n=eC[t.force](),t)(0,g.mf)(n[e])&&fC(n[e],t[e],t);return n}function fC(t,n,e){t((0,g.mf)(n)?function(t){return n(t,e)}:n)}function hC(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}uC.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:oC}]},(0,g.XW)(uC,ma,{transform:function(t,n){var e,r,i=this.value,a=n.changed(n.ADD_REM),o=t.modified(iC),u=t.iterations||300;if(i?(a&&(n.modifies("index"),i.nodes(n.source)),(o||n.changed(n.MOD))&&cC(i,t,0,n)):(this.value=i=function(t,n){var e=QD(t),r=e.stop,i=e.restart,a=!1;return e.stopped=function(){return a},e.restart=function(){return a=!1,i()},e.stop=function(){return a=!0,r()},cC(e,n,!0).on("end",(function(){return a=!0}))}(n.source,t),i.on("tick",(e=n.dataflow,r=this,function(){return e.touch(r).run()})),t.static||(a=!0,i.tick()),n.modifies("index")),o||a||t.modified(aC)||n.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/u)),t.static)for(i.stop();--u>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return n.StopPropagation;return this.finish(t,n)},finish:function(t,n){for(var e,r=n.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((e=i[a]).name===rC&&"link"===e.op._argval.force)for(var u,c=e.op._argops,s=0,l=c.length;s<l;++s)if("links"===c[s].name&&(u=c[s].op.source)){r.pulse(u,r.changeset().reflow());break}return n.reflow(t.modified()).modifies(oC)}});var dC=(0,m.Z)().mark(pC);function pC(){var t,n,e,r,i,a;return(0,m.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=[t=this];case 1:n=e.reverse(),e=[];case 2:if(!(t=n.pop())){o.next=8;break}return o.next=5,t;case 5:if(r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);o.next=2;break;case 8:if(e.length){o.next=1;break}case 9:case"end":return o.stop()}}),dC,this)}function vC(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=mC)):void 0===n&&(n=gC);for(var e,r,i,a,o,u=new xC(t),c=[u];e=c.pop();)if((i=n(e.data))&&(o=(i=Array.from(i)).length))for(e.children=i,a=o-1;a>=0;--a)c.push(r=i[a]=new xC(i[a])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(bC)}function gC(t){return t.children}function mC(t){return Array.isArray(t)?t[1]:null}function yC(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function bC(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function xC(t){this.data=t,this.depth=this.height=0,this.parent=null}function _C(t){return null==t?null:wC(t)}function wC(t){if("function"!==typeof t)throw new Error;return t}function kC(){return 0}function MC(t){return function(){return t}}xC.prototype=vC.prototype=(0,nt.Z)({constructor:xC,count:function(){return this.eachAfter(hC)},each:function(t,n){var e,r=-1,i=(0,_a.Z)(this);try{for(i.s();!(e=i.n()).done;){var a=e.value;t.call(n,a,++r,this)}}catch(o){i.e(o)}finally{i.f()}return this},eachAfter:function(t,n){for(var e,r,i,a=this,o=[a],u=[],c=-1;a=o.pop();)if(u.push(a),e=a.children)for(r=0,i=e.length;r<i;++r)o.push(e[r]);for(;a=u.pop();)t.call(n,a,++c,this);return this},eachBefore:function(t,n){for(var e,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(n,i,++o,this),e=i.children)for(r=e.length-1;r>=0;--r)a.push(e[r]);return this},find:function(t,n){var e,r=-1,i=(0,_a.Z)(this);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(t.call(n,a,++r,this))return a}}catch(o){i.e(o)}finally{i.f()}},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();for(;t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return vC(this).eachBefore(yC)}},Symbol.iterator,pC);var OC=1664525,EC=1013904223,SC=4294967296;function DC(t,n){for(var e,r,i=0,a=(t=function(t,n){for(var e,r,i=t.length;i;)r=n()*i--|0,e=t[i],t[i]=t[r],t[r]=e;return t}(Array.from(t),n)).length,o=[];i<a;)e=t[i],r&&TC(r,e)?++i:(r=jC(o=CC(o,e)),i=0);return r}function CC(t,n){var e,r;if(FC(n,t))return[n];for(e=0;e<t.length;++e)if(AC(n,t[e])&&FC(ZC(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(AC(ZC(t[e],t[r]),n)&&AC(ZC(t[e],n),t[r])&&AC(ZC(t[r],n),t[e])&&FC(NC(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function AC(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function TC(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function FC(t,n){for(var e=0;e<n.length;++e)if(!TC(t,n[e]))return!1;return!0}function jC(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return ZC(t[0],t[1]);case 3:return NC(t[0],t[1],t[2])}}function ZC(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,u=n.r,c=a-e,s=o-r,l=u-i,f=Math.sqrt(c*c+s*s);return{x:(e+a+c/f*l)/2,y:(r+o+s/f*l)/2,r:(f+i+u)/2}}function NC(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,u=n.y,c=n.r,s=e.x,l=e.y,f=e.r,h=r-o,d=r-s,p=i-u,v=i-l,g=c-a,m=f-a,y=r*r+i*i-a*a,b=y-o*o-u*u+c*c,x=y-s*s-l*l+f*f,_=d*p-h*v,w=(p*x-v*b)/(2*_)-r,k=(v*g-p*m)/_,M=(d*b-h*x)/(2*_)-i,O=(h*m-d*g)/_,E=k*k+O*O-1,S=2*(a+w*k+M*O),D=w*w+M*M-a*a,C=-(Math.abs(E)>1e-6?(S+Math.sqrt(S*S-4*E*D))/(2*E):D/S);return{x:r+w+k*C,y:i+M+O*C,r:C}}function zC(t,n,e){var r,i,a,o,u=t.x-n.x,c=t.y-n.y,s=u*u+c*c;s?(i=n.r+e.r,i*=i,o=t.r+e.r,i>(o*=o)?(r=(s+o-i)/(2*s),a=Math.sqrt(Math.max(0,o/s-r*r)),e.x=t.x-r*u-a*c,e.y=t.y-r*c+a*u):(r=(s+i-o)/(2*s),a=Math.sqrt(Math.max(0,i/s-r*r)),e.x=n.x+r*u-a*c,e.y=n.y+r*c+a*u)):(e.x=n.x+e.r,e.y=n.y)}function UC(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function PC(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function RC(t){this._=t,this.next=null,this.previous=null}function LC(t,n){if(!(a=(t=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,r,i,a,o,u,c,s,l,f,h;if((e=t[0]).x=0,e.y=0,!(a>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(a>2))return e.r+r.r;zC(r,e,i=t[2]),e=new RC(e),r=new RC(r),i=new RC(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(c=3;c<a;++c){zC(e._,r._,i=t[c]),i=new RC(i),s=r.next,l=e.previous,f=r._.r,h=e._.r;do{if(f<=h){if(UC(s._,i._)){r=s,e.next=r,r.previous=e,--c;continue t}f+=s._.r,s=s.next}else{if(UC(l._,i._)){(e=l).next=r,r.previous=e,--c;continue t}h+=l._.r,l=l.previous}}while(s!==l.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=PC(e);(i=i.next)!==r;)(u=PC(i))<o&&(e=i,o=u);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=DC(e,n),c=0;c<a;++c)(e=t[c]).x-=i.x,e.y-=i.y;return i.r}function IC(t){return Math.sqrt(t.value)}function BC(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function qC(t,n,e){return function(r){if(i=r.children){var i,a,o,u=i.length,c=t(r)*n||0;if(c)for(a=0;a<u;++a)i[a].r+=c;if(o=LC(i,e),c)for(a=0;a<u;++a)i[a].r-=c;r.r=o+c}}}function HC(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function WC(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function YC(t,n,e,r,i){for(var a,o=t.children,u=-1,c=o.length,s=t.value&&(r-n)/t.value;++u<c;)(a=o[u]).y0=e,a.y1=i,a.x0=n,a.x1=n+=a.value*s}var XC={depth:-1},GC={},JC={};function $C(t){return t.id}function VC(t){return t.parentId}function KC(){var t,n=$C,e=VC;function r(r){var i,a,o,u,c,s,l,f,h=Array.from(r),d=n,p=e,v=new Map;if(null!=t){var g,m=h.map((function(n,e){return function(t){t="".concat(t);var n=t.length;tA(t,n-1)&&!tA(t,n-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:"/".concat(t)}(t(n,e,r))})),y=m.map(QC),b=new Set(m).add(""),x=(0,_a.Z)(y);try{for(x.s();!(g=x.n()).done;){var _=g.value;b.has(_)||(b.add(_),m.push(_),y.push(QC(_)),h.push(JC))}}catch(k){x.e(k)}finally{x.f()}d=function(t,n){return m[n]},p=function(t,n){return y[n]}}for(o=0,i=h.length;o<i;++o)a=h[o],s=h[o]=new xC(a),null!=(l=d(a,o,r))&&(l+="")&&(f=s.id=l,v.set(f,v.has(f)?GC:s)),null!=(l=p(a,o,r))&&(l+="")&&(s.parent=l);for(o=0;o<i;++o)if(l=(s=h[o]).parent){if(!(c=v.get(l)))throw new Error("missing: "+l);if(c===GC)throw new Error("ambiguous: "+l);c.children?c.children.push(s):c.children=[s],s.parent=c}else{if(u)throw new Error("multiple roots");u=s}if(!u)throw new Error("no root");if(null!=t){for(;u.data===JC&&1===u.children.length;)u=u.children[0],--i;for(var w=h.length-1;w>=0&&(s=h[w]).data===JC;--w)s.data=null}if(u.parent=XC,u.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(bC),u.parent=null,i>0)throw new Error("cycle");return u}return r.id=function(t){return arguments.length?(n=_C(t),r):n},r.parentId=function(t){return arguments.length?(e=_C(t),r):e},r.path=function(n){return arguments.length?(t=_C(n),r):t},r}function QC(t){var n=t.length;if(n<2)return"";for(;--n>1&&!tA(t,n););return t.slice(0,n)}function tA(t,n){if("/"===t[n]){for(var e=0;n>0&&"\\"===t[--n];)++e;if(0===(1&e))return!0}return!1}function nA(t,n){return t.parent===n.parent?1:2}function eA(t){var n=t.children;return n?n[0]:t.t}function rA(t){var n=t.children;return n?n[n.length-1]:t.t}function iA(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function aA(t,n,e){return t.a.parent===n.parent?t.a:e}function oA(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function uA(t,n){return t.parent===n.parent?1:2}function cA(t,n){return t+n.x}function sA(t,n){return Math.max(t,n.y)}function lA(t,n,e,r,i){for(var a,o=t.children,u=-1,c=o.length,s=t.value&&(i-e)/t.value;++u<c;)(a=o[u]).x0=n,a.x1=r,a.y0=e,a.y1=e+=a.value*s}oA.prototype=Object.create(xC.prototype);var fA=(1+Math.sqrt(5))/2;function hA(t,n,e,r,i,a){for(var o,u,c,s,l,f,h,d,p,v,g,m=[],y=n.children,b=0,x=0,_=y.length,w=n.value;b<_;){c=i-e,s=a-r;do{l=y[x++].value}while(!l&&x<_);for(f=h=l,g=l*l*(v=Math.max(s/c,c/s)/(w*t)),p=Math.max(h/g,g/f);x<_;++x){if(l+=u=y[x].value,u<f&&(f=u),u>h&&(h=u),g=l*l*v,(d=Math.max(h/g,g/f))>p){l-=u;break}p=d}m.push(o={value:l,dice:c<s,children:y.slice(b,x)}),o.dice?YC(o,e,r,i,w?r+=s*l/w:a):lA(o,e,r,w?e+=c*l/w:i,a),w-=l,b=x}return m}var dA=function t(n){function e(t,e,r,i,a){hA(n,t,e,r,i,a)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(fA),pA=function t(n){function e(t,e,r,i,a){if((o=t._squarify)&&o.ratio===n)for(var o,u,c,s,l,f=-1,h=o.length,d=t.value;++f<h;){for(c=(u=o[f]).children,s=u.value=0,l=c.length;s<l;++s)u.value+=c[s].value;u.dice?YC(u,e,r,i,d?r+=(a-r)*u.value/d:a):lA(u,e,r,d?e+=(i-e)*u.value/d:i,a),d-=u.value}else t._squarify=o=hA(n,t,e,r,i,a),o.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(fA);function vA(t,n,e){var r={};return t.each((function(t){var i=t.data;e(i)&&(r[n(i)]=t)})),t.lookup=r,t}function gA(t){ma.call(this,null,t)}gA.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var mA=function(t){return t.values};function yA(){var t=[],n={entries:function(t){return r(e(t,0),0)},key:function(e){return t.push(e),n}};function e(n,r){if(r>=t.length)return n;for(var i,a,o,u=n.length,c=t[r++],s={},l={},f=-1;++f<u;)(o=s[i=c(a=n[f])+""])?o.push(a):s[i]=[a];for(i in s)l[i]=e(s[i],r);return l}function r(n,e){if(++e>t.length)return n;var i=[];for(var a in n)i.push({key:a,values:r(n[a],e)});return i}return n}function bA(t){ma.call(this,null,t)}(0,g.XW)(gA,ma,{transform:function(t,n){n.source||(0,g.vU)("Nest transform requires an upstream data source.");var e=t.generate,r=t.modified(),i=n.clone(),a=this.value;return(!a||r||n.changed())&&(a&&a.each((function(t){t.children&&Fi(t.data)&&i.rem.push(t.data)})),this.value=a=vC({values:(0,g.IX)(t.keys).reduce((function(t,n){return t.key(n),t}),yA()).entries(i.source)},mA),e&&a.each((function(t){t.children&&(t=Ni(t.data),i.add.push(t),i.source.push(t))})),vA(a,ji,ji)),i.source.root=a,i}});var xA=function(t,n){return t.parent===n.parent?1:2};(0,g.XW)(bA,ma,{transform:function(t,n){n.source&&n.source.root||(0,g.vU)(this.constructor.name+" transform requires a backing tree data source.");var e=this.layout(t.method),r=this.fields,i=n.source.root,a=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(Ri(t.sort,(function(t){return t.data}))),function(t,n,e){for(var r,i=0,a=n.length;i<a;++i)(r=n[i])in e&&t[r](e[r])}(e,this.params,t),e.separation&&e.separation(!1!==t.separation?xA:g.kX);try{this.value=e(i)}catch(o){(0,g.vU)(o)}return i.each((function(t){return function(t,n,e){for(var r=t.data,i=n.length-1,a=0;a<i;++a)r[e[a]]=t[n[a]];r[e[i]]=t.children?t.children.length:0}(t,r,a)})),n.reflow(t.modified()).modifies(a).modifies("leaf")}});var _A=["x","y","r","depth","children"];function wA(t){bA.call(this,t)}wA.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_A.length,default:_A}]},(0,g.XW)(wA,bA,{layout:function(){var t=null,n=1,e=1,r=kC;function i(i){var a=function(){var t=1;return function(){return(t=(OC*t+EC)%SC)/SC}}();return i.x=n/2,i.y=e/2,t?i.eachBefore(BC(t)).eachAfter(qC(r,.5,a)).eachBefore(HC(1)):i.eachBefore(BC(IC)).eachAfter(qC(kC,1,a)).eachAfter(qC(r,i.r/Math.min(n,e),a)).eachBefore(HC(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=_C(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:MC(+t),i):r},i},params:["radius","size","padding"],fields:_A});var kA=["x0","y0","x1","y1","depth","children"];function MA(t){bA.call(this,t)}function OA(t){ma.call(this,null,t)}MA.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kA.length,default:kA}]},(0,g.XW)(MA,bA,{layout:function(){var t=1,n=1,e=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/a,i.eachBefore(function(t,n){return function(r){r.children&&YC(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,a=r.y0,o=r.x1-e,u=r.y1-e;o<i&&(i=o=(i+o)/2),u<a&&(a=u=(a+u)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=u}}(n,a)),r&&i.eachBefore(WC),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},params:["size","round","padding"],fields:kA}),OA.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},(0,g.XW)(OA,ma,{transform:function(t,n){n.source||(0,g.vU)("Stratify transform requires an upstream data source.");var e=this.value,r=t.modified(),i=n.fork(n.ALL).materialize(n.SOURCE),a=!e||r||n.changed(n.ADD_REM)||n.modified(t.key.fields)||n.modified(t.parentKey.fields);return i.source=i.source.slice(),a&&(e=i.source.length?vA(KC().id(t.key).parentId(t.parentKey)(i.source),t.key,g.yb):vA(KC()([{}]),t.key,t.key)),i.source.root=this.value=e,i}});var EA={tidy:function(){var t=nA,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,a,o=new oA(t,0),u=[o];n=u.pop();)if(r=n._.children)for(n.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(e=n.children[i]=new oA(r[i],i)),e.parent=n;return(o.parent=new oA(null,0)).children=[o],o}(i);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)i.eachBefore(u);else{var s=i,l=i,f=i;i.eachBefore((function(t){t.x<s.x&&(s=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var h=s===l?1:t(s,l)/2,d=h-s.x,p=n/(l.x+h+d),v=e/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*v}))}return i}function a(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,a=i.length;--a>=0;)(n=i[a]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var a=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-a):n.z=a}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,a=n,o=n,u=e,c=a.parent.children[0],s=a.m,l=o.m,f=u.m,h=c.m;u=rA(u),a=eA(a),u&&a;)c=eA(c),(o=rA(o)).a=n,(i=u.z+f-a.z-s+t(u._,a._))>0&&(iA(aA(u,n,r),n,i),s+=i,l+=i),f+=u.m,s+=a.m,h+=c.m,l+=o.m;u&&!rA(o)&&(o.t=u,o.m+=f-l),a&&!eA(c)&&(c.t=a,c.m+=s-h,r=n)}return r}(n,i,n.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},cluster:function(){var t=uA,n=1,e=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(cA,0)/t.length}(e),n.y=function(t){return 1+t.reduce(sA,0)}(e)):(n.x=a?o+=t(n,a):0,n.y=0,a=n)}));var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),s=u.x-t(u,c)/2,l=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-s)/(l-s)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i}},SA=["x","y","depth","children"];function DA(t){bA.call(this,t)}function CA(t){ma.call(this,[],t)}DA.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:SA.length,default:SA}]},(0,g.XW)(DA,bA,{layout:function(t){var n=t||"tidy";if((0,g.nr)(EA,n))return EA[n]();(0,g.vU)("Unrecognized Tree layout method: "+n)},params:["size","nodeSize"],fields:SA}),CA.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},(0,g.XW)(CA,ma,{transform:function(t,n){var e=this.value,r=n.source&&n.source.root,i=n.fork(n.NO_SOURCE),a={};return r||(0,g.vU)("TreeLinks transform requires a tree data source."),n.changed(n.ADD_REM)?(i.rem=e,n.visit(n.SOURCE,(function(t){return a[ji(t)]=1})),r.each((function(t){var n=t.data,e=t.parent&&t.parent.data;e&&a[ji(n)]&&a[ji(e)]&&i.add.push(Ni({source:e,target:n}))})),this.value=i.add):n.changed(n.MOD)&&(n.visit(n.MOD,(function(t){return a[ji(t)]=1})),e.forEach((function(t){(a[ji(t.source)]||a[ji(t.target)])&&i.mod.push(t)}))),i}});var AA={binary:function(t,n,e,r,i){var a,o,u=t.children,c=u.length,s=new Array(c+1);for(s[0]=o=a=0;a<c;++a)s[a+1]=o+=u[a].value;!function t(n,e,r,i,a,o,c){if(n>=e-1){var l=u[n];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=c)}var f=s[n],h=r/2+f,d=n+1,p=e-1;for(;d<p;){var v=d+p>>>1;s[v]<h?d=v+1:p=v}h-s[d-1]<s[d]-h&&n+1<d&&--d;var g=s[d]-f,m=r-g;if(o-i>c-a){var y=r?(i*m+o*g)/r:o;t(n,d,g,i,a,y,c),t(d,e,m,y,a,o,c)}else{var b=r?(a*m+c*g)/r:c;t(n,d,g,i,a,o,b),t(d,e,m,i,b,o,c)}}(0,c,t.value,n,e,r,i)},dice:YC,slice:lA,slicedice:function(t,n,e,r,i){(1&t.depth?lA:YC)(t,n,e,r,i)},squarify:dA,resquarify:pA},TA=["x0","y0","x1","y1","depth","children"];function FA(t){bA.call(this,t)}FA.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:TA.length,default:TA}]},(0,g.XW)(FA,bA,{layout:function(){var t=function(){var t=dA,n=!1,e=1,r=1,i=[0],a=kC,o=kC,u=kC,c=kC,s=kC;function l(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(f),i=[0],n&&t.eachBefore(WC),t}function f(n){var e=i[n.depth],r=n.x0+e,l=n.y0+e,f=n.x1-e,h=n.y1-e;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),n.x0=r,n.y0=l,n.x1=f,n.y1=h,n.children&&(e=i[n.depth+1]=a(n)/2,r+=s(n)-e,l+=o(n)-e,(f-=u(n)-e)<r&&(r=f=(r+f)/2),(h-=c(n)-e)<l&&(l=h=(l+h)/2),t(n,r,l,f,h))}return l.round=function(t){return arguments.length?(n=!!t,l):n},l.size=function(t){return arguments.length?(e=+t[0],r=+t[1],l):[e,r]},l.tile=function(n){return arguments.length?(t=wC(n),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(a="function"===typeof t?t:MC(+t),l):a},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:MC(+t),l):o},l.paddingRight=function(t){return arguments.length?(u="function"===typeof t?t:MC(+t),l):u},l.paddingBottom=function(t){return arguments.length?(c="function"===typeof t?t:MC(+t),l):c},l.paddingLeft=function(t){return arguments.length?(s="function"===typeof t?t:MC(+t),l):s},l}();return t.ratio=function(n){var e=t.tile();e.ratio&&t.tile(e.ratio(n))},t.method=function(n){(0,g.nr)(AA,n)?t.tile(AA[n]):(0,g.vU)("Unrecognized Treemap layout method: "+n)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:TA});var jA=e(95764),ZA=4278190080;function NA(t,n,e){return new Uint32Array(t.getImageData(0,0,n,e).data.buffer)}function zA(t,n,e){if(n.length){var r=n[0].mark.marktype;"group"===r?n.forEach((function(n){n.items.forEach((function(n){return zA(t,n.items,e)}))})):ky[r].draw(t,{items:e?n.map(UA):n})}}function UA(t){var n=Ui(t,{});return n.stroke&&0!==n.strokeOpacity||n.fill&&0!==n.fillOpacity?(0,jA.Z)((0,jA.Z)({},n),{},{strokeOpacity:1,stroke:"#000",fillOpacity:0}):n}var PA=5,RA=31,LA=32,IA=new Uint32Array(LA+1),BA=new Uint32Array(LA+1);BA[0]=0,IA[0]=~BA[0];for(var qA=1;qA<=LA;++qA)BA[qA]=BA[qA-1]<<1|1,IA[qA]=~BA[qA];function HA(t,n,e){var r=Math.max(1,Math.sqrt(t*n/1e6)),i=~~((t+2*e+r)/r),a=~~((n+2*e+r)/r),o=function(t){return~~((t+e)/r)};return o.invert=function(t){return t*r-e},o.bitmap=function(){return function(t,n){var e=new Uint32Array(~~((t*n+LA)/LA));function r(t,n){e[t]|=n}function i(t,n){e[t]&=n}return{array:e,get:function(n,r){var i=r*t+n;return e[i>>>PA]&1<<(i&RA)},set:function(n,e){var i=e*t+n;r(i>>>PA,1<<(i&RA))},clear:function(n,e){var r=e*t+n;i(r>>>PA,~(1<<(r&RA)))},getRange:function(n,r,i,a){for(var o,u,c,s,l=a;l>=r;--l)if((c=(o=l*t+n)>>>PA)===(s=(u=l*t+i)>>>PA)){if(e[c]&IA[o&RA]&BA[1+(u&RA)])return!0}else{if(e[c]&IA[o&RA])return!0;if(e[s]&BA[1+(u&RA)])return!0;for(var f=c+1;f<s;++f)if(e[f])return!0}return!1},setRange:function(n,e,i,a){for(var o,u,c,s,l;e<=a;++e)if((c=(o=e*t+n)>>>PA)===(s=(u=e*t+i)>>>PA))r(c,IA[o&RA]&BA[1+(u&RA)]);else for(r(c,IA[o&RA]),r(s,BA[1+(u&RA)]),l=c+1;l<s;++l)r(l,4294967295)},clearRange:function(n,e,r,a){for(var o,u,c,s,l;e<=a;++e)if((c=(o=e*t+n)>>>PA)===(s=(u=e*t+r)>>>PA))i(c,BA[o&RA]|IA[1+(u&RA)]);else for(i(c,BA[o&RA]),i(s,IA[1+(u&RA)]),l=c+1;l<s;++l)i(l,0)},outOfBounds:function(e,r,i,a){return e<0||r<0||a>=n||i>=t}}}(i,a)},o.ratio=r,o.padding=e,o.width=t,o.height=n,o}function WA(t,n,e,r,i,a){var o=e/2;return t-o<0||t+o>i||n-(o=r/2)<0||n+o>a}function YA(t,n,e,r,i,a,o,u){var c=i*a/(2*r),s=t(n-c),l=t(n+c),f=t(e-(a/=2)),h=t(e+a);return o.outOfBounds(s,f,l,h)||o.getRange(s,f,l,h)||u&&u.getRange(s,f,l,h)}var XA=[-1,-1,1,1],GA=[-1,1,-1,1];var JA=["right","center","left"],$A=["bottom","middle","top"];function VA(t,n,e,r,i,a,o,u,c,s,l,f){return!(i.outOfBounds(t,e,n,r)||(f&&a||i).getRange(t,e,n,r))}var KA={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},QA={naive:function(t,n,e,r){var i=t.width,a=t.height;return function(t){for(var n,e,o,u,c,s,l,f=t.datum.datum.items[r].items,h=f.length,d=t.datum.fontSize,p=ry.width(t.datum,t.datum.text),v=0,g=0;g<h;++g)n=f[g].x,o=f[g].y,c=(n+(e=void 0===f[g].x2?n:f[g].x2))/2,s=(o+(u=void 0===f[g].y2?o:f[g].y2))/2,(l=Math.abs(e-n+u-o))>=v&&(v=l,t.x=c,t.y=s);return c=p/2,s=d/2,n=t.x-c,e=t.x+c,o=t.y-s,u=t.y+s,t.align="center",n<0&&e<=i?t.align="left":0<=n&&i<e&&(t.align="right"),t.baseline="middle",o<0&&u<=a?t.baseline="top":0<=o&&a<u&&(t.baseline="bottom"),!0}},"reduced-search":function(t,n,e,r){var i=t.width,a=t.height,o=n[0],u=n[1];function c(n,e,r,c,s){var l,f=t.invert(n),h=t.invert(e),d=r,p=a;if(!WA(f,h,c,s,i,a)&&!YA(t,f,h,s,c,d,o,u)&&!YA(t,f,h,s,c,s,o,null)){for(;p-d>=1;)YA(t,f,h,s,c,l=(d+p)/2,o,u)?p=l:d=l;if(d>r)return[f,h,d,!0]}}return function(n){for(var u,s,l,f,h,d,p,v,g,m,y,b,x,_,w,k,M,O=n.datum.datum.items[r].items,E=O.length,S=n.datum.fontSize,D=ry.width(n.datum,n.datum.text),C=e?S:0,A=!1,T=!1,F=0,j=0;j<E;++j){for(u=O[j].x,l=O[j].y,u>(s=void 0===O[j].x2?u:O[j].x2)&&(M=u,u=s,s=M),l>(f=void 0===O[j].y2?l:O[j].y2)&&(M=l,l=f,f=M),m=~~(((g=t(u))+(y=t(s)))/2),x=~~(((b=t(l))+(_=t(f)))/2),p=m;p>=g;--p)for(v=x;v>=b;--v)if(k=c(p,v,C,D,S)){var Z=k,N=(0,Go.Z)(Z,4);n.x=N[0],n.y=N[1],C=N[2],A=N[3]}for(p=m;p<=y;++p)for(v=x;v<=_;++v)if(k=c(p,v,C,D,S)){var z=k,U=(0,Go.Z)(z,4);n.x=U[0],n.y=U[1],C=U[2],A=U[3]}A||e||(h=(u+s)/2,d=(l+f)/2,(w=Math.abs(s-u+f-l))>=F&&!WA(h,d,D,S,i,a)&&!YA(t,h,d,S,D,S,o,null)&&(F=w,n.x=h,n.y=d,T=!0))}return!(!A&&!T)&&(h=D/2,d=S/2,o.setRange(t(n.x-h),t(n.y-d),t(n.x+h),t(n.y+d)),n.align="center",n.baseline="middle",!0)}},floodfill:function(t,n,e,r){var i=t.width,a=t.height,o=n[0],u=n[1],c=t.bitmap();return function(n){for(var s,l,f,h,d,p,v,g,m,y,b,x,_=n.datum.datum.items[r].items,w=_.length,k=n.datum.fontSize,M=ry.width(n.datum,n.datum.text),O=[],E=e?k:0,S=!1,D=!1,C=0,A=0;A<w;++A){for(s=_[A].x,f=_[A].y,l=void 0===_[A].x2?s:_[A].x2,h=void 0===_[A].y2?f:_[A].y2,O.push([t((s+l)/2),t((f+h)/2)]);O.length;){var T=O.pop(),F=(0,Go.Z)(T,2);if(v=F[0],g=F[1],!(o.get(v,g)||u.get(v,g)||c.get(v,g))){c.set(v,g);for(var j=0;j<4;++j)d=v+XA[j],p=g+GA[j],c.outOfBounds(d,p,d,p)||O.push([d,p]);if(d=t.invert(v),p=t.invert(g),m=E,y=a,!WA(d,p,M,k,i,a)&&!YA(t,d,p,k,M,m,o,u)&&!YA(t,d,p,k,M,k,o,null)){for(;y-m>=1;)YA(t,d,p,k,M,b=(m+y)/2,o,u)?y=b:m=b;m>E&&(n.x=d,n.y=p,E=m,S=!0)}}}S||e||(d=(s+l)/2,p=(f+h)/2,(x=Math.abs(l-s+h-f))>=C&&!WA(d,p,M,k,i,a)&&!YA(t,d,p,k,M,k,o,null)&&(C=x,n.x=d,n.y=p,D=!0))}return!(!S&&!D)&&(d=M/2,p=k/2,o.setRange(t(n.x-d),t(n.y-p),t(n.x+d),t(n.y+p)),n.align="center",n.baseline="middle",!0)}}};function tT(t,n,e,r,i,a,o,u,c,s,l){if(!t.length)return t;var f,h=Math.max(r.length,i.length),d=function(t,n){for(var e=new Float64Array(n),r=t.length,i=0;i<r;++i)e[i]=t[i]||0;for(var a=r;a<n;++a)e[a]=e[r-1];return e}(r,h),p=function(t,n){for(var e=new Int8Array(n),r=t.length,i=0;i<r;++i)e[i]|=KA[t[i]];for(var a=r;a<n;++a)e[a]=e[r-1];return e}(i,h),v=(f=t[0].datum)&&f.mark&&f.mark.marktype,g="group"===v&&t[0].datum.items[c].marktype,m="area"===g,y=function(t,n,e,r){var i=function(t){return[t.x,t.x,t.x,t.y,t.y,t.y]};return t?"line"===t||"area"===t?function(t){return i(t.datum)}:"line"===n?function(t){var n=t.datum.items[r].items;return i(n.length?n["start"===e?0:n.length-1]:{x:NaN,y:NaN})}:function(t){var n=t.datum.bounds;return[n.x1,(n.x1+n.x2)/2,n.x2,n.y1,(n.y1+n.y2)/2,n.y2]}:i}(v,g,u,c),x=null===s||s===1/0,_=m&&"naive"===l,w=-1,k=-1,M=t.map((function(t){var n=x?ry.width(t,t.text):void 0;return w=Math.max(w,n),k=Math.max(k,t.fontSize),{datum:t,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(t),textWidth:n}}));s=null===s||s===1/0?Math.max(w,k)+Math.max.apply(Math,(0,b.Z)(r)):s;var O,E=HA(n[0],n[1],s);if(!_){e&&M.sort((function(t,n){return e(t.datum,n.datum)}));for(var S=!1,D=0;D<p.length&&!S;++D)S=5===p[D]||d[D]<0;var C=(v&&o||m)&&t.map((function(t){return t.datum}));O=a.length||C?function(t,n,e,r,i){var a=t.width,o=t.height,u=r||i,c=Rl(a,o).getContext("2d"),s=Rl(a,o).getContext("2d"),l=u&&Rl(a,o).getContext("2d");e.forEach((function(t){return zA(c,t,!1)})),zA(s,n,!1),u&&zA(l,n,!0);var f,h,d,p,v,g,m,y,b=NA(c,a,o),x=NA(s,a,o),_=u&&NA(l,a,o),w=t.bitmap(),k=u&&t.bitmap();for(h=0;h<o;++h)for(f=0;f<a;++f)g=b[v=h*a+f]&ZA,y=x[v]&ZA,m=u&&_[v]&ZA,(g||m||y)&&(d=t(f),p=t(h),i||!g&&!y||w.set(d,p),u&&(g||m)&&k.set(d,p));return[w,k]}(E,C||[],a,S,m):function(t,n){var e=t.bitmap();return(n||[]).forEach((function(n){return e.set(t(n.boundary[0]),t(n.boundary[3]))})),[e,void 0]}(E,o&&M)}var A=m?QA[l](E,O,o,c):function(t,n,e,r){var i=t.width,a=t.height,o=n[0],u=n[1],c=r.length;return function(n){var s,l=n.boundary,f=n.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>a)return!1;for(var h,d,p,v,g,m,y,b,x,_,w,k,M,O,E,S=null!==(s=n.textWidth)&&void 0!==s?s:0,D=0;D<c;++D){if(h=(3&e[D])-1,d=(e[D]>>>2&3)-1,p=0===h&&0===d||r[D]<0,v=h&&d?Math.SQRT1_2:1,g=r[D]<0?-1:1,m=l[1+h]+r[D]*h*v,b=(w=l[4+d]+g*f*d/2+r[D]*d*v)-f/2,x=w+f/2,k=t(m),O=t(b),E=t(x),!S){if(!VA(k,k,O,E,o,u,0,0,0,0,0,p))continue;S=ry.width(n.datum,n.datum.text)}if(y=(_=m+g*S*h/2)+S/2,VA(k=t(m=_-S/2),M=t(y),O,E,o,u,0,0,0,0,0,p))return n.x=h?h*g<0?y:m:_,n.y=d?d*g<0?x:b:w,n.align=JA[h*g+1],n.baseline=$A[d*g+1],o.setRange(k,O,M,E),!0}return!1}}(E,O,p,d);return M.forEach((function(t){return t.opacity=+A(t)})),M}var nT=["x","y","opacity","align","baseline"],eT=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function rT(t){ma.call(this,null,t)}function iT(t,n){var e,r,i,a,o,u,c=[],s=function(t){return t(a)};if(null==n)c.push(t);else for(e={},r=0,i=t.length;r<i;++r)a=t[r],(u=e[o=n.map(s)])||(e[o]=u=[],u.dims=o,c.push(u)),u.push(a);return c}function aT(t){ma.call(this,null,t)}rT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:eT},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:nT.length,default:nT}]},(0,g.XW)(rT,ma,{transform:function(t,n){var e=t.modified();if(e||n.changed(n.ADD_REM)||function(e){var r=t[e];return(0,g.mf)(r)&&n.modified(r.fields)}("sort")){t.size&&2===t.size.length||(0,g.vU)("Size parameter should be specified as a [width, height] array.");var r=t.as||nT;return tT(n.materialize(n.SOURCE).source||[],t.size,t.sort,(0,g.IX)(null==t.offset?1:t.offset),(0,g.IX)(t.anchor||eT),t.avoidMarks||[],!1!==t.avoidBaseMark,t.lineAnchor||"end",t.markIndex||0,void 0===t.padding?0:t.padding,t.method||"naive").forEach((function(t){var n=t.datum;n[r[0]]=t.x,n[r[1]]=t.y,n[r[2]]=t.opacity,n[r[3]]=t.align,n[r[4]]=t.baseline})),n.reflow(e).modifies(r)}}}),aT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},(0,g.XW)(aT,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||t.modified()){var r=iT(n.materialize(n.SOURCE).source,t.groupby),i=(t.groupby||[]).map(g.el),a=i.length,o=t.as||[(0,g.el)(t.x),(0,g.el)(t.y)],u=[];r.forEach((function(n){(function(t,n,e,r){for(var i=Pw(t,n,e,!0),a=(0,Go.Z)(i,4),o=a[0],u=a[1],c=a[2],s=a[3],l=o.length,f=Math.max(2,~~(r*l)),h=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=Hw;){for(var g=[0,f-1],m=0;m<l;++m){for(var y=o[m],b=g[0],x=g[1],_=y-o[b]>o[x]-y?b:x,w=0,k=0,M=0,O=0,E=0,S=1/Math.abs(o[_]-y||1),D=b;D<=x;++D){var C=o[D],A=u[D],T=Yw(Math.abs(y-C)*S)*p[D],F=C*T;w+=T,k+=F,M+=A*T,O+=A*F,E+=C*F}var j=Uw(k/w,M/w,O/w,E/w),Z=(0,Go.Z)(j,2),N=Z[0],z=Z[1];h[m]=N+z*y,d[m]=Math.abs(u[m]-h[m]),Xw(o,m+1,g)}if(v===Hw)break;var U=gw(d);if(Math.abs(U)<Ww)break;for(var P,R,L=0;L<l;++L)P=d[L]/(6*U),p[L]=P>=1?Ww:(R=1-P*P)*R}return function(t,n,e,r){for(var i,a=t.length,o=[],u=0,c=0,s=[];u<a;++u)i=t[u]+e,s[0]===i?s[1]+=(n[u]-s[1])/++c:(c=0,s[1]+=r,s=[i,n[u]],o.push(s));return s[1]+=r,o}(o,h,c,s)})(n,t.x,t.y,t.bandwidth||.3).forEach((function(t){for(var e={},r=0;r<a;++r)e[i[r]]=n.dims[r];e[o[0]]=t[0],e[o[1]]=t[1],u.push(Ni(e))}))})),this.value&&(e.rem=this.value),this.value=e.add=e.source=u}return e}});var oT={linear:Iw,log:function(t,n,e){var r=0,i=0,a=0,o=0,u=0;Rw(t,n,e,(function(t,n){++u,t=Math.log(t),r+=(t-r)/u,i+=(n-i)/u,a+=(t*n-a)/u,o+=(t*t-o)/u}));var c=Uw(r,i,a,o),s=function(t){return c[0]+c[1]*Math.log(t)};return{coef:c,predict:s,rSquared:Lw(t,n,e,i,s)}},exp:function(t,n,e){var r,i,a,o=Pw(t,n,e),u=(0,Go.Z)(o,4),c=u[0],s=(u[1],u[2]),l=u[3],f=0,h=0,d=0,p=0,v=0;Rw(t,n,e,(function(t,n){r=c[v++],i=Math.log(n),f+=(n*i-f)/v,h+=((a=r*n)-h)/v,d+=(a*i-d)/v,p+=(r*a-p)/v}));var g=Uw(h/l,f/l,d/l,p/l),m=(0,Go.Z)(g,2),y=m[0],b=m[1],x=function(t){return Math.exp(y+b*(t-s))};return{coef:[Math.exp(y-b*s),b],predict:x,rSquared:Lw(t,n,e,l,x)}},pow:function(t,n,e){var r=0,i=0,a=0,o=0,u=0,c=0;Rw(t,n,e,(function(t,n){var e=Math.log(t),s=Math.log(n);++c,r+=(e-r)/c,i+=(s-i)/c,a+=(e*s-a)/c,o+=(e*e-o)/c,u+=(n-u)/c}));var s=Uw(r,i,a,o),l=function(t){return s[0]*Math.pow(t,s[1])};return s[0]=Math.exp(s[0]),{coef:s,predict:l,rSquared:Lw(t,n,e,u,l)}},quad:Bw,poly:function(t,n,e,r){if(1===r)return Iw(t,n,e);if(2===r)return Bw(t,n,e);var i,a,o,u,c,s=Pw(t,n,e),l=(0,Go.Z)(s,4),f=l[0],h=l[1],d=l[2],p=l[3],v=f.length,g=[],m=[],y=r+1;for(i=0;i<y;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],i)*h[o];for(g.push(u),c=new Float64Array(y),a=0;a<y;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],i+a);c[a]=u}m.push(c)}m.push(g);var b=function(t){var n,e,r,i,a,o=t.length-1,u=[];for(n=0;n<o;++n){for(i=n,e=n+1;e<o;++e)Math.abs(t[n][e])>Math.abs(t[n][i])&&(i=e);for(r=n;r<o+1;++r)a=t[r][n],t[r][n]=t[r][i],t[r][i]=a;for(e=n+1;e<o;++e)for(r=o;r>=n;r--)t[r][e]-=t[r][n]*t[n][e]/t[n][n]}for(e=o-1;e>=0;--e){for(a=0,r=e+1;r<o;++r)a+=t[r][e]*u[r];u[e]=(t[o][e]-a)/t[e][e]}return u}(m),x=function(t){t-=d;var n=p+b[0]+b[1]*t+b[2]*t*t;for(i=3;i<y;++i)n+=b[i]*Math.pow(t,i);return n};return{coef:qw(y,b,-d,p),predict:x,rSquared:Lw(t,n,e,p,x)}}};function uT(t){ma.call(this,null,t)}uT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(oT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},(0,g.XW)(uT,ma,{transform:function(t,n){var e=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||t.modified()){var r=iT(n.materialize(n.SOURCE).source,t.groupby),i=(t.groupby||[]).map(g.el),a=t.method||"linear",o=t.order||3,u=function(t,n){return"poly"===t?n:"quad"===t?2:1}(a,o),c=t.as||[(0,g.el)(t.x),(0,g.el)(t.y)],s=oT[a],l=[],f=t.extent;(0,g.nr)(oT,a)||(0,g.vU)("Invalid regression method: "+a),null!=f&&"log"===a&&f[0]<=0&&(n.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((function(e){if(e.length<=u)n.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=s(e,t.x,t.y,o);if(t.params)l.push(Ni({keys:e.dims,coef:r.coef,rSquared:r.rSquared}));else{var h=f||(0,g.We)(e,t.x),d=function(t){for(var n={},r=0;r<i.length;++r)n[i[r]]=e.dims[r];n[c[0]]=t[0],n[c[1]]=t[1],l.push(Ni(n))};"linear"===a?h.forEach((function(t){return d([t,r.predict(t)])})):function(t,n,e,r){e=e||25,r=Math.max(e,r||200);var i=function(n){return[n,t(n)]},a=n[0],o=n[1],u=o-a,c=u/r,s=[i(a)],l=[];if(e===r){for(var f=1;f<r;++f)s.push(i(a+f/e*u));return s.push(i(o)),s}l.push(i(o));for(var h=e;--h>0;)l.push(i(a+h/e*u));for(var d=s[0],p=l[l.length-1],v=1/u,g=function(t,n){for(var e=t,r=t,i=n.length,a=0;a<i;++a){var o=n[a][1];o<e&&(e=o),o>r&&(r=o)}return 1/(r-e)}(d[1],l);p;){var m=i((d[0]+p[0])/2);m[0]-d[0]>=c&&Jw(d,m,p,v,g)>Gw?l.push(m):(d=p,s.push(p),l.pop()),p=l[l.length-1]}return s}(r.predict,h,25,200).forEach(d)}}})),this.value&&(e.rem=this.value),this.value=e.add=e.source=l}return e}});var cT=134217729,sT=33306690738754706e-32;function lT(t,n,e,r,i){var a,o,u,c,s=n[0],l=r[0],f=0,h=0;l>s===l>-s?(a=s,s=n[++f]):(a=l,l=r[++h]);var d=0;if(f<t&&h<e)for(l>s===l>-s?(u=a-((o=s+a)-s),s=n[++f]):(u=a-((o=l+a)-l),l=r[++h]),a=o,0!==u&&(i[d++]=u);f<t&&h<e;)l>s===l>-s?(u=a-((o=a+s)-(c=o-a))+(s-c),s=n[++f]):(u=a-((o=a+l)-(c=o-a))+(l-c),l=r[++h]),a=o,0!==u&&(i[d++]=u);for(;f<t;)u=a-((o=a+s)-(c=o-a))+(s-c),s=n[++f],a=o,0!==u&&(i[d++]=u);for(;h<e;)u=a-((o=a+l)-(c=o-a))+(l-c),l=r[++h],a=o,0!==u&&(i[d++]=u);return 0===a&&0!==d||(i[d++]=a),d}function fT(t){return new Float64Array(t)}var hT=33306690738754716e-32,dT=22204460492503146e-32,pT=11093356479670487e-47,vT=fT(4),gT=fT(8),mT=fT(12),yT=fT(16),bT=fT(4);function xT(t,n,e,r,i,a){var o=(n-a)*(e-i),u=(t-i)*(r-a),c=o-u;if(0===o||0===u||o>0!==u>0)return c;var s=Math.abs(o+u);return Math.abs(c)>=hT*s?c:-function(t,n,e,r,i,a,o){var u,c,s,l,f,h,d,p,v,g,m,y,b,x,_,w,k,M,O=t-i,E=e-i,S=n-a,D=r-a;f=(_=(p=O-(d=(h=cT*O)-(h-O)))*(g=D-(v=(h=cT*D)-(h-D)))-((x=O*D)-d*v-p*v-d*g))-(m=_-(k=(p=S-(d=(h=cT*S)-(h-S)))*(g=E-(v=(h=cT*E)-(h-E)))-((w=S*E)-d*v-p*v-d*g))),vT[0]=_-(m+f)+(f-k),f=(b=x-((y=x+m)-(f=y-x))+(m-f))-(m=b-w),vT[1]=b-(m+f)+(f-w),f=(M=y+m)-y,vT[2]=y-(M-f)+(m-f),vT[3]=M;var C=function(t,n){for(var e=n[0],r=1;r<t;r++)e+=n[r];return e}(4,vT),A=dT*o;if(C>=A||-C>=A)return C;if(u=t-(O+(f=t-O))+(f-i),s=e-(E+(f=e-E))+(f-i),c=n-(S+(f=n-S))+(f-a),l=r-(D+(f=r-D))+(f-a),0===u&&0===c&&0===s&&0===l)return C;if(A=pT*o+sT*Math.abs(C),(C+=O*l+D*u-(S*s+E*c))>=A||-C>=A)return C;f=(_=(p=u-(d=(h=cT*u)-(h-u)))*(g=D-(v=(h=cT*D)-(h-D)))-((x=u*D)-d*v-p*v-d*g))-(m=_-(k=(p=c-(d=(h=cT*c)-(h-c)))*(g=E-(v=(h=cT*E)-(h-E)))-((w=c*E)-d*v-p*v-d*g))),bT[0]=_-(m+f)+(f-k),f=(b=x-((y=x+m)-(f=y-x))+(m-f))-(m=b-w),bT[1]=b-(m+f)+(f-w),f=(M=y+m)-y,bT[2]=y-(M-f)+(m-f),bT[3]=M;var T=lT(4,vT,4,bT,gT);f=(_=(p=O-(d=(h=cT*O)-(h-O)))*(g=l-(v=(h=cT*l)-(h-l)))-((x=O*l)-d*v-p*v-d*g))-(m=_-(k=(p=S-(d=(h=cT*S)-(h-S)))*(g=s-(v=(h=cT*s)-(h-s)))-((w=S*s)-d*v-p*v-d*g))),bT[0]=_-(m+f)+(f-k),f=(b=x-((y=x+m)-(f=y-x))+(m-f))-(m=b-w),bT[1]=b-(m+f)+(f-w),f=(M=y+m)-y,bT[2]=y-(M-f)+(m-f),bT[3]=M;var F=lT(T,gT,4,bT,mT);f=(_=(p=u-(d=(h=cT*u)-(h-u)))*(g=l-(v=(h=cT*l)-(h-l)))-((x=u*l)-d*v-p*v-d*g))-(m=_-(k=(p=c-(d=(h=cT*c)-(h-c)))*(g=s-(v=(h=cT*s)-(h-s)))-((w=c*s)-d*v-p*v-d*g))),bT[0]=_-(m+f)+(f-k),f=(b=x-((y=x+m)-(f=y-x))+(m-f))-(m=b-w),bT[1]=b-(m+f)+(f-w),f=(M=y+m)-y,bT[2]=y-(M-f)+(m-f),bT[3]=M;var j=lT(F,mT,4,bT,yT);return yT[j-1]}(t,n,e,r,i,a,s)}fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(8),fT(8),fT(8),fT(4),fT(8),fT(8),fT(8),fT(12),fT(192),fT(192);fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(8),fT(8),fT(8),fT(8),fT(8),fT(8),fT(8),fT(8),fT(8),fT(4),fT(4),fT(4),fT(8),fT(16),fT(16),fT(16),fT(32),fT(32),fT(48),fT(64),fT(1152),fT(1152);fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(4),fT(24),fT(24),fT(24),fT(24),fT(24),fT(24),fT(24),fT(24),fT(24),fT(24),fT(1152),fT(1152),fT(1152),fT(1152),fT(1152),fT(2304),fT(2304),fT(3456),fT(5760),fT(8),fT(8),fT(8),fT(16),fT(24),fT(48),fT(48),fT(96),fT(192),fT(384),fT(384),fT(384),fT(768);fT(96),fT(96),fT(96),fT(1152);var _T=Math.pow(2,-52),wT=new Uint32Array(512),kT=function(){function t(n){(0,rk.Z)(this,t);var e=n.length>>1;if(e>0&&"number"!==typeof n[0])throw new Error("Expected coords to contain numbers.");this.coords=n;var r=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}return(0,ik.Z)(t,[{key:"update",value:function(){for(var t=this.coords,n=this._hullPrev,e=this._hullNext,r=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,u=1/0,c=-1/0,s=-1/0,l=0;l<a;l++){var f=t[2*l],h=t[2*l+1];f<o&&(o=f),h<u&&(u=h),f>c&&(c=f),h>s&&(s=h),this._ids[l]=l}for(var d,p,v,g=(o+c)/2,m=(u+s)/2,y=1/0,b=0;b<a;b++){var x=MT(g,m,t[2*b],t[2*b+1]);x<y&&(d=b,y=x)}var _=t[2*d],w=t[2*d+1];y=1/0;for(var k=0;k<a;k++)if(k!==d){var M=MT(_,w,t[2*k],t[2*k+1]);M<y&&M>0&&(p=k,y=M)}for(var O=t[2*p],E=t[2*p+1],S=1/0,D=0;D<a;D++)if(D!==d&&D!==p){var C=ET(_,w,O,E,t[2*D],t[2*D+1]);C<S&&(v=D,S=C)}var A=t[2*v],T=t[2*v+1];if(S===1/0){for(var F=0;F<a;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];ST(this._ids,this._dists,0,a-1);for(var j=new Uint32Array(a),Z=0,N=0,z=-1/0;N<a;N++){var U=this._ids[N];this._dists[U]>z&&(j[Z++]=U,z=this._dists[U])}return this.hull=j.subarray(0,Z),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(xT(_,w,O,E,A,T)<0){var P=p,R=O,L=E;p=v,O=A,E=T,v=P,A=R,T=L}var I=function(t,n,e,r,i,a){var o=e-t,u=r-n,c=i-t,s=a-n,l=o*o+u*u,f=c*c+s*s,h=.5/(o*s-u*c),d=t+(s*l-u*f)*h,p=n+(o*f-c*l)*h;return{x:d,y:p}}(_,w,O,E,A,T);this._cx=I.x,this._cy=I.y;for(var B=0;B<a;B++)this._dists[B]=MT(t[2*B],t[2*B+1],I.x,I.y);ST(this._ids,this._dists,0,a-1),this._hullStart=d;var q=3;e[d]=n[v]=p,e[p]=n[d]=v,e[v]=n[p]=d,r[d]=0,r[p]=1,r[v]=2,i.fill(-1),i[this._hashKey(_,w)]=d,i[this._hashKey(O,E)]=p,i[this._hashKey(A,T)]=v,this.trianglesLen=0,this._addTriangle(d,p,v,-1,-1,-1);for(var H,W,Y=0;Y<this._ids.length;Y++){var X=this._ids[Y],G=t[2*X],J=t[2*X+1];if(!(Y>0&&Math.abs(G-H)<=_T&&Math.abs(J-W)<=_T)&&(H=G,W=J,X!==d&&X!==p&&X!==v)){for(var $=0,V=0,K=this._hashKey(G,J);V<this._hashSize&&(-1===($=i[(K+V)%this._hashSize])||$===e[$]);V++);for(var Q=$=n[$],tt=void 0;tt=e[Q],xT(G,J,t[2*Q],t[2*Q+1],t[2*tt],t[2*tt+1])>=0;)if((Q=tt)===$){Q=-1;break}if(-1!==Q){var nt=this._addTriangle(Q,X,e[Q],-1,-1,r[Q]);r[X]=this._legalize(nt+2),r[Q]=nt,q++;for(var et=e[Q];tt=e[et],xT(G,J,t[2*et],t[2*et+1],t[2*tt],t[2*tt+1])<0;)nt=this._addTriangle(et,X,tt,r[X],-1,r[et]),r[X]=this._legalize(nt+2),e[et]=et,q--,et=tt;if(Q===$)for(;xT(G,J,t[2*(tt=n[Q])],t[2*tt+1],t[2*Q],t[2*Q+1])<0;)nt=this._addTriangle(tt,X,Q,-1,r[Q],r[tt]),this._legalize(nt+2),r[tt]=nt,e[Q]=Q,q--,Q=tt;this._hullStart=n[X]=Q,e[Q]=n[et]=X,e[X]=et,i[this._hashKey(G,J)]=X,i[this._hashKey(t[2*Q],t[2*Q+1])]=Q}}}this.hull=new Uint32Array(q);for(var rt=0,it=this._hullStart;rt<q;rt++)this.hull[rt]=it,it=e[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,n){return Math.floor(function(t,n){var e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var n=this._triangles,e=this._halfedges,r=this.coords,i=0,a=0;;){var o=e[t],u=t-t%3;if(a=u+(t+2)%3,-1!==o){var c=o-o%3,s=u+(t+1)%3,l=c+(o+2)%3,f=n[a],h=n[t],d=n[s],p=n[l];if(OT(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[o]=f;var v=e[l];if(-1===v){var g=this._hullStart;do{if(this._hullTri[g]===l){this._hullTri[g]=t;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(t,v),this._link(o,e[a]),this._link(a,l);var m=c+(o+1)%3;i<wT.length&&(wT[i++]=m)}else{if(0===i)break;t=wT[--i]}}else{if(0===i)break;t=wT[--i]}}return a}},{key:"_link",value:function(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}},{key:"_addTriangle",value:function(t,n,e,r,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=e,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}],[{key:"from",value:function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AT,i=n.length,a=new Float64Array(2*i),o=0;o<i;o++){var u=n[o];a[2*o]=e(u),a[2*o+1]=r(u)}return new t(a)}}]),t}();function MT(t,n,e,r){var i=t-e,a=n-r;return i*i+a*a}function OT(t,n,e,r,i,a,o,u){var c=t-o,s=n-u,l=e-o,f=r-u,h=i-o,d=a-u,p=l*l+f*f,v=h*h+d*d;return c*(f*v-p*d)-s*(l*v-p*h)+(c*c+s*s)*(l*d-f*h)<0}function ET(t,n,e,r,i,a){var o=e-t,u=r-n,c=i-t,s=a-n,l=o*o+u*u,f=c*c+s*s,h=.5/(o*s-u*c),d=(s*l-u*f)*h,p=(o*f-c*l)*h;return d*d+p*p}function ST(t,n,e,r){if(r-e<=20)for(var i=e+1;i<=r;i++){for(var a=t[i],o=n[a],u=i-1;u>=e&&n[t[u]]>o;)t[u+1]=t[u--];t[u+1]=a}else{var c=e+1,s=r;DT(t,e+r>>1,c),n[t[e]]>n[t[r]]&&DT(t,e,r),n[t[c]]>n[t[r]]&&DT(t,c,r),n[t[e]]>n[t[c]]&&DT(t,e,c);for(var l=t[c],f=n[l];;){do{c++}while(n[t[c]]<f);do{s--}while(n[t[s]]>f);if(s<c)break;DT(t,c,s)}t[e+1]=t[s],t[s]=l,r-c+1>=s-e?(ST(t,n,c,r),ST(t,n,e,s-1)):(ST(t,n,e,s-1),ST(t,n,c,r))}}function DT(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function CT(t){return t[0]}function AT(t){return t[1]}var TT=1e-6,FT=function(){function t(){(0,rk.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return(0,ik.Z)(t,[{key:"moveTo",value:function(t,n){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+n)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,n){this._+="L".concat(this._x1=+t,",").concat(this._y1=+n)}},{key:"arc",value:function(t,n,e){var r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>TT||Math.abs(this._y1-i)>TT)&&(this._+="L"+r+","+i),e&&(this._+="A".concat(e,",").concat(e,",0,1,1,").concat(t-e,",").concat(n,"A").concat(e,",").concat(e,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,n,e,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+n,"h").concat(+e,"v").concat(+r,"h").concat(-e,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),jT=function(){function t(){(0,rk.Z)(this,t),this._=[]}return(0,ik.Z)(t,[{key:"moveTo",value:function(t,n){this._.push([t,n])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,n){this._.push([t,n])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}(),ZT=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=(0,Go.Z)(e,4),i=r[0],a=r[1],o=r[2],u=r[3];if((0,rk.Z)(this,t),!((o=+o)>=(i=+i))||!((u=+u)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(2*n.points.length),this.vectors=new Float64Array(2*n.points.length),this.xmax=o,this.xmin=i,this.ymax=u,this.ymin=a,this._init()}return(0,ik.Z)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,n,e=this.delaunay,r=e.points,i=e.hull,a=e.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),c=0,s=0,l=a.length;c<l;c+=3,s+=2){var f=2*a[c],h=2*a[c+1],d=2*a[c+2],p=r[f],v=r[f+1],g=r[h],m=r[h+1],y=r[d],b=r[d+1],x=g-p,_=m-v,w=y-p,k=b-v,M=2*(x*k-_*w);if(Math.abs(M)<1e-9){var O=1e9,E=2*a[0];t=(p+y)/2-(O*=Math.sign((r[E]-p)*k-(r[E+1]-v)*w))*k,n=(v+b)/2+O*w}else{var S=1/M,D=x*x+_*_,C=w*w+k*k;t=p+(k*D-_*C)*S,n=v+(x*C-w*D)*S}u[s]=t,u[s+1]=n}var A,T,F,j=i[i.length-1],Z=4*j,N=r[2*j],z=r[2*j+1];o.fill(0);for(var U=0;U<i.length;++U)A=Z,T=N,F=z,Z=4*(j=i[U]),N=r[2*j],z=r[2*j+1],o[A+2]=o[Z]=F-z,o[A+3]=o[Z+1]=N-T}},{key:"render",value:function(t){var n=null==t?t=new FT:void 0,e=this.delaunay,r=e.halfedges,i=e.inedges,a=e.hull,o=this.circumcenters,u=this.vectors;if(a.length<=1)return null;for(var c=0,s=r.length;c<s;++c){var l=r[c];if(!(l<c)){var f=2*Math.floor(c/3),h=2*Math.floor(l/3),d=o[f],p=o[f+1],v=o[h],g=o[h+1];this._renderSegment(d,p,v,g,t)}}for(var m,y=a[a.length-1],b=0;b<a.length;++b){m=y,y=a[b];var x=2*Math.floor(i[y]/3),_=o[x],w=o[x+1],k=4*m,M=this._project(_,w,u[k+2],u[k+3]);M&&this._renderSegment(_,w,M[0],M[1],t)}return n&&n.value()}},{key:"renderBounds",value:function(t){var n=null==t?t=new FT:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}},{key:"renderCell",value:function(t,n){var e=null==n?n=new FT:void 0,r=this._clip(t);if(null!==r&&r.length){n.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||n.lineTo(r[a],r[a+1]);return n.closePath(),e&&e.value()}}},{key:"cellPolygons",value:(0,m.Z)().mark((function t(){var n,e,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.delaunay.points,e=0,r=n.length/2;case 2:if(!(e<r)){t.next=11;break}if(!(i=this.cellPolygon(e))){t.next=8;break}return i.index=e,t.next=8,i;case 8:++e,t.next=2;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var n=new jT;return this.renderCell(t,n),n.value()}},{key:"_renderSegment",value:function(t,n,e,r,i){var a,o=this._regioncode(t,n),u=this._regioncode(e,r);0===o&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(a=this._clipSegment(t,n,e,r,o,u))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(t,n,e){return(n=+n)===n&&(e=+e)===e&&this.delaunay._step(t,n,e)===t}},{key:"neighbors",value:(0,m.Z)().mark((function t(n){var e,r,i,a,o,u,c,s,l;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._clip(n))){t.next=33;break}r=(0,_a.Z)(this.delaunay.neighbors(n)),t.prev=3,r.s();case 5:if((i=r.n()).done){t.next=25;break}if(a=i.value,!(o=this._clip(a))){t.next=23;break}u=0,c=e.length;case 10:if(!(u<c)){t.next=23;break}s=0,l=o.length;case 12:if(!(s<l)){t.next=20;break}if(e[u]!=o[s]||e[u+1]!=o[s+1]||e[(u+2)%c]!=o[(s+l-2)%l]||e[(u+3)%c]!=o[(s+l-1)%l]){t.next=17;break}return t.next=16,a;case 16:return t.abrupt("break",23);case 17:s+=2,t.next=12;break;case 20:u+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),r.e(t.t0);case 30:return t.prev=30,r.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[3,27,30,33]])}))},{key:"_cell",value:function(t){var n=this.circumcenters,e=this.delaunay,r=e.inedges,i=e.halfedges,a=e.triangles,o=r[t];if(-1===o)return null;var u=[],c=o;do{var s=Math.floor(c/3);if(u.push(n[2*s],n[2*s+1]),a[c=c%3===2?c-2:c+1]!==t)break;c=i[c]}while(c!==o&&-1!==c);return u}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var n=this._cell(t);if(null===n)return null;var e=this.vectors,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}},{key:"_clipFinite",value:function(t,n){for(var e,r,i,a,o=n.length,u=null,c=n[o-2],s=n[o-1],l=this._regioncode(c,s),f=0,h=0;h<o;h+=2)if(e=c,r=s,c=n[h],s=n[h+1],i=l,l=this._regioncode(c,s),0===i&&0===l)a=f,f=0,u?u.push(c,s):u=[c,s];else{var d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(0===i){if(null===(d=this._clipSegment(e,r,c,s,i,l)))continue;var y=d,b=(0,Go.Z)(y,4);p=b[0],v=b[1],g=b[2],m=b[3]}else{if(null===(d=this._clipSegment(c,s,e,r,l,i)))continue;var x=d,_=(0,Go.Z)(x,4);g=_[0],m=_[1],p=_[2],v=_[3],a=f,f=this._edgecode(p,v),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(p,v):u=[p,v]}a=f,f=this._edgecode(g,m),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(g,m):u=[g,m]}if(u)a=f,f=this._edgecode(u[0],u[1]),a&&f&&this._edge(t,a,f,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}},{key:"_clipSegment",value:function(t,n,e,r,i,a){for(;;){if(0===i&&0===a)return[t,n,e,r];if(i&a)return null;var o=void 0,u=void 0,c=i||a;8&c?(o=t+(e-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(o=t+(e-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(e-t),o=this.xmax):(u=n+(r-n)*(this.xmin-t)/(e-t),o=this.xmin),i?(t=o,n=u,i=this._regioncode(t,n)):(e=o,r=u,a=this._regioncode(e,r))}}},{key:"_clipInfinite",value:function(t,n,e,r,i,a){var o,u=Array.from(n);if((o=this._project(u[0],u[1],e,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],i,a))&&u.push(o[0],o[1]),u=this._clipFinite(t,u))for(var c,s=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);s<l;s+=2)c=f,f=this._edgecode(u[s],u[s+1]),c&&f&&(s=this._edge(t,c,f,u,s),l=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(t,n,e,r,i){for(;n!==e;){var a=void 0,o=void 0;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(t,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var c=(u+2)%r.length,s=(u+4)%r.length;(r[u]===r[c]&&r[c]===r[s]||r[u+1]===r[c+1]&&r[c+1]===r[s+1])&&(r.splice(c,2),u-=2)}return i}},{key:"_project",value:function(t,n,e,r){var i,a,o,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(o=this.ymin,a=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(o=this.ymax,a=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(a=this.xmax,o=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(a=this.xmin,o=n+(u=i)*r)}return[a,o]}},{key:"_edgecode",value:function(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}},{key:"_regioncode",value:function(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}]),t}(),NT=(0,m.Z)().mark(BT),zT=2*Math.PI,UT=Math.pow;function PT(t){return t[0]}function RT(t){return t[1]}function LT(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}var IT=function(){function t(n){(0,rk.Z)(this,t),this._delaunator=new kT(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}return(0,ik.Z)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var n=t.triangles,e=t.coords,r=0;r<n.length;r+=3){var i=2*n[r],a=2*n[r+1],o=2*n[r+2];if((e[o]-e[i])*(e[a+1]-e[i+1])-(e[a]-e[i])*(e[o+1]-e[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(function(t,n){return n})).sort((function(t,e){return n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]}));for(var e=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[n[2*e],n[2*e+1],n[2*r],n[2*r+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]),o=0,u=n.length/2;o<u;++o){var c=LT(n[2*o],n[2*o+1],a);n[2*o]=c[0],n[2*o+1]=c[1]}this._delaunator=new kT(n)}else delete this.collinear;for(var s=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,v=s.length;p<v;++p){var g=f[p%3===2?p-2:p+1];-1!==s[p]&&-1!==h[g]||(h[g]=p)}for(var m=0,y=l.length;m<y;++m)d[l[m]]=m;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],h[l[0]]=1,2===l.length&&(h[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1]))}},{key:"voronoi",value:function(t){return new ZT(this,t)}},{key:"neighbors",value:(0,m.Z)().mark((function t(n){var e,r,i,a,o,u,c,s,l,f,h;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(u=this.collinear)){t.next=10;break}if(!((c=u.indexOf(n))>0)){t.next=6;break}return t.next=6,u[c-1];case 6:if(!(c<u.length-1)){t.next=9;break}return t.next=9,u[c+1];case 9:return t.abrupt("return");case 10:if(-1!==(s=e[n])){t.next=13;break}return t.abrupt("return");case 13:l=s,f=-1;case 14:return t.next=16,f=o[l];case 16:if(o[l=l%3===2?l-2:l+1]===n){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(l=a[l])){t.next=26;break}if((h=r[(i[n]+1)%r.length])===f){t.next=25;break}return t.next=25,h;case 25:return t.abrupt("return");case 26:if(l!==s){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(n=+n)!==n)return-1;for(var r,i=e;(r=this._step(e,t,n))>=0&&r!==e&&r!==i;)e=r;return r}},{key:"_step",value:function(t,n,e){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,u=this.triangles,c=this.points;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);var s=t,l=UT(n-c[2*t],2)+UT(e-c[2*t+1],2),f=r[t],h=f;do{var d=u[h],p=UT(n-c[2*d],2)+UT(e-c[2*d+1],2);if(p<l&&(l=p,s=d),u[h=h%3===2?h-2:h+1]!==t)break;if(-1===(h=o[h])){if((h=i[(a[t]+1)%i.length])!==d&&UT(n-c[2*h],2)+UT(e-c[2*h+1],2)<l)return h;break}}while(h!==f);return s}},{key:"render",value:function(t){for(var n=null==t?t=new FT:void 0,e=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var u=r[a];if(!(u<a)){var c=2*i[a],s=2*i[u];t.moveTo(e[c],e[c+1]),t.lineTo(e[s],e[s+1])}}return this.renderHull(t),n&&n.value()}},{key:"renderPoints",value:function(t,n){void 0!==n||t&&"function"===typeof t.moveTo||(n=t,t=null),n=void 0==n?2:+n;for(var e=null==t?t=new FT:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],u=r[i+1];t.moveTo(o+n,u),t.arc(o,u,n,0,zT)}return e&&e.value()}},{key:"renderHull",value:function(t){var n=null==t?t=new FT:void 0,e=this.hull,r=this.points,i=2*e[0],a=e.length;t.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var u=2*e[o];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}},{key:"hullPolygon",value:function(){var t=new jT;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,n){var e=null==n?n=new FT:void 0,r=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],u=2*i[t+2];return n.moveTo(r[a],r[a+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.closePath(),e&&e.value()}},{key:"trianglePolygons",value:(0,m.Z)().mark((function t(){var n,e,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.triangles,e=0,r=n.length/3;case 2:if(!(e<r)){t.next=8;break}return t.next=5,this.trianglePolygon(e);case 5:++e,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var n=new jT;return this.renderTriangle(t,n),n.value()}}],[{key:"from",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RT,i=arguments.length>3?arguments[3]:void 0;return new t("length"in n?function(t,n,e,r){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var u=t[o];a[2*o]=n.call(r,u,o,t),a[2*o+1]=e.call(r,u,o,t)}return a}(n,e,r,i):Float64Array.from(BT(n,e,r,i)))}}]),t}();function BT(t,n,e,r){var i,a,o,u;return(0,m.Z)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:i=0,a=(0,_a.Z)(t),c.prev=2,a.s();case 4:if((o=a.n()).done){c.next=13;break}return u=o.value,c.next=8,n.call(r,u,i,t);case 8:return c.next=10,e.call(r,u,i,t);case 10:++i;case 11:c.next=4;break;case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(2),a.e(c.t0);case 18:return c.prev=18,a.f(),c.finish(18);case 21:case"end":return c.stop()}}),NT,null,[[2,15,18,21]])}function qT(t){ma.call(this,null,t)}qT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var HT=[-1e5,-1e5,1e5,1e5];function WT(t){for(var n=t[0][0],e=t[0][1],r=t.length-1;t[r][0]===n&&t[r][1]===e;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}(0,g.XW)(qT,ma,{transform:function(t,n){var e=t.as||"path",r=n.source;if(!r||!r.length)return n;var i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:HT;for(var a=this.value=IT.from(r,t.x,t.y).voronoi(i),o=0,u=r.length;o<u;++o){var c=a.cellPolygon(o);r[o][e]=c?WT(c):null}return n.reflow(t.modified()).modifies(e)}});var YT=Math.PI/180,XT=64,GT=2048;function JT(){var t,n,e,r,i,a,o,u=[256,256],c=tF,s=[],l=Math.random,f={};function h(t,n,e){for(var r,i,a,o=n.x,s=n.y,f=Math.sqrt(u[0]*u[0]+u[1]*u[1]),h=c(u),d=l()<.5?1:-1,p=-d;(r=h(p+=d))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=f));)if(n.x=o+i,n.y=s+a,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>u[0]||n.y+n.y1>u[1])&&(!e||!VT(n,t,u[0]))&&(!e||QT(n,e))){for(var v,g=n.sprite,m=n.width>>5,y=u[0]>>5,b=n.x-(m<<4),x=127&b,_=32-x,w=n.y1-n.y0,k=(n.y+n.y0)*y+(b>>5),M=0;M<w;M++){v=0;for(var O=0;O<=m;O++)t[k+O]|=v<<_|(O<m?(v=g[M*m+O])>>>x:0);k+=y}return n.sprite=null,!0}return!1}return f.layout=function(){for(var c=function(t){t.width=t.height=1;var n=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(XT<<5)/n,t.height=GT/n;var e=t.getContext("2d");return e.fillStyle=e.strokeStyle="red",e.textAlign="center",{context:e,ratio:n}}(Rl()),f=function(t){var n=[],e=-1;for(;++e<t;)n[e]=0;return n}((u[0]>>5)*u[1]),d=null,p=s.length,v=-1,g=[],m=s.map((function(u){return{text:t(u),font:n(u),style:r(u),weight:i(u),rotate:a(u),size:~~(e(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(t,n){return n.size-t.size}));++v<p;){var y=m[v];y.x=u[0]*(l()+.5)>>1,y.y=u[1]*(l()+.5)>>1,$T(c,y,m,v),y.hasText&&h(f,y,d)&&(g.push(y),d?KT(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=u[0]>>1,y.y-=u[1]>>1)}return g},f.words=function(t){return arguments.length?(s=t,f):s},f.size=function(t){return arguments.length?(u=[+t[0],+t[1]],f):u},f.font=function(t){return arguments.length?(n=nF(t),f):n},f.fontStyle=function(t){return arguments.length?(r=nF(t),f):r},f.fontWeight=function(t){return arguments.length?(i=nF(t),f):i},f.rotate=function(t){return arguments.length?(a=nF(t),f):a},f.text=function(n){return arguments.length?(t=nF(n),f):t},f.spiral=function(t){return arguments.length?(c=eF[t]||t,f):c},f.fontSize=function(t){return arguments.length?(e=nF(t),f):e},f.padding=function(t){return arguments.length?(o=nF(t),f):o},f.random=function(t){return arguments.length?(l=t,f):l},f}function $T(t,n,e,r){if(!n.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(XT<<5)/a,GT/a);var o,u,c,s,l,f=0,h=0,d=0,p=e.length;for(--r;++r<p;){if(n=e[r],i.save(),i.font=n.style+" "+n.weight+" "+~~((n.size+1)/a)+"px "+n.font,o=i.measureText(n.text+"m").width*a,c=n.size<<1,n.rotate){var v=Math.sin(n.rotate*YT),g=Math.cos(n.rotate*YT),m=o*g,y=o*v,b=c*g,x=c*v;o=Math.max(Math.abs(m+x),Math.abs(m-x))+31>>5<<5,c=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(c>d&&(d=c),f+o>=XT<<5&&(f=0,h+=d,d=0),h+c>=GT)break;i.translate((f+(o>>1))/a,(h+(c>>1))/a),n.rotate&&i.rotate(n.rotate*YT),i.fillText(n.text,0,0),n.padding&&(i.lineWidth=2*n.padding,i.strokeText(n.text,0,0)),i.restore(),n.width=o,n.height=c,n.xoff=f,n.yoff=h,n.x1=o>>1,n.y1=c>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,f+=o}for(var _=i.getImageData(0,0,(XT<<5)/a,GT/a).data,w=[];--r>=0;)if((n=e[r]).hasText){for(u=(o=n.width)>>5,c=n.y1-n.y0,s=0;s<c*u;s++)w[s]=0;if(null==(f=n.xoff))return;h=n.yoff;var k=0,M=-1;for(l=0;l<c;l++){for(s=0;s<o;s++){var O=u*l+(s>>5),E=_[(h+l)*(XT<<5)+(f+s)<<2]?1<<31-s%32:0;w[O]|=E,k|=E}k?M=l:(n.y0++,c--,l--,h++)}n.y1=n.y0+M,n.sprite=w.slice(0,(n.y1-n.y0)*u)}}}function VT(t,n,e){e>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),u=127&o,c=32-u,s=t.y1-t.y0,l=(t.y+t.y0)*e+(o>>5),f=0;f<s;f++){r=0;for(var h=0;h<=a;h++)if((r<<c|(h<a?(r=i[f*a+h])>>>u:0))&n[l+h])return!0;l+=e}return!1}function KT(t,n){var e=t[0],r=t[1];n.x+n.x0<e.x&&(e.x=n.x+n.x0),n.y+n.y0<e.y&&(e.y=n.y+n.y0),n.x+n.x1>r.x&&(r.x=n.x+n.x1),n.y+n.y1>r.y&&(r.y=n.y+n.y1)}function QT(t,n){return t.x+t.x1>n[0].x&&t.x+t.x0<n[1].x&&t.y+t.y1>n[0].y&&t.y+t.y0<n[1].y}function tF(t){var n=t[0]/t[1];return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function nF(t){return"function"===typeof t?t:function(){return t}}var eF={archimedean:tF,rectangular:function(t){var n=4*t[0]/t[1],e=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:e+=n;break;case 1:r+=4;break;case 2:e-=n;break;default:r-=4}return[e,r]}}},rF=["x","y","font","fontSize","fontStyle","fontWeight","angle"],iF=["text","font","rotate","fontSize","fontStyle","fontWeight"];function aF(t){ma.call(this,JT(),t)}aF.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rF}]},(0,g.XW)(aF,ma,{transform:function(t,n){!t.size||t.size[0]&&t.size[1]||(0,g.vU)("Wordcloud size dimensions must be non-zero.");var e=t.modified();if(e||n.changed(n.ADD_REM)||iF.some((function(e){var r=t[e];return(0,g.mf)(r)&&n.modified(r.fields)}))){var r,i=n.materialize(n.SOURCE).source,a=this.value,o=t.as||rF,u=t.fontSize||14;if((0,g.mf)(u)?r=t.fontSizeRange:u=(0,g.a9)(u),r){var c=u,s=Yp("sqrt")().domain((0,g.We)(i,c)).range(r);u=function(t){return s(c(t))}}i.forEach((function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0}));for(var l,f,h=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random(_w).layout(),d=a.size(),p=d[0]>>1,v=d[1]>>1,m=h.length,y=0;y<m;++y)(f=(l=h[y]).datum)[o[0]]=l.x+p,f[o[1]]=l.y+v,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return n.reflow(e).modifies(o)}}});var oF=no(wa),uF=oF.right,cF=oF.left,sF=(no(Aa).center,uF);var lF=function(t){return new Uint8Array(t)},fF=function(t){return new Uint16Array(t)},hF=function(t){return new Uint32Array(t)};function dF(t,n,e){var r=(n<257?lF:n<65537?fF:hF)(t);return e&&r.set(e),r}function pF(t,n,e){var r=1<<n;return{one:r,zero:~r,range:e.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,n){var e,i=this,a=i.bisect(i.range,t.value),o=t.index,u=a[0],c=a[1],s=o.length;for(e=0;e<u;++e)n[o[e]]|=r;for(e=c;e<s;++e)n[o[e]]|=r;return i}}}function vF(){var t=hF(0),n=[],e=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,c,s=e,l=i.length,f=hF(l),h=Array(l);for(c=0;c<l;++c)h[c]=r(i[c]),f[c]=c;if(h=function(t,n){return t.sort.call(n,(function(n,e){var r=t[n],i=t[e];return r<i?-1:r>i?1:0})),function(t,n){return Array.from(n,(function(n){return t[n]}))}(t,n)}(h,f),s)o=n,u=t,n=Array(s+l),t=hF(s+l),function(t,n,e,r,i,a,o,u,c){var s,l=0,f=0;for(s=0;l<r&&f<o;++s)n[l]<i[f]?(u[s]=n[l],c[s]=e[l++]):(u[s]=i[f],c[s]=a[f++]+t);for(;l<r;++l,++s)u[s]=n[l],c[s]=e[l];for(;f<o;++f,++s)u[s]=i[f],c[s]=a[f]+t}(a,o,u,s,h,f,l,n,t);else{if(a>0)for(c=0;c<l;++c)f[c]+=a;n=h,t=f}return e=s+l,{index:f,value:h}},remove:function(r,i){var a,o,u,c=e;for(o=0;!i[t[o]]&&o<c;++o);for(u=o;o<c;++o)i[a=t[o]]||(t[u]=a,n[u]=n[o],++u);e=c-r},bisect:function(t,r){var i;return r?i=r.length:(r=n,i=e),[cF(r,t[0],0,i),uF(r,t[1],0,i)]},reindex:function(n){for(var r=0,i=e;r<i;++r)t[r]=n[t[r]]},index:function(){return t},size:function(){return e}}}function gF(t){ma.call(this,function(){var t=8,n=[],e=hF(0),r=dF(0,t),i=dF(0,t);return{data:function(){return n},seen:function(){return e=function(t,n,e){return t.length>=n?t:((e=e||new t.constructor(n)).set(t),e)}(e,n.length)},add:function(t){for(var e,r=0,i=n.length,a=t.length;r<a;++r)(e=t[r])._index=i++,n.push(e)},remove:function(t,e){var a,o,u,c=n.length,s=Array(c-t),l=n;for(o=0;!e[o]&&o<c;++o)s[o]=n[o],l[o]=o;for(u=o;o<c;++o)a=n[o],e[o]?l[o]=-1:(l[o]=u,r[u]=r[o],i[u]=i[o],s[u]=a,a._index=u++),r[o]=0;return n=s,l},size:function(){return n.length},curr:function(){return r},prev:function(){return i},reset:function(t){return i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,n){r[t]|=n},clear:function(t,n){r[t]&=~n},resize:function(n,e){(n>r.length||e>t)&&(t=Math.max(e,t),r=dF(n,t,r),i=dF(n,t))}}}(),t),this._indices=null,this._dims=null}function mF(t){ma.call(this,null,t)}gF.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},(0,g.XW)(gF,ma,{transform:function(t,n){return this._dims?t.modified("fields")||t.fields.some((function(t){return n.modified(t.fields)}))?this.reinit(t,n):this.eval(t,n):this.init(t,n)},init:function(t,n){for(var e,r,i=t.fields,a=t.query,o=this._indices={},u=this._dims=[],c=a.length,s=0;s<c;++s)r=o[e=i[s].fname]||(o[e]=vF()),u.push(pF(r,s,a[s]));return this.eval(t,n)},reinit:function(t,n){var e,r,i,a,o,u,c,s,l,f=n.materialize().fork(),h=t.fields,d=t.query,p=this._indices,v=this._dims,g=this.value,m=g.curr(),y=g.prev(),b=g.all(),x=f.rem=f.add,_=f.mod,w=d.length,k={};if(y.set(m),n.rem.length&&(o=this.remove(t,n,f)),n.add.length&&g.add(n.add),n.mod.length)for(u={},c=0,s=(a=n.mod).length;c<s;++c)u[a[c]._index]=1;for(c=0;c<w;++c)l=h[c],(!v[c]||t.modified("fields",c)||n.modified(l.fields))&&((e=k[i=l.fname])||(p[i]=r=vF(),k[i]=e=r.insert(l,n.source,0)),v[c]=pF(r,c,d[c]).onAdd(e,m));for(c=0,s=g.data().length;c<s;++c)o[c]||(y[c]!==m[c]?x.push(c):u[c]&&m[c]!==b&&_.push(c));return g.mask=(1<<w)-1,f},eval:function(t,n){var e=n.materialize().fork(),r=this._dims.length,i=0;return n.rem.length&&(this.remove(t,n,e),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,n,e)),n.add.length&&(this.insert(t,n,e),i|=(1<<r)-1),n.mod.length&&(this.modify(n,e),i|=(1<<r)-1),this.value.mask=i,e},insert:function(t,n,e){var r,i,a,o=n.add,u=this.value,c=this._dims,s=this._indices,l=t.fields,f={},h=e.add,d=u.size()+o.length,p=c.length,v=u.size();u.resize(d,p),u.add(o);var g=u.curr(),m=u.prev(),y=u.all();for(r=0;r<p;++r)a=f[i=l[r].fname]||(f[i]=s[i].insert(l[r],o,v)),c[r].onAdd(a,g);for(;v<d;++v)m[v]=y,g[v]!==y&&h.push(v)},modify:function(t,n){var e,r,i,a=n.mod,o=this.value,u=o.curr(),c=o.all(),s=t.mod;for(e=0,r=s.length;e<r;++e)u[i=s[e]._index]!==c&&a.push(i)},remove:function(t,n,e){var r,i,a,o,u=this._indices,c=this.value,s=c.curr(),l=c.prev(),f=c.all(),h={},d=e.rem,p=n.rem;for(r=0,i=p.length;r<i;++r)h[a=p[r]._index]=1,l[a]=o=s[a],s[a]=f,o!==f&&d.push(a);for(a in u)u[a].remove(i,h);return this.reindex(n,i,h),h},reindex:function(t,n,e){var r=this._indices,i=this.value;t.runAfter((function(){var t=i.remove(n,e);for(var a in r)r[a].reindex(t)}))},update:function(t,n,e){var r,i,a=this._dims,o=t.query,u=n.stamp,c=a.length,s=0;for(e.filters=0,i=0;i<c;++i)t.modified("query",i)&&(r=i,++s);if(1===s)s=a[r].one,this.incrementOne(a[r],o[r],e.add,e.rem);else for(i=0,s=0;i<c;++i)t.modified("query",i)&&(s|=a[i].one,this.incrementAll(a[i],o[i],u,e.add),e.rem=e.add);return s},incrementAll:function(t,n,e,r){var i,a,o,u=this.value,c=u.seen(),s=u.curr(),l=u.prev(),f=t.index(),h=t.bisect(t.range),d=t.bisect(n),p=d[0],v=d[1],g=h[0],m=h[1],y=t.one;if(p<g)for(i=p,a=Math.min(g,v);i<a;++i)c[o=f[i]]!==e&&(l[o]=s[o],c[o]=e,r.push(o)),s[o]^=y;else if(p>g)for(i=g,a=Math.min(p,m);i<a;++i)c[o=f[i]]!==e&&(l[o]=s[o],c[o]=e,r.push(o)),s[o]^=y;if(v>m)for(i=Math.max(p,m),a=v;i<a;++i)c[o=f[i]]!==e&&(l[o]=s[o],c[o]=e,r.push(o)),s[o]^=y;else if(v<m)for(i=Math.max(g,v),a=m;i<a;++i)c[o=f[i]]!==e&&(l[o]=s[o],c[o]=e,r.push(o)),s[o]^=y;t.range=n.slice()},incrementOne:function(t,n,e,r){var i,a,o,u=this.value.curr(),c=t.index(),s=t.bisect(t.range),l=t.bisect(n),f=l[0],h=l[1],d=s[0],p=s[1],v=t.one;if(f<d)for(i=f,a=Math.min(d,h);i<a;++i)u[o=c[i]]^=v,e.push(o);else if(f>d)for(i=d,a=Math.min(f,p);i<a;++i)u[o=c[i]]^=v,r.push(o);if(h>p)for(i=Math.max(f,p),a=h;i<a;++i)u[o=c[i]]^=v,e.push(o);else if(h<p)for(i=Math.max(d,h),a=p;i<a;++i)u[o=c[i]]^=v,r.push(o);t.range=n.slice()}}),mF.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},(0,g.XW)(mF,ma,{transform:function(t,n){var e=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&e))return n.StopPropagation;var a=n.fork(n.ALL),o=r.data(),u=r.curr(),c=r.prev(),s=function(t){return u[t]&e?null:o[t]};return a.filter(a.MOD,s),i&i-1?(a.filter(a.ADD,(function(t){var n=u[t]&e;return!n&&n^c[t]&e?o[t]:null})),a.filter(a.REM,(function(t){var n=u[t]&e;return n&&!(n^n^c[t]&e)?o[t]:null}))):(a.filter(a.ADD,s),a.filter(a.REM,(function(t){return(u[t]&e)===i?o[t]:null}))),a.filter(a.SOURCE,(function(t){return s(t._index)}))}});var yF=(0,m.Z)().mark(bF);function bF(t,n){var e,r,i,a,o,u,c;return(0,m.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=n){s.next=21;break}e=(0,_a.Z)(t),s.prev=2,e.s();case 4:if((r=e.n()).done){s.next=11;break}if(!(null!=(i=r.value)&&""!==i&&(i=+i)>=i)){s.next=9;break}return s.next=9,i;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),e.e(s.t0);case 16:return s.prev=16,e.f(),s.finish(16);case 19:s.next=41;break;case 21:a=-1,o=(0,_a.Z)(t),s.prev=23,o.s();case 25:if((u=o.n()).done){s.next=33;break}if(c=u.value,!(null!=(c=n(c,++a,t))&&""!==c&&(c=+c)>=c)){s.next=31;break}return s.next=31,c;case 31:s.next=25;break;case 33:s.next=38;break;case 35:s.prev=35,s.t1=s.catch(23),o.e(s.t1);case 38:return s.prev=38,o.f(),s.finish(38);case 41:case"end":return s.stop()}}),yF,null,[[2,13,16,19],[23,35,38,41]])}function xF(t,n,e){var r=Float64Array.from(bF(t,e));return r.sort(wa),n.map((function(t){return ja(r,t)}))}function _F(t,n){return xF(t,[.25,.5,.75],n)}function wF(t,n){var e=t.length,r=Za(t,n),i=_F(t,n),a=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(e,-.2)}function kF(t){var n,e,r,i,a,o,u=t.maxbins||20,c=t.base||10,s=Math.log(c),l=t.divide||[5,2],f=t.extent[0],h=t.extent[1],d=t.span||h-f||Math.abs(f)||1;if(t.step)n=t.step;else if(t.steps){for(i=d/u,a=0,o=t.steps.length;a<o&&t.steps[a]<i;++a);n=t.steps[Math.max(0,a-1)]}else{for(e=Math.ceil(Math.log(u)/s),r=t.minstep||0,n=Math.max(r,Math.pow(c,Math.round(Math.log(d)/s)-e));Math.ceil(d/n)>u;)n*=c;for(a=0,o=l.length;a<o;++a)(i=n/l[a])>=r&&d/i<=u&&(n=i)}var p=(i=Math.log(n))>=0?0:1+~~(-i/s),v=Math.pow(c,-p-1);return(t.nice||void 0===t.nice)&&(f=f<(i=Math.floor(f/n+v)*n)?i-n:i,h=Math.ceil(h/n)*n),{start:f,stop:h===f?f+n:h,step:n}}var MF=Math.random;function OF(t){MF=t}function EF(t,n,e,r){if(!t.length)return[void 0,void 0];var i,a,o,u,c=Float64Array.from(bF(t,r)),s=c.length,l=n;for(o=0,u=Array(l);o<l;++o){for(i=0,a=0;a<s;++a)i+=c[~~(MF()*s)];u[o]=i/s}return u.sort(wa),[Fa(u,e/2),Fa(u,1-e/2)]}function SF(t,n,e,r){r=r||function(t){return t};for(var i,a=t.length,o=new Float64Array(a),u=0,c=1,s=r(t[0]),l=s,f=s+n;c<a;++c){if((i=r(t[c]))>=f){for(l=(s+l)/2;u<c;++u)o[u]=l;f=i+n,s=i}l=i}for(l=(s+l)/2;u<c;++u)o[u]=l;return e?function(t,n){var e,r,i=t.length,a=0,o=1;for(;t[a]===t[o];)++o;for(;o<i;){for(e=o+1;t[o]===t[e];)++e;if(t[o]-t[o-1]<n){for(r=o+(a+e-o-o>>1);r<o;)t[r++]=t[o];for(;r>o;)t[r--]=t[a]}a=o,o=e}return t}(o,n+n/4):o}function DF(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}}function CF(t,n){var e,r,i;null==n&&(n=t,t=0);var a={min:function(t){return arguments.length?(i=r-(e=t||0),a):e},max:function(t){return arguments.length?(i=(r=t||0)-e,a):r},sample:function(){return e+Math.floor(i*MF())},pdf:function(t){return t===Math.floor(t)&&t>=e&&t<r?1/i:0},cdf:function(t){var n=Math.floor(t);return n<e?0:n>=r?1:(n-e+1)/i},icdf:function(t){return t>=0&&t<=1?e-1+Math.floor(t*i):NaN}};return a.min(t).max(n)}var AF=Math.sqrt(2*Math.PI),TF=Math.SQRT2,FF=NaN;function jF(t,n){t=t||0,n=null==n?1:n;var e,r,i=0,a=0;if(FF===FF)i=FF,FF=NaN;else{do{e=(i=2*MF()-1)*i+(a=2*MF()-1)*a}while(0===e||e>1);i*=r=Math.sqrt(-2*Math.log(e)/e),FF=a*r}return t+i*n}function ZF(t,n,e){var r=(t-(n||0))/(e=null==e?1:e);return Math.exp(-.5*r*r)/(e*AF)}function NF(t,n,e){var r,i=(t-(n=n||0))/(e=null==e?1:e),a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r}function zF(t,n,e){return t<0||t>1?NaN:(n||0)+(null==e?1:e)*TF*function(t){var n,e=-Math.log((1-t)*(1+t));n=e<6.25?1.6536545626831027+(n=.24015818242558962+(n=(n=(n=.00018673420803405714+(n=(n=(n=4.2347877827932404e-7+(n=(n=(n=1.0512122733215323e-9+(n=(n=(n=26335093153082323e-28+(n=(n=(n=6637638134358324e-30+(n=20972767875968562e-33+(n=(n=11157877678025181e-33+(n=128584807152564e-32+(n=(n=-364441206401782e-35)*(e-=3.125)-16850591381820166e-35)*e)*e)*e-1333171662854621e-31)*e)*e)*e-4054566272975207e-29)*e-8151934197605472e-29)*e)*e-12975133253453532e-27)*e-5415412054294628e-26)*e)*e-4.112633980346984e-9)*e-2.9070369957882005e-8)*e)*e-13654692000834679e-22)*e-13882523362786469e-21)*e)*e-.000740702534166267)*e-.006033670871430149)*e)*e:e<16?3.0838856104922208+(n=1.0052589676941592+(n=.005370914553590064+(n=(n=.002491442096107851+(n=(n=.0009532893797373805+(n=(n=24031110387097894e-21+(n=6828485145957318e-20+(n=(n=12475304481671779e-21+(n=29234449089955446e-22+(n=(n=15027403968909828e-22+(n=1.8239629214389228e-8+(n=(n=9.075656193888539e-8+(n=2.2137376921775787e-9)*(e=Math.sqrt(e)-3.25))*e-2.7517406297064545e-7)*e)*e)*e-4013867526981546e-21)*e)*e)*e-47318229009055734e-21)*e)*e)*e-.0003550375203628475)*e)*e-.0016882755560235047)*e)*e-.003751208507569241)*e)*e)*e:Number.isFinite(e)?4.849906401408584+(n=1.0103004648645344+(n=(n=(n=7599527703001776e-20+(n=(n=4526062597223154e-21+(n=(n=2.2900482228026655e-7+(n=(n=2.914795345090108e-8+(n=(n=7.61570120807834e-9+(n=(n=1.5076572693500548e-9+(n=(n=-27109920616438573e-27)*(e=Math.sqrt(e)-5)-2.555641816996525e-10)*e)*e-3.789465440126737e-9)*e)*e-1.496002662714924e-8)*e)*e-6.771199775845234e-8)*e)*e-9.9298272942317e-7)*e)*e-1968177810553167e-20)*e)*e-.00021503011930044477)*e-.00013871931833623122)*e)*e:1/0;return n*t}(2*t-1)}function UF(t,n){var e,r,i={mean:function(t){return arguments.length?(e=t||0,i):e},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return jF(e,r)},pdf:function(t){return ZF(t,e,r)},cdf:function(t){return NF(t,e,r)},icdf:function(t){return zF(t,e,r)}};return i.mean(t).stdev(n)}function PF(t,n){var e=UF(),r=0,i={data:function(e){return arguments.length?(t=e,r=e?e.length:0,i.bandwidth(n)):t},bandwidth:function(e){return arguments.length?(!(n=e)&&t&&(n=wF(t)),i):n},sample:function(){return t[~~(MF()*r)]+n*e.sample()},pdf:function(i){for(var a=0,o=0;o<r;++o)a+=e.pdf((i-t[o])/n);return a/n/r},cdf:function(i){for(var a=0,o=0;o<r;++o)a+=e.cdf((i-t[o])/n);return a/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(t)}function RF(t,n){return t=t||0,n=null==n?1:n,Math.exp(t+jF()*n)}function LF(t,n,e){if(t<=0)return 0;n=n||0,e=null==e?1:e;var r=(Math.log(t)-n)/e;return Math.exp(-.5*r*r)/(e*AF*t)}function IF(t,n,e){return NF(Math.log(t),n,e)}function BF(t,n,e){return Math.exp(zF(t,n,e))}function qF(t,n){var e,r,i={mean:function(t){return arguments.length?(e=t||0,i):e},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return RF(e,r)},pdf:function(t){return LF(t,e,r)},cdf:function(t){return IF(t,e,r)},icdf:function(t){return BF(t,e,r)}};return i.mean(t).stdev(n)}function HF(t,n){var e,r=0;var i={weights:function(t){return arguments.length?(e=function(t){var n,e=[],i=0;for(n=0;n<r;++n)i+=e[n]=null==t[n]?1:+t[n];for(n=0;n<r;++n)e[n]/=i;return e}(n=t||[]),i):n},distributions:function(e){return arguments.length?(e?(r=e.length,t=e):(r=0,t=[]),i.weights(n)):t},sample:function(){for(var n=MF(),i=t[r-1],a=e[0],o=0;o<r-1;a+=e[++o])if(n<a){i=t[o];break}return i.sample()},pdf:function(n){for(var i=0,a=0;a<r;++a)i+=e[a]*t[a].pdf(n);return i},cdf:function(n){for(var i=0,a=0;a<r;++a)i+=e[a]*t[a].cdf(n);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(t).weights(n)}function WF(t,n){return null==n&&(n=null==t?1:t,t=0),t+(n-t)*MF()}function YF(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=n&&t<=e?1/(e-n):0}function XF(t,n,e){return null==e&&(e=null==n?1:n,n=0),t<n?0:t>e?1:(t-n)/(e-n)}function GF(t,n,e){return null==e&&(e=null==n?1:n,n=0),t>=0&&t<=1?n+t*(e-n):NaN}function JF(t,n){var e,r,i={min:function(t){return arguments.length?(e=t||0,i):e},max:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return WF(e,r)},pdf:function(t){return YF(t,e,r)},cdf:function(t){return XF(t,e,r)},icdf:function(t){return GF(t,e,r)}};return null==n&&(n=null==t?1:t,t=0),i.min(t).max(n)}function $F(t,n,e,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(e-t*n)/i;return[n-a*t,a]}function VF(t,n,e,r){t=t.filter((function(t){var r=n(t),i=e(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&t.sort((function(t,e){return n(t)-n(e)}));var i,a,o,u,c=t.length,s=new Float64Array(c),l=new Float64Array(c),f=0,h=0,d=0,p=(0,_a.Z)(t);try{for(p.s();!(u=p.n()).done;)o=u.value,s[f]=i=+n(o),l[f]=a=+e(o),h+=(i-h)/++f,d+=(a-d)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<c;++f)s[f]-=h,l[f]-=d;return[s,l,h,d]}function KF(t,n,e,r){var i,a,o,u=-1,c=(0,_a.Z)(t);try{for(c.s();!(o=c.n()).done;){var s=o.value;i=n(s),a=e(s),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++u)}}catch(l){c.e(l)}finally{c.f()}}function QF(t,n,e,r,i){var a=0,o=0;return KF(t,n,e,(function(t,n){var e=n-i(t),u=n-r;a+=e*e,o+=u*u})),1-a/o}function tj(t,n,e){var r=0,i=0,a=0,o=0,u=0;KF(t,n,e,(function(t,n){++u,r+=(t-r)/u,i+=(n-i)/u,a+=(t*n-a)/u,o+=(t*t-o)/u}));var c=$F(r,i,a,o),s=function(t){return c[0]+c[1]*t};return{coef:c,predict:s,rSquared:QF(t,n,e,i,s)}}function nj(t,n,e){var r=0,i=0,a=0,o=0,u=0;KF(t,n,e,(function(t,n){++u,t=Math.log(t),r+=(t-r)/u,i+=(n-i)/u,a+=(t*n-a)/u,o+=(t*t-o)/u}));var c=$F(r,i,a,o),s=function(t){return c[0]+c[1]*Math.log(t)};return{coef:c,predict:s,rSquared:QF(t,n,e,i,s)}}function ej(t,n,e){var r,i,a,o=VF(t,n,e),u=(0,Go.Z)(o,4),c=u[0],s=(u[1],u[2]),l=u[3],f=0,h=0,d=0,p=0,v=0;KF(t,n,e,(function(t,n){r=c[v++],i=Math.log(n),f+=(n*i-f)/v,h+=((a=r*n)-h)/v,d+=(a*i-d)/v,p+=(r*a-p)/v}));var g=$F(h/l,f/l,d/l,p/l),m=(0,Go.Z)(g,2),y=m[0],b=m[1],x=function(t){return Math.exp(y+b*(t-s))};return{coef:[Math.exp(y-b*s),b],predict:x,rSquared:QF(t,n,e,l,x)}}function rj(t,n,e){var r=0,i=0,a=0,o=0,u=0,c=0;KF(t,n,e,(function(t,n){var e=Math.log(t),s=Math.log(n);++c,r+=(e-r)/c,i+=(s-i)/c,a+=(e*s-a)/c,o+=(e*e-o)/c,u+=(n-u)/c}));var s=$F(r,i,a,o),l=function(t){return s[0]*Math.pow(t,s[1])};return s[0]=Math.exp(s[0]),{coef:s,predict:l,rSquared:QF(t,n,e,u,l)}}function ij(t,n,e){var r,i,a,o,u=VF(t,n,e),c=(0,Go.Z)(u,4),s=c[0],l=c[1],f=c[2],h=c[3],d=s.length,p=0,v=0,g=0,m=0,y=0;for(r=0;r<d;)i=s[r],a=l[r++],p+=((o=i*i)-p)/r,v+=(o*i-v)/r,g+=(o*o-g)/r,m+=(i*a-m)/r,y+=(o*a-y)/r;var b=g-p*p,x=p*b-v*v,_=(y*p-m*v)/x,w=(m*b-y*v)/x,k=-_*p,M=function(t){return _*(t-=f)*t+w*t+k+h};return{coef:[k-w*f+_*f*f+h,w-2*_*f,_],predict:M,rSquared:QF(t,n,e,h,M)}}function aj(t,n,e,r){if(1===r)return tj(t,n,e);if(2===r)return ij(t,n,e);var i,a,o,u,c,s=VF(t,n,e),l=(0,Go.Z)(s,4),f=l[0],h=l[1],d=l[2],p=l[3],v=f.length,g=[],m=[],y=r+1;for(i=0;i<y;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],i)*h[o];for(g.push(u),c=new Float64Array(y),a=0;a<y;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],i+a);c[a]=u}m.push(c)}m.push(g);var b=function(t){var n,e,r,i,a,o=t.length-1,u=[];for(n=0;n<o;++n){for(i=n,e=n+1;e<o;++e)Math.abs(t[n][e])>Math.abs(t[n][i])&&(i=e);for(r=n;r<o+1;++r)a=t[r][n],t[r][n]=t[r][i],t[r][i]=a;for(e=n+1;e<o;++e)for(r=o;r>=n;r--)t[r][e]-=t[r][n]*t[n][e]/t[n][n]}for(e=o-1;e>=0;--e){for(a=0,r=e+1;r<o;++r)a+=t[r][e]*u[r];u[e]=(t[o][e]-a)/t[e][e]}return u}(m),x=function(t){t-=d;var n=p+b[0]+b[1]*t+b[2]*t*t;for(i=3;i<y;++i)n+=b[i]*Math.pow(t,i);return n};return{coef:oj(y,b,-d,p),predict:x,rSquared:QF(t,n,e,p,x)}}function oj(t,n,e,r){var i,a,o,u,c=Array(t);for(i=0;i<t;++i)c[i]=0;for(i=t-1;i>=0;--i)for(o=n[i],u=1,c[i]+=o,a=1;a<=i;++a)u*=(i+1-a)/a,c[i-a]+=o*Math.pow(e,a)*u;return c[0]+=r,c}var uj=2,cj=1e-12;function sj(t,n,e,r){for(var i=VF(t,n,e,!0),a=(0,Go.Z)(i,4),o=a[0],u=a[1],c=a[2],s=a[3],l=o.length,f=Math.max(2,~~(r*l)),h=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=uj;){for(var g=[0,f-1],m=0;m<l;++m){for(var y=o[m],b=g[0],x=g[1],_=y-o[b]>o[x]-y?b:x,w=0,k=0,M=0,O=0,E=0,S=1/Math.abs(o[_]-y||1),D=b;D<=x;++D){var C=o[D],A=u[D],T=lj(Math.abs(y-C)*S)*p[D],F=C*T;w+=T,k+=F,M+=A*T,O+=A*F,E+=C*F}var j=$F(k/w,M/w,O/w,E/w),Z=(0,Go.Z)(j,2),N=Z[0],z=Z[1];h[m]=N+z*y,d[m]=Math.abs(u[m]-h[m]),fj(o,m+1,g)}if(v===uj)break;var U=Ka(d);if(Math.abs(U)<cj)break;for(var P,R,L=0;L<l;++L)P=d[L]/(6*U),p[L]=P>=1?cj:(R=1-P*P)*R}return function(t,n,e,r){for(var i,a=t.length,o=[],u=0,c=0,s=[];u<a;++u)i=t[u]+e,s[0]===i?s[1]+=(n[u]-s[1])/++c:(c=0,s[1]+=r,s=[i,n[u]],o.push(s));return s[1]+=r,o}(o,h,c,s)}function lj(t){return(t=1-t*t*t)*t*t}function fj(t,n,e){var r=t[n],i=e[0],a=e[1]+1;if(!(a>=t.length))for(;n>i&&t[a]-r<=r-t[i];)e[0]=++i,e[1]=a,++a}var hj=.5*Math.PI/180;function dj(t,n,e,r){e=e||25,r=Math.max(e,r||200);var i=function(n){return[n,t(n)]},a=n[0],o=n[1],u=o-a,c=u/r,s=[i(a)],l=[];if(e===r){for(var f=1;f<r;++f)s.push(i(a+f/e*u));return s.push(i(o)),s}l.push(i(o));for(var h=e;--h>0;)l.push(i(a+h/e*u));for(var d=s[0],p=l[l.length-1],v=1/u,g=function(t,n){for(var e=t,r=t,i=n.length,a=0;a<i;++a){var o=n[a][1];o<e&&(e=o),o>r&&(r=o)}return 1/(r-e)}(d[1],l);p;){var m=i((d[0]+p[0])/2);m[0]-d[0]>=c&&pj(d,m,p,v,g)>hj?l.push(m):(d=p,s.push(p),l.pop()),p=l[l.length-1]}return s}function pj(t,n,e,r,i){var a=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0])),o=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0]));return Math.abs(a-o)}var vj=new Date,gj=new Date;function mj(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return mj((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return vj.setTime(+n),gj.setTime(+r),t(vj),t(gj),Math.floor(e(vj,gj))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var yj=1e3,bj=6e4,xj=60*bj,_j=24*xj,wj=7*_j,kj=mj((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*bj)/_j}),(function(t){return t.getDate()-1})),Mj=(kj.range,mj((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/_j}),(function(t){return t.getUTCDate()-1}))),Oj=(Mj.range,mj((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/_j}),(function(t){return Math.floor(t/_j)})));Oj.range;function Ej(t){return mj((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*bj)/wj}))}var Sj=Ej(0),Dj=Ej(1),Cj=Ej(2),Aj=Ej(3),Tj=Ej(4),Fj=Ej(5),jj=Ej(6);Sj.range,Dj.range,Cj.range,Aj.range,Tj.range,Fj.range,jj.range;function Zj(t){return mj((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/wj}))}var Nj=Zj(0),zj=Zj(1),Uj=Zj(2),Pj=Zj(3),Rj=Zj(4),Lj=Zj(5),Ij=Zj(6),Bj=(Nj.range,zj.range,Uj.range,Pj.range,Rj.range,Lj.range,Ij.range,mj((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));Bj.every=function(t){return isFinite(t=Math.floor(t))&&t>0?mj((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};Bj.range;var qj=mj((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));qj.every=function(t){return isFinite(t=Math.floor(t))&&t>0?mj((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};qj.range;var Hj=mj((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Wj=(Hj.range,mj((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Yj=(Wj.range,mj((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*yj-t.getMinutes()*bj)}),(function(t,n){t.setTime(+t+n*xj)}),(function(t,n){return(n-t)/xj}),(function(t){return t.getHours()}))),Xj=(Yj.range,mj((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*xj)}),(function(t,n){return(n-t)/xj}),(function(t){return t.getUTCHours()}))),Gj=(Xj.range,mj((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*yj)}),(function(t,n){t.setTime(+t+n*bj)}),(function(t,n){return(n-t)/bj}),(function(t){return t.getMinutes()}))),Jj=(Gj.range,mj((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*bj)}),(function(t,n){return(n-t)/bj}),(function(t){return t.getUTCMinutes()}))),$j=(Jj.range,mj((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*yj)}),(function(t,n){return(n-t)/yj}),(function(t){return t.getUTCSeconds()}))),Vj=($j.range,mj((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t})));Vj.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?mj((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Vj:null};Vj.range;var Kj,Qj,tZ,nZ,eZ,rZ,iZ,aZ="year",oZ="quarter",uZ="month",cZ="week",sZ="date",lZ="day",fZ="dayofyear",hZ="hours",dZ="minutes",pZ="seconds",vZ="milliseconds",gZ=[aZ,oZ,uZ,cZ,sZ,lZ,fZ,hZ,dZ,pZ,vZ],mZ=gZ.reduce((function(t,n,e){return t[n]=1+e,t}),{});function yZ(t){var n=(0,g.IX)(t).slice(),e={};return n.length||(0,g.vU)("Missing time unit."),n.forEach((function(t){(0,g.nr)(mZ,t)?e[t]=1:(0,g.vU)("Invalid time unit: ".concat(t,"."))})),(e[cZ]||e[lZ]?1:0)+(e[oZ]||e[uZ]||e[sZ]?1:0)+(e[fZ]?1:0)>1&&(0,g.vU)("Incompatible time units: ".concat(t)),n.sort((function(t,n){return mZ[t]-mZ[n]})),n}var bZ=(Kj={},(0,nt.Z)(Kj,aZ,"%Y "),(0,nt.Z)(Kj,oZ,"Q%q "),(0,nt.Z)(Kj,uZ,"%b "),(0,nt.Z)(Kj,sZ,"%d "),(0,nt.Z)(Kj,cZ,"W%U "),(0,nt.Z)(Kj,lZ,"%a "),(0,nt.Z)(Kj,fZ,"%j "),(0,nt.Z)(Kj,hZ,"%H:00"),(0,nt.Z)(Kj,dZ,"00:%M"),(0,nt.Z)(Kj,pZ,":%S"),(0,nt.Z)(Kj,vZ,".%L"),(0,nt.Z)(Kj,"".concat(aZ,"-").concat(uZ),"%Y-%m "),(0,nt.Z)(Kj,"".concat(aZ,"-").concat(uZ,"-").concat(sZ),"%Y-%m-%d "),(0,nt.Z)(Kj,"".concat(hZ,"-").concat(dZ),"%H:%M"),Kj);function xZ(t,n){var e,r,i=(0,g.l7)({},bZ,n),a=yZ(t),o=a.length,u="",c=0;for(c=0;c<o;)for(e=a.length;e>c;--e)if(null!=i[r=a.slice(c,e).join("-")]){u+=i[r],c=e;break}return u.trim()}var _Z=new Date;function wZ(t){return _Z.setFullYear(t),_Z.setMonth(0),_Z.setDate(1),_Z.setHours(0,0,0,0),_Z}function kZ(t){return OZ(new Date(t))}function MZ(t){return EZ(new Date(t))}function OZ(t){return kj.count(wZ(t.getFullYear())-1,t)}function EZ(t){return Sj.count(wZ(t.getFullYear())-1,t)}function SZ(t){return wZ(t).getDay()}function DZ(t,n,e,r,i,a,o){if(0<=t&&t<100){var u=new Date(-1,n,e,r,i,a,o);return u.setFullYear(t),u}return new Date(t,n,e,r,i,a,o)}function CZ(t){return TZ(new Date(t))}function AZ(t){return FZ(new Date(t))}function TZ(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return Mj.count(n-1,t)}function FZ(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return Nj.count(n-1,t)}function jZ(t){return _Z.setTime(Date.UTC(t,0,1)),_Z.getUTCDay()}function ZZ(t,n,e,r,i,a,o){if(0<=t&&t<100){var u=new Date(Date.UTC(-1,n,e,r,i,a,o));return u.setUTCFullYear(e.y),u}return new Date(Date.UTC(t,n,e,r,i,a,o))}function NZ(t,n,e,r,i){var a=n||1,o=(0,g.fj)(t),u=function(t,n,i){return function(t,n,e,r){var i=e<=1?t:r?function(n,i){return r+e*Math.floor((t(n,i)-r)/e)}:function(n,r){return e*Math.floor(t(n,r)/e)};return n?function(t,e){return n(i(t,e),e)}:i}(e[i=i||t],r[i],t===o&&a,n)},c=new Date,s=(0,g.Rg)(t),l=s[aZ]?u(aZ):(0,g.a9)(2012),f=s[uZ]?u(uZ):s[oZ]?u(oZ):g.bM,h=s[cZ]&&s[lZ]?u(lZ,1,cZ+lZ):s[cZ]?u(cZ,1):s[lZ]?u(lZ,1):s[sZ]?u(sZ,1):s[fZ]?u(fZ,1):g.kX,d=s[hZ]?u(hZ):g.bM,p=s[dZ]?u(dZ):g.bM,v=s[pZ]?u(pZ):g.bM,m=s[vZ]?u(vZ):g.bM;return function(t){c.setTime(+t);var n=l(c);return i(n,f(c),h(c,n),d(c),p(c),v(c),m(c))}}function zZ(t,n,e){return n+7*t-(e+6)%7}var UZ=(Qj={},(0,nt.Z)(Qj,aZ,(function(t){return t.getFullYear()})),(0,nt.Z)(Qj,oZ,(function(t){return Math.floor(t.getMonth()/3)})),(0,nt.Z)(Qj,uZ,(function(t){return t.getMonth()})),(0,nt.Z)(Qj,sZ,(function(t){return t.getDate()})),(0,nt.Z)(Qj,hZ,(function(t){return t.getHours()})),(0,nt.Z)(Qj,dZ,(function(t){return t.getMinutes()})),(0,nt.Z)(Qj,pZ,(function(t){return t.getSeconds()})),(0,nt.Z)(Qj,vZ,(function(t){return t.getMilliseconds()})),(0,nt.Z)(Qj,fZ,(function(t){return OZ(t)})),(0,nt.Z)(Qj,cZ,(function(t){return EZ(t)})),(0,nt.Z)(Qj,cZ+lZ,(function(t,n){return zZ(EZ(t),t.getDay(),SZ(n))})),(0,nt.Z)(Qj,lZ,(function(t,n){return zZ(1,t.getDay(),SZ(n))})),Qj),PZ=(tZ={},(0,nt.Z)(tZ,oZ,(function(t){return 3*t})),(0,nt.Z)(tZ,cZ,(function(t,n){return zZ(t,0,SZ(n))})),tZ);function RZ(t,n){return NZ(t,n||1,UZ,PZ,DZ)}var LZ=(nZ={},(0,nt.Z)(nZ,aZ,(function(t){return t.getUTCFullYear()})),(0,nt.Z)(nZ,oZ,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,nt.Z)(nZ,uZ,(function(t){return t.getUTCMonth()})),(0,nt.Z)(nZ,sZ,(function(t){return t.getUTCDate()})),(0,nt.Z)(nZ,hZ,(function(t){return t.getUTCHours()})),(0,nt.Z)(nZ,dZ,(function(t){return t.getUTCMinutes()})),(0,nt.Z)(nZ,pZ,(function(t){return t.getUTCSeconds()})),(0,nt.Z)(nZ,vZ,(function(t){return t.getUTCMilliseconds()})),(0,nt.Z)(nZ,fZ,(function(t){return TZ(t)})),(0,nt.Z)(nZ,cZ,(function(t){return FZ(t)})),(0,nt.Z)(nZ,lZ,(function(t,n){return zZ(1,t.getUTCDay(),jZ(n))})),(0,nt.Z)(nZ,cZ+lZ,(function(t,n){return zZ(FZ(t),t.getUTCDay(),jZ(n))})),nZ),IZ=(eZ={},(0,nt.Z)(eZ,oZ,(function(t){return 3*t})),(0,nt.Z)(eZ,cZ,(function(t,n){return zZ(t,0,jZ(n))})),eZ);function BZ(t,n){return NZ(t,n||1,LZ,IZ,ZZ)}var qZ=(rZ={},(0,nt.Z)(rZ,aZ,Bj),(0,nt.Z)(rZ,oZ,Hj.every(3)),(0,nt.Z)(rZ,uZ,Hj),(0,nt.Z)(rZ,cZ,Sj),(0,nt.Z)(rZ,sZ,kj),(0,nt.Z)(rZ,lZ,kj),(0,nt.Z)(rZ,fZ,kj),(0,nt.Z)(rZ,hZ,Yj),(0,nt.Z)(rZ,dZ,Gj),(0,nt.Z)(rZ,pZ,$j),(0,nt.Z)(rZ,vZ,Vj),rZ),HZ=(iZ={},(0,nt.Z)(iZ,aZ,qj),(0,nt.Z)(iZ,oZ,Wj.every(3)),(0,nt.Z)(iZ,uZ,Wj),(0,nt.Z)(iZ,cZ,Nj),(0,nt.Z)(iZ,sZ,Mj),(0,nt.Z)(iZ,lZ,Mj),(0,nt.Z)(iZ,fZ,Mj),(0,nt.Z)(iZ,hZ,Xj),(0,nt.Z)(iZ,dZ,Jj),(0,nt.Z)(iZ,pZ,$j),(0,nt.Z)(iZ,vZ,Vj),iZ);function WZ(t){return qZ[t]}function YZ(t){return HZ[t]}function XZ(t,n,e){return t?t.offset(n,e):void 0}function GZ(t,n,e){return XZ(WZ(t),n,e)}function JZ(t,n,e){return XZ(YZ(t),n,e)}function $Z(t,n,e,r){return t?t.range(n,e,r):void 0}function VZ(t,n,e,r){return $Z(WZ(t),n,e,r)}function KZ(t,n,e,r){return $Z(YZ(t),n,e,r)}var QZ=1e3,tN=6e4,nN=36e5,eN=864e5,rN=2592e6,iN=31536e6,aN=[aZ,uZ,sZ,hZ,dZ,pZ,vZ],oN=aN.slice(0,-1),uN=oN.slice(0,-1),cN=uN.slice(0,-1),sN=cN.slice(0,-1),lN=[aZ,uZ],fN=[aZ],hN=[[oN,1,QZ],[oN,5,5e3],[oN,15,15e3],[oN,30,3e4],[uN,1,tN],[uN,5,3e5],[uN,15,9e5],[uN,30,18e5],[cN,1,nN],[cN,3,108e5],[cN,6,216e5],[cN,12,432e5],[sN,1,eN],[[aZ,cZ],1,6048e5],[lN,1,rN],[lN,3,7776e6],[fN,1,iN]];function dN(t){var n,e,r=t.extent,i=t.maxbins||40,a=Math.abs((0,g.yP)(r))/i,o=no((function(t){return t[2]})).right(hN,a);return o===hN.length?(n=fN,e=nu(r[0]/iN,r[1]/iN,i)):o?(n=(o=hN[a/hN[o-1][2]<hN[o][2]/a?o-1:o])[0],e=o[1]):(n=aN,e=Math.max(nu(r[0],r[1],i),1)),{units:n,step:e}}var pN={},vN={},gN=34,mN=10,yN=13;function bN(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function xN(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function _N(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function wN(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+_N(-t,6):t>9999?"+"+_N(t,6):_N(t,4)}(t.getUTCFullYear())+"-"+_N(t.getUTCMonth()+1,2)+"-"+_N(t.getUTCDate(),2)+(i?"T"+_N(n,2)+":"+_N(e,2)+":"+_N(r,2)+"."+_N(i,3)+"Z":r?"T"+_N(n,2)+":"+_N(e,2)+":"+_N(r,2)+"Z":e||n?"T"+_N(n,2)+":"+_N(e,2)+"Z":"")}function kN(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],a=t.length,o=0,u=0,c=a<=0,s=!1;function l(){if(c)return vN;if(s)return s=!1,pN;var n,r,i=o;if(t.charCodeAt(i)===gN){for(;o++<a&&t.charCodeAt(o)!==gN||t.charCodeAt(++o)===gN;);return(n=o)>=a?c=!0:(r=t.charCodeAt(o++))===mN?s=!0:r===yN&&(s=!0,t.charCodeAt(o)===mN&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(n=o++))===mN)s=!0;else if(r===yN)s=!0,t.charCodeAt(o)===mN&&++o;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===mN&&--a,t.charCodeAt(a-1)===yN&&--a;(r=l())!==vN;){for(var f=[];r!==pN&&r!==vN;)f.push(r),r=l();n&&null==(f=n(f,u++))||i.push(f)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return o(n[t])})).join(t)}))}function a(n){return n.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?wN(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,a=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=bN(t);return function(r,i){return n(e(r),i,t)}}(t,n):bN(t)}));return a.columns=i||[],a},parseRows:r,format:function(n,e){return null==e&&(e=xN(n)),[e.map(o).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=xN(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var MN,ON=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function EN(t){if(!(n=ON.exec(t)))throw new Error("invalid format: "+t);var n;return new SN({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function SN(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function DN(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function CN(t){return(t=DN(Math.abs(t)))?t[1]:NaN}function AN(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(CN(n)/3)))-CN(Math.abs(t)))}function TN(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,CN(n)-CN(t))+1}function FN(t){return Math.max(0,-CN(Math.abs(t)))}function jN(t,n){var e=DN(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}EN.prototype=SN.prototype,SN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ZN={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return jN(100*t,n)},r:jN,s:function(t,n){var e=DN(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(MN=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+DN(t,Math.max(0,n+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function NN(t){return t}var zN,UN,PN,RN=Array.prototype.map,LN=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function IN(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?NN:(n=RN.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[o=(o+1)%n.length];return a.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?NN:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(RN.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=EN(t)).fill,e=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):ZN[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?c:"",_=ZN[y],w=/[defgprs%]/.test(y);function k(t){var i,a,c,h=b,k=x;if("c"===y)k=_(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),m&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0===+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===y?LN[8+MN/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(c=t.charCodeAt(i))||c>57){k=(46===c?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var O=h.length+t.length+k.length,E=O<p?new Array(p-O+1).join(n):"";switch(v&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),e){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,O=E.length>>1)+h+t+k+E.slice(O);break;default:t=E+h+t+k}return u(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,n){var e=f(((t=EN(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(CN(n)/3))),i=Math.pow(10,-r),a=LN[8+r/3];return function(t){return e(i*t)+a}}}}!function(t){zN=IN(t),UN=zN.format,PN=zN.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var BN=new Date,qN=new Date;function HN(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return HN((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return BN.setTime(+n),qN.setTime(+r),t(BN),t(qN),Math.floor(e(BN,qN))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var WN=6e4,YN=24*(60*WN),XN=7*YN;function GN(t){return HN((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*WN)/XN}))}var JN=GN(0),$N=GN(1),VN=GN(2),KN=GN(3),QN=GN(4),tz=GN(5),nz=GN(6);JN.range,$N.range,VN.range,KN.range,QN.range,tz.range,nz.range;function ez(t){return HN((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/XN}))}var rz=ez(0),iz=ez(1),az=ez(2),oz=ez(3),uz=ez(4),cz=ez(5),sz=ez(6),lz=(rz.range,iz.range,az.range,oz.range,uz.range,cz.range,sz.range,HN((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*WN)/YN}),(function(t){return t.getDate()-1}))),fz=(lz.range,HN((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/YN}),(function(t){return t.getUTCDate()-1}))),hz=(fz.range,HN((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/YN}),(function(t){return Math.floor(t/YN)}))),dz=(hz.range,HN((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));dz.every=function(t){return isFinite(t=Math.floor(t))&&t>0?HN((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};dz.range;var pz=HN((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));pz.every=function(t){return isFinite(t=Math.floor(t))&&t>0?HN((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};pz.range;function vz(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gz(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mz(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function yz(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,c=t.shortMonths,s=Fz(i),l=jz(i),f=Fz(a),h=jz(a),d=Fz(o),p=jz(o),v=Fz(u),g=jz(u),m=Fz(c),y=jz(c),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:tU,e:tU,f:aU,g:gU,G:yU,H:nU,I:eU,j:rU,L:iU,m:oU,M:uU,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:IU,s:BU,S:cU,u:sU,U:lU,V:hU,w:dU,W:pU,x:null,X:null,y:vU,Y:mU,Z:bU,"%":LU},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:xU,e:xU,f:OU,g:zU,G:PU,H:_U,I:wU,j:kU,L:MU,m:EU,M:SU,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:IU,s:BU,S:DU,u:CU,U:AU,V:FU,w:jU,W:ZU,x:null,X:null,y:NU,Y:UU,Z:RU,"%":LU},_={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=m.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:Hz,e:Hz,f:$z,g:Lz,G:Rz,H:Yz,I:Yz,j:Wz,L:Jz,m:qz,M:Xz,p:function(t,n,e){var r=s.exec(n.slice(e));return r?(t.p=l.get(r[0].toLowerCase()),e+r[0].length):-1},q:Bz,Q:Kz,s:Qz,S:Gz,u:Nz,U:zz,V:Uz,w:Zz,W:Pz,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:Lz,Y:Rz,Z:Iz,"%":Vz};function w(t,n){return function(e){var r,i,a,o=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(o.push(t.slice(c,u)),null!=(i=Ez[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=n[r])&&(r=a(e,i)),o.push(r),c=u+1);return o.push(t.slice(c,u)),o.join("")}}function k(t,n){return function(e){var r,i,a=mz(1900,void 0,1);if(M(a,t,e+="",0)!=e.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(n&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=gz(mz(a.y,0,1))).getUTCDay(),r=i>4||0===i?iz.ceil(r):iz(r),r=fz.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=vz(mz(a.y,0,1))).getDay(),r=i>4||0===i?$N.ceil(r):$N(r),r=lz.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?gz(mz(a.y,0,1)).getUTCDay():vz(mz(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,gz(a)):vz(a)}}function M(t,n,e,r){for(var i,a,o=0,u=n.length,c=e.length;o<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(o++))){if(i=n.charAt(o++),!(a=_[i in Ez?n.charAt(o++):i])||(r=a(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),x.x=w(e,x),x.X=w(r,x),x.c=w(n,x),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=k(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var n=k(t+="",!0);return n.toString=function(){return t},n}}}var bz,xz,_z,wz,kz,Mz,Oz,Ez={"-":"",_:" ",0:"0"},Sz=/^\s*\d+/,Dz=/^%/,Cz=/[\\^$*+?|[\]().{}]/g;function Az(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function Tz(t){return t.replace(Cz,"\\$&")}function Fz(t){return new RegExp("^(?:"+t.map(Tz).join("|")+")","i")}function jz(t){return new Map(t.map((function(t,n){return[t.toLowerCase(),n]})))}function Zz(t,n,e){var r=Sz.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Nz(t,n,e){var r=Sz.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function zz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Uz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Pz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Rz(t,n,e){var r=Sz.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Lz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Iz(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Bz(t,n,e){var r=Sz.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function qz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Hz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Wz(t,n,e){var r=Sz.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Yz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Xz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function Gz(t,n,e){var r=Sz.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Jz(t,n,e){var r=Sz.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function $z(t,n,e){var r=Sz.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Vz(t,n,e){var r=Dz.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Kz(t,n,e){var r=Sz.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Qz(t,n,e){var r=Sz.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function tU(t,n){return Az(t.getDate(),n,2)}function nU(t,n){return Az(t.getHours(),n,2)}function eU(t,n){return Az(t.getHours()%12||12,n,2)}function rU(t,n){return Az(1+lz.count(dz(t),t),n,3)}function iU(t,n){return Az(t.getMilliseconds(),n,3)}function aU(t,n){return iU(t,n)+"000"}function oU(t,n){return Az(t.getMonth()+1,n,2)}function uU(t,n){return Az(t.getMinutes(),n,2)}function cU(t,n){return Az(t.getSeconds(),n,2)}function sU(t){var n=t.getDay();return 0===n?7:n}function lU(t,n){return Az(JN.count(dz(t)-1,t),n,2)}function fU(t){var n=t.getDay();return n>=4||0===n?QN(t):QN.ceil(t)}function hU(t,n){return t=fU(t),Az(QN.count(dz(t),t)+(4===dz(t).getDay()),n,2)}function dU(t){return t.getDay()}function pU(t,n){return Az($N.count(dz(t)-1,t),n,2)}function vU(t,n){return Az(t.getFullYear()%100,n,2)}function gU(t,n){return Az((t=fU(t)).getFullYear()%100,n,2)}function mU(t,n){return Az(t.getFullYear()%1e4,n,4)}function yU(t,n){var e=t.getDay();return Az((t=e>=4||0===e?QN(t):QN.ceil(t)).getFullYear()%1e4,n,4)}function bU(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Az(n/60|0,"0",2)+Az(n%60,"0",2)}function xU(t,n){return Az(t.getUTCDate(),n,2)}function _U(t,n){return Az(t.getUTCHours(),n,2)}function wU(t,n){return Az(t.getUTCHours()%12||12,n,2)}function kU(t,n){return Az(1+fz.count(pz(t),t),n,3)}function MU(t,n){return Az(t.getUTCMilliseconds(),n,3)}function OU(t,n){return MU(t,n)+"000"}function EU(t,n){return Az(t.getUTCMonth()+1,n,2)}function SU(t,n){return Az(t.getUTCMinutes(),n,2)}function DU(t,n){return Az(t.getUTCSeconds(),n,2)}function CU(t){var n=t.getUTCDay();return 0===n?7:n}function AU(t,n){return Az(rz.count(pz(t)-1,t),n,2)}function TU(t){var n=t.getUTCDay();return n>=4||0===n?uz(t):uz.ceil(t)}function FU(t,n){return t=TU(t),Az(uz.count(pz(t),t)+(4===pz(t).getUTCDay()),n,2)}function jU(t){return t.getUTCDay()}function ZU(t,n){return Az(iz.count(pz(t)-1,t),n,2)}function NU(t,n){return Az(t.getUTCFullYear()%100,n,2)}function zU(t,n){return Az((t=TU(t)).getUTCFullYear()%100,n,2)}function UU(t,n){return Az(t.getUTCFullYear()%1e4,n,4)}function PU(t,n){var e=t.getUTCDay();return Az((t=e>=4||0===e?uz(t):uz.ceil(t)).getUTCFullYear()%1e4,n,4)}function RU(){return"+0000"}function LU(){return"%"}function IU(t){return+t}function BU(t){return Math.floor(+t/1e3)}function qU(t){var n={};return function(e){return n[e]||(n[e]=t(e))}}function HU(t){var n=qU(t.format),e=t.formatPrefix;return{format:n,formatPrefix:e,formatFloat:function(t){var e,r,i=EN(t||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return e=n(i),r=n(".1f")(1)[1],function(t){var n=e(t),i=n.indexOf(r);if(i<0)return n;for(var a=function(t,n){var e,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>n;)if((e=t.charCodeAt(r))>=48&&e<=57)return r+1}(n,i),o=a<n.length?n.slice(a):"";--a>i;)if("0"!==n[a]){++a;break}return n.slice(0,a)+o}}return n(i)},formatSpan:function(t,r,i,a){a=EN(null==a?",f":a);var o,u=nu(t,r,i),c=Math.max(Math.abs(t),Math.abs(r));if(null==a.precision)switch(a.type){case"s":return isNaN(o=AN(u,c))||(a.precision=o),e(a,c);case"":case"e":case"g":case"p":case"r":isNaN(o=TN(u,c))||(a.precision=o-("e"===a.type));break;case"f":case"%":isNaN(o=FN(u))||(a.precision=o-2*("%"===a.type))}return n(a)}}}function WU(){return Mz=HU({format:UN,formatPrefix:PN})}function YU(t){return HU(IN(t))}function XU(t){return arguments.length?Mz=YU(t):Mz}function GU(t,n,e){e=e||{},(0,g.Kn)(e)||(0,g.vU)("Invalid time multi-format specifier: ".concat(e));var r=n(vn),i=n(pn),a=n(dn),o=n(ln),u=n(sn),c=n(cn),s=n(un),l=n(on),f=t(e[gn]||".%L"),h=t(e[vn]||":%S"),d=t(e[pn]||"%I:%M"),p=t(e[dn]||"%I %p"),v=t(e[ln]||e[fn]||"%a %d"),m=t(e[sn]||"%b %d"),y=t(e[cn]||"%B"),b=t(e[un]||"%B"),x=t(e[on]||"%Y");return function(t){return(r(t)<t?f:i(t)<t?h:a(t)<t?d:o(t)<t?p:c(t)<t?u(t)<t?v:m:l(t)<t?s(t)<t?y:b:x)(t)}}function JU(t){var n=qU(t.format),e=qU(t.utcFormat);return{timeFormat:function(t){return(0,g.HD)(t)?n(t):GU(n,An,t)},utcFormat:function(t){return(0,g.HD)(t)?e(t):GU(e,Tn,t)},timeParse:qU(t.parse),utcParse:qU(t.utcParse)}}function $U(){return Oz=JU({format:xz,parse:_z,utcFormat:wz,utcParse:kz})}function VU(t){return JU(yz(t))}function KU(t){return arguments.length?Oz=VU(t):Oz}!function(t){bz=yz(t),xz=bz.format,_z=bz.parse,wz=bz.utcFormat,kz=bz.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),WU(),$U();var QU=function(t,n){return(0,g.l7)({},t,n)};function tP(t,n){var e=t?YU(t):XU(),r=n?VU(n):KU();return QU(e,r)}function nP(t,n){var e=arguments.length;return e&&2!==e&&(0,g.vU)("defaultLocale expects either zero or two arguments."),e?QU(XU(t),KU(n)):QU(XU(),KU())}function eP(){return WU(),$U(),nP()}var rP=/^(data:|([A-Za-z]+:)?\/\/)/,iP=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,aP=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,oP="file://";function uP(t,n){return cP.apply(this,arguments)}function cP(){return(cP=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(n,e);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,e));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function sP(t,n){return lP.apply(this,arguments)}function lP(){return lP=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i,a,o,u,c,s;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,g.l7)({},this.options,e),r=this.fileAccess,i={href:null},c=iP.test(n.replace(aP,"")),null!=n&&"string"===typeof n&&c||(0,g.vU)("Sanitize failure, invalid URI: "+(0,g.m8)(n)),s=rP.test(n),(u=e.baseURL)&&!s&&(n.startsWith("/")||u.endsWith("/")||(n="/"+n),n=u+n),o=(a=n.startsWith(oP))||"file"===e.mode||"http"!==e.mode&&!s&&r,a?n=n.slice(oP.length):n.startsWith("//")&&("file"===e.defaultProtocol?(n=n.slice(2),o=!0):n=(e.defaultProtocol||"http")+":"+n),Object.defineProperty(i,"localFile",{value:!!o}),i.href=n,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),lP.apply(this,arguments)}function fP(t){return t?function(n){return new Promise((function(e,r){t.readFile(n,(function(t,n){t?r(t):e(n)}))}))}:hP}function hP(){return dP.apply(this,arguments)}function dP(){return(dP=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pP(t){return t?function(){var n=(0,y.Z)((0,m.Z)().mark((function n(e,r){var i,a,o;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,g.l7)({},this.options.http,r),a=r&&r.response,n.next=4,t(e,i);case 4:return o=n.sent,n.abrupt("return",o.ok?(0,g.mf)(o[a])?o[a]():o.text():(0,g.vU)(o.status+""+o.statusText));case 6:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}():vP}function vP(){return gP.apply(this,arguments)}function gP(){return(gP=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var mP=function(t){return null!=t&&t===t},yP=function(t){return!Number.isNaN(+t)&&!(t instanceof Date)},bP={boolean:g.sw,integer:g.He,number:g.He,date:g.ZU,string:g.BB,unknown:g.yR},xP=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return yP(t)&&Number.isInteger(+t)},yP,function(t){return!Number.isNaN(Date.parse(t))}],_P=["boolean","integer","number","date"];function wP(t,n){if(!t||!t.length)return"unknown";for(var e,r,i=t.length,a=xP.length,o=xP.map((function(t,n){return n+1})),u=0,c=0;u<i;++u)for(r=n?t[u][n]:t[u],e=0;e<a;++e)if(o[e]&&mP(r)&&!xP[e](r)&&(o[e]=0,++c===xP.length))return"string";return _P[o.reduce((function(t,n){return 0===t?n:t}),0)-1]}function kP(t,n){return n.reduce((function(n,e){return n[e]=wP(t,e),n}),{})}function MP(t){var n=function(n,e){var r={delimiter:t};return OP(n,e?(0,g.l7)(e,r):r)};return n.responseType="text",n}function OP(t,n){return n.header&&(t=n.header.map(g.m8).join(n.delimiter)+"\n"+t),kN(n.delimiter).parse(t+"")}function EP(t,n){var e,r=n&&n.property?(0,g.EP)(n.property):g.yR;return!(0,g.Kn)(t)||(e=t,"function"===typeof Buffer&&(0,g.mf)(Buffer.isBuffer)&&Buffer.isBuffer(e))?r(JSON.parse(t)):function(t,n){!(0,g.kJ)(t)&&(0,g.TW)(t)&&(t=(0,b.Z)(t));return n&&n.copy?JSON.parse(JSON.stringify(t)):t}(r(t),n)}OP.responseType="text",EP.responseType="json";var SP={interior:function(t,n){return t!==n},exterior:function(t,n){return t===n}};function DP(t,n){var e,r,i,a;return t=EP(t,n),n&&n.feature?(e=T,i=n.feature):n&&n.mesh?(e=N,i=n.mesh,a=SP[n.filter]):(0,g.vU)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?e(t,r,a):(0,g.vU)("Invalid TopoJSON object: "+i))&&r.features||[r]}DP.responseType="json";var CP={dsv:OP,csv:MP(","),tsv:MP("\t"),json:EP,topojson:DP};function AP(t,n){return arguments.length>1?(CP[t]=n,this):(0,g.nr)(CP,t)?CP[t]:null}function TP(t){var n=AP(t);return n&&n.responseType||"text"}function FP(t,n,e,r){var i=AP((n=n||{}).type||"json");return i||(0,g.vU)("Unknown data format type: "+n.type),t=i(t,n),n.parse&&function(t,n,e,r){if(!t.length)return;var i=KU();e=e||i.timeParse,r=r||i.utcParse;var a,o,u,c,s,l,f=t.columns||Object.keys(t[0]);"auto"===n&&(n=kP(t,f));var h=(f=Object.keys(n)).map((function(t){var i,a,o=n[t];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(a=(i=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),("utc"===i[0]?r:e)(a);if(!bP[o])throw Error("Illegal format pattern: "+t+":"+o);return bP[o]}));for(u=0,s=t.length,l=f.length;u<s;++u)for(a=t[u],c=0;c<l;++c)a[o=f[c]]=h[c](a[o])}(t,n.parse,e,r),(0,g.nr)(t,"columns")&&delete t.columns,t}var jP=function(t,n){return function(e){return{options:e||{},sanitize:sP,load:uP,fileAccess:!!n,file:fP(n),http:pP(t)}}}("undefined"!==typeof fetch&&fetch,null);function ZP(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function NP(t){this._context=t}function zP(){}function UP(t){this._context=t}function PP(t){this._context=t}function RP(t,n){this._basis=new NP(t),this._beta=n}NP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ZP(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ZP(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},UP.prototype={areaStart:zP,areaEnd:zP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:ZP(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},PP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:ZP(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},RP.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],a=n[0],o=t[e]-i,u=n[e]-a,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*o),this._beta*n[c]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var LP=function t(n){function e(t){return 1===n?new NP(t):new RP(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function IP(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function BP(t,n){this._context=t,this._k=(1-n)/6}BP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:IP(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:IP(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var qP=function t(n){function e(t){return new BP(t,n)}return e.tension=function(n){return t(+n)},e}(0);function HP(t,n){this._context=t,this._k=(1-n)/6}HP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:IP(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var WP=function t(n){function e(t){return new HP(t,n)}return e.tension=function(n){return t(+n)},e}(0);function YP(t,n){this._context=t,this._k=(1-n)/6}YP.prototype={areaStart:zP,areaEnd:zP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:IP(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var XP=function t(n){function e(t){return new YP(t,n)}return e.tension=function(n){return t(+n)},e}(0),GP=Math.abs,JP=Math.atan2,$P=Math.cos,VP=Math.max,KP=Math.min,QP=Math.sin,tR=Math.sqrt,nR=1e-12,eR=Math.PI,rR=eR/2,iR=2*eR;function aR(t){return t>=1?rR:t<=-1?-rR:Math.asin(t)}function oR(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>nR){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>nR){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-n*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function uR(t,n){this._context=t,this._alpha=n}uR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:oR(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var cR=function t(n){function e(t){return n?new uR(t,n):new BP(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function sR(t,n){this._context=t,this._alpha=n}sR.prototype={areaStart:zP,areaEnd:zP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:oR(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var lR=function t(n){function e(t){return n?new sR(t,n):new YP(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function fR(t,n){this._context=t,this._alpha=n}fR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oR(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var hR=function t(n){function e(t){return n?new fR(t,n):new HP(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function dR(t){this._context=t}function pR(t){return new dR(t)}function vR(t){this._context=t}function gR(t){return t<0?-1:1}function mR(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(gR(a)+gR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function yR(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function bR(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*n,a-u,o-u*e,a,o)}function xR(t){this._context=t}function _R(t){this._context=new wR(t)}function wR(t){this._context=t}function kR(t){this._context=t}function MR(t){var n,e,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/a[n-1],a[n]-=e,o[n]-=e*o[n-1];for(i[r-1]=o[r-1]/a[r-1],n=r-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function OR(t,n){this._context=t,this._t=n}function ER(t){return function(){return t}}dR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},vR.prototype={areaStart:zP,areaEnd:zP,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},xR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bR(this,this._t0,yR(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,bR(this,yR(this,e=mR(this,t,n)),e);break;default:bR(this,this._t0,e=mR(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(_R.prototype=Object.create(xR.prototype)).point=function(t,n){xR.prototype.point.call(this,n,t)},wR.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}},kR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=MR(t),i=MR(n),a=0,o=1;o<e;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},OR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var SR,DR,CR,AR,TR,FR,jR,ZR,NR,zR,UR,PR,RR,LR,IR=e(99500),BR=Math.PI,qR=2*BR,HR=1e-6,WR=qR-HR;function YR(t){this._+=t[0];for(var n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}var XR=function(){function t(n){(0,rk.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==n?YR:function(t){var n=Math.floor(t);if(!(n>=0))throw new Error("invalid digits: ".concat(t));if(n>15)return YR;var e=Math.pow(10,n);return function(t){this._+=t[0];for(var n=1,r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}(n)}return(0,ik.Z)(t,[{key:"moveTo",value:function(t,n){this._append(SR||(SR=(0,IR.Z)(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+n)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(DR||(DR=(0,IR.Z)(["Z"]))))}},{key:"lineTo",value:function(t,n){this._append(CR||(CR=(0,IR.Z)(["L",",",""])),this._x1=+t,this._y1=+n)}},{key:"quadraticCurveTo",value:function(t,n,e,r){this._append(AR||(AR=(0,IR.Z)(["Q",",",",",",",""])),+t,+n,this._x1=+e,this._y1=+r)}},{key:"bezierCurveTo",value:function(t,n,e,r,i,a){this._append(TR||(TR=(0,IR.Z)(["C",",",",",",",",",",",""])),+t,+n,+e,+r,this._x1=+i,this._y1=+a)}},{key:"arcTo",value:function(t,n,e,r,i){if(t=+t,n=+n,e=+e,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var a=this._x1,o=this._y1,u=e-t,c=r-n,s=a-t,l=o-n,f=s*s+l*l;if(null===this._x1)this._append(FR||(FR=(0,IR.Z)(["M",",",""])),this._x1=t,this._y1=n);else if(f>HR)if(Math.abs(l*u-c*s)>HR&&i){var h=e-a,d=r-o,p=u*u+c*c,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((BR-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>HR&&this._append(ZR||(ZR=(0,IR.Z)(["L",",",""])),t+b*s,n+b*l),this._append(NR||(NR=(0,IR.Z)(["A",",",",0,0,",",",",",""])),i,i,+(l*h>s*d),this._x1=t+x*u,this._y1=n+x*c)}else this._append(jR||(jR=(0,IR.Z)(["L",",",""])),this._x1=t,this._y1=n);else;}},{key:"arc",value:function(t,n,e,r,i,a){if(t=+t,n=+n,a=!!a,(e=+e)<0)throw new Error("negative radius: ".concat(e));var o=e*Math.cos(r),u=e*Math.sin(r),c=t+o,s=n+u,l=1^a,f=a?r-i:i-r;null===this._x1?this._append(zR||(zR=(0,IR.Z)(["M",",",""])),c,s):(Math.abs(this._x1-c)>HR||Math.abs(this._y1-s)>HR)&&this._append(UR||(UR=(0,IR.Z)(["L",",",""])),c,s),e&&(f<0&&(f=f%qR+qR),f>WR?this._append(PR||(PR=(0,IR.Z)(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),e,e,l,t-o,n-u,e,e,l,this._x1=c,this._y1=s):f>HR&&this._append(RR||(RR=(0,IR.Z)(["A",",",",0,",",",",",",",""])),e,e,+(f>=BR),l,this._x1=t+e*Math.cos(i),this._y1=n+e*Math.sin(i)))}},{key:"rect",value:function(t,n,e,r){this._append(LR||(LR=(0,IR.Z)(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+n,e=+e,+r,-e)}},{key:"toString",value:function(){return this._}}]),t}();function GR(){return new XR}function JR(t){var n=3;return t.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{var r=Math.floor(e);if(!(r>=0))throw new RangeError("invalid digits: ".concat(e));n=r}return t},function(){return new XR(n)}}function $R(t){return t.innerRadius}function VR(t){return t.outerRadius}function KR(t){return t.startAngle}function QR(t){return t.endAngle}function tL(t){return t&&t.padAngle}function nL(t,n,e,r,i,a,o){var u=t-e,c=n-r,s=(o?a:-a)/tR(u*u+c*c),l=s*c,f=-s*u,h=t+l,d=n+f,p=e+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,_=i-a,w=h*v-p*d,k=(b<0?-1:1)*tR(VP(0,_*_*x-w*w)),M=(w*b-y*k)/x,O=(-w*y-b*k)/x,E=(w*b+y*k)/x,S=(-w*y+b*k)/x,D=M-g,C=O-m,A=E-g,T=S-m;return D*D+C*C>A*A+T*T&&(M=E,O=S),{cx:M,cy:O,x01:-l,y01:-f,x11:M*(i/_-1),y11:O*(i/_-1)}}GR.prototype=XR.prototype;Array.prototype.slice;function eL(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function rL(t){return t[0]}function iL(t){return t[1]}function aL(t,n){var e=ER(!0),r=null,i=pR,a=null,o=JR(u);function u(u){var c,s,l,f=(u=eL(u)).length,h=!1;for(null==r&&(a=i(l=o())),c=0;c<=f;++c)!(c<f&&e(s=u[c],c,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(s,c,u),+n(s,c,u));if(l)return a=null,l+""||null}return t="function"===typeof t?t:void 0===t?rL:ER(t),n="function"===typeof n?n:void 0===n?iL:ER(n),u.x=function(n){return arguments.length?(t="function"===typeof n?n:ER(+n),u):t},u.y=function(t){return arguments.length?(n="function"===typeof t?t:ER(+t),u):n},u.defined=function(t){return arguments.length?(e="function"===typeof t?t:ER(!!t),u):e},u.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),u):i},u.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),u):r},u}function oL(t,n,e){var r=null,i=ER(!0),a=null,o=pR,u=null,c=JR(s);function s(s){var l,f,h,d,p,v=(s=eL(s)).length,g=!1,m=new Array(v),y=new Array(v);for(null==a&&(u=o(p=c())),l=0;l<=v;++l){if(!(l<v&&i(d=s[l],l,s))===g)if(g=!g)f=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=l-1;h>=f;--h)u.point(m[h],y[h]);u.lineEnd(),u.areaEnd()}g&&(m[l]=+t(d,l,s),y[l]=+n(d,l,s),u.point(r?+r(d,l,s):m[l],e?+e(d,l,s):y[l]))}if(p)return u=null,p+""||null}function l(){return aL().defined(i).curve(o).context(a)}return t="function"===typeof t?t:void 0===t?rL:ER(+t),n="function"===typeof n?n:ER(void 0===n?0:+n),e="function"===typeof e?e:void 0===e?iL:ER(+e),s.x=function(n){return arguments.length?(t="function"===typeof n?n:ER(+n),r=null,s):t},s.x0=function(n){return arguments.length?(t="function"===typeof n?n:ER(+n),s):t},s.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:ER(+t),s):r},s.y=function(t){return arguments.length?(n="function"===typeof t?t:ER(+t),e=null,s):n},s.y0=function(t){return arguments.length?(n="function"===typeof t?t:ER(+t),s):n},s.y1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:ER(+t),s):e},s.lineX0=s.lineY0=function(){return l().x(t).y(n)},s.lineY1=function(){return l().x(t).y(e)},s.lineX1=function(){return l().x(r).y(n)},s.defined=function(t){return arguments.length?(i="function"===typeof t?t:ER(!!t),s):i},s.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),s):o},s.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),s):a},s}tR(3);var uL={draw:function(t,n){var e=tR(n/eR);t.moveTo(e,0),t.arc(0,0,e,0,iR)}},cL=(tR(1/3),QP(eR/10)/QP(7*eR/10));QP(iR/10),$P(iR/10),tR(3),tR(3),tR(3),tR(12);function sL(t){return+t}var lL=[0,1];function fL(t){return t}function hL(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function dL(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=hL(i,r),a=e(o,a)):(r=hL(r,i),a=e(a,o)),function(t){return a(r(t))}}function pL(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=hL(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=sF(t,n,1,r)-1;return a[e](i[e](n))}}function vL(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gL(){var t,n,e,r,i,a,o=lL,u=lL,c=D_,s=fL;function l(){var t=Math.min(o.length,u.length);return s!==fL&&(s=function(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}(o[0],o[t-1])),r=t>2?pL:dL,i=a=null,f}function f(n){return null==n||isNaN(n=+n)?e:(i||(i=r(o.map(t),u,c)))(t(s(n)))}return f.invert=function(e){return s(n((a||(a=r(u,o.map(t),M_.Z)))(e)))},f.domain=function(t){return arguments.length?(o=Array.from(t,sL),l()):o.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),l()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),c=g_,l()},f.clamp=function(t){return arguments.length?(s=!!t||fL,l()):s!==fL},f.interpolate=function(t){return arguments.length?(c=t,l()):c},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,l()}}function mL(){return gL()(fL,fL)}function yL(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function bL(t,n){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof n?this.interpolator(n):this.range(n)}return this}function xL(t,n,e,r){var i,a=nu(t,n,e);switch((r=EN(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=AN(a,o))||(r.precision=i),PN(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=TN(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=FN(a))||(r.precision=i-2*("%"===r.type))}return UN(r)}function _L(t){var n=t.domain;return t.ticks=function(t){var e=n();return Qo(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return xL(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,u=a.length-1,c=a[o],s=a[u],l=10;for(s<c&&(i=c,c=s,s=i,i=o,o=u,u=i);l-- >0;){if((i=tu(c,s,e))===r)return a[o]=c,a[u]=s,n(a);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function wL(){var t=mL();return t.copy=function(){return vL(t,wL())},yL.apply(t,arguments),_L(t)}function kL(t){var n;function e(t){return null==t||isNaN(t=+t)?n:t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Array.from(n,sL),e):t.slice()},e.unknown=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return kL(t).unknown(n)},t=arguments.length?Array.from(t,sL):[0,1],_L(e)}function ML(t,n){var e,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(e=r,r=i,i=e,e=a,a=o,o=e),t[r]=n.floor(a),t[i]=n.ceil(o),t}function OL(t){return Math.log(t)}function EL(t){return Math.exp(t)}function SL(t){return-Math.log(-t)}function DL(t){return-Math.exp(-t)}function CL(t){return isFinite(t)?+("1e"+t):t<0?0:t}function AL(t){return function(n,e){return-t(-n,e)}}function TL(t){var n,e,r=t(OL,EL),i=r.domain,a=10;function o(){return n=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}(a),e=function(t){return 10===t?CL:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}(a),i()[0]<0?(n=AL(n),e=AL(e),t(SL,DL)):t(OL,EL),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r=i(),o=r[0],u=r[r.length-1],c=u<o;if(c){var s=[u,o];o=s[0],u=s[1]}var l,f,h=n(o),d=n(u),p=null==t?10:+t,v=[];if(!(a%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(l=1;l<a;++l)if(!((f=h<0?l/e(-h):l*e(h))<o)){if(f>u)break;v.push(f)}}else for(;h<=d;++h)for(l=a-1;l>=1;--l)if(!((f=h>0?l/e(-h):l*e(h))<o)){if(f>u)break;v.push(f)}2*v.length<p&&(v=Qo(o,u,p))}else v=Qo(h,d,Math.min(d-h,p)).map(e);return c?v.reverse():v},r.tickFormat=function(t,i){if(null==t&&(t=10),null==i&&(i=10===a?"s":","),"function"!==typeof i&&(a%1||null!=(i=EN(i)).precision||(i.trim=!0),i=UN(i)),t===1/0)return i;var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/e(Math.round(n(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(ML(i(),{floor:function(t){return e(Math.floor(n(t)))},ceil:function(t){return e(Math.ceil(n(t)))}}))},r}function FL(){var t=TL(gL()).domain([1,10]);return t.copy=function(){return vL(t,FL()).base(t.base())},yL.apply(t,arguments),t}function jL(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function ZL(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function NL(t){return t<0?-t*t:t*t}function zL(t){var n=t(fL,fL),e=1;return n.exponent=function(n){return arguments.length?1===(e=+n)?t(fL,fL):.5===e?t(ZL,NL):t(jL(e),jL(1/e)):e},_L(n)}function UL(){var t=zL(gL());return t.copy=function(){return vL(t,UL()).exponent(t.exponent())},yL.apply(t,arguments),t}function PL(){return UL.apply(null,arguments).exponent(.5)}function RL(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function LL(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function IL(t){var n=1,e=t(RL(n),LL(n));return e.constant=function(e){return arguments.length?t(RL(n=+e),LL(n)):n},_L(e)}function BL(){var t=IL(gL());return t.copy=function(){return vL(t,BL()).constant(t.constant())},yL.apply(t,arguments)}var qL=1e3,HL=60*qL,WL=60*HL,YL=24*WL,XL=7*YL,GL=30*YL,JL=365*YL,$L=new Date,VL=new Date;function KL(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return KL((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return $L.setTime(+n),VL.setTime(+r),t($L),t(VL),Math.floor(e($L,VL))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var QL=KL((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));QL.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?KL((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):QL:null};QL.range;var tI=KL((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*qL)}),(function(t,n){return(n-t)/qL}),(function(t){return t.getUTCSeconds()})),nI=(tI.range,KL((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*qL)}),(function(t,n){t.setTime(+t+n*HL)}),(function(t,n){return(n-t)/HL}),(function(t){return t.getMinutes()}))),eI=(nI.range,KL((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*HL)}),(function(t,n){return(n-t)/HL}),(function(t){return t.getUTCMinutes()}))),rI=(eI.range,KL((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*qL-t.getMinutes()*HL)}),(function(t,n){t.setTime(+t+n*WL)}),(function(t,n){return(n-t)/WL}),(function(t){return t.getHours()}))),iI=(rI.range,KL((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*WL)}),(function(t,n){return(n-t)/WL}),(function(t){return t.getUTCHours()}))),aI=(iI.range,KL((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*HL)/YL}),(function(t){return t.getDate()-1}))),oI=(aI.range,KL((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/YL}),(function(t){return t.getUTCDate()-1}))),uI=(oI.range,KL((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/YL}),(function(t){return Math.floor(t/YL)})));uI.range;function cI(t){return KL((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*HL)/XL}))}var sI=cI(0),lI=cI(1),fI=cI(2),hI=cI(3),dI=cI(4),pI=cI(5),vI=cI(6);sI.range,lI.range,fI.range,hI.range,dI.range,pI.range,vI.range;function gI(t){return KL((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/XL}))}var mI=gI(0),yI=gI(1),bI=gI(2),xI=gI(3),_I=gI(4),wI=gI(5),kI=gI(6),MI=(mI.range,yI.range,bI.range,xI.range,_I.range,wI.range,kI.range,KL((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),OI=(MI.range,KL((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),EI=(OI.range,KL((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));EI.every=function(t){return isFinite(t=Math.floor(t))&&t>0?KL((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};EI.range;var SI=KL((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));SI.every=function(t){return isFinite(t=Math.floor(t))&&t>0?KL((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};SI.range;function DI(t,n,e,r,i,a){var o=[[tI,1,qL],[tI,5,5*qL],[tI,15,15*qL],[tI,30,30*qL],[a,1,HL],[a,5,5*HL],[a,15,15*HL],[a,30,30*HL],[i,1,WL],[i,3,3*WL],[i,6,6*WL],[i,12,12*WL],[r,1,YL],[r,2,2*YL],[e,1,XL],[n,1,GL],[n,3,3*GL],[t,1,JL]];function u(n,e,r){var i=Math.abs(e-n)/r,a=no((function(t){return(0,Go.Z)(t,3)[2]})).right(o,i);if(a===o.length)return t.every(nu(n/JL,e/JL,r));if(0===a)return QL.every(Math.max(nu(n,e,r),1));var u=(0,Go.Z)(o[i/o[a-1][2]<o[a][2]/i?a-1:a],2),c=u[0],s=u[1];return c.every(s)}return[function(t,n,e){var r=n<t;if(r){var i=[n,t];t=i[0],n=i[1]}var a=e&&"function"===typeof e.range?e:u(t,n,e),o=a?a.range(t,+n+1):[];return r?o.reverse():o},u]}var CI=DI(SI,OI,mI,uI,iI,eI),AI=(0,Go.Z)(CI,2),TI=AI[0],FI=AI[1],jI=DI(EI,MI,sI,aI,rI,nI),ZI=(0,Go.Z)(jI,2),NI=ZI[0],zI=ZI[1];function UI(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function PI(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function RI(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}var LI,II,BI,qI={"-":"",_:" ",0:"0"},HI=/^\s*\d+/,WI=/^%/,YI=/[\\^$*+?|[\]().{}]/g;function XI(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function GI(t){return t.replace(YI,"\\$&")}function JI(t){return new RegExp("^(?:"+t.map(GI).join("|")+")","i")}function $I(t){return new Map(t.map((function(t,n){return[t.toLowerCase(),n]})))}function VI(t,n,e){var r=HI.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function KI(t,n,e){var r=HI.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function QI(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function tB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function nB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function eB(t,n,e){var r=HI.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function rB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function iB(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function aB(t,n,e){var r=HI.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function oB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function uB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function cB(t,n,e){var r=HI.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function sB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function lB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function fB(t,n,e){var r=HI.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function hB(t,n,e){var r=HI.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function dB(t,n,e){var r=HI.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function pB(t,n,e){var r=WI.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function vB(t,n,e){var r=HI.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function gB(t,n,e){var r=HI.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function mB(t,n){return XI(t.getDate(),n,2)}function yB(t,n){return XI(t.getHours(),n,2)}function bB(t,n){return XI(t.getHours()%12||12,n,2)}function xB(t,n){return XI(1+aI.count(EI(t),t),n,3)}function _B(t,n){return XI(t.getMilliseconds(),n,3)}function wB(t,n){return _B(t,n)+"000"}function kB(t,n){return XI(t.getMonth()+1,n,2)}function MB(t,n){return XI(t.getMinutes(),n,2)}function OB(t,n){return XI(t.getSeconds(),n,2)}function EB(t){var n=t.getDay();return 0===n?7:n}function SB(t,n){return XI(sI.count(EI(t)-1,t),n,2)}function DB(t){var n=t.getDay();return n>=4||0===n?dI(t):dI.ceil(t)}function CB(t,n){return t=DB(t),XI(dI.count(EI(t),t)+(4===EI(t).getDay()),n,2)}function AB(t){return t.getDay()}function TB(t,n){return XI(lI.count(EI(t)-1,t),n,2)}function FB(t,n){return XI(t.getFullYear()%100,n,2)}function jB(t,n){return XI((t=DB(t)).getFullYear()%100,n,2)}function ZB(t,n){return XI(t.getFullYear()%1e4,n,4)}function NB(t,n){var e=t.getDay();return XI((t=e>=4||0===e?dI(t):dI.ceil(t)).getFullYear()%1e4,n,4)}function zB(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+XI(n/60|0,"0",2)+XI(n%60,"0",2)}function UB(t,n){return XI(t.getUTCDate(),n,2)}function PB(t,n){return XI(t.getUTCHours(),n,2)}function RB(t,n){return XI(t.getUTCHours()%12||12,n,2)}function LB(t,n){return XI(1+oI.count(SI(t),t),n,3)}function IB(t,n){return XI(t.getUTCMilliseconds(),n,3)}function BB(t,n){return IB(t,n)+"000"}function qB(t,n){return XI(t.getUTCMonth()+1,n,2)}function HB(t,n){return XI(t.getUTCMinutes(),n,2)}function WB(t,n){return XI(t.getUTCSeconds(),n,2)}function YB(t){var n=t.getUTCDay();return 0===n?7:n}function XB(t,n){return XI(mI.count(SI(t)-1,t),n,2)}function GB(t){var n=t.getUTCDay();return n>=4||0===n?_I(t):_I.ceil(t)}function JB(t,n){return t=GB(t),XI(_I.count(SI(t),t)+(4===SI(t).getUTCDay()),n,2)}function $B(t){return t.getUTCDay()}function VB(t,n){return XI(yI.count(SI(t)-1,t),n,2)}function KB(t,n){return XI(t.getUTCFullYear()%100,n,2)}function QB(t,n){return XI((t=GB(t)).getUTCFullYear()%100,n,2)}function tq(t,n){return XI(t.getUTCFullYear()%1e4,n,4)}function nq(t,n){var e=t.getUTCDay();return XI((t=e>=4||0===e?_I(t):_I.ceil(t)).getUTCFullYear()%1e4,n,4)}function eq(){return"+0000"}function rq(){return"%"}function iq(t){return+t}function aq(t){return Math.floor(+t/1e3)}function oq(t){return new Date(t)}function uq(t){return t instanceof Date?+t:+new Date(+t)}function cq(t,n,e,r,i,a,o,u,c,s){var l=mL(),f=l.invert,h=l.domain,d=s(".%L"),p=s(":%S"),v=s("%I:%M"),g=s("%I %p"),m=s("%a %d"),y=s("%b %d"),b=s("%B"),x=s("%Y");function _(t){return(c(t)<t?d:u(t)<t?p:o(t)<t?v:a(t)<t?g:r(t)<t?i(t)<t?m:y:e(t)<t?b:x)(t)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Array.from(t,uq)):h().map(oq)},l.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},l.tickFormat=function(t,n){return null==n?_:s(n)},l.nice=function(t){var e=h();return t&&"function"===typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(ML(e,t)):l},l.copy=function(){return vL(l,cq(t,n,e,r,i,a,o,u,c,s))},l}function sq(){return yL.apply(cq(NI,zI,EI,MI,sI,aI,rI,nI,tI,II).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lq(){return yL.apply(cq(TI,FI,SI,OI,mI,oI,iI,eI,tI,BI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fq(){var t,n,e,r,i,a=0,o=1,u=fL,c=!1;function s(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}function l(t){return function(n){var e,r,i;return arguments.length?(r=(e=(0,Go.Z)(n,2))[0],i=e[1],u=t(r,i),s):[u(0),u(1)]}}return s.domain=function(i){var u;return arguments.length?(u=(0,Go.Z)(i,2),a=u[0],o=u[1],t=r(a=+a),n=r(o=+o),e=t===n?0:1/(n-t),s):[a,o]},s.clamp=function(t){return arguments.length?(c=!!t,s):c},s.interpolator=function(t){return arguments.length?(u=t,s):u},s.range=l(D_),s.rangeRound=l(g_),s.unknown=function(t){return arguments.length?(i=t,s):i},function(i){return r=i,t=i(a),n=i(o),e=t===n?0:1/(n-t),s}}function hq(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dq(){var t=_L(fq()(fL));return t.copy=function(){return hq(t,dq())},bL.apply(t,arguments)}function pq(){var t=TL(fq()).domain([1,10]);return t.copy=function(){return hq(t,pq()).base(t.base())},bL.apply(t,arguments)}function vq(){var t=IL(fq());return t.copy=function(){return hq(t,vq()).constant(t.constant())},bL.apply(t,arguments)}function gq(){var t=zL(fq());return t.copy=function(){return hq(t,gq()).exponent(t.exponent())},bL.apply(t,arguments)}function mq(){return gq.apply(null,arguments).exponent(.5)}function yq(t,n){void 0===n&&(n=t,t=D_);for(var e=0,r=n.length-1,i=n[0],a=new Array(r<0?0:r);e<r;)a[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[n](t-n)}}function bq(){var t,n,e,r,i,a,o,u=0,c=.5,s=1,l=1,f=fL,h=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-n)*(l*t<l*n?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(n){var e,r,i,a;return arguments.length?(r=(e=(0,Go.Z)(n,3))[0],i=e[1],a=e[2],f=yq(t,[r,i,a]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f;return arguments.length?(f=(0,Go.Z)(o,3),u=f[0],c=f[1],s=f[2],t=a(u=+u),n=a(c=+c),e=a(s=+s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),l=n<t?-1:1,d):[u,c,s]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(D_),d.rangeRound=p(g_),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(u),n=o(c),e=o(s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),l=n<t?-1:1,d}}function xq(){var t=_L(bq()(fL));return t.copy=function(){return hq(t,xq())},bL.apply(t,arguments)}function _q(){var t=TL(bq()).domain([.1,1,10]);return t.copy=function(){return hq(t,_q()).base(t.base())},bL.apply(t,arguments)}function wq(){var t=IL(bq());return t.copy=function(){return hq(t,wq()).constant(t.constant())},bL.apply(t,arguments)}function kq(){var t=zL(bq());return t.copy=function(){return hq(t,kq()).exponent(t.exponent())},bL.apply(t,arguments)}function Mq(){return kq.apply(null,arguments).exponent(.5)}function Oq(){var t,n=[],e=[],r=[];function i(){var t=0,i=Math.max(1,e.length);for(r=new Array(i-1);++t<i;)r[t-1]=ja(n,t/i);return a}function a(n){return null==n||isNaN(n=+n)?t:e[sF(r,n)]}return a.invertExtent=function(t){var i=e.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:n[0],i<r.length?r[i]:n[n.length-1]]},a.domain=function(t){if(!arguments.length)return n.slice();n=[];var e,r=(0,_a.Z)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(wa),i()},a.range=function(t){return arguments.length?(e=Array.from(t),i()):e.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Oq().domain(n).range(e).unknown(t)},yL.apply(a,arguments)}function Eq(){var t,n=0,e=1,r=1,i=[.5],a=[0,1];function o(n){return null!=n&&n<=n?a[sF(i,n,0,r)]:t}function u(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*e-(t-r)*n)/(r+1);return o}return o.domain=function(t){var r;return arguments.length?(r=(0,Go.Z)(t,2),n=r[0],e=r[1],n=+n,e=+e,u()):[n,e]},o.range=function(t){return arguments.length?(r=(a=Array.from(t)).length-1,u()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[n,i[0]]:o>=r?[i[r-1],e]:[i[o-1],i[o]]},o.unknown=function(n){return arguments.length?(t=n,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return Eq().domain([n,e]).range(a).unknown(t)},yL.apply(_L(o),arguments)}function Sq(){var t,n=[.5],e=[0,1],r=1;function i(i){return null!=i&&i<=i?e[sF(n,i,0,r)]:t}return i.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(t){return arguments.length?(e=Array.from(t),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},i.unknown=function(n){return arguments.length?(t=n,i):t},i.copy=function(){return Sq().domain(n).range(e).unknown(t)},yL.apply(i,arguments)}!function(t){LI=function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,c=t.shortMonths,s=JI(i),l=$I(i),f=JI(a),h=$I(a),d=JI(o),p=$I(o),v=JI(u),g=$I(u),m=JI(c),y=$I(c),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:mB,e:mB,f:wB,g:jB,G:NB,H:yB,I:bB,j:xB,L:_B,m:kB,M:MB,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:iq,s:aq,S:OB,u:EB,U:SB,V:CB,w:AB,W:TB,x:null,X:null,y:FB,Y:ZB,Z:zB,"%":rq},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:UB,e:UB,f:BB,g:QB,G:nq,H:PB,I:RB,j:LB,L:IB,m:qB,M:HB,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:iq,s:aq,S:WB,u:YB,U:XB,V:JB,w:$B,W:VB,x:null,X:null,y:KB,Y:tq,Z:eq,"%":rq},_={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=m.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:uB,e:uB,f:dB,g:rB,G:eB,H:sB,I:sB,j:cB,L:hB,m:oB,M:lB,p:function(t,n,e){var r=s.exec(n.slice(e));return r?(t.p=l.get(r[0].toLowerCase()),e+r[0].length):-1},q:aB,Q:vB,s:gB,S:fB,u:KI,U:QI,V:tB,w:VI,W:nB,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:rB,Y:eB,Z:iB,"%":pB};function w(t,n){return function(e){var r,i,a,o=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(o.push(t.slice(c,u)),null!=(i=qI[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=n[r])&&(r=a(e,i)),o.push(r),c=u+1);return o.push(t.slice(c,u)),o.join("")}}function k(t,n){return function(e){var r,i,a=RI(1900,void 0,1);if(M(a,t,e+="",0)!=e.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(n&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=PI(RI(a.y,0,1))).getUTCDay(),r=i>4||0===i?yI.ceil(r):yI(r),r=oI.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=UI(RI(a.y,0,1))).getDay(),r=i>4||0===i?lI.ceil(r):lI(r),r=aI.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?PI(RI(a.y,0,1)).getUTCDay():UI(RI(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,PI(a)):UI(a)}}function M(t,n,e,r){for(var i,a,o=0,u=n.length,c=e.length;o<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(o++))){if(i=n.charAt(o++),!(a=_[i in qI?n.charAt(o++):i])||(r=a(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),x.x=w(e,x),x.X=w(r,x),x.c=w(n,x),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=k(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var n=k(t+="",!0);return n.toString=function(){return t},n}}}(t),II=LI.format,LI.parse,BI=LI.utcFormat,LI.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Dq=e(67377),Cq=e(35928),Aq=e(4392),Tq=e(64428),Fq=e(82359),jq=e(84940),Zq=function(t){(0,Tq.Z)(e,t);var n=(0,Fq.Z)(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pq;if((0,rk.Z)(this,e),r=n.call(this),Object.defineProperties((0,Dq.Z)(r),{_intern:{value:new Map},_key:{value:i}}),null!=t){var a,o=(0,_a.Z)(t);try{for(o.s();!(a=o.n()).done;){var u=(0,Go.Z)(a.value,2),c=u[0],s=u[1];r.set(c,s)}}catch(l){o.e(l)}finally{o.f()}}return r}return(0,ik.Z)(e,[{key:"get",value:function(t){return(0,Cq.Z)((0,Aq.Z)(e.prototype),"get",this).call(this,Nq(this,t))}},{key:"has",value:function(t){return(0,Cq.Z)((0,Aq.Z)(e.prototype),"has",this).call(this,Nq(this,t))}},{key:"set",value:function(t,n){return(0,Cq.Z)((0,Aq.Z)(e.prototype),"set",this).call(this,zq(this,t),n)}},{key:"delete",value:function(t){return(0,Cq.Z)((0,Aq.Z)(e.prototype),"delete",this).call(this,Uq(this,t))}}]),e}((0,jq.Z)(Map));Set;function Nq(t,n){var e=t._intern,r=(0,t._key)(n);return e.has(r)?e.get(r):n}function zq(t,n){var e=t._intern,r=(0,t._key)(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Uq(t,n){var e=t._intern,r=(0,t._key)(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Pq(t){return null!==t&&"object"===typeof t?t.valueOf():t}var Rq=Symbol("implicit");function Lq(){var t=new Zq,n=[],e=[],r=Rq;function i(i){var a=t.get(i);if(void 0===a){if(r!==Rq)return r;t.set(i,a=n.push(i)-1)}return e[a%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Zq;var r,a=(0,_a.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;t.has(o)||t.set(o,n.push(o)-1)}}catch(u){a.e(u)}finally{a.f()}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Lq(n,e).unknown(r)},yL.apply(i,arguments),i}var Iq=e(22498),Bq=e(15579);function qq(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var Hq=e(18084);function Wq(t,n){var e=(0,Hq.wx)(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}}var Yq=e(81830),Xq=1e-12;function Gq(t){return((t=Math.exp(t))+1/t)/2}var Jq=function t(n,e,r){function i(t,i){var a,o,u=t[0],c=t[1],s=t[2],l=i[0],f=i[1],h=i[2],d=l-u,p=f-c,v=d*d+p*p;if(v<Xq)o=Math.log(h/s)/n,a=function(t){return[u+t*d,c+t*p,s*Math.exp(n*t*o)]};else{var g=Math.sqrt(v),m=(h*h-s*s+r*v)/(2*s*e*g),y=(h*h-s*s-r*v)/(2*h*e*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/n,a=function(t){var r=t*o,i=Gq(b),a=s/(e*g)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*r+b)-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[u+a*d,c+a*p,s*i/Gq(n*r+b)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function $q(t){return function(n,e){var r=t((n=(0,m_.Ym)(n)).h,(e=(0,m_.Ym)(e)).h),i=(0,Hq.ZP)(n.s,e.s),a=(0,Hq.ZP)(n.l,e.l),o=(0,Hq.ZP)(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=a(t),n.opacity=o(t),n+""}}}var Vq=$q(Hq.wx),Kq=$q(Hq.ZP),Qq=e(89836),tH=Math.PI/180,nH=180/Math.PI,eH=.96422,rH=1,iH=.82521,aH=4/29,oH=6/29,uH=3*oH*oH,cH=oH*oH*oH;function sH(t){if(t instanceof fH)return new fH(t.l,t.a,t.b,t.opacity);if(t instanceof yH)return bH(t);t instanceof m_.Ss||(t=(0,m_.SU)(t));var n,e,r=vH(t.r),i=vH(t.g),a=vH(t.b),o=hH((.2225045*r+.7168786*i+.0606169*a)/rH);return r===i&&i===a?n=e=o:(n=hH((.4360747*r+.3850649*i+.1430804*a)/eH),e=hH((.0139322*r+.0971045*i+.7141733*a)/iH)),new fH(116*o-16,500*(n-o),200*(o-e),t.opacity)}function lH(t,n,e,r){return 1===arguments.length?sH(t):new fH(t,n,e,null==r?1:r)}function fH(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function hH(t){return t>cH?Math.pow(t,1/3):t/uH+aH}function dH(t){return t>oH?t*t*t:uH*(t-aH)}function pH(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function vH(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gH(t){if(t instanceof yH)return new yH(t.h,t.c,t.l,t.opacity);if(t instanceof fH||(t=sH(t)),0===t.a&&0===t.b)return new yH(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*nH;return new yH(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function mH(t,n,e,r){return 1===arguments.length?gH(t):new yH(t,n,e,null==r?1:r)}function yH(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function bH(t){if(isNaN(t.h))return new fH(t.l,0,0,t.opacity);var n=t.h*tH;return new fH(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function xH(t,n){var e=(0,Hq.ZP)((t=lH(t)).l,(n=lH(n)).l),r=(0,Hq.ZP)(t.a,n.a),i=(0,Hq.ZP)(t.b,n.b),a=(0,Hq.ZP)(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=a(n),t+""}}function _H(t){return function(n,e){var r=t((n=mH(n)).h,(e=mH(e)).h),i=(0,Hq.ZP)(n.c,e.c),a=(0,Hq.ZP)(n.l,e.l),o=(0,Hq.ZP)(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=a(t),n.opacity=o(t),n+""}}}(0,Qq.Z)(fH,lH,(0,Qq.l)(m_.Il,{brighter:function(t){return new fH(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new fH(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=eH*dH(n),t=rH*dH(t),e=iH*dH(e),new m_.Ss(pH(3.1338561*n-1.6168667*t-.4906146*e),pH(-.9787684*n+1.9161415*t+.033454*e),pH(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),(0,Qq.Z)(yH,mH,(0,Qq.l)(m_.Il,{brighter:function(t){return new yH(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new yH(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return bH(this).rgb()}}));var wH=_H(Hq.wx),kH=_H(Hq.ZP),MH=-.14861,OH=1.78277,EH=-.29227,SH=-.90649,DH=1.97294,CH=DH*SH,AH=DH*OH,TH=OH*EH-SH*MH;function FH(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof jH)return new jH(t.h,t.s,t.l,t.opacity);t instanceof m_.Ss||(t=(0,m_.SU)(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(TH*r+CH*n-AH*e)/(TH+CH-AH),a=r-i,o=(DH*(e-i)-EH*a)/SH,u=Math.sqrt(o*o+a*a)/(DH*i*(1-i)),c=u?Math.atan2(o,a)*nH-120:NaN;return new jH(c<0?c+360:c,u,i,t.opacity)}(t):new jH(t,n,e,null==r?1:r)}function jH(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function ZH(t){return function n(e){function r(n,r){var i=t((n=FH(n)).h,(r=FH(r)).h),a=(0,Hq.ZP)(n.s,r.s),o=(0,Hq.ZP)(n.l,r.l),u=(0,Hq.ZP)(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=a(t),n.l=o(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}(0,Qq.Z)(jH,FH,(0,Qq.l)(m_.Il,{brighter:function(t){return t=null==t?m_.J5:Math.pow(m_.J5,t),new jH(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?m_.xV:Math.pow(m_.xV,t),new jH(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*tH,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new m_.Ss(255*(n+e*(MH*r+OH*i)),255*(n+e*(EH*r+SH*i)),255*(n+e*(DH*r)),this.opacity)}}));var NH,zH,UH=ZH(Hq.wx),PH=ZH(Hq.ZP);function RH(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}var LH="linear",IH="log",BH="pow",qH="sqrt",HH="symlog",WH="time",YH="utc",XH="sequential",GH="diverging",JH="quantile",$H="quantize",VH="threshold",KH="continuous",QH="discrete",tW="discretizing",nW="interpolating",eW="temporal";function rW(){var t,n,e=Lq().unknown(void 0),r=e.domain,i=e.range,a=[0,1],o=!1,u=0,c=0,s=.5;function l(){var e=r().length,l=a[1]<a[0],f=a[1-l],h=function(t,n,e){var r=t-n+2*e;return t?r>0?r:1:0}(e,u,c),d=a[l-0];t=(f-d)/(h||1),o&&(t=Math.floor(t)),d+=(f-d-t*(e-u))*s,n=t*(1-u),o&&(d=Math.round(d),n=Math.round(n));var p=Qa(e).map((function(n){return d+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},e.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(o=!!t,l()):o},e.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u=c,l()):u},e.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},e.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,o,u,c=a[1]<a[0],s=c?i().reverse():i(),l=s.length-1,f=+t[0],h=+t[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<s[0]||f>a[1-c])))return e=Math.max(0,uF(s,f)-1),o=f===h?e:uF(s,h)-1,f-s[e]>n+1e-10&&++e,c&&(u=e,e=l-o,o=l-u),e>o?void 0:r().slice(e,o+1)}},e.invert=function(t){var n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return rW().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(c).align(s)},l()}function iW(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return iW(n())},t}var aW=Array.prototype.map;var oW=Array.prototype.slice;var uW={};function cW(t,n,e){return arguments.length>1?(uW[t]=function(t,n,e){var r=function(){var e=n();return e.invertRange||(e.invertRange=e.invert?function(t){return function(n){var e,r=n[0],i=n[1];return i<r&&(e=r,r=i,i=e),[t.invert(r),t.invert(i)]}}(e):e.invertExtent?function(t){return function(n){var e,r,i,a,o=t.range(),u=n[0],c=n[1],s=-1;for(c<u&&(r=u,u=c,c=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=c&&(s<0&&(s=i),e=i);if(!(s<0))return u=t.invertExtent(o[s]),c=t.invertExtent(o[e]),[void 0===u[0]?u[1]:u[0],void 0===c[1]?c[0]:c[1]]}}(e):void 0),e.type=t,e};return r.metadata=(0,g.Rg)((0,g.IX)(e)),r}(t,n,e),this):function(t){return(0,g.nr)(uW,t)}(t)?uW[t]:void 0}function sW(t,n){var e=uW[t];return e&&e.metadata[n]}function lW(t){return sW(t,QH)}cW("identity",kL),cW(LH,wL,KH),cW(IH,FL,[KH,IH]),cW(BH,UL,KH),cW(qH,PL,KH),cW(HH,BL,KH),cW(WH,sq,[KH,eW]),cW(YH,lq,[KH,eW]),cW(XH,dq,[KH,nW]),cW("".concat(XH,"-").concat(LH),dq,[KH,nW]),cW("".concat(XH,"-").concat(IH),pq,[KH,nW,IH]),cW("".concat(XH,"-").concat(BH),gq,[KH,nW]),cW("".concat(XH,"-").concat(qH),mq,[KH,nW]),cW("".concat(XH,"-").concat(HH),vq,[KH,nW]),cW("".concat(GH,"-").concat(LH),xq,[KH,nW]),cW("".concat(GH,"-").concat(IH),_q,[KH,nW,IH]),cW("".concat(GH,"-").concat(BH),kq,[KH,nW]),cW("".concat(GH,"-").concat(qH),Mq,[KH,nW]),cW("".concat(GH,"-").concat(HH),wq,[KH,nW]),cW(JH,Oq,[tW,JH]),cW($H,Eq,tW),cW(VH,Sq,tW),cW("bin-ordinal",(function t(){var n=[],e=[];function r(t){return null==t||t!==t?void 0:e[(sF(n,t)-1)%e.length]}return r.domain=function(t){return arguments.length?(n=function(t){return aW.call(t,g.He)}(t),r):n.slice()},r.range=function(t){return arguments.length?(e=oW.call(t),r):e.slice()},r.tickFormat=function(t,e){return xL(n[0],(0,g.fj)(n),null==t?10:t,e)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),[QH,tW]),cW("ordinal",Lq,QH),cW("band",rW,QH),cW("point",(function(){return iW(rW().paddingInner(1))}),QH);function fW(t,n){var e=n[0],r=(0,g.fj)(n)-e;return function(n){return t(e+n*r)}}function hW(t,n,e){return yq(pW(n||"rgb",e),t)}function dW(t,n){for(var e=new Array(n),r=n+1,i=0;i<n;)e[i]=t(++i/r);return e}function pW(t,n){var e=v[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=n&&e&&e.gamma?e.gamma(n):e}function vW(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}function gW(t,n){for(var e in t)yW(e,n(t[e]))}var mW={};function yW(t,n){return t=t&&t.toLowerCase(),arguments.length>1?(mW[t]=n,this):mW[t]}gW({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},vW),gW({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return hW(vW(t))}));var bW="symbol",xW="discrete",_W=function(t){return(0,g.kJ)(t)?t.map((function(t){return String(t)})):String(t)},wW=function(t,n){return t[1]-n[1]},kW=function(t,n){return n[1]-t[1]};function MW(t,n){return t.bins?function(t,n,e){var r=t.range(),i=r[0],a=(0,g.fj)(r),o=wW;if(i>a&&(r=a,a=i,i=r,o=kW),i=Math.floor(i),a=Math.ceil(a),n=n.map((function(n){return[n,t(n)]})).filter((function(t){return i<=t[1]&&t[1]<=a})).sort(o).map((function(t){return t[0]})),e>0&&n.length>1){for(var u=[n[0],(0,g.fj)(n)];n.length>e&&n.length>=3;)n=n.filter((function(t,n){return!(n%2)}));n.length<3&&(n=u)}return n}(t,t.bins):t.ticks?t.ticks(n):t.domain()}function OW(t,n,e,r,i,a){var o=n.type,u=_W;if(o===WH||i===WH)u=t.timeFormat(r);else if(o===YH||i===YH)u=t.utcFormat(r);else if(function(t){return sW(t,IH)}(o)){var c=t.formatFloat(r);if(a||n.bins)u=c;else{var s=EW(n,e,!1);u=function(t){return s(t)?c(t):""}}}else if(n.tickFormat){var l=n.domain();u=t.formatSpan(l[0],l[l.length-1],e,r)}else r&&(u=t.format(r));return u}function EW(t,n,e){var r=MW(t,n),i=t.base(),a=Math.log(i),o=Math.max(1,i*n/r.length),u=function(t){var n=t/Math.pow(i,Math.round(Math.log(t)/a));return n*i<i-.5&&(n*=i),n<=o};return e?r.filter(u):u}var SW=(NH={},(0,nt.Z)(NH,JH,"quantiles"),(0,nt.Z)(NH,$H,"thresholds"),(0,nt.Z)(NH,VH,"domain"),NH),DW=(zH={},(0,nt.Z)(zH,JH,"quantiles"),(0,nt.Z)(zH,$H,"domain"),zH);function CW(t,n){return t.bins?function(t){var n=t.slice(0,-1);return n.max=(0,g.fj)(t),n}(t.bins):t.type===IH?EW(t,n,!0):SW[t.type]?function(t){var n=[-1/0].concat(t);return n.max=1/0,n}(t[SW[t.type]]()):MW(t,n)}var AW=function(t){return SW[t.type]||t.bins};function TW(t,n,e,r,i,a,o){var u=DW[n.type]&&a!==WH&&a!==YH?function(t,n,e){var r,i=n[DW[n.type]](),a=i.length,o=a>1?i[1]-i[0]:i[0];for(r=1;r<a;++r)o=Math.min(o,i[r]-i[r-1]);return t.formatSpan(0,o,30,e)}(t,n,i):OW(t,n,e,i,a,o);return r===bW&&AW(n)?FW(u):r===xW?ZW(u):NW(u)}var FW=function(t){return function(n,e,r){var i=jW(r[e+1],jW(r.max,1/0)),a=zW(n,t),o=zW(i,t);return a&&o?a+" \u2013 "+o:o?"< "+o:"\u2265 "+a}},jW=function(t,n){return null!=t?t:n},ZW=function(t){return function(n,e){return e?t(n):null}},NW=function(t){return function(n){return t(n)}},zW=function(t,n){return Number.isFinite(t)?n(t):null};function UW(t,n,e,r){var i=r||n.type;return(0,g.HD)(e)&&function(t){return sW(t,eW)}(i)&&(e=e.replace(/%a/g,"%A").replace(/%b/g,"%B")),e||i!==WH?e||i!==YH?TW(t,n,5,null,e,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function PW(t,n,e){e=e||{};var r=Math.max(3,e.maxlen||7),i=UW(t,n,e.format,e.formatType);if(function(t){return sW(t,tW)}(n.type)){var a=CW(n).slice(1).map(i),o=a.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(a.join(", "))}if(lW(n.type)){var u=n.domain(),c=u.length,s=c>r?u.slice(0,r-2).map(i).join(", ")+", ending with "+u.slice(-1).map(i):u.map(i).join(", ");return"".concat(c," value").concat(1===c?"":"s",": ").concat(s)}var l=n.domain();return"values from ".concat(i(l[0])," to ").concat(i((0,g.fj)(l)))}var RW=0;var LW="p_";function IW(t){return t&&t.gradient}function BW(t,n,e){var r=t.gradient,i=t.id,a="radial"===r?LW:"";return i||(i=t.id="gradient_"+RW++,"radial"===r?(t.x1=qW(t.x1,.5),t.y1=qW(t.y1,.5),t.r1=qW(t.r1,0),t.x2=qW(t.x2,.5),t.y2=qW(t.y2,.5),t.r2=qW(t.r2,.5),a=LW):(t.x1=qW(t.x1,0),t.y1=qW(t.y1,0),t.x2=qW(t.x2,1),t.y2=qW(t.y2,0))),n[i]=t,"url("+(e||"")+"#"+a+i+")"}function qW(t,n){return null!=t?t:n}function HW(t,n){var e,r=[];return e={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:n?n[0]:1,y2:n?n[1]:0,stops:r,stop:function(t,n){return r.push({offset:t,color:n}),e}}}var WW={basis:{curve:function(t){return new NP(t)}},"basis-closed":{curve:function(t){return new UP(t)}},"basis-open":{curve:function(t){return new PP(t)}},bundle:{curve:LP,tension:"beta",value:.85},cardinal:{curve:qP,tension:"tension",value:0},"cardinal-open":{curve:WP,tension:"tension",value:0},"cardinal-closed":{curve:XP,tension:"tension",value:0},"catmull-rom":{curve:cR,tension:"alpha",value:.5},"catmull-rom-closed":{curve:lR,tension:"alpha",value:.5},"catmull-rom-open":{curve:hR,tension:"alpha",value:.5},linear:{curve:pR},"linear-closed":{curve:function(t){return new vR(t)}},monotone:{horizontal:function(t){return new _R(t)},vertical:function(t){return new xR(t)}},natural:{curve:function(t){return new kR(t)}},step:{curve:function(t){return new OR(t,.5)}},"step-after":{curve:function(t){return new OR(t,1)}},"step-before":{curve:function(t){return new OR(t,0)}}};function YW(t,n,e){var r=(0,g.nr)(WW,t)&&WW[t],i=null;return r&&(i=r.curve||r[n||"vertical"],r.tension&&null!=e&&(i=i[r.tension](e))),i}var XW={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},GW=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,JW=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,$W=/^((\s+,?\s*)|(,\s*))/,VW=/^[01]/;function KW(t){var n=[];return(t.match(GW)||[]).forEach((function(t){var e=t[0],r=e.toLowerCase(),i=XW[r],a=function(t,n,e){for(var r=[],i=0;n&&i<e.length;)for(var a=0;a<n;++a){var o="a"!==t||3!==a&&4!==a?JW:VW,u=e.slice(i).match(o);if(null===u)throw Error("Invalid SVG path, incorrect parameter type");i+=u[0].length,r.push(+u[0]);var c=e.slice(i).match($W);null!==c&&(i+=c[0].length)}return r}(r,i,t.slice(1).trim()),o=a.length;if(o<i||o&&o%i!==0)throw Error("Invalid SVG path, incorrect parameter count");if(n.push([e].concat((0,b.Z)(a.slice(0,i)))),o!==i){"m"===r&&(e="M"===e?"L":"l");for(var u=i;u<o;u+=i)n.push([e].concat((0,b.Z)(a.slice(u,u+i))))}})),n}var QW=Math.PI/180,tY=1e-14,nY=Math.PI/2,eY=2*Math.PI,rY=Math.sqrt(3)/2,iY={},aY={},oY=[].join;function uY(t){var n=oY.call(t);if(aY[n])return aY[n];var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],l=s*o,f=-c*u,h=c*o,d=s*u,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),_=e+p-x*v,w=r+v+x*p,k=e+g,M=r+m,O=k+x*m,E=M-x*g;return aY[n]=[l*_+f*w,h*_+d*w,l*O+f*E,h*O+d*E,l*k+f*M,h*k+d*M]}var cY=["l",0,0,0,0,0,0,0];function sY(t,n,e){var r=cY[0]=t[0];if("a"===r||"A"===r)cY[1]=n*t[1],cY[2]=e*t[2],cY[3]=t[3],cY[4]=t[4],cY[5]=t[5],cY[6]=n*t[6],cY[7]=e*t[7];else if("h"===r||"H"===r)cY[1]=n*t[1];else if("v"===r||"V"===r)cY[1]=e*t[1];else for(var i=1,a=t.length;i<a;++i)cY[i]=(i%2==1?n:e)*t[i];return cY}function lY(t,n,e,r,i,a){var o,u,c,s,l,f=null,h=0,d=0,p=0,v=0,g=0,m=0;null==e&&(e=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var y=0,b=n.length;y<b;++y){switch(o=n[y],1===i&&1===a||(o=sY(o,i,a)),o[0]){case"l":h+=o[1],d+=o[2],t.lineTo(h+e,d+r);break;case"L":h=o[1],d=o[2],t.lineTo(h+e,d+r);break;case"h":h+=o[1],t.lineTo(h+e,d+r);break;case"H":h=o[1],t.lineTo(h+e,d+r);break;case"v":d+=o[1],t.lineTo(h+e,d+r);break;case"V":d=o[1],t.lineTo(h+e,d+r);break;case"m":g=h+=o[1],m=d+=o[2],t.moveTo(h+e,d+r);break;case"M":g=h=o[1],m=d=o[2],t.moveTo(h+e,d+r);break;case"c":u=h+o[5],c=d+o[6],p=h+o[3],v=d+o[4],t.bezierCurveTo(h+o[1]+e,d+o[2]+r,p+e,v+r,u+e,c+r),h=u,d=c;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],t.bezierCurveTo(o[1]+e,o[2]+r,p+e,v+r,h+e,d+r);break;case"s":u=h+o[3],c=d+o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,h+o[1]+e,d+o[2]+r,u+e,c+r),p=h+o[1],v=d+o[2],h=u,d=c;break;case"S":u=o[3],c=o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"q":u=h+o[3],c=d+o[4],p=h+o[1],v=d+o[2],t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"Q":u=o[3],c=o[4],t.quadraticCurveTo(o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"t":u=h+o[1],c=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-s,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),s=p,l=v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),d=c,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],c=o[2],p=2*h-p,v=2*d-v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"a":fY(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+e,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":fY(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+e,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":h=g,d=m,t.closePath()}f=o}}function fY(t,n,e,r){for(var i=function(t,n,e,r,i,a,o,u,c){var s=oY.call(arguments);if(iY[s])return iY[s];var l=o*QW,f=Math.sin(l),h=Math.cos(l),d=h*(u-t)*.5+f*(c-n)*.5,p=h*(c-n)*.5-f*(u-t)*.5,v=d*d/((e=Math.abs(e))*e)+p*p/((r=Math.abs(r))*r);v>1&&(e*=v=Math.sqrt(v),r*=v);var g=h/e,m=f/e,y=-f/r,b=h/r,x=g*u+m*c,_=y*u+b*c,w=g*t+m*n,k=y*t+b*n,M=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;M<0&&(M=0);var O=Math.sqrt(M);a==i&&(O=-O);var E=.5*(x+w)-O*(k-_),S=.5*(_+k)+O*(w-x),D=Math.atan2(_-S,x-E),C=Math.atan2(k-S,w-E)-D;C<0&&1===a?C+=eY:C>0&&0===a&&(C-=eY);for(var A=Math.ceil(Math.abs(C/(nY+.001))),T=[],F=0;F<A;++F){var j=D+F*C/A,Z=D+(F+1)*C/A;T[F]=[E,S,j,Z,e,r,f,h]}return iY[s]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],n,e),a=0;a<i.length;++a){var o=uY(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var hY=.5773502691896257,dY={circle:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(e,0),t.arc(0,0,e,0,eY)}},cross:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/2.5;t.moveTo(-e,-r),t.lineTo(-e,r),t.lineTo(-r,r),t.lineTo(-r,e),t.lineTo(r,e),t.lineTo(r,r),t.lineTo(e,r),t.lineTo(e,-r),t.lineTo(r,-r),t.lineTo(r,-e),t.lineTo(-r,-e),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.closePath()}},square:{draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},arrow:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/7,i=e/2.5,a=e/8;t.moveTo(-r,e),t.lineTo(r,e),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-e),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e,i=r-e*hY,a=e/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e,i=r-e*hY;t.moveTo(0,-r-i),t.lineTo(-e,r-i),t.lineTo(e,r-i),t.closePath()}},"triangle-up":{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e;t.moveTo(0,-r),t.lineTo(-e,r),t.lineTo(e,r),t.closePath()}},"triangle-down":{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e;t.moveTo(0,r),t.lineTo(-e,-r),t.lineTo(e,-r),t.closePath()}},"triangle-right":{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e;t.moveTo(r,0),t.lineTo(-r,-e),t.lineTo(-r,e),t.closePath()}},"triangle-left":{draw:function(t,n){var e=Math.sqrt(n)/2,r=rY*e;t.moveTo(-r,0),t.lineTo(r,-e),t.lineTo(r,e),t.closePath()}},stroke:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(e,0)}}};function pY(t){return(0,g.nr)(dY,t)?dY[t]:function(t){if(!(0,g.nr)(vY,t)){var n=KW(t);vY[t]={draw:function(t,e){lY(t,n,0,0,Math.sqrt(e)/2)}}}return vY[t]}(t)}var vY={};var gY=.448084975506;function mY(t){return t.x}function yY(t){return t.y}function bY(t){return t.width}function xY(t){return t.height}function _Y(t){return"function"===typeof t?t:function(){return+t}}function wY(t,n,e){return Math.max(n,Math.min(t,e))}function kY(){var t=mY,n=yY,e=bY,r=xY,i=_Y(0),a=i,o=i,u=i,c=null;function s(s,l,f){var h,d=null!=l?l:+t.call(this,s),p=null!=f?f:+n.call(this,s),v=+e.call(this,s),g=+r.call(this,s),m=Math.min(v,g)/2,y=wY(+i.call(this,s),0,m),b=wY(+a.call(this,s),0,m),x=wY(+o.call(this,s),0,m),_=wY(+u.call(this,s),0,m);if(c||(c=h=GR()),y<=0&&b<=0&&x<=0&&_<=0)c.rect(d,p,v,g);else{var w=d+v,k=p+g;c.moveTo(d+y,p),c.lineTo(w-b,p),c.bezierCurveTo(w-gY*b,p,w,p+gY*b,w,p+b),c.lineTo(w,k-_),c.bezierCurveTo(w,k-gY*_,w-gY*_,k,w-_,k),c.lineTo(d+x,k),c.bezierCurveTo(d+gY*x,k,d,k-gY*x,d,k-x),c.lineTo(d,p+y),c.bezierCurveTo(d,p+gY*y,d+gY*y,p,d+y,p),c.closePath()}if(h)return c=null,h+""||null}return s.x=function(n){return arguments.length?(t=_Y(n),s):t},s.y=function(t){return arguments.length?(n=_Y(t),s):n},s.width=function(t){return arguments.length?(e=_Y(t),s):e},s.height=function(t){return arguments.length?(r=_Y(t),s):r},s.cornerRadius=function(t,n,e,r){return arguments.length?(i=_Y(t),a=null!=n?_Y(n):i,u=null!=e?_Y(e):i,o=null!=r?_Y(r):a,s):i},s.context=function(t){return arguments.length?(c=null==t?null:t,s):c},s}function MY(){var t,n,e,r,i,a,o,u,c=null;function s(t,n,e){var r=e/2;if(i){var s=o-n,l=t-a;if(s||l){var f=Math.sqrt(s*s+l*l),h=(s/=f)*u,d=(l/=f)*u,p=Math.atan2(l,s);c.moveTo(a-h,o-d),c.lineTo(t-s*r,n-l*r),c.arc(t,n,r,p-Math.PI,p),c.lineTo(a+h,o+d),c.arc(a,o,u,p,p+Math.PI)}else c.arc(t,n,r,0,eY);c.closePath()}else i=1;a=t,o=n,u=r}function l(a){var o,u,l,f=a.length,h=!1;for(null==c&&(c=l=GR()),o=0;o<=f;++o)!(o<f&&r(u=a[o],o,a))===h&&(h=!h)&&(i=0),h&&s(+t(u,o,a),+n(u,o,a),+e(u,o,a));if(l)return c=null,l+""||null}return l.x=function(n){return arguments.length?(t=n,l):t},l.y=function(t){return arguments.length?(n=t,l):n},l.size=function(t){return arguments.length?(e=t,l):e},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(c=null==t?null:t,l):c},l}function OY(t,n){return null!=t?t:n}var EY=function(t){return t.x||0},SY=function(t){return t.y||0},DY=function(t){return!(!1===t.defined)},CY=function(){var t=$R,n=VR,e=ER(0),r=null,i=KR,a=QR,o=tL,u=null,c=JR(s);function s(){var s,l,f=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-rR,p=a.apply(this,arguments)-rR,v=GP(p-d),g=p>d;if(u||(u=s=c()),h<f&&(l=h,h=f,f=l),h>nR)if(v>iR-nR)u.moveTo(h*$P(d),h*QP(d)),u.arc(0,0,h,d,p,!g),f>nR&&(u.moveTo(f*$P(p),f*QP(p)),u.arc(0,0,f,p,d,g));else{var m,y,b=d,x=p,_=d,w=p,k=v,M=v,O=o.apply(this,arguments)/2,E=O>nR&&(r?+r.apply(this,arguments):tR(f*f+h*h)),S=KP(GP(h-f)/2,+e.apply(this,arguments)),D=S,C=S;if(E>nR){var A=aR(E/f*QP(O)),T=aR(E/h*QP(O));(k-=2*A)>nR?(_+=A*=g?1:-1,w-=A):(k=0,_=w=(d+p)/2),(M-=2*T)>nR?(b+=T*=g?1:-1,x-=T):(M=0,b=x=(d+p)/2)}var F=h*$P(b),j=h*QP(b),Z=f*$P(w),N=f*QP(w);if(S>nR){var z,U=h*$P(x),P=h*QP(x),R=f*$P(_),L=f*QP(_);if(v<eR)if(z=function(t,n,e,r,i,a,o,u){var c=e-t,s=r-n,l=o-i,f=u-a,h=f*c-l*s;if(!(h*h<nR))return[t+(h=(l*(n-a)-f*(t-i))/h)*c,n+h*s]}(F,j,R,L,U,P,Z,N)){var I=F-z[0],B=j-z[1],q=U-z[0],H=P-z[1],W=1/QP(function(t){return t>1?0:t<-1?eR:Math.acos(t)}((I*q+B*H)/(tR(I*I+B*B)*tR(q*q+H*H)))/2),Y=tR(z[0]*z[0]+z[1]*z[1]);D=KP(S,(f-Y)/(W-1)),C=KP(S,(h-Y)/(W+1))}else D=C=0}M>nR?C>nR?(m=nL(R,L,F,j,h,C,g),y=nL(U,P,Z,N,h,C,g),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<S?u.arc(m.cx,m.cy,C,JP(m.y01,m.x01),JP(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,C,JP(m.y01,m.x01),JP(m.y11,m.x11),!g),u.arc(0,0,h,JP(m.cy+m.y11,m.cx+m.x11),JP(y.cy+y.y11,y.cx+y.x11),!g),u.arc(y.cx,y.cy,C,JP(y.y11,y.x11),JP(y.y01,y.x01),!g))):(u.moveTo(F,j),u.arc(0,0,h,b,x,!g)):u.moveTo(F,j),f>nR&&k>nR?D>nR?(m=nL(Z,N,U,P,f,-D,g),y=nL(F,j,R,L,f,-D,g),u.lineTo(m.cx+m.x01,m.cy+m.y01),D<S?u.arc(m.cx,m.cy,D,JP(m.y01,m.x01),JP(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,D,JP(m.y01,m.x01),JP(m.y11,m.x11),!g),u.arc(0,0,f,JP(m.cy+m.y11,m.cx+m.x11),JP(y.cy+y.y11,y.cx+y.x11),g),u.arc(y.cx,y.cy,D,JP(y.y11,y.x11),JP(y.y01,y.x01),!g))):u.arc(0,0,f,w,_,g):u.lineTo(Z,N)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-eR/2;return[$P(r)*e,QP(r)*e]},s.innerRadius=function(n){return arguments.length?(t="function"===typeof n?n:ER(+n),s):t},s.outerRadius=function(t){return arguments.length?(n="function"===typeof t?t:ER(+t),s):n},s.cornerRadius=function(t){return arguments.length?(e="function"===typeof t?t:ER(+t),s):e},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:ER(+t),s):r},s.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:ER(+t),s):i},s.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:ER(+t),s):a},s.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:ER(+t),s):o},s.context=function(t){return arguments.length?(u=null==t?null:t,s):u},s}().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius((function(t){return t.cornerRadius||0})),AY=oL().x(EY).y1(SY).y0((function(t){return(t.y||0)+(t.height||0)})).defined(DY),TY=oL().y(SY).x1(EY).x0((function(t){return(t.x||0)+(t.width||0)})).defined(DY),FY=aL().x(EY).y(SY).defined(DY),jY=kY().x(EY).y(SY).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius((function(t){return OY(t.cornerRadiusTopLeft,t.cornerRadius)||0}),(function(t){return OY(t.cornerRadiusTopRight,t.cornerRadius)||0}),(function(t){return OY(t.cornerRadiusBottomRight,t.cornerRadius)||0}),(function(t){return OY(t.cornerRadiusBottomLeft,t.cornerRadius)||0})),ZY=function(t,n){var e=null,r=JR(i);function i(){var i;if(e||(e=i=r()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),i)return e=null,i+""||null}return t="function"===typeof t?t:ER(t||uL),n="function"===typeof n?n:ER(void 0===n?64:+n),i.type=function(n){return arguments.length?(t="function"===typeof n?n:ER(n),i):t},i.size=function(t){return arguments.length?(n="function"===typeof t?t:ER(+t),i):n},i.context=function(t){return arguments.length?(e=null==t?null:t,i):e},i}().type((function(t){return pY(t.shape||"circle")})).size((function(t){return OY(t.size,64)})),NY=MY().x(EY).y(SY).defined(DY).size((function(t){return t.size||1}));function zY(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function UY(t,n,e,r){return jY.context(t)(n,e,r)}var PY=1;function RY(){PY=1}function LY(t,n,e){var r=n.clip,i=t._defs,a=n.clip_id||(n.clip_id="clip"+PY++),o=i.clipping[a]||(i.clipping[a]={id:a});return(0,g.mf)(r)?o.path=r(null):zY(e)?o.path=UY(null,e,0,0):(o.width=e.width||0,o.height=e.height||0),"url(#"+a+")"}function IY(t){this.clear(),t&&this.union(t)}function BY(t){this.mark=t,this.bounds=this.bounds||new IY}function qY(t){BY.call(this,t),this.items=this.items||[]}function HY(t){this._pending=0,this._loader=t||jP()}function WY(t){t._pending+=1}function YY(t){t._pending-=1}function XY(t,n,e){if(n.stroke&&0!==n.opacity&&0!==n.strokeOpacity){var r=null!=n.strokeWidth?+n.strokeWidth:1;t.expand(r+(e?function(t,n){return t.strokeJoin&&"miter"!==t.strokeJoin?0:n}(n,r):0))}return t}IY.prototype={clone:function(){return new IY(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set:function(t,n,e,r){return e<t?(this.x2=t,this.x1=e):(this.x1=t,this.x2=e),r<n?(this.y2=n,this.y1=r):(this.y1=n,this.y2=r),this},add:function(t,n){return t<this.x1&&(this.x1=t),n<this.y1&&(this.y1=n),t>this.x2&&(this.x2=t),n>this.y2&&(this.y2=n),this},expand:function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate:function(t,n){return this.x1+=t,this.x2+=t,this.y1+=n,this.y2+=n,this},rotate:function(t,n,e){var r=this.rotatedPoints(t,n,e);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(t,n,e){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,u=Math.cos(t),c=Math.sin(t),s=n-n*u+e*c,l=e-n*c-e*u;return[u*r-c*i+s,c*r+u*i+l,u*r-c*o+s,c*r+u*o+l,u*a-c*i+s,c*a+u*i+l,u*a-c*o+s,c*a+u*o+l]},union:function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect:function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses:function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith:function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects:function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains:function(t,n){return!(t<this.x1||t>this.x2||n<this.y1||n>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},(0,g.XW)(qY,BY),HY.prototype={pending:function(){return this._pending},sanitizeURL:function(t){var n=this;return WY(n),n._loader.sanitize(t,{context:"href"}).then((function(t){return YY(n),t})).catch((function(){return YY(n),null}))},loadImage:function(t){var n=this,e=Ll();return WY(n),n._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!e)throw{url:r};var i=new e,a=(0,g.nr)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=function(){return YY(n)},i.onerror=function(){return YY(n)},i.src=r,i})).catch((function(t){return YY(n),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},ready:function(){var t=this;return new Promise((function(n){!function e(r){t.pending()?setTimeout((function(){e(!0)}),10):n(r)}(!1)}))}};var GY,JY,$Y,VY,KY,QY,tX,nX,eX=eY-1e-8,rX=function(t,n){return GY.add(t,n)},iX=function(t,n){return rX(JY=t,$Y=n)},aX=function(t){return rX(t,GY.y1)},oX=function(t){return rX(GY.x1,t)},uX=function(t,n){return KY*t+tX*n},cX=function(t,n){return QY*t+nX*n},sX=function(t,n){return rX(uX(t,n),cX(t,n))},lX=function(t,n){return iX(uX(t,n),cX(t,n))};function fX(t,n){return GY=t,n?(VY=n*QW,KY=nX=Math.cos(VY),QY=Math.sin(VY),tX=-QY):(KY=nX=1,VY=QY=tX=0),hX}var hX={beginPath:function(){},closePath:function(){},moveTo:lX,lineTo:lX,rect:function(t,n,e,r){VY?(sX(t+e,n),sX(t+e,n+r),sX(t,n+r),lX(t,n)):(rX(t+e,n+r),iX(t,n))},quadraticCurveTo:function(t,n,e,r){var i=uX(t,n),a=cX(t,n),o=uX(e,r),u=cX(e,r);dX(JY,i,o,aX),dX($Y,a,u,oX),iX(o,u)},bezierCurveTo:function(t,n,e,r,i,a){var o=uX(t,n),u=cX(t,n),c=uX(e,r),s=cX(e,r),l=uX(i,a),f=cX(i,a);pX(JY,o,c,l,aX),pX($Y,u,s,f,oX),iX(l,f)},arc:function(t,n,e,r,i,a){if(r+=VY,i+=VY,JY=e*Math.cos(i)+t,$Y=e*Math.sin(i)+n,Math.abs(i-r)>eX)rX(t-e,n-e),rX(t+e,n+e);else{var o,u,c=function(r){return rX(e*Math.cos(r)+t,e*Math.sin(r)+n)};if(c(r),c(i),i!==r)if((r%=eY)<0&&(r+=eY),(i%=eY)<0&&(i+=eY),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=eY,o=r-r%nY,u=0;u<4&&o>i;++u,o-=nY)c(o);else for(o=r-r%nY+nY,u=0;u<4&&o<i;++u,o+=nY)c(o)}}};function dX(t,n,e,r){var i=(t-n)/(t+e-2*n);0<i&&i<1&&r(t+(n-t)*i)}function pX(t,n,e,r,i){var a,o=r-t+3*n-3*e,u=t+e-2*n,c=t-n,s=0,l=0;Math.abs(o)>tY?(a=u*u+c*o)>=0&&(s=(-u+(a=Math.sqrt(a)))/o,l=(-u-a)/o):s=.5*c/u,0<s&&s<1&&i(vX(s,t,n,e,r)),0<l&&l<1&&i(vX(l,t,n,e,r))}function vX(t,n,e,r,i){var a=1-t,o=a*a,u=t*t;return o*a*n+3*o*t*e+3*a*u*r+u*t*i}var gX=(gX=Rl(1,1))?gX.getContext("2d"):null,mX=new IY;function yX(t){return function(n,e){if(!gX)return!0;t(gX,n),mX.clear().union(n.bounds).intersect(e).round();for(var r=mX.x1,i=mX.y1,a=mX.x2,o=mX.y2,u=i;u<=o;++u)for(var c=r;c<=a;++c)if(gX.isPointInPath(c,u))return!0;return!1}}function bX(t,n){return n.contains(t.x||0,t.y||0)}function xX(t,n){var e=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return n.intersects(mX.set(e,r,e+i,r+a))}function _X(t,n){var e=t.x||0,r=t.y||0;return wX(n,e,r,null!=t.x2?t.x2:e,null!=t.y2?t.y2:r)}function wX(t,n,e,r,i){var a,o,u,c,s=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-n,p=i-e,v=0,g=1;for(c=0;c<4;++c){if(0===c&&(a=-d,o=-(s-n)),1===c&&(a=d,o=f-n),2===c&&(a=-p,o=-(l-e)),3===c&&(a=p,o=h-e),Math.abs(a)<1e-10&&o<0)return!1;if(u=o/a,a<0){if(u>g)return!1;u>v&&(v=u)}else if(a>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function kX(t,n){t.globalCompositeOperation=n.blend||"source-over"}function MX(t,n){return null==t?n:t}function OX(t,n){for(var e=n.length,r=0;r<e;++r)t.addColorStop(n[r].offset,n[r].color);return t}function EX(t,n,e){return IW(e)?function(t,n,e){var r,i=e.width(),a=e.height();if("radial"===n.gradient)r=t.createRadialGradient(e.x1+MX(n.x1,.5)*i,e.y1+MX(n.y1,.5)*a,Math.max(i,a)*MX(n.r1,0),e.x1+MX(n.x2,.5)*i,e.y1+MX(n.y2,.5)*a,Math.max(i,a)*MX(n.r2,.5));else{var o=MX(n.x1,0),u=MX(n.y1,0),c=MX(n.x2,1),s=MX(n.y2,0);if(o!==c&&u!==s&&i!==a){var l=Rl(Math.ceil(i),Math.ceil(a)),f=l.getContext("2d");return f.scale(i,a),f.fillStyle=OX(f.createLinearGradient(o,u,c,s),n.stops),f.fillRect(0,0,i,a),t.createPattern(l,"no-repeat")}r=t.createLinearGradient(e.x1+o*i,e.y1+u*a,e.x1+c*i,e.y1+s*a)}return OX(r,n.stops)}(t,e,n.bounds):e}function SX(t,n,e){return(e*=null==n.fillOpacity?1:n.fillOpacity)>0&&(t.globalAlpha=e,t.fillStyle=EX(t,n,n.fill),!0)}var DX=[];function CX(t,n,e){var r=null!=(r=n.strokeWidth)?r:1;return!(r<=0)&&((e*=null==n.strokeOpacity?1:n.strokeOpacity)>0&&(t.globalAlpha=e,t.strokeStyle=EX(t,n,n.stroke),t.lineWidth=r,t.lineCap=n.strokeCap||"butt",t.lineJoin=n.strokeJoin||"miter",t.miterLimit=n.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(n.strokeDash||DX),t.lineDashOffset=n.strokeDashOffset||0),!0))}function AX(t,n){return t.zindex-n.zindex||t.index-n.index}function TX(t){if(!t.zdirty)return t.zitems;var n,e,r,i=t.items,a=[];for(e=0,r=i.length;e<r;++e)(n=i[e]).index=e,n.zindex&&a.push(n);return t.zdirty=!1,t.zitems=a.sort(AX)}function FX(t,n){var e,r,i=t.items;if(i&&i.length){var a=TX(t);if(a&&a.length){for(e=0,r=i.length;e<r;++e)i[e].zindex||n(i[e]);i=a}for(e=0,r=i.length;e<r;++e)n(i[e])}}function jX(t,n){var e,r,i=t.items;if(!i||!i.length)return null;var a=TX(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(e=n(i[r]))return e;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(e=n(i[r])))return e;return null}function ZX(t){return function(n,e,r){FX(e,(function(e){r&&!r.intersects(e.bounds)||zX(t,n,e,e)}))}}function NX(t){return function(n,e,r){!e.items.length||r&&!r.intersects(e.bounds)||zX(t,n,e.items[0],e.items)}}function zX(t,n,e,r){var i=null==e.opacity?1:e.opacity;0!==i&&(t(n,r)||(kX(n,e),e.fill&&SX(n,e,i)&&n.fill(),e.stroke&&CX(n,e,i)&&n.stroke()))}function UX(t){return t=t||g.yb,function(n,e,r,i,a,o){return r*=n.pixelRatio,i*=n.pixelRatio,jX(e,(function(e){var u=e.bounds;if((!u||u.contains(a,o))&&u)return t(n,e,r,i,a,o)?e:void 0}))}}function PX(t,n){return function(e,r,i,a){var o,u,c=Array.isArray(r)?r[0]:r,s=null==n?c.fill:n,l=c.stroke&&e.isPointInStroke;return l&&(o=c.strokeWidth,u=c.strokeCap,e.lineWidth=null!=o?o:1,e.lineCap=null!=u?u:"butt"),!t(e,r)&&(s&&e.isPointInPath(i,a)||l&&e.isPointInStroke(i,a))}}function RX(t){return UX(PX(t))}function LX(t,n){return"translate("+t+","+n+")"}function IX(t){return"rotate("+t+")"}function BX(t){return LX(t.x||0,t.y||0)}function qX(t,n,e){function r(t,e){var r=e.x||0,i=e.y||0,a=e.angle||0;t.translate(r,i),a&&t.rotate(a*=QW),t.beginPath(),n(t,e),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,e){t("transform",function(t){return LX(t.x||0,t.y||0)+(t.angle?" "+IX(t.angle):"")}(e)),t("d",n(null,e))},bound:function(t,e){return n(fX(t,e.angle),e),XY(t,e).translate(e.x||0,e.y||0)},draw:ZX(r),pick:RX(r),isect:e||yX(r)}}var HX=qX("arc",(function(t,n){return CY.context(t)(n)}));function WX(t,n,e){function r(t,e){t.beginPath(),n(t,e)}var i=PX(r);return{type:t,tag:"path",nested:!0,attr:function(t,e){var r=e.mark.items;r.length&&t("d",n(null,r))},bound:function(t,e){var r=e.items;return 0===r.length?t:(n(fX(t),r),XY(t,r[0]))},draw:NX(r),pick:function(t,n,e,r,a,o){var u=n.items,c=n.bounds;return!u||!u.length||c&&!c.contains(a,o)?null:(e*=t.pixelRatio,r*=t.pixelRatio,i(t,u,e,r)?u[0]:null)},isect:bX,tip:e}}var YX=WX("area",(function(t,n){var e=n[0],r=e.interpolate||"linear";return("horizontal"===e.orient?TY:AY).curve(YW(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i="horizontal"===t[0].orient?n[1]:n[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,u=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<u&&(u=r,e=t[o]);return e}));function XX(t,n){t.beginPath(),zY(n)?UY(t,n,0,0):t.rect(0,0,n.width||0,n.height||0),t.clip()}function GX(t){var n=MX(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&n>.5&&n<1.5?.5-Math.abs(n-1):0}function JX(t,n){var e=GX(n);t("d",UY(null,n,e,e))}function $X(t,n,e,r){var i=GX(n);t.beginPath(),UY(t,n,(e||0)+i,(r||0)+i)}var VX=PX($X),KX=PX($X,!1),QX=PX($X,!0);var tG={type:"group",tag:"g",nested:!1,attr:function(t,n){t("transform",BX(n))},bound:function(t,n){if(!n.clip&&n.items)for(var e=n.items,r=e.length,i=0;i<r;++i)t.union(e[i].bounds);return(n.clip||n.width||n.height)&&!n.noBound&&t.add(0,0).add(n.width||0,n.height||0),XY(t,n),t.translate(n.x||0,n.y||0)},draw:function(t,n,e){var r=this;FX(n,(function(n){var i=n.x||0,a=n.y||0,o=n.strokeForeground,u=null==n.opacity?1:n.opacity;(n.stroke||n.fill)&&u&&($X(t,n,i,a),kX(t,n),n.fill&&SX(t,n,u)&&t.fill(),n.stroke&&!o&&CX(t,n,u)&&t.stroke()),t.save(),t.translate(i,a),n.clip&&XX(t,n),e&&e.translate(-i,-a),FX(n,(function(n){r.draw(t,n,e)})),e&&e.translate(i,a),t.restore(),o&&n.stroke&&u&&($X(t,n,i,a),kX(t,n),CX(t,n,u)&&t.stroke())}))},pick:function(t,n,e,r,i,a){var o=this;if(n.bounds&&!n.bounds.contains(i,a)||!n.items)return null;var u=e*t.pixelRatio,c=r*t.pixelRatio;return jX(n,(function(s){var l,f,h,d=s.bounds;if(!d||d.contains(i,a)){f=s.x||0,h=s.y||0;var p=f+(s.width||0),v=h+(s.height||0),g=s.clip;if(!g||!(i<f||i>p||a<h||a>v)){if(t.save(),t.translate(f,h),f=i-f,h=a-h,g&&zY(s)&&!QX(t,s,u,c))return t.restore(),null;var m=s.strokeForeground,y=!1!==n.interactive;return y&&m&&s.stroke&&KX(t,s,u,c)?(t.restore(),s):(!(l=jX(s,(function(t){return function(t,n,e){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(n,e)}(t,f,h)?o.pick(t,e,r,f,h):null})))&&y&&(s.fill||!m&&s.stroke)&&VX(t,s,u,c)&&(l=s),t.restore(),l||null)}}}))},isect:xX,content:function(t,n,e){t("clip-path",n.clip?LY(e,n,n):null)},background:function(t,n){t("class","background"),t("aria-hidden",!0),JX(t,n)},foreground:function(t,n){t("class","foreground"),t("aria-hidden",!0),n.strokeForeground?JX(t,n):t("d","")}},nG={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eG(t,n){var e=t.image;return(!e||t.url&&t.url!==e.url)&&(e={complete:!1,width:0,height:0},n.loadImage(t.url).then((function(n){t.image=n,t.image.url=t.url}))),e}function rG(t,n){return null!=t.width?t.width:n&&n.width?!1!==t.aspect&&t.height?t.height*n.width/n.height:n.width:0}function iG(t,n){return null!=t.height?t.height:n&&n.height?!1!==t.aspect&&t.width?t.width*n.height/n.width:n.height:0}function aG(t,n){return"center"===t?n/2:"right"===t?n:0}function oG(t,n){return"middle"===t?n/2:"bottom"===t?n:0}var uG={type:"image",tag:"image",nested:!1,attr:function(t,n,e){var r=eG(n,e),i=rG(n,r),a=iG(n,r),o=(n.x||0)-aG(n.align,i),u=(n.y||0)-oG(n.baseline,a);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",nG["xmlns:xlink"],"xlink:href"),t("transform",LX(o,u)),t("width",i),t("height",a),t("preserveAspectRatio",!1===n.aspect?"none":"xMidYMid")},bound:function(t,n){var e=n.image,r=rG(n,e),i=iG(n,e),a=(n.x||0)-aG(n.align,r),o=(n.y||0)-oG(n.baseline,i);return t.set(a,o,a+r,o+i)},draw:function(t,n,e){var r=this;FX(n,(function(n){if(!e||e.intersects(n.bounds)){var i=eG(n,r),a=rG(n,i),o=iG(n,i);if(0!==a&&0!==o){var u,c,s,l,f=(n.x||0)-aG(n.align,a),h=(n.y||0)-oG(n.baseline,o);!1!==n.aspect&&(c=i.width/i.height,s=n.width/n.height,c===c&&s===s&&c!==s&&(s<c?(h+=(o-(l=a/c))/2,o=l):(f+=(a-(l=o*c))/2,a=l))),(i.complete||i.toDataURL)&&(kX(t,n),t.globalAlpha=null!=(u=n.opacity)?u:1,t.imageSmoothingEnabled=!1!==n.smooth,t.drawImage(i,f,h,a,o))}}}))},pick:UX(),isect:g.yb,get:eG,xOffset:aG,yOffset:oG},cG=WX("line",(function(t,n){var e=n[0],r=e.interpolate||"linear";return FY.curve(YW(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(e=t[a].x-n[0])*e+(r=t[a].y-n[1])*r<i)return t[a];return null}));function sG(t,n){var e=n.path;if(null==e)return!0;var r=n.x||0,i=n.y||0,a=n.scaleX||1,o=n.scaleY||1,u=(n.angle||0)*QW,c=n.pathCache;c&&c.path===e||((n.pathCache=c=KW(e)).path=e),u&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(u),lY(t,c,0,0,a,o),t.rotate(-u),t.translate(-r,-i)):lY(t,c,r,i,a,o)}var lG={type:"path",tag:"path",nested:!1,attr:function(t,n){var e=n.scaleX||1,r=n.scaleY||1;1===e&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return LX(t.x||0,t.y||0)+(t.angle?" "+IX(t.angle):"")+(t.scaleX||t.scaleY?" "+function(t,n){return"scale("+t+","+n+")"}(t.scaleX||1,t.scaleY||1):"")}(n)),t("d",n.path)},bound:function(t,n){return sG(fX(t,n.angle),n)?t.set(0,0,0,0):XY(t,n,!0)},draw:ZX(sG),pick:RX(sG),isect:yX(sG)};function fG(t,n){t.beginPath(),UY(t,n)}var hG={type:"rect",tag:"path",nested:!1,attr:function(t,n){t("d",UY(null,n))},bound:function(t,n){var e,r;return XY(t.set(e=n.x||0,r=n.y||0,e+n.width||0,r+n.height||0),n)},draw:ZX(fG),pick:RX(fG),isect:xX};function dG(t,n,e){var r,i,a,o;return!(!n.stroke||!CX(t,n,e))&&(r=n.x||0,i=n.y||0,a=null!=n.x2?n.x2:r,o=null!=n.y2?n.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var pG={type:"rule",tag:"line",nested:!1,attr:function(t,n){t("transform",BX(n)),t("x2",null!=n.x2?n.x2-(n.x||0):0),t("y2",null!=n.y2?n.y2-(n.y||0):0)},bound:function(t,n){var e,r;return XY(t.set(e=n.x||0,r=n.y||0,null!=n.x2?n.x2:e,null!=n.y2?n.y2:r),n)},draw:function(t,n,e){FX(n,(function(n){if(!e||e.intersects(n.bounds)){var r=null==n.opacity?1:n.opacity;r&&dG(t,n,r)&&(kX(t,n),t.stroke())}}))},pick:UX((function(t,n,e,r){return!!t.isPointInStroke&&(dG(t,n,1)&&t.isPointInStroke(e,r))})),isect:_X},vG=qX("shape",(function(t,n){return(n.mark.shape||n.shape).context(t)(n)})),gG=qX("symbol",(function(t,n){return ZY.context(t)(n)}),bX),mG=(0,g.$m)(),yG={height:MG,measureWidth:wG,estimateWidth:xG,width:xG,canvas:bG};function bG(t){yG.width=t&&gX?wG:xG}function xG(t,n){return _G(DG(t,n),MG(t))}function _G(t,n){return~~(.8*t.length*n)}function wG(t,n){return MG(t)<=0||!(n=DG(t,n))?0:kG(n,AG(t))}function kG(t,n){var e="(".concat(n,") ").concat(t),r=mG.get(e);return void 0===r&&(gX.font=n,r=gX.measureText(t).width,mG.set(e,r)),r}function MG(t){return null!=t.fontSize?+t.fontSize||0:11}function OG(t){return null!=t.lineHeight?t.lineHeight:MG(t)+2}function EG(t){return n=t.lineBreak&&t.text&&!(0,g.kJ)(t.text)?t.text.split(t.lineBreak):t.text,(0,g.kJ)(n)?n.length>1?n:n[0]:n;var n}function SG(t){var n=EG(t);return((0,g.kJ)(n)?n.length-1:0)*OG(t)}function DG(t,n){var e=null==n?"":(n+"").trim();return t.limit>0&&e.length?function(t,n){var e=+t.limit,r=function(t){if(yG.width===wG){var n=AG(t);return function(t){return kG(t,n)}}var e=MG(t);return function(t){return _G(t,e)}}(t);if(r(n)<e)return n;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,u=0,c=n.length;if(e-=r(a),o){for(;u<c;)i=u+c>>>1,r(n.slice(i))>e?u=i+1:c=i;return a+n.slice(u)}for(;u<c;)i=1+(u+c>>>1),r(n.slice(0,i))<e?u=i:c=i-1;return n.slice(0,u)+a}(t,e):e}function CG(t,n){var e=t.font;return(n&&e?String(e).replace(/"/g,"'"):e)||"sans-serif"}function AG(t,n){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+MG(t)+"px "+CG(t,n)}function TG(t){var n=t.baseline,e=MG(t);return Math.round("top"===n?.79*e:"middle"===n?.3*e:"bottom"===n?-.21*e:"line-top"===n?.29*e+.5*OG(t):"line-bottom"===n?.29*e-.5*OG(t):0)}bG(!0);var FG={left:"start",center:"middle",right:"end"},jG=new IY;function ZG(t){var n,e=t.x||0,r=t.y||0,i=t.radius||0;return i&&(n=(t.theta||0)-nY,e+=i*Math.cos(n),r+=i*Math.sin(n)),jG.x1=e,jG.y1=r,jG}function NG(t,n,e){var r,i=yG.height(n),a=n.align,o=ZG(n),u=o.x1,c=o.y1,s=n.dx||0,l=(n.dy||0)+TG(n)-Math.round(.8*i),f=EG(n);if((0,g.kJ)(f)?(i+=OG(n)*(f.length-1),r=f.reduce((function(t,e){return Math.max(t,yG.width(n,e))}),0)):r=yG.width(n,f),"center"===a?s-=r/2:"right"===a&&(s-=r),t.set(s+=u,l+=c,s+r,l+i),n.angle&&!e)t.rotate(n.angle*QW,u,c);else if(2===e)return t.rotatedPoints(n.angle*QW,u,c);return t}var zG={type:"text",tag:"text",nested:!1,attr:function(t,n){var e,r=n.dx||0,i=(n.dy||0)+TG(n),a=ZG(n),o=a.x1,u=a.y1,c=n.angle||0;t("text-anchor",FG[n.align]||"start"),c?(e=LX(o,u)+" "+IX(c),(r||i)&&(e+=" "+LX(r,i))):e=LX(o+r,u+i),t("transform",e)},bound:NG,draw:function(t,n,e){FX(n,(function(n){var r,i,a,o,u,c,s,l=null==n.opacity?1:n.opacity;if(!(e&&!e.intersects(n.bounds)||0===l||n.fontSize<=0||null==n.text||0===n.text.length)){if(t.font=AG(n),t.textAlign=n.align||"left",i=(r=ZG(n)).x1,a=r.y1,n.angle&&(t.save(),t.translate(i,a),t.rotate(n.angle*QW),i=a=0),i+=n.dx||0,a+=(n.dy||0)+TG(n),c=EG(n),kX(t,n),(0,g.kJ)(c))for(u=OG(n),o=0;o<c.length;++o)s=DG(n,c[o]),n.fill&&SX(t,n,l)&&t.fillText(s,i,a),n.stroke&&CX(t,n,l)&&t.strokeText(s,i,a),a+=u;else s=DG(n,c),n.fill&&SX(t,n,l)&&t.fillText(s,i,a),n.stroke&&CX(t,n,l)&&t.strokeText(s,i,a);n.angle&&t.restore()}}))},pick:UX((function(t,n,e,r,i,a){if(n.fontSize<=0)return!1;if(!n.angle)return!0;var o=ZG(n),u=o.x1,c=o.y1,s=NG(jG,n,1),l=-n.angle*QW,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(u-f*u+h*c),p=h*i+f*a+(c-h*u-f*c);return s.contains(d,p)})),isect:function(t,n){var e=NG(jG,t,2);return wX(n,e[0],e[1],e[2],e[3])||wX(n,e[0],e[1],e[4],e[5])||wX(n,e[4],e[5],e[6],e[7])||wX(n,e[2],e[3],e[6],e[7])}},UG=WX("trail",(function(t,n){return NY.context(t)(n)}),(function(t,n){for(var e,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(e=t[i].x-n[0])*e+(r=t[i].y-n[1])*r<(e=t[i].size||1)*e)return t[i];return null})),PG={arc:HX,area:YX,group:tG,image:uG,line:cG,path:lG,rect:hG,rule:pG,shape:vG,symbol:gG,text:zG,trail:UG};function RG(t,n,e){var r=PG[t.mark.marktype],i=n||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new IY),t,e)}var LG={mark:null};function IG(t,n,e){var r,i,a,o,u=PG[t.marktype],c=u.bound,s=t.items,l=s&&s.length;if(u.nested)return l?a=s[0]:(LG.mark=t,a=LG),o=RG(a,c,e),n=n&&n.union(o)||o;if(n=n||t.bounds&&t.bounds.clear()||new IY,l)for(r=0,i=s.length;r<i;++r)n.union(RG(s[r],c,e));return t.bounds=n}var BG=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function qG(t,n){return JSON.stringify(t,BG,n)}function HG(t){return WG("string"===typeof t?JSON.parse(t):t)}function WG(t){var n,e,r,i=t.marktype,a=t.items;if(a)for(e=0,r=a.length;e<r;++e)n=i?"mark":"group",a[e][n]=t,a[e].zindex&&(a[e][n].zdirty=!0),"group"===(i||n)&&WG(a[e]);return i&&IG(t),t}function YG(t){arguments.length?this.root=HG(t):(this.root=XG({marktype:"group",name:"root",role:"frame"}),this.root.items=[new qY(this.root)])}function XG(t,n){var e={bounds:new IY,clip:!!t.clip,group:n,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(e.aria=t.aria),t.description&&(e.description=t.description),e}function GG(t,n,e){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?e?t.createElementNS(e,n):t.createElement(n):null}function JG(t,n){n=n.toLowerCase();for(var e=t.childNodes,r=0,i=e.length;r<i;++r)if(e[r].tagName.toLowerCase()===n)return e[r]}function $G(t,n,e,r){var i,a=t.childNodes[n];return a&&a.tagName.toLowerCase()===e.toLowerCase()||(i=a||null,a=GG(t.ownerDocument,e,r),t.insertBefore(a,i)),a}function VG(t,n){for(var e=t.childNodes,r=e.length;r>n;)t.removeChild(e[--r]);return t}function KG(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function QG(t,n){var e=n.getBoundingClientRect();return[t.clientX-e.left-(n.clientLeft||0),t.clientY-e.top-(n.clientTop||0)]}function tJ(t,n){this._active=null,this._handlers={},this._loader=t||jP(),this._tooltip=n||nJ}function nJ(t,n,e,r){t.element().setAttribute("title",r||"")}function eJ(t){this._el=null,this._bgcolor=null,this._loader=new HY(t)}YG.prototype={toJSON:function(t){return qG(this.root,t||0)},mark:function(t,n,e){var r=XG(t,n=n||this.root.items[0]);return n.items[e]=r,r.zindex&&(r.group.zdirty=!0),r}},tJ.prototype={initialize:function(t,n,e){return this._el=t,this._obj=e||null,this.origin(n)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene:function(t){return arguments.length?(this._scene=t,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(t,n,e){for(var r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!e||t[r].handler===e))return r;return-1},handlers:function(t){var n=this._handlers,e=[];if(t)e.push.apply(e,(0,b.Z)(n[this.eventName(t)]));else for(var r in n)e.push.apply(e,(0,b.Z)(n[r]));return e},eventName:function(t){var n=t.indexOf(".");return n<0?t:t.slice(0,n)},handleHref:function(t,n,e){this._loader.sanitize(e,{context:"href"}).then((function(n){var e=new MouseEvent(t.type,t),r=GG(null,"a");for(var i in n)r.setAttribute(i,n[i]);r.dispatchEvent(e)})).catch((function(){}))},handleTooltip:function(t,n,e){if(n&&null!=n.tooltip){n=function(t,n,e,r){var i,a,o=t&&t.mark;if(o&&(i=PG[o.marktype]).tip){for((a=QG(n,e))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(n,t,this.canvas(),this._origin);var r=e&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}},getItemBoundingClientRect:function(t){var n=this.canvas();if(n){for(var e=n.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height(),u=i.x1+r[0]+e.left,c=i.y1+r[1]+e.top;t.mark&&(t=t.mark.group);)u+=t.x||0,c+=t.y||0;return{x:u,y:c,width:a,height:o,left:u,top:c,right:u+a,bottom:c+o}}}},eJ.prototype={initialize:function(t,n,e,r,i){return this._el=t,this.resize(n,e,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize:function(t,n,e,r){return this._width=t,this._height=n,this._origin=e||[0,0],this._scale=r||1,this},dirty:function(){},render:function(t){var n=this;return n._call=function(){n._render(t)},n._call(),n._call=null,n},_render:function(){},renderAsync:function(t){var n=this.render(t);return this._ready?this._ready.then((function(){return n})):Promise.resolve(n)},_load:function(t,n){var e=this,r=e._loader[t](n);if(!e._ready){var i=e._call;e._ready=e._loader.ready().then((function(t){t&&i(),e._ready=null}))}return r},sanitizeURL:function(t){return this._load("sanitizeURL",t)},loadImage:function(t){return this._load("loadImage",t)}};var rJ="dragenter",iJ="dragleave",aJ="dragover",oJ="mousedown",uJ="mousemove",cJ="mouseout",sJ="mouseover",lJ="click",fJ="mousewheel",hJ="touchstart",dJ="touchmove",pJ="touchend",vJ=["keydown","keypress","keyup",rJ,iJ,aJ,oJ,"mouseup",uJ,cJ,sJ,lJ,"dblclick","wheel",fJ,hJ,dJ,pJ],gJ=uJ,mJ=cJ,yJ=lJ;function bJ(t,n){tJ.call(this,t,n),this._down=null,this._touch=null,this._first=!0,this._events={}}var xJ=function(t){return t===hJ||t===dJ||t===pJ?[hJ,dJ,pJ]:[t]};function _J(t,n){xJ(n).forEach((function(n){return function(t,n){var e=t.canvas();e&&!t._events[n]&&(t._events[n]=1,e.addEventListener(n,t[n]?function(e){return t[n](e)}:function(e){return t.fire(n,e)}))}(t,n)}))}function wJ(t,n,e){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(e,r),this._active=a,this.fire(n,r)),this.fire(t,r)}}function kJ(t){return function(n){this.fire(t,n),this._active=null}}(0,g.XW)(bJ,tJ,{initialize:function(t,n,e){var r=this;return this._canvas=t&&JG(t,"canvas"),[lJ,oJ,uJ,cJ,iJ].forEach((function(t){return _J(r,t)})),tJ.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:vJ,DOMMouseScroll:function(t){this.fire(fJ,t)},mousemove:wJ(uJ,sJ,cJ),dragover:wJ(aJ,rJ,iJ),mouseout:kJ(cJ),dragleave:kJ(iJ),mousedown:function(t){this._down=this._active,this.fire(oJ,t)},click:function(t){this._down===this._active&&(this.fire(lJ,t),this._down=null)},touchstart:function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(hJ,t,!0)},touchmove:function(t){this.fire(dJ,t,!0)},touchend:function(t){this.fire(pJ,t,!0),this._touch=null},fire:function(t,n,e){var r=e?this._touch:this._active,i=this._handlers[t];if(n.vegaType=t,t===yJ&&r&&r.href?this.handleHref(n,r,r.href):t!==gJ&&t!==mJ||this.handleTooltip(n,r,t!==mJ),i)for(var a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,n,r)},on:function(t,n){var e=this.eventName(t),r=this._handlers;return this._handlerIndex(r[e],t,n)<0&&(_J(this,t),(r[e]||(r[e]=[])).push({type:t,handler:n})),this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&r.splice(i,1),this},pickEvent:function(t){var n=QG(t,this._canvas),e=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-e[0],n[1]-e[1])},pick:function(t,n,e,r,i){var a=this.context();return PG[t.marktype].pick.call(this,a,t,n,e,r,i)}});var MJ="undefined"!==typeof window&&window.devicePixelRatio||1;function OJ(t){eJ.call(this,t),this._options={},this._redraw=!1,this._dirty=new IY,this._tempb=new IY}var EJ=eJ.prototype;function SJ(t,n){tJ.call(this,t,n);var e=this;e._hrefHandler=DJ(e,(function(t,n){n&&n.href&&e.handleHref(t,n,n.href)})),e._tooltipHandler=DJ(e,(function(t,n){e.handleTooltip(t,n,t.type!==mJ)}))}(0,g.XW)(OJ,eJ,{initialize:function(t,n,e,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Rl(1,1,this._options.type),t&&this._canvas&&(VG(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),EJ.initialize.call(this,t,n,e,r,i)},resize:function(t,n,e,r){if(EJ.resize.call(this,t,n,e,r),this._canvas)!function(t,n,e,r,i,a){var o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=o?MJ:i;for(var s in t.width=n*c,t.height=e*c,a)u[s]=a[s];o&&1!==c&&(t.style.width=n+"px",t.style.height=e+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var i=this._options.externalContext;i||(0,g.vU)("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(t){for(var n=this._tempb.clear().union(t.bounds),e=t.mark.group;e;)n.translate(e.x||0,e.y||0),e=e.mark.group;this._dirty.union(n)},_render:function(t){var n=this.context(),e=this._origin,r=this._width,i=this._height,a=this._dirty,o=function(t,n,e){return(new IY).set(0,0,n,e).translate(-t[0],-t[1])}(e,r,i);n.save();var u=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):function(t,n,e){return n.expand(1).round(),t.pixelRatio%1&&n.scale(t.pixelRatio).round().scale(1/t.pixelRatio),n.translate(-e[0]%1,-e[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),n}(n,o.intersect(a),e);return this.clear(-e[0],-e[1],r,i),this.draw(n,t,u),n.restore(),a.clear(),this},draw:function(t,n,e){var r=PG[n.marktype];n.clip&&function(t,n){var e=n.clip;t.save(),(0,g.mf)(e)?(t.beginPath(),e(t),t.clip()):XX(t,n.group)}(t,n),r.draw.call(this,t,n,e),n.clip&&t.restore()},clear:function(t,n,e,r){var i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,n,e,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,e,r))}});var DJ=function(t,n){return function(e){var r=e.target.__data__;r=Array.isArray(r)?r[0]:r,e.vegaType=e.type,n.call(t._obj,e,r)}};(0,g.XW)(SJ,tJ,{initialize:function(t,n,e){var r=this._svg;return r&&(r.removeEventListener(yJ,this._hrefHandler),r.removeEventListener(gJ,this._tooltipHandler),r.removeEventListener(mJ,this._tooltipHandler)),this._svg=r=t&&JG(t,"svg"),r&&(r.addEventListener(yJ,this._hrefHandler),r.addEventListener(gJ,this._tooltipHandler),r.addEventListener(mJ,this._tooltipHandler)),tJ.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._svg},on:function(t,n){var e=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[e],t,n)<0){var i={type:t,handler:n,listener:DJ(this,n)};(r[e]||(r[e]=[])).push(i),this._svg&&this._svg.addEventListener(e,i.listener)}return this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&(this._svg&&this._svg.removeEventListener(e,r[i].listener),r.splice(i,1)),this}});var CJ="aria-hidden",AJ="aria-label",TJ="role",FJ="aria-roledescription",jJ="graphics-object",ZJ="graphics-symbol",NJ=function(t,n,e){var r;return r={},(0,nt.Z)(r,TJ,t),(0,nt.Z)(r,FJ,n),(0,nt.Z)(r,AJ,e||void 0),r},zJ=(0,g.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),UJ={axis:{desc:"axis",caption:function(t){var n=t.datum,e=t.orient,r=n.title?BJ(t):null,i=t.context,a=i.scales[n.scale].value,o=i.dataflow.locale(),u=a.type;return"".concat("left"===e||"right"===e?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(lW(u)?"discrete":u," scale")+" with ".concat(PW(o,a,t))}},legend:{desc:"legend",caption:function(t){var n=t.datum,e=n.title?BJ(t):null,r="".concat(n.type||""," legend").trim(),i=n.scales,a=Object.keys(i),o=t.context,u=o.scales[i[a[0]]].value,c=o.dataflow.locale();return function(t){return t.length?t[0].toUpperCase()+t.slice(1):t}(r)+(e?" titled '".concat(e,"'"):"")+" for ".concat(function(t){return t=t.map((function(t){return t+("fill"===t||"stroke"===t?" color":"")})),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+(0,g.fj)(t)}(a))+" with ".concat(PW(c,u,t))}},"title-text":{desc:"title",caption:function(t){return"Title text '".concat(IJ(t),"'")}},"title-subtitle":{desc:"subtitle",caption:function(t){return"Subtitle text '".concat(IJ(t),"'")}}},PJ={ariaRole:TJ,ariaRoleDescription:FJ,description:AJ};function RJ(t,n){var e=!1===n.aria;if(t(CJ,e||void 0),e||null==n.description)for(var r in PJ)t(PJ[r],void 0);else{var i=n.mark.marktype;t(AJ,n.description),t(TJ,n.ariaRole||("group"===i?jJ:ZJ)),t(FJ,n.ariaRoleDescription||"".concat(i," mark"))}}function LJ(t){return!1===t.aria?(0,nt.Z)({},CJ,!0):zJ[t.role]?null:UJ[t.role]?function(t,n){try{var e=t.items[0],r=n.caption||function(){return""};return NJ(n.role||ZJ,n.desc,e.description||r(e))}catch(i){return null}}(t,UJ[t.role]):function(t){var n=t.marktype,e="group"===n||"text"===n||t.items.some((function(t){return null!=t.description&&!1!==t.aria}));return NJ(e?jJ:ZJ,"".concat(n," mark container"),t.description)}(t)}function IJ(t){return(0,g.IX)(t.text).join(" ")}function BJ(t){try{return(0,g.IX)((0,g.fj)(t.items).items[0].text).join(" ")}catch(n){return null}}var qJ=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},HJ=function(t){return qJ(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")};function WJ(){var t="",n="",e="",r=[],i=function(){return n=e=""},a=function(a){n&&(t+="".concat(n,">").concat(e),i()),r.push(a)},o=function(t,e){return null!=e&&(n+=" ".concat(t,'="').concat(HJ(e),'"')),u},u={open:function(t){a(t),n="<"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var c=0,s=r;c<s.length;c++){var l=s[c];for(var f in l)o(f,l[f])}return u},close:function(){var a=r.pop();return t+=n?n+(e?">".concat(e,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),u},attr:o,text:function(t){return e+=qJ(t),u},toString:function(){return t}};return u}var YJ=function(t){return XJ(WJ(),t)+""};function XJ(t,n){if(t.open(n.tagName),n.hasAttributes())for(var e=n.attributes,r=e.length,i=0;i<r;++i)t.attr(e[i].name,e[i].value);if(n.hasChildNodes()){var a,o=n.childNodes,u=(0,_a.Z)(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;3===c.nodeType?t.text(c.nodeValue):XJ(t,c)}}catch(s){u.e(s)}finally{u.f()}}return t.close()}var GJ={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},JJ={blend:"mix-blend-mode"},$J={fill:"none","stroke-miterlimit":10},VJ="http://www.w3.org/2000/xmlns/",KJ=nG.xmlns;function QJ(t){eJ.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var t$=eJ.prototype;function n$(t,n){for(;t&&t.dirty!==n;t=t.mark.group){if(t.dirty=n,!t.mark||t.mark.dirty===n)return;t.mark.dirty=n}}function e$(t,n,e){var r,i,a;if("radial"===n.gradient){var o=$G(t,e++,"pattern",KJ);l$(o,{id:LW+n.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),l$(o=$G(o,0,"rect",KJ),{width:1,height:1,fill:"url(".concat(h$(),"#").concat(n.id,")")}),l$(t=$G(t,e++,"radialGradient",KJ),{id:n.id,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})}else l$(t=$G(t,e++,"linearGradient",KJ),{id:n.id,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2});for(r=0,i=n.stops.length;r<i;++r)(a=$G(t,r,"stop",KJ)).setAttribute("offset",n.stops[r].offset),a.setAttribute("stop-color",n.stops[r].color);return VG(t,r),e}function r$(t,n,e){return(t=$G(t,e,"clipPath",KJ)).setAttribute("id",n.id),n.path?$G(t,0,"path",KJ).setAttribute("d",n.path):l$($G(t,0,"rect",KJ),{x:0,y:0,width:n.width,height:n.height}),VG(t,1),e+1}function i$(t,n,e,r,i){var a,o=t._svg;if(!o&&(o=GG(a=n.ownerDocument,r,KJ),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var u=GG(a,"path",KJ);o.appendChild(u),u.__data__=t;var c=GG(a,"g",KJ);o.appendChild(c),c.__data__=t;var s=GG(a,"path",KJ);o.appendChild(s),s.__data__=t,s.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(t,n){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=n}(o,e))&&n.insertBefore(o,e?e.nextSibling:n.firstChild),o}(0,g.XW)(QJ,eJ,{initialize:function(t,n,e,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=$G(t,0,"svg",KJ),this._svg.setAttributeNS(VJ,"xmlns",KJ),this._svg.setAttributeNS(VJ,"xmlns:xlink",nG["xmlns:xlink"]),this._svg.setAttribute("version",nG.version),this._svg.setAttribute("class","marks"),VG(t,1),this._root=$G(this._svg,0,"g",KJ),l$(this._root,$J),VG(this._svg,1)),this.background(this._bgcolor),t$.initialize.call(this,t,n,e,r,i)},background:function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),t$.background.apply(this,arguments)},resize:function(t,n,e,r){return t$.resize.call(this,t,n,e,r),this._svg&&(l$(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var t,n=this._svg,e=this._bgcolor;if(!n)return null;e&&(n.removeAttribute("style"),l$(t=$G(n,0,"rect",KJ),{width:this._width,height:this._height,fill:e}));var r=YJ(n);return e&&(n.removeChild(t),this._svg.style.setProperty("background-color",e)),r},_render:function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),VG(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty:function(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var n,e,r,i,a,o,u,c=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(e=(n=t[a]).mark).marktype!==r&&(r=e.marktype,i=PG[r]),e.zdirty&&e.dirty!==c&&(this._dirtyAll=!1,n$(n,c),e.items.forEach((function(t){t.dirty=c}))),e.zdirty||(n.exit?(i.nested&&e.items.length?(u=e.items[0])._svg&&this._update(i,u._svg,u):n._svg&&(u=n._svg.parentNode)&&u.removeChild(n._svg),n._svg=null):(n=i.nested?e.items[0]:n)._update!==c&&(n._svg&&n._svg.ownerSVGElement?this._update(i,n._svg,n):(this._dirtyAll=!1,n$(n,c)),n._update=c));return!this._dirtyAll},mark:function(t,n,e){var r=this;if(!this.isDirty(n))return n._svg;var i=this._svg,a=PG[n.marktype],o=!1===n.interactive?"none":null,u="g"===a.tag,c=i$(n,t,e,"g",i);c.setAttribute("class",KG(n));var s=LJ(n);for(var l in s)f$(c,l,s[l]);u||f$(c,"pointer-events",o),f$(c,"clip-path",n.clip?LY(this,n,n.group):null);var f=null,h=0,d=function(t){var n=r.isDirty(t),e=i$(t,c,f,a.tag,i);n&&(r._update(a,e,t),u&&function(t,n,e){n=n.lastChild.previousSibling;var r,i=0;FX(e,(function(e){r=t.mark(n,e,r),++i})),VG(n,1+i)}(r,e,t)),f=e,++h};return a.nested?n.items.length&&d(n.items[0]):FX(n,d),VG(c,h),c},_update:function(t,n,e){a$=n,o$=n.__values__,RJ(c$,e),t.attr(c$,e,this);var r=u$[t.type];r&&r.call(this,t,n,e),a$&&this.style(a$,e)},style:function(t,n){if(null!=n){for(var e in GJ){var r="font"===e?CG(n):n[e];if(r!==o$[e]){var i=GJ[e];null==r?t.removeAttribute(i):(IW(r)&&(r=BW(r,this._defs.gradient,h$())),t.setAttribute(i,r+"")),o$[e]=r}}for(var a in JJ)s$(t,JJ[a],n[a])}},defs:function(){var t=this._svg,n=this._defs,e=n.el,r=0;for(var i in n.gradient)e||(n.el=e=$G(t,1,"defs",KJ)),r=e$(e,n.gradient[i],r);for(var a in n.clipping)e||(n.el=e=$G(t,1,"defs",KJ)),r=r$(e,n.clipping[a],r);e&&(0===r?(t.removeChild(e),n.el=null):VG(e,r))},_clearDefs:function(){var t=this._defs;t.gradient={},t.clipping={}}});var a$=null,o$=null,u$={group:function(t,n,e){var r=a$=n.childNodes[2];o$=r.__values__,t.foreground(c$,e,this),o$=n.__values__,a$=n.childNodes[1],t.content(c$,e,this);var i=a$=n.childNodes[0];t.background(c$,e,this);var a=!1===e.mark.interactive?"none":null;if(a!==o$.events&&(f$(r,"pointer-events",a),f$(i,"pointer-events",a),o$.events=a),e.strokeForeground&&e.stroke){var o=e.fill;f$(r,"display",null),this.style(i,e),f$(i,"stroke",null),o&&(e.fill=null),o$=r.__values__,this.style(r,e),o&&(e.fill=o),a$=null}else f$(r,"display","none")},image:function(t,n,e){!1===e.smooth?(s$(n,"image-rendering","optimizeSpeed"),s$(n,"image-rendering","pixelated")):s$(n,"image-rendering",null)},text:function(t,n,e){var r,i,a,o,u=EG(e);(0,g.kJ)(u)?(r=(i=u.map((function(t){return DG(e,t)}))).join("\n"))!==o$.text&&(VG(n,0),a=n.ownerDocument,o=OG(e),i.forEach((function(t,r){var i=GG(a,"tspan",KJ);i.__data__=e,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),n.appendChild(i)})),o$.text=r):(i=DG(e,u))!==o$.text&&(n.textContent=i,o$.text=i),f$(n,"font-family",CG(e)),f$(n,"font-size",MG(e)+"px"),f$(n,"font-style",e.fontStyle),f$(n,"font-variant",e.fontVariant),f$(n,"font-weight",e.fontWeight)}};function c$(t,n,e){n!==o$[t]&&(e?function(t,n,e,r){null!=e?t.setAttributeNS(r,n,e):t.removeAttributeNS(r,n)}(a$,t,n,e):f$(a$,t,n),o$[t]=n)}function s$(t,n,e){e!==o$[n]&&(null==e?t.style.removeProperty(n):t.style.setProperty(n,e+""),o$[n]=e)}function l$(t,n){for(var e in n)f$(t,e,n[e])}function f$(t,n,e){null!=e?t.setAttribute(n,e):t.removeAttribute(n)}function h$(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function d$(t){eJ.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}(0,g.XW)(d$,eJ,{svg:function(){return this._text},_render:function(t){var n=WJ();n.open("svg",(0,g.l7)({},nG,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var e=this._bgcolor;return e&&"transparent"!==e&&"none"!==e&&n.open("rect",{width:this._width,height:this._height,fill:e}).close(),n.open("g",$J,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this},mark:function(t,n){var e=this,r=PG[n.marktype],i=r.tag,a=[RJ,r.attr];t.open("g",{class:KG(n),"clip-path":n.clip?LY(this,n,n.group):null},LJ(n),{"pointer-events":"g"!==i&&!1===n.interactive?"none":null});var o=function(o){var u=e.href(o);if(u&&t.open("a",u),t.open(i,e.attr(n,o,a,"g"!==i?i:null)),"text"===i){var c=EG(o);if((0,g.kJ)(c))for(var s={x:0,dy:OG(o)},l=0;l<c.length;++l)t.open("tspan",l?s:null).text(DG(o,c[l])).close();else t.text(DG(o,c))}else if("g"===i){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),t.open("path",e.attr(n,o,r.background,"bgrect")).close(),t.open("g",e.attr(n,o,r.content)),FX(o,(function(n){return e.mark(t,n)})),t.close(),f&&d?(h&&(o.fill=null),o.stroke=d,t.open("path",e.attr(n,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):t.open("path",e.attr(n,o,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):FX(n,o),t.close()},href:function(t){var n,e=this,r=t.href;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(e._hrefs||(e._hrefs={}))[r]=t}))}return null},attr:function(t,n,e,r){var i=this,a={},o=function(t,n,e,r){a[r||t]=n};return Array.isArray(e)?e.forEach((function(t){return t(o,n,i)})):e(o,n,this),r&&function(t,n,e,r,i){var a;if(null==n)return t;"bgrect"===r&&!1===e.interactive&&(t["pointer-events"]="none");if("bgfore"===r&&(!1===e.interactive&&(t["pointer-events"]="none"),t.display="none",null!==n.fill))return t;"image"===r&&!1===n.smooth&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(t["font-family"]=CG(n),t["font-size"]=MG(n)+"px",t["font-style"]=n.fontStyle,t["font-variant"]=n.fontVariant,t["font-weight"]=n.fontWeight);for(var o in GJ){var u=n[o],c=GJ[o];("transparent"!==u||"fill"!==c&&"stroke"!==c)&&null!=u&&(IW(u)&&(u=BW(u,i.gradient,"")),t[c]=u)}for(var s in JJ){var l=n[s];null!=l&&(a=a||[]).push("".concat(JJ[s],": ").concat(l,";"))}a&&(t.style=a.join(" "))}(a,n,t,r,this._defs),a},defs:function(t){var n=this._defs.gradient,e=this._defs.clipping;if(0!==Object.keys(n).length+Object.keys(e).length){for(var r in t.open("defs"),n){var i=n[r],a=i.stops;"radial"===i.gradient?(t.open("pattern",{id:LW+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(var o=0;o<a.length;++o)t.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();t.close()}for(var u in e){var c=e[u];t.open("clipPath",{id:u}),c.path?t.open("path",{d:c.path}).close():t.open("rect",{x:0,y:0,width:c.width,height:c.height}).close(),t.close()}t.close()}}});var p$="canvas",v$="none",g$={Canvas:p$,PNG:"png",SVG:"svg",None:v$},m$={};function y$(t,n){return t=String(t||"").toLowerCase(),arguments.length>1?(m$[t]=n,this):m$[t]}function b$(t,n,e){var r=[],i=(new IY).union(n),a=t.marktype;return a?x$(t,i,e,r):"group"===a?_$(t,i,e,r):(0,g.vU)("Intersect scene must be mark node or group item.")}function x$(t,n,e,r){if(function(t,n,e){return t.bounds&&n.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!e||e(t)))}(t,n,e)){var i=t.items,a=t.marktype,o=i.length,u=0;if("group"===a)for(;u<o;++u)_$(i[u],n,e,r);else for(var c=PG[a].isect;u<o;++u){var s=i[u];w$(s,n,c)&&r.push(s)}}return r}function _$(t,n,e,r){e&&e(t.mark)&&w$(t,n,PG.group.isect)&&r.push(t);var i=t.items,a=i&&i.length;if(a){var o=t.x||0,u=t.y||0;n.translate(-o,-u);for(var c=0;c<a;++c)x$(i[c],n,e,r);n.translate(o,u)}return r}function w$(t,n,e){var r=t.bounds;return n.encloses(r)||n.intersects(r)&&e(t,n)}m$[p$]=m$.png={renderer:OJ,headless:OJ,handler:bJ},m$.svg={renderer:QJ,headless:d$,handler:SJ},m$[v$]={};var k$=new IY;function M$(t){var n=t.clip;if((0,g.mf)(n))n(fX(k$.clear()));else{if(!n)return;k$.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(k$)}var O$=1e-9;function E$(t,n,e){return t===n||("path"===e?S$(t,n):t instanceof Date&&n instanceof Date?+t===+n:(0,g.hj)(t)&&(0,g.hj)(n)?Math.abs(t-n)<=O$:t&&n&&((0,g.Kn)(t)||(0,g.Kn)(n))?function(t,n){var e,r,i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(!E$(t[e=i[r]],n[e],e))return!1;return typeof t===typeof n}(t,n):t==n)}function S$(t,n){return E$(KW(t),KW(n))}function D$(){RY(),RW=0}var C$=function(t){return t};function A$(t,n){t&&F$.hasOwnProperty(t.type)&&F$[t.type](t,n)}var T$={Feature:function(t,n){A$(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)A$(e[r].geometry,n)}},F$={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){j$(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)j$(e[r],n,0)},Polygon:function(t,n){Z$(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Z$(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)A$(e[r],n)}};function j$(t,n,e){var r,i=-1,a=t.length-e;for(n.lineStart();++i<a;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Z$(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)j$(t[e],n,1);n.polygonEnd()}function N$(t,n){t&&T$.hasOwnProperty(t.type)?T$[t.type](t,n):A$(t,n)}var z$=function(){function t(){(0,rk.Z)(this,t),this._partials=new Float64Array(32),this._n=0}return(0,ik.Z)(t,[{key:"add",value:function(t){for(var n=this._partials,e=0,r=0;r<this._n&&r<32;r++){var i=n[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(n[e++]=o),t=a}return n[e]=t,this._n=e+1,this}},{key:"valueOf",value:function(){var t,n,e,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(e=(n=r[--i])-((a=t+n)-t))););i>0&&(e<0&&r[i-1]<0||e>0&&r[i-1]>0)&&(n=2*e)==(t=a+n)-a&&(a=t)}return a}}]),t}();function U$(){}var P$,R$,L$,I$,B$=new z$,q$=new z$,H$={point:U$,lineStart:U$,lineEnd:U$,polygonStart:function(){H$.lineStart=W$,H$.lineEnd=G$},polygonEnd:function(){H$.lineStart=H$.lineEnd=H$.point=U$,B$.add(ZS(q$)),q$=new z$},result:function(){var t=B$/2;return B$=new z$,t}};function W$(){H$.point=Y$}function Y$(t,n){H$.point=X$,P$=L$=t,R$=I$=n}function X$(t,n){q$.add(I$*t-L$*n),L$=t,I$=n}function G$(){X$(P$,R$)}var J$=H$,$$=1/0,V$=$$,K$=-$$,Q$=K$,tV={point:function(t,n){t<$$&&($$=t);t>K$&&(K$=t);n<V$&&(V$=n);n>Q$&&(Q$=n)},lineStart:U$,lineEnd:U$,polygonStart:U$,polygonEnd:U$,result:function(){var t=[[$$,V$],[K$,Q$]];return K$=Q$=-(V$=$$=1/0),t}};var nV,eV,rV,iV,aV=tV,oV=0,uV=0,cV=0,sV=0,lV=0,fV=0,hV=0,dV=0,pV=0,vV={point:gV,lineStart:mV,lineEnd:xV,polygonStart:function(){vV.lineStart=_V,vV.lineEnd=wV},polygonEnd:function(){vV.point=gV,vV.lineStart=mV,vV.lineEnd=xV},result:function(){var t=pV?[hV/pV,dV/pV]:fV?[sV/fV,lV/fV]:cV?[oV/cV,uV/cV]:[NaN,NaN];return oV=uV=cV=sV=lV=fV=hV=dV=pV=0,t}};function gV(t,n){oV+=t,uV+=n,++cV}function mV(){vV.point=yV}function yV(t,n){vV.point=bV,gV(rV=t,iV=n)}function bV(t,n){var e=t-rV,r=n-iV,i=WS(e*e+r*r);sV+=i*(rV+t)/2,lV+=i*(iV+n)/2,fV+=i,gV(rV=t,iV=n)}function xV(){vV.point=gV}function _V(){vV.point=kV}function wV(){MV(nV,eV)}function kV(t,n){vV.point=MV,gV(nV=rV=t,eV=iV=n)}function MV(t,n){var e=t-rV,r=n-iV,i=WS(e*e+r*r);sV+=i*(rV+t)/2,lV+=i*(iV+n)/2,fV+=i,hV+=(i=iV*t-rV*n)*(rV+t),dV+=i*(iV+n),pV+=3*i,gV(rV=t,iV=n)}var OV=vV;function EV(t){this._context=t}EV.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,TS)}},result:U$};var SV,DV,CV,AV,TV,FV=new z$,jV={point:U$,lineStart:function(){jV.point=ZV},lineEnd:function(){SV&&NV(DV,CV),jV.point=U$},polygonStart:function(){SV=!0},polygonEnd:function(){SV=null},result:function(){var t=+FV;return FV=new z$,t}};function ZV(t,n){jV.point=NV,DV=AV=t,CV=TV=n}function NV(t,n){AV-=t,TV-=n,FV.add(WS(AV*AV+TV*TV)),AV=t,TV=n}var zV,UV,PV,RV,LV,IV,BV,qV,HV=jV,WV=function(){function t(n){(0,rk.Z)(this,t),this._append=null==n?YV:function(t){var n=Math.floor(t);if(!(n>=0))throw new RangeError("invalid digits: ".concat(t));if(n>15)return YV;if(n!==LV){var e=Math.pow(10,n);LV=n,IV=function(t){var n=1;this._+=t[0];for(var r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return IV}(n),this._radius=4.5,this._=""}return(0,ik.Z)(t,[{key:"pointRadius",value:function(t){return this._radius=+t,this}},{key:"polygonStart",value:function(){this._line=0}},{key:"polygonEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){0===this._line&&(this._+="Z"),this._point=NaN}},{key:"point",value:function(t,n){switch(this._point){case 0:this._append(zV||(zV=(0,IR.Z)(["M",",",""])),t,n),this._point=1;break;case 1:this._append(UV||(UV=(0,IR.Z)(["L",",",""])),t,n);break;default:if(this._append(PV||(PV=(0,IR.Z)(["M",",",""])),t,n),this._radius!==BV||this._append!==IV){var e=this._radius,r=this._;this._="",this._append(RV||(RV=(0,IR.Z)(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),e,e,e,-2*e,e,e,2*e),BV=e,IV=this._append,qV=this._,this._=r}this._+=qV}}},{key:"result",value:function(){var t=this._;return this._="",t.length?t:null}}]),t}();function YV(t){var n=1;this._+=t[0];for(var e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function XV(t,n){var e,r,i=3,a=4.5;function o(t){return t&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),N$(t,e(r))),r.result()}return o.area=function(t){return N$(t,e(J$)),J$.result()},o.measure=function(t){return N$(t,e(HV)),HV.result()},o.bounds=function(t){return N$(t,e(aV)),aV.result()},o.centroid=function(t){return N$(t,e(OV)),OV.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,C$):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new WV(i)):new EV(n=t),"function"!==typeof a&&r.pointRadius(a),o):n},o.pointRadius=function(t){return arguments.length?(a="function"===typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{var e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));i=e}return null===n&&(r=new WV(i)),o},o.projection(t).digits(i).context(n)}function GV(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:U$,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function JV(t,n){return ZS(t[0]-n[0])<ES&&ZS(t[1]-n[1])<ES}function $V(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function VV(t,n,e,r,i){var a,o,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],o=t[n];if(JV(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<n;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*ES}u.push(e=new $V(r,t,null,!0)),c.push(e.o=new $V(r,null,e,!1)),u.push(e=new $V(o,t,null,!1)),c.push(e.o=new $V(o,null,e,!0))}})),u.length){for(c.sort(n),KV(u),KV(c),a=0,o=c.length;a<o;++a)c[a].e=e=!e;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=s.length;a<o;++a)i.point((l=s[a])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,a=s.length-1;a>=0;--a)i.point((l=s[a])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function KV(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function QV(t){return[zS(t[1],t[0]),GS(t[2])]}function tK(t){var n=t[0],e=t[1],r=US(e);return[r*US(n),r*qS(n),qS(e)]}function nK(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function eK(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function rK(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function iK(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function aK(t){var n=WS(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function oK(t){return ZS(t[0])<=DS?t[0]:HS(t[0])*((ZS(t[0])+DS)%TS-DS)}var uK=(0,m.Z)().mark(cK);function cK(t){var n,e,r;return(0,m.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=(0,_a.Z)(t),i.prev=1,n.s();case 3:if((e=n.n()).done){i.next=8;break}return r=e.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),n.e(i.t1);case 13:return i.prev=13,n.f(),i.finish(13);case 16:case"end":return i.stop()}}),uK,null,[[1,10,13,16]])}function sK(t){return Array.from(cK(t))}function lK(t,n,e,r){return function(i){var a,o,u,c=n(i),s=GV(),l=n(s),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=sK(o);var t=function(t,n){var e=oK(n),r=n[1],i=qS(r),a=[qS(e),-US(e),0],o=0,u=0,c=new z$;1===i?r=CS+ES:-1===i&&(r=-CS-ES);for(var s=0,l=t.length;s<l;++s)if(h=(f=t[s]).length)for(var f,h,d=f[h-1],p=oK(d),v=d[1]/2+AS,g=qS(v),m=US(v),y=0;y<h;++y,p=x,g=w,m=k,d=b){var b=f[y],x=oK(b),_=b[1]/2+AS,w=qS(_),k=US(_),M=x-p,O=M>=0?1:-1,E=O*M,S=E>DS,D=g*w;if(c.add(zS(D*O*qS(E),m*k+D*US(E))),o+=S?M+O*TS:M,S^p>=e^x>=e){var C=eK(tK(d),tK(b));aK(C);var A=eK(a,C);aK(A);var T=(S^M>=0?-1:1)*GS(A[2]);(r>T||r===T&&(C[0]||C[1]))&&(u+=S^M>=0?1:-1)}}return(o<-ES||o<ES&&c<-SS)^1&u}(a,r);o.length?(f||(i.polygonStart(),f=!0),VV(o,hK,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function v(){h.point=p,c.lineStart()}function g(){h.point=d,c.lineEnd()}function m(t,n){u.push([t,n]),l.point(t,n)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var t,n,e,r,c=l.clean(),h=s.result(),d=h.length;if(u.pop(),a.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),o.push(h.filter(fK))}return h}}function fK(t){return t.length>1}function hK(t,n){return((t=t.x)[0]<0?t[1]-CS-ES:CS-t[1])-((n=n.x)[0]<0?n[1]-CS-ES:CS-n[1])}var dK=lK((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(a,o){var u=a>0?DS:-DS,c=ZS(a-e);ZS(c-DS)<ES?(t.point(e,r=(r+o)/2>0?CS:-CS),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),n=0):i!==u&&c>=DS&&(ZS(e-i)<ES&&(e-=i*ES),ZS(a-u)<ES&&(a-=u*ES),r=function(t,n,e,r){var i,a,o=qS(t-e);return ZS(o)>ES?NS((qS(n)*(a=US(r))*qS(e)-qS(r)*(i=US(n))*qS(t))/(i*a*o)):(n+r)/2}(e,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=a,r=o),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*CS,r.point(-DS,i),r.point(0,i),r.point(DS,i),r.point(DS,0),r.point(DS,-i),r.point(0,-i),r.point(-DS,-i),r.point(-DS,0),r.point(-DS,i);else if(ZS(t[0]-n[0])>ES){var a=t[0]<n[0]?DS:-DS;i=e*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(n[0],n[1])}),[-DS,-CS]);function pK(t,n,e,r,i,a){if(e){var o=US(n),u=qS(n),c=r*e;null==i?(i=n+r*TS,a=n-c/2):(i=vK(o,i),a=vK(o,a),(r>0?i<a:i>a)&&(i+=r*TS));for(var s,l=i;r>0?l>a:l<a;l-=c)s=QV([o,-u*US(l),-u*qS(l)]),t.point(s[0],s[1])}}function vK(t,n){(n=tK(n))[0]-=t,aK(n);var e=XS(-n[1]);return((-n[2]<0?-e:e)+TS-ES)%TS}var gK=1e9,mK=-gK;function yK(t,n,e,r){function i(i,a){return t<=i&&i<=e&&n<=a&&a<=r}function a(i,a,u,s){var l=0,f=0;if(null==i||(l=o(i,u))!==(f=o(a,u))||c(i,a)<0^u>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+u+4)%4)!==f);else s.point(a[0],a[1])}function o(r,i){return ZS(r[0]-t)<ES?i>0?0:3:ZS(r[0]-e)<ES?i>0?2:1:ZS(r[1]-n)<ES?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=o(t,1),r=o(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(o){var c,s,l,f,h,d,p,v,g,m,y,b=o,x=GV(),_={point:w,lineStart:function(){_.point=k,s&&s.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){c&&(k(f,h),d&&g&&x.rejoin(),c.push(x.result()));_.point=w,g&&b.lineEnd()},polygonStart:function(){b=x,c=[],s=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var a,o,u=s[e],c=1,l=u.length,f=u[0],h=f[0],d=f[1];c<l;++c)a=h,o=d,h=(f=u[c])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++n:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--n;return n}(),e=y&&n,i=(c=sK(c)).length;(e||i)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&VV(c,u,n,a,o),o.polygonEnd());b=o,c=s=l=null}};function w(t,n){i(t,n)&&b.point(t,n)}function k(a,o){var u=i(a,o);if(s&&l.push([a,o]),m)f=a,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(a,o));else if(u&&g)b.point(a,o);else{var c=[p=Math.max(mK,Math.min(gK,p)),v=Math.max(mK,Math.min(gK,v))],x=[a=Math.max(mK,Math.min(gK,a)),o=Math.max(mK,Math.min(gK,o))];!function(t,n,e,r,i,a){var o,u=t[0],c=t[1],s=0,l=1,f=n[0]-u,h=n[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<s)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>s&&(s=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>s&&(s=o)}else if(f>0){if(o<s)return;o<l&&(l=o)}if(o=r-c,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=a-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}return s>0&&(t[0]=u+s*f,t[1]=c+s*h),l<1&&(n[0]=u+l*f,n[1]=c+l*h),!0}}}}}(c,x,t,n,e,r)?u&&(b.lineStart(),b.point(a,o),y=!1):(g||(b.lineStart(),b.point(c[0],c[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=a,v=o,g=u}return _}}function bK(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function xK(t,n){return ZS(t)>DS&&(t-=Math.round(t/TS)*TS),[t,n]}function _K(t,n,e){return(t%=TS)?n||e?bK(kK(t),MK(n,e)):kK(t):n||e?MK(n,e):xK}function wK(t){return function(n,e){return ZS(n+=t)>DS&&(n-=Math.round(n/TS)*TS),[n,e]}}function kK(t){var n=wK(t);return n.invert=wK(-t),n}function MK(t,n){var e=US(t),r=qS(t),i=US(n),a=qS(n);function o(t,n){var o=US(n),u=US(t)*o,c=qS(t)*o,s=qS(n),l=s*e+u*r;return[zS(c*i-l*a,u*e-s*r),GS(l*i+c*a)]}return o.invert=function(t,n){var o=US(n),u=US(t)*o,c=qS(t)*o,s=qS(n),l=s*i-c*a;return[zS(c*i+s*a,u*e+l*r),GS(l*e-u*r)]},o}function OK(t){return function(n){var e=new EK;for(var r in t)e[r]=t[r];return e.stream=n,e}}function EK(){}function SK(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),N$(e,t.stream(aV)),n(aV.result()),null!=r&&t.clipExtent(r),t}function DK(t,n,e){return SK(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),o=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([o,u])}),e)}function CK(t,n,e){return DK(t,[[0,0],n],e)}function AK(t,n,e){return SK(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),a=(r-i*(e[1][0]+e[0][0]))/2,o=-i*e[0][1];t.scale(150*i).translate([a,o])}),e)}function TK(t,n,e){return SK(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),a=-i*e[0][0],o=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([a,o])}),e)}xK.invert=xK,EK.prototype={constructor:EK,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var FK=16,jK=US(30*jS);function ZK(t,n){return+n?function(t,n){function e(r,i,a,o,u,c,s,l,f,h,d,p,v,g){var m=s-r,y=l-i,b=m*m+y*y;if(b>4*n&&v--){var x=o+h,_=u+d,w=c+p,k=WS(x*x+_*_+w*w),M=GS(w/=k),O=ZS(ZS(w)-1)<ES||ZS(a-f)<ES?(a+f)/2:zS(_,x),E=t(O,M),S=E[0],D=E[1],C=S-r,A=D-i,T=y*C-m*A;(T*T/b>n||ZS((m*C+y*A)/b-.5)>.3||o*h+u*d+c*p<jK)&&(e(r,i,a,o,u,c,S,D,O,x/=k,_/=k,w,v,g),g.point(S,D),e(S,D,O,x,_,w,s,l,f,h,d,p,v,g))}}return function(n){var r,i,a,o,u,c,s,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=x},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){l=NaN,v.point=y,n.lineStart()}function y(r,i){var a=tK([r,i]),o=t(r,i);e(l,f,s,h,d,p,l=o[0],f=o[1],s=r,h=a[0],d=a[1],p=a[2],FK,n),n.point(l,f)}function b(){v.point=g,n.lineEnd()}function x(){m(),v.point=_,v.lineEnd=w}function _(t,n){y(r=t,n),i=l,a=f,o=h,u=d,c=p,v.point=y}function w(){e(l,f,s,h,d,p,i,a,r,o,u,c,FK,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return OK({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var NK=OK({point:function(t,n){this.stream.point(t*jS,n*jS)}});function zK(t,n,e,r,i,a){if(!a)return function(t,n,e,r,i){function a(a,o){return[n+t*(a*=r),e-t*(o*=i)]}return a.invert=function(a,o){return[(a-n)/t*r,(e-o)/t*i]},a}(t,n,e,r,i);var o=US(a),u=qS(a),c=o*t,s=u*t,l=o/t,f=u/t,h=(u*e-o*n)/t,d=(u*n+o*e)/t;function p(t,a){return[c*(t*=r)-s*(a*=i)+n,e-s*t-c*a]}return p.invert=function(t,n){return[r*(l*t-f*n+h),i*(d-f*t-l*n)]},p}function UK(t){return PK((function(){return t}))()}function PK(t){var n,e,r,i,a,o,u,c,s,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,_=1,w=null,k=dK,M=null,O=C$,E=.5;function S(t){return c(t[0]*jS,t[1]*jS)}function D(t){return(t=c.invert(t[0],t[1]))&&[t[0]*FS,t[1]*FS]}function C(){var t=zK(f,0,0,x,_,b).apply(null,n(p,v)),r=zK(f,h-t[0],d-t[1],x,_,b);return e=_K(g,m,y),u=bK(n,r),c=bK(e,u),o=ZK(u,E),A()}function A(){return s=l=null,S}return S.stream=function(t){return s&&l===t?s:s=NK(function(t){return OK({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(k(o(O(l=t)))))},S.preclip=function(t){return arguments.length?(k=t,w=void 0,A()):k},S.postclip=function(t){return arguments.length?(O=t,M=r=i=a=null,A()):O},S.clipAngle=function(t){return arguments.length?(k=+t?function(t){var n=US(t),e=6*jS,r=n>0,i=ZS(n)>ES;function a(t,e){return US(t)*US(e)>n}function o(t,e,r){var i=[1,0,0],a=eK(tK(t),tK(e)),o=nK(a,a),u=a[0],c=o-u*u;if(!c)return!r&&t;var s=n*o/c,l=-n*u/c,f=eK(i,a),h=iK(i,s);rK(h,iK(a,l));var d=f,p=nK(h,d),v=nK(d,d),g=p*p-v*(nK(h,h)-1);if(!(g<0)){var m=WS(g),y=iK(d,(-p-m)/v);if(rK(y,h),y=QV(y),!r)return y;var b,x=t[0],_=e[0],w=t[1],k=e[1];_<x&&(b=x,x=_,_=b);var M=_-x,O=ZS(M-DS)<ES;if(!O&&k<w&&(b=w,w=k,k=b),O||M<ES?O?w+k>0^y[1]<(ZS(y[0]-x)<ES?w:k):w<=y[1]&&y[1]<=k:M>DS^(x<=y[0]&&y[0]<=_)){var E=iK(d,(-p+m)/v);return rK(E,h),[y,QV(E)]}}}function u(n,e){var i=r?t:DS-t,a=0;return n<-i?a|=1:n>i&&(a|=2),e<-i?a|=4:e>i&&(a|=8),a}return lK(a,(function(t){var n,e,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var d,p=[f,h],v=a(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?DS:-DS),h):0;if(!n&&(s=c=v)&&t.lineStart(),v!==c&&(!(d=o(n,p))||JV(n,d)||JV(p,d))&&(p[2]=1),v!==c)l=0,v?(t.lineStart(),d=o(p,n),t.point(d[0],d[1])):(d=o(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^v){var m;g&e||!(m=o(p,n,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!v||n&&JV(n,p)||t.point(p[0],p[1]),n=p,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return l|(s&&c)<<1}}}),(function(n,r,i,a){pK(a,t,e,i,n,r)}),r?[0,-t]:[-DS,t-DS])}(w=t*jS):(w=null,dK),A()):w*FS},S.clipExtent=function(t){return arguments.length?(O=null==t?(M=r=i=a=null,C$):yK(M=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),A()):null==M?null:[[M,r],[i,a]]},S.scale=function(t){return arguments.length?(f=+t,C()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*jS,v=t[1]%360*jS,C()):[p*FS,v*FS]},S.rotate=function(t){return arguments.length?(g=t[0]%360*jS,m=t[1]%360*jS,y=t.length>2?t[2]%360*jS:0,C()):[g*FS,m*FS,y*FS]},S.angle=function(t){return arguments.length?(b=t%360*jS,C()):b*FS},S.reflectX=function(t){return arguments.length?(x=t?-1:1,C()):x<0},S.reflectY=function(t){return arguments.length?(_=t?-1:1,C()):_<0},S.precision=function(t){return arguments.length?(o=ZK(u,E=t*t),A()):WS(E)},S.fitExtent=function(t,n){return DK(S,t,n)},S.fitSize=function(t,n){return CK(S,t,n)},S.fitWidth=function(t,n){return AK(S,t,n)},S.fitHeight=function(t,n){return TK(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&D,C()}}function RK(t){var n=0,e=DS/3,r=PK(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*jS,e=t[1]*jS):[n*FS,e*FS]},i}function LK(t,n){var e=qS(t),r=(e+qS(n))/2;if(ZS(r)<ES)return function(t){var n=US(t);function e(t,e){return[t*n,qS(e)/n]}return e.invert=function(t,e){return[t/n,GS(e*n)]},e}(t);var i=1+e*(2*r-e),a=WS(i)/r;function o(t,n){var e=WS(i-2*r*qS(n))/r;return[e*qS(t*=r),a-e*US(t)]}return o.invert=function(t,n){var e=a-n,o=zS(t,ZS(e))*HS(e);return e*r<0&&(o-=DS*HS(t)*HS(e)),[o/r,GS((i-(t*t+e*e)*r*r)/(2*r))]},o}function IK(){return RK(LK).scale(155.424).center([0,33.6442])}function BK(){return IK().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function qK(t){return function(n,e){var r=US(n),i=US(e),a=t(r*i);return a===1/0?[2,0]:[a*i*qS(n),a*qS(e)]}}function HK(t){return function(n,e){var r=WS(n*n+e*e),i=t(r),a=qS(i),o=US(i);return[zS(n*a,r*o),GS(r&&e*a/r)]}}var WK=qK((function(t){return WS(2/(1+t))}));WK.invert=HK((function(t){return 2*GS(t/2)}));var YK=qK((function(t){return(t=XS(t))&&t/qS(t)}));function XK(t,n){return[t,IS(YS((CS+n)/2))]}function GK(t){var n,e,r,i=UK(t),a=i.center,o=i.scale,u=i.translate,c=i.clipExtent,s=null;function l(){var a=DS*o(),u=i(function(t){function n(n){return(n=t(n[0]*jS,n[1]*jS))[0]*=FS,n[1]*=FS,n}return t=_K(t[0]*jS,t[1]*jS,t.length>2?t[2]*jS:0),n.invert=function(n){return(n=t.invert(n[0]*jS,n[1]*jS))[0]*=FS,n[1]*=FS,n},n}(i.rotate()).invert([0,0]));return c(null==s?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:t===XK?[[Math.max(u[0]-a,s),n],[Math.min(u[0]+a,e),r]]:[[s,Math.max(u[1]-a,n)],[e,Math.min(u[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),l()):o()},i.translate=function(t){return arguments.length?(u(t),l()):u()},i.center=function(t){return arguments.length?(a(t),l()):a()},i.clipExtent=function(t){return arguments.length?(null==t?s=n=e=r=null:(s=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),l()):null==s?null:[[s,n],[e,r]]},l()}function JK(t){return YS((CS+t)/2)}function $K(t,n){var e=US(t),r=t===n?qS(t):IS(e/US(n))/IS(JK(n)/JK(t)),i=e*BS(JK(t),r)/r;if(!r)return XK;function a(t,n){i>0?n<-CS+ES&&(n=-CS+ES):n>CS-ES&&(n=CS-ES);var e=i/BS(JK(n),r);return[e*qS(r*t),i-e*US(r*t)]}return a.invert=function(t,n){var e=i-n,a=HS(r)*WS(t*t+e*e),o=zS(t,ZS(e))*HS(e);return e*r<0&&(o-=DS*HS(t)*HS(e)),[o/r,2*NS(BS(i/a,1/r))-CS]},a}function VK(t,n){return[t,n]}function KK(t,n){var e=US(t),r=t===n?qS(t):(e-US(n))/(n-t),i=e/r+t;if(ZS(r)<ES)return VK;function a(t,n){var e=i-n,a=r*t;return[e*qS(a),i-e*US(a)]}return a.invert=function(t,n){var e=i-n,a=zS(t,ZS(e))*HS(e);return e*r<0&&(a-=DS*HS(t)*HS(e)),[a/r,i-HS(r)*WS(t*t+e*e)]},a}YK.invert=HK((function(t){return t})),XK.invert=function(t,n){return[t,2*NS(RS(n))-CS]},VK.invert=VK;var QK=1.340264,tQ=-.081106,nQ=893e-6,eQ=.003796,rQ=WS(3)/2;function iQ(t,n){var e=GS(rQ*qS(n)),r=e*e,i=r*r*r;return[t*US(e)/(rQ*(QK+3*tQ*r+i*(7*nQ+9*eQ*r))),e*(QK+tQ*r+i*(nQ+eQ*r))]}function aQ(t,n){var e=US(n),r=US(t)*e;return[e*qS(t)/r,qS(n)/r]}function oQ(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function uQ(t,n){return[US(n)*qS(t),qS(n)]}function cQ(t,n){var e=US(n),r=1+US(t)*e;return[e*qS(t)/r,qS(n)/r]}function sQ(t,n){return[IS(YS((CS+n)/2)),-t]}iQ.invert=function(t,n){for(var e,r=n,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=e=(r*(QK+tQ*i+a*(nQ+eQ*i))-n)/(QK+3*tQ*i+a*(7*nQ+9*eQ*i)))*r)*i*i,!(ZS(e)<SS));++o);return[rQ*t*(QK+3*tQ*i+a*(7*nQ+9*eQ*i))/US(r),GS(qS(r)/rQ)]},aQ.invert=HK(NS),oQ.invert=function(t,n){var e,r=n,i=25;do{var a=r*r,o=a*a;r-=e=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-n)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(ZS(e)>ES&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},uQ.invert=HK(GS),cQ.invert=HK((function(t){return 2*NS(t)})),sQ.invert=function(t,n){return[-n,2*NS(RS(t))-CS]};var lQ=Math.abs,fQ=(Math.atan,Math.atan2,Math.ceil,Math.cos),hQ=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),dQ=(Math.tan,1e-6),pQ=Math.PI,vQ=pQ/2,gQ=(Math.SQRT1_2,yQ(2));yQ(pQ);function mQ(t){return t>1?vQ:t<-1?-vQ:Math.asin(t)}function yQ(t){return t>0?Math.sqrt(t):0}function bQ(t,n){var e,r=t*hQ(n),i=30;do{n-=e=(n+hQ(n)-r)/(1+fQ(n))}while(lQ(e)>dQ&&--i>0);return n/2}var xQ=function(t,n,e){function r(r,i){return[t*r*fQ(i=bQ(e,i)),n*hQ(i)]}return r.invert=function(r,i){return i=mQ(i/n),[r/(t*fQ(i)),mQ((2*i+hQ(2*i))/e)]},r}(gQ/vQ,gQ,pQ);XV();var _Q=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function wQ(t,n){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(kQ[t]=function(t,n){return function e(){var r=n();return r.type=t,r.path=XV().projection(r),r.copy=r.copy||function(){var t=e();return _Q.forEach((function(n){r[n]&&t[n](r[n]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}(t,n),this):kQ[t]||null}var kQ={albers:BK,albersusa:function(){var t,n,e,r,i,a,o=BK(),u=IK().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=IK().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){a=[t,n]}};function l(t){var n=t[0],o=t[1];return a=null,e.point(n,o),a||(r.point(n,o),a)||(i.point(n,o),a)}function f(){return t=n=null,l}return l.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:o).invert(t)},l.stream=function(e){return t&&n===e?t:t=function(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}([o.stream(n=e),u.stream(e),c.stream(e)])},l.precision=function(t){return arguments.length?(o.precision(t),u.precision(t),c.precision(t),f()):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),u.scale(.35*t),c.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var n=o.scale(),a=+t[0],l=+t[1];return e=o.translate(t).clipExtent([[a-.455*n,l-.238*n],[a+.455*n,l+.238*n]]).stream(s),r=u.translate([a-.307*n,l+.201*n]).clipExtent([[a-.425*n+ES,l+.12*n+ES],[a-.214*n-ES,l+.234*n-ES]]).stream(s),i=c.translate([a-.205*n,l+.212*n]).clipExtent([[a-.214*n+ES,l+.166*n+ES],[a-.115*n-ES,l+.234*n-ES]]).stream(s),f()},l.fitExtent=function(t,n){return DK(l,t,n)},l.fitSize=function(t,n){return CK(l,t,n)},l.fitWidth=function(t,n){return AK(l,t,n)},l.fitHeight=function(t,n){return TK(l,t,n)},l.scale(1070)},azimuthalequalarea:function(){return UK(WK).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return UK(YK).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return RK($K).scale(109.5).parallels([30,30])},conicequalarea:IK,conicequidistant:function(){return RK(KK).scale(131.154).center([0,13.9389])},equalEarth:function(){return UK(iQ).scale(177.158)},equirectangular:function(){return UK(VK).scale(152.63)},gnomonic:function(){return UK(aQ).scale(144.049).clipAngle(60)},identity:function(){var t,n,e,r,i,a,o,u=1,c=0,s=0,l=1,f=1,h=0,d=null,p=1,v=1,g=OK({point:function(t,n){var e=b([t,n]);this.stream.point(e[0],e[1])}}),m=C$;function y(){return p=u*l,v=u*f,a=o=null,b}function b(e){var r=e[0]*p,i=e[1]*v;if(h){var a=i*t-r*n;r=r*t+i*n,i=a}return[r+c,i+s]}return b.invert=function(e){var r=e[0]-c,i=e[1]-s;if(h){var a=i*t+r*n;r=r*t-i*n,i=a}return[r/p,i/v]},b.stream=function(t){return a&&o===t?a:a=g(m(o=t))},b.postclip=function(t){return arguments.length?(m=t,d=e=r=i=null,y()):m},b.clipExtent=function(t){return arguments.length?(m=null==t?(d=e=r=i=null,C$):yK(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,e],[r,i]]},b.scale=function(t){return arguments.length?(u=+t,y()):u},b.translate=function(t){return arguments.length?(c=+t[0],s=+t[1],y()):[c,s]},b.angle=function(e){return arguments.length?(n=qS(h=e%360*jS),t=US(h),y()):h*FS},b.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.fitExtent=function(t,n){return DK(b,t,n)},b.fitSize=function(t,n){return CK(b,t,n)},b.fitWidth=function(t,n){return AK(b,t,n)},b.fitHeight=function(t,n){return TK(b,t,n)},b},mercator:function(){return GK(XK).scale(961/TS)},mollweide:function(){return UK(xQ).scale(169.529)},naturalEarth1:function(){return UK(oQ).scale(175.295)},orthographic:function(){return UK(uQ).scale(249.5).clipAngle(90+ES)},stereographic:function(){return UK(cQ).scale(250).clipAngle(142)},transversemercator:function(){var t=GK(sQ),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)}};for(var MQ in kQ)wQ(MQ,kQ[MQ]);function OQ(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function EQ(t){this._context=t}function SQ(){}function DQ(t){this._context=t}function CQ(t){this._context=t}function AQ(t,n){this._basis=new EQ(t),this._beta=n}EQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:OQ(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:OQ(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},DQ.prototype={areaStart:SQ,areaEnd:SQ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:OQ(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},CQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:OQ(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},AQ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],a=n[0],o=t[e]-i,u=n[e]-a,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*o),this._beta*n[c]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var TQ=function t(n){function e(t){return 1===n?new EQ(t):new AQ(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function FQ(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function jQ(t,n){this._context=t,this._k=(1-n)/6}jQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:FQ(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:FQ(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ZQ=function t(n){function e(t){return new jQ(t,n)}return e.tension=function(n){return t(+n)},e}(0);function NQ(t,n){this._context=t,this._k=(1-n)/6}NQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:FQ(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var zQ=function t(n){function e(t){return new NQ(t,n)}return e.tension=function(n){return t(+n)},e}(0);function UQ(t,n){this._context=t,this._k=(1-n)/6}UQ.prototype={areaStart:SQ,areaEnd:SQ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:FQ(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var PQ=function t(n){function e(t){return new UQ(t,n)}return e.tension=function(n){return t(+n)},e}(0),RQ=Math.abs,LQ=Math.atan2,IQ=Math.cos,BQ=Math.max,qQ=Math.min,HQ=Math.sin,WQ=Math.sqrt,YQ=1e-12,XQ=Math.PI,GQ=XQ/2,JQ=2*XQ;function $Q(t){return t>=1?GQ:t<=-1?-GQ:Math.asin(t)}function VQ(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>YQ){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>YQ){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-n*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function KQ(t,n){this._context=t,this._alpha=n}KQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:VQ(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var QQ=function t(n){function e(t){return n?new KQ(t,n):new jQ(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function t0(t,n){this._context=t,this._alpha=n}t0.prototype={areaStart:SQ,areaEnd:SQ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:VQ(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var n0=function t(n){function e(t){return n?new t0(t,n):new UQ(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function e0(t,n){this._context=t,this._alpha=n}e0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:VQ(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var r0,i0,a0,o0,u0,c0,s0,l0,f0,h0,d0,p0,v0,g0,m0=function t(n){function e(t){return n?new e0(t,n):new NQ(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function y0(t){this._context=t}function b0(t){return new y0(t)}function x0(t){this._context=t}function _0(t){return t<0?-1:1}function w0(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(_0(a)+_0(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function k0(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function M0(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*n,a-u,o-u*e,a,o)}function O0(t){this._context=t}function E0(t){this._context=new S0(t)}function S0(t){this._context=t}function D0(t){this._context=t}function C0(t){var n,e,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/a[n-1],a[n]-=e,o[n]-=e*o[n-1];for(i[r-1]=o[r-1]/a[r-1],n=r-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function A0(t,n){this._context=t,this._t=n}function T0(t){return function(){return t}}y0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},x0.prototype={areaStart:SQ,areaEnd:SQ,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},O0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:M0(this,this._t0,k0(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,M0(this,k0(this,e=w0(this,t,n)),e);break;default:M0(this,this._t0,e=w0(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(E0.prototype=Object.create(O0.prototype)).point=function(t,n){O0.prototype.point.call(this,n,t)},S0.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}},D0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=C0(t),i=C0(n),a=0,o=1;o<e;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},A0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var F0=Math.PI,j0=2*F0,Z0=1e-6,N0=j0-Z0;function z0(t){this._+=t[0];for(var n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}var U0=function(){function t(n){(0,rk.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==n?z0:function(t){var n=Math.floor(t);if(!(n>=0))throw new Error("invalid digits: ".concat(t));if(n>15)return z0;var e=Math.pow(10,n);return function(t){this._+=t[0];for(var n=1,r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}(n)}return(0,ik.Z)(t,[{key:"moveTo",value:function(t,n){this._append(r0||(r0=(0,IR.Z)(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+n)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(i0||(i0=(0,IR.Z)(["Z"]))))}},{key:"lineTo",value:function(t,n){this._append(a0||(a0=(0,IR.Z)(["L",",",""])),this._x1=+t,this._y1=+n)}},{key:"quadraticCurveTo",value:function(t,n,e,r){this._append(o0||(o0=(0,IR.Z)(["Q",",",",",",",""])),+t,+n,this._x1=+e,this._y1=+r)}},{key:"bezierCurveTo",value:function(t,n,e,r,i,a){this._append(u0||(u0=(0,IR.Z)(["C",",",",",",",",",",",""])),+t,+n,+e,+r,this._x1=+i,this._y1=+a)}},{key:"arcTo",value:function(t,n,e,r,i){if(t=+t,n=+n,e=+e,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var a=this._x1,o=this._y1,u=e-t,c=r-n,s=a-t,l=o-n,f=s*s+l*l;if(null===this._x1)this._append(c0||(c0=(0,IR.Z)(["M",",",""])),this._x1=t,this._y1=n);else if(f>Z0)if(Math.abs(l*u-c*s)>Z0&&i){var h=e-a,d=r-o,p=u*u+c*c,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((F0-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>Z0&&this._append(l0||(l0=(0,IR.Z)(["L",",",""])),t+b*s,n+b*l),this._append(f0||(f0=(0,IR.Z)(["A",",",",0,0,",",",",",""])),i,i,+(l*h>s*d),this._x1=t+x*u,this._y1=n+x*c)}else this._append(s0||(s0=(0,IR.Z)(["L",",",""])),this._x1=t,this._y1=n);else;}},{key:"arc",value:function(t,n,e,r,i,a){if(t=+t,n=+n,a=!!a,(e=+e)<0)throw new Error("negative radius: ".concat(e));var o=e*Math.cos(r),u=e*Math.sin(r),c=t+o,s=n+u,l=1^a,f=a?r-i:i-r;null===this._x1?this._append(h0||(h0=(0,IR.Z)(["M",",",""])),c,s):(Math.abs(this._x1-c)>Z0||Math.abs(this._y1-s)>Z0)&&this._append(d0||(d0=(0,IR.Z)(["L",",",""])),c,s),e&&(f<0&&(f=f%j0+j0),f>N0?this._append(p0||(p0=(0,IR.Z)(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),e,e,l,t-o,n-u,e,e,l,this._x1=c,this._y1=s):f>Z0&&this._append(v0||(v0=(0,IR.Z)(["A",",",",0,",",",",",",",""])),e,e,+(f>=F0),l,this._x1=t+e*Math.cos(i),this._y1=n+e*Math.sin(i)))}},{key:"rect",value:function(t,n,e,r){this._append(g0||(g0=(0,IR.Z)(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+n,e=+e,+r,-e)}},{key:"toString",value:function(){return this._}}]),t}();function P0(){return new U0}function R0(t){var n=3;return t.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{var r=Math.floor(e);if(!(r>=0))throw new RangeError("invalid digits: ".concat(e));n=r}return t},function(){return new U0(n)}}function L0(t){return t.innerRadius}function I0(t){return t.outerRadius}function B0(t){return t.startAngle}function q0(t){return t.endAngle}function H0(t){return t&&t.padAngle}function W0(t,n,e,r,i,a,o){var u=t-e,c=n-r,s=(o?a:-a)/WQ(u*u+c*c),l=s*c,f=-s*u,h=t+l,d=n+f,p=e+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,_=i-a,w=h*v-p*d,k=(b<0?-1:1)*WQ(BQ(0,_*_*x-w*w)),M=(w*b-y*k)/x,O=(-w*y-b*k)/x,E=(w*b+y*k)/x,S=(-w*y+b*k)/x,D=M-g,C=O-m,A=E-g,T=S-m;return D*D+C*C>A*A+T*T&&(M=E,O=S),{cx:M,cy:O,x01:-l,y01:-f,x11:M*(i/_-1),y11:O*(i/_-1)}}P0.prototype=U0.prototype;Array.prototype.slice;function Y0(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function X0(t){return t[0]}function G0(t){return t[1]}function J0(t,n){var e=T0(!0),r=null,i=b0,a=null,o=R0(u);function u(u){var c,s,l,f=(u=Y0(u)).length,h=!1;for(null==r&&(a=i(l=o())),c=0;c<=f;++c)!(c<f&&e(s=u[c],c,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(s,c,u),+n(s,c,u));if(l)return a=null,l+""||null}return t="function"===typeof t?t:void 0===t?X0:T0(t),n="function"===typeof n?n:void 0===n?G0:T0(n),u.x=function(n){return arguments.length?(t="function"===typeof n?n:T0(+n),u):t},u.y=function(t){return arguments.length?(n="function"===typeof t?t:T0(+t),u):n},u.defined=function(t){return arguments.length?(e="function"===typeof t?t:T0(!!t),u):e},u.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),u):i},u.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),u):r},u}function $0(t,n,e){var r=null,i=T0(!0),a=null,o=b0,u=null,c=R0(s);function s(s){var l,f,h,d,p,v=(s=Y0(s)).length,g=!1,m=new Array(v),y=new Array(v);for(null==a&&(u=o(p=c())),l=0;l<=v;++l){if(!(l<v&&i(d=s[l],l,s))===g)if(g=!g)f=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=l-1;h>=f;--h)u.point(m[h],y[h]);u.lineEnd(),u.areaEnd()}g&&(m[l]=+t(d,l,s),y[l]=+n(d,l,s),u.point(r?+r(d,l,s):m[l],e?+e(d,l,s):y[l]))}if(p)return u=null,p+""||null}function l(){return J0().defined(i).curve(o).context(a)}return t="function"===typeof t?t:void 0===t?X0:T0(+t),n="function"===typeof n?n:T0(void 0===n?0:+n),e="function"===typeof e?e:void 0===e?G0:T0(+e),s.x=function(n){return arguments.length?(t="function"===typeof n?n:T0(+n),r=null,s):t},s.x0=function(n){return arguments.length?(t="function"===typeof n?n:T0(+n),s):t},s.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:T0(+t),s):r},s.y=function(t){return arguments.length?(n="function"===typeof t?t:T0(+t),e=null,s):n},s.y0=function(t){return arguments.length?(n="function"===typeof t?t:T0(+t),s):n},s.y1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:T0(+t),s):e},s.lineX0=s.lineY0=function(){return l().x(t).y(n)},s.lineY1=function(){return l().x(t).y(e)},s.lineX1=function(){return l().x(r).y(n)},s.defined=function(t){return arguments.length?(i="function"===typeof t?t:T0(!!t),s):i},s.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),s):o},s.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),s):a},s}WQ(3);var V0={draw:function(t,n){var e=WQ(n/XQ);t.moveTo(e,0),t.arc(0,0,e,0,JQ)}},K0=(WQ(1/3),HQ(XQ/10)/HQ(7*XQ/10));HQ(JQ/10),IQ(JQ/10),WQ(3),WQ(3),WQ(3),WQ(12);var Q0={},t1={},n1=34,e1=10,r1=13;function i1(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function a1(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function o1(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function u1(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+o1(-t,6):t>9999?"+"+o1(t,6):o1(t,4)}(t.getUTCFullYear())+"-"+o1(t.getUTCMonth()+1,2)+"-"+o1(t.getUTCDate(),2)+(i?"T"+o1(n,2)+":"+o1(e,2)+":"+o1(r,2)+"."+o1(i,3)+"Z":r?"T"+o1(n,2)+":"+o1(e,2)+":"+o1(r,2)+"Z":e||n?"T"+o1(n,2)+":"+o1(e,2)+"Z":"")}function c1(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],a=t.length,o=0,u=0,c=a<=0,s=!1;function l(){if(c)return t1;if(s)return s=!1,Q0;var n,r,i=o;if(t.charCodeAt(i)===n1){for(;o++<a&&t.charCodeAt(o)!==n1||t.charCodeAt(++o)===n1;);return(n=o)>=a?c=!0:(r=t.charCodeAt(o++))===e1?s=!0:r===r1&&(s=!0,t.charCodeAt(o)===e1&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(n=o++))===e1)s=!0;else if(r===r1)s=!0,t.charCodeAt(o)===e1&&++o;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===e1&&--a,t.charCodeAt(a-1)===r1&&--a;(r=l())!==t1;){for(var f=[];r!==Q0&&r!==t1;)f.push(r),r=l();n&&null==(f=n(f,u++))||i.push(f)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return o(n[t])})).join(t)}))}function a(n){return n.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?u1(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,a=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=i1(t);return function(r,i){return n(e(r),i,t)}}(t,n):i1(t)}));return a.columns=i||[],a},parseRows:r,format:function(n,e){return null==e&&(e=a1(n)),[e.map(o).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=a1(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var s1=/^(data:|([A-Za-z]+:)?\/\/)/,l1=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,f1=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,h1="file://";function d1(t,n){return p1.apply(this,arguments)}function p1(){return(p1=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(n,e);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,e));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function v1(t,n){return g1.apply(this,arguments)}function g1(){return g1=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r,i,a,o,u,c,s;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,g.l7)({},this.options,e),r=this.fileAccess,i={href:null},c=l1.test(n.replace(f1,"")),null!=n&&"string"===typeof n&&c||(0,g.vU)("Sanitize failure, invalid URI: "+(0,g.m8)(n)),s=s1.test(n),(u=e.baseURL)&&!s&&(n.startsWith("/")||u.endsWith("/")||(n="/"+n),n=u+n),o=(a=n.startsWith(h1))||"file"===e.mode||"http"!==e.mode&&!s&&r,a?n=n.slice(h1.length):n.startsWith("//")&&("file"===e.defaultProtocol?(n=n.slice(2),o=!0):n=(e.defaultProtocol||"http")+":"+n),Object.defineProperty(i,"localFile",{value:!!o}),i.href=n,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)}))),g1.apply(this,arguments)}function m1(t){return t?function(n){return new Promise((function(e,r){t.readFile(n,(function(t,n){t?r(t):e(n)}))}))}:y1}function y1(){return b1.apply(this,arguments)}function b1(){return(b1=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x1(t){return t?function(){var n=(0,y.Z)((0,m.Z)().mark((function n(e,r){var i,a,o;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(0,g.l7)({},this.options.http,r),a=r&&r.response,n.next=4,t(e,i);case 4:return o=n.sent,n.abrupt("return",o.ok?(0,g.mf)(o[a])?o[a]():o.text():(0,g.vU)(o.status+""+o.statusText));case 6:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}():_1}function _1(){return w1.apply(this,arguments)}function w1(){return(w1=(0,y.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,g.vU)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}g.sw,g.He,g.He,g.ZU,g.BB,g.yR;function k1(t){var n=function(n,e){var r={delimiter:t};return M1(n,e?(0,g.l7)(e,r):r)};return n.responseType="text",n}function M1(t,n){return n.header&&(t=n.header.map(g.m8).join(n.delimiter)+"\n"+t),c1(n.delimiter).parse(t+"")}function O1(t,n){var e,r=n&&n.property?(0,g.EP)(n.property):g.yR;return!(0,g.Kn)(t)||(e=t,"function"===typeof Buffer&&(0,g.mf)(Buffer.isBuffer)&&Buffer.isBuffer(e))?r(JSON.parse(t)):function(t,n){!(0,g.kJ)(t)&&(0,g.TW)(t)&&(t=(0,b.Z)(t));return n&&n.copy?JSON.parse(JSON.stringify(t)):t}(r(t),n)}M1.responseType="text",O1.responseType="json";var E1={interior:function(t,n){return t!==n},exterior:function(t,n){return t===n}};function S1(t,n){var e,r,i,a;return t=O1(t,n),n&&n.feature?(e=T,i=n.feature):n&&n.mesh?(e=N,i=n.mesh,a=E1[n.filter]):(0,g.vU)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?e(t,r,a):(0,g.vU)("Invalid TopoJSON object: "+i))&&r.features||[r]}S1.responseType="json";k1(","),k1("\t");var D1=function(t,n){return function(e){return{options:e||{},sanitize:v1,load:d1,fileAccess:!!n,file:m1(n),http:x1(t)}}}("undefined"!==typeof fetch&&fetch,null),C1=new Date,A1=new Date;function T1(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return T1((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return C1.setTime(+n),A1.setTime(+r),t(C1),t(A1),Math.floor(e(C1,A1))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var F1=1e3,j1=6e4,Z1=60*j1,N1=24*Z1,z1=7*N1,U1=T1((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*j1)/N1}),(function(t){return t.getDate()-1})),P1=(U1.range,T1((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/N1}),(function(t){return t.getUTCDate()-1}))),R1=(P1.range,T1((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/N1}),(function(t){return Math.floor(t/N1)})));R1.range;function L1(t){return T1((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*j1)/z1}))}var I1=L1(0),B1=L1(1),q1=L1(2),H1=L1(3),W1=L1(4),Y1=L1(5),X1=L1(6);I1.range,B1.range,q1.range,H1.range,W1.range,Y1.range,X1.range;function G1(t){return T1((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/z1}))}var J1=G1(0),$1=G1(1),V1=G1(2),K1=G1(3),Q1=G1(4),t2=G1(5),n2=G1(6),e2=(J1.range,$1.range,V1.range,K1.range,Q1.range,t2.range,n2.range,T1((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));e2.every=function(t){return isFinite(t=Math.floor(t))&&t>0?T1((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};e2.range;var r2=T1((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));r2.every=function(t){return isFinite(t=Math.floor(t))&&t>0?T1((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};r2.range;var i2=T1((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),a2=(i2.range,T1((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),o2=(a2.range,T1((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*F1-t.getMinutes()*j1)}),(function(t,n){t.setTime(+t+n*Z1)}),(function(t,n){return(n-t)/Z1}),(function(t){return t.getHours()}))),u2=(o2.range,T1((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*Z1)}),(function(t,n){return(n-t)/Z1}),(function(t){return t.getUTCHours()}))),c2=(u2.range,T1((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*F1)}),(function(t,n){t.setTime(+t+n*j1)}),(function(t,n){return(n-t)/j1}),(function(t){return t.getMinutes()}))),s2=(c2.range,T1((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*j1)}),(function(t,n){return(n-t)/j1}),(function(t){return t.getUTCMinutes()}))),l2=(s2.range,T1((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*F1)}),(function(t,n){return(n-t)/F1}),(function(t){return t.getUTCSeconds()}))),f2=(l2.range,T1((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t})));f2.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?T1((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):f2:null};f2.range;var h2,d2,p2,v2,g2,m2,y2,b2="year",x2="quarter",_2="month",w2="week",k2="date",M2="day",O2="dayofyear",E2="hours",S2="minutes",D2="seconds",C2="milliseconds";[b2,x2,_2,w2,k2,M2,O2,E2,S2,D2,C2].reduce((function(t,n,e){return t[n]=1+e,t}),{});h2={},(0,nt.Z)(h2,b2,"%Y "),(0,nt.Z)(h2,x2,"Q%q "),(0,nt.Z)(h2,_2,"%b "),(0,nt.Z)(h2,k2,"%d "),(0,nt.Z)(h2,w2,"W%U "),(0,nt.Z)(h2,M2,"%a "),(0,nt.Z)(h2,O2,"%j "),(0,nt.Z)(h2,E2,"%H:00"),(0,nt.Z)(h2,S2,"00:%M"),(0,nt.Z)(h2,D2,":%S"),(0,nt.Z)(h2,C2,".%L"),(0,nt.Z)(h2,"".concat(b2,"-").concat(_2),"%Y-%m "),(0,nt.Z)(h2,"".concat(b2,"-").concat(_2,"-").concat(k2),"%Y-%m-%d "),(0,nt.Z)(h2,"".concat(E2,"-").concat(S2),"%H:%M");var A2=new Date;function T2(t){return A2.setFullYear(t),A2.setMonth(0),A2.setDate(1),A2.setHours(0,0,0,0),A2}function F2(t){return U1.count(T2(t.getFullYear())-1,t)}function j2(t){return I1.count(T2(t.getFullYear())-1,t)}function Z2(t){return T2(t).getDay()}function N2(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return P1.count(n-1,t)}function z2(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return J1.count(n-1,t)}function U2(t){return A2.setTime(Date.UTC(t,0,1)),A2.getUTCDay()}function P2(t,n,e){return n+7*t-(e+6)%7}d2={},(0,nt.Z)(d2,b2,(function(t){return t.getFullYear()})),(0,nt.Z)(d2,x2,(function(t){return Math.floor(t.getMonth()/3)})),(0,nt.Z)(d2,_2,(function(t){return t.getMonth()})),(0,nt.Z)(d2,k2,(function(t){return t.getDate()})),(0,nt.Z)(d2,E2,(function(t){return t.getHours()})),(0,nt.Z)(d2,S2,(function(t){return t.getMinutes()})),(0,nt.Z)(d2,D2,(function(t){return t.getSeconds()})),(0,nt.Z)(d2,C2,(function(t){return t.getMilliseconds()})),(0,nt.Z)(d2,O2,(function(t){return F2(t)})),(0,nt.Z)(d2,w2,(function(t){return j2(t)})),(0,nt.Z)(d2,w2+M2,(function(t,n){return P2(j2(t),t.getDay(),Z2(n))})),(0,nt.Z)(d2,M2,(function(t,n){return P2(1,t.getDay(),Z2(n))})),p2={},(0,nt.Z)(p2,x2,(function(t){return 3*t})),(0,nt.Z)(p2,w2,(function(t,n){return P2(t,0,Z2(n))}));v2={},(0,nt.Z)(v2,b2,(function(t){return t.getUTCFullYear()})),(0,nt.Z)(v2,x2,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,nt.Z)(v2,_2,(function(t){return t.getUTCMonth()})),(0,nt.Z)(v2,k2,(function(t){return t.getUTCDate()})),(0,nt.Z)(v2,E2,(function(t){return t.getUTCHours()})),(0,nt.Z)(v2,S2,(function(t){return t.getUTCMinutes()})),(0,nt.Z)(v2,D2,(function(t){return t.getUTCSeconds()})),(0,nt.Z)(v2,C2,(function(t){return t.getUTCMilliseconds()})),(0,nt.Z)(v2,O2,(function(t){return N2(t)})),(0,nt.Z)(v2,w2,(function(t){return z2(t)})),(0,nt.Z)(v2,M2,(function(t,n){return P2(1,t.getUTCDay(),U2(n))})),(0,nt.Z)(v2,w2+M2,(function(t,n){return P2(z2(t),t.getUTCDay(),U2(n))})),g2={},(0,nt.Z)(g2,x2,(function(t){return 3*t})),(0,nt.Z)(g2,w2,(function(t,n){return P2(t,0,U2(n))}));m2={},(0,nt.Z)(m2,b2,e2),(0,nt.Z)(m2,x2,i2.every(3)),(0,nt.Z)(m2,_2,i2),(0,nt.Z)(m2,w2,I1),(0,nt.Z)(m2,k2,U1),(0,nt.Z)(m2,M2,U1),(0,nt.Z)(m2,O2,U1),(0,nt.Z)(m2,E2,o2),(0,nt.Z)(m2,S2,c2),(0,nt.Z)(m2,D2,l2),(0,nt.Z)(m2,C2,f2),y2={},(0,nt.Z)(y2,b2,r2),(0,nt.Z)(y2,x2,a2.every(3)),(0,nt.Z)(y2,_2,a2),(0,nt.Z)(y2,w2,J1),(0,nt.Z)(y2,k2,P1),(0,nt.Z)(y2,M2,P1),(0,nt.Z)(y2,O2,P1),(0,nt.Z)(y2,E2,u2),(0,nt.Z)(y2,S2,s2),(0,nt.Z)(y2,D2,l2),(0,nt.Z)(y2,C2,f2);var R2,L2,I2=[b2,_2,k2,E2,S2,D2,C2],B2=I2.slice(0,-1),q2=B2.slice(0,-1),H2=q2.slice(0,-1);H2.slice(0,-1);var W2="linear",Y2="log",X2="pow",G2="sqrt",J2="symlog",$2="time",V2="utc",K2="sequential",Q2="diverging",t3="quantile",n3="quantize",e3="threshold",r3="continuous",i3="discrete",a3="discretizing",o3="interpolating",u3="temporal";function c3(){var t,n,e=Lq().unknown(void 0),r=e.domain,i=e.range,a=[0,1],o=!1,u=0,c=0,s=.5;function l(){var e=r().length,l=a[1]<a[0],f=a[1-l],h=function(t,n,e){var r=t-n+2*e;return t?r>0?r:1:0}(e,u,c),d=a[l-0];t=(f-d)/(h||1),o&&(t=Math.floor(t)),d+=(f-d-t*(e-u))*s,n=t*(1-u),o&&(d=Math.round(d),n=Math.round(n));var p=Qa(e).map((function(n){return d+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},e.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(o=!!t,l()):o},e.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u=c,l()):u},e.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},e.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,o,u,c=a[1]<a[0],s=c?i().reverse():i(),l=s.length-1,f=+t[0],h=+t[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<s[0]||f>a[1-c])))return e=Math.max(0,uF(s,f)-1),o=f===h?e:uF(s,h)-1,f-s[e]>n+1e-10&&++e,c&&(u=e,e=l-o,o=l-u),e>o?void 0:r().slice(e,o+1)}},e.invert=function(t){var n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return c3().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(c).align(s)},l()}function s3(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return s3(n())},t}var l3=Array.prototype.map;var f3=Array.prototype.slice;var h3={};function d3(t,n,e){return arguments.length>1?(h3[t]=function(t,n,e){var r=function(){var e=n();return e.invertRange||(e.invertRange=e.invert?function(t){return function(n){var e,r=n[0],i=n[1];return i<r&&(e=r,r=i,i=e),[t.invert(r),t.invert(i)]}}(e):e.invertExtent?function(t){return function(n){var e,r,i,a,o=t.range(),u=n[0],c=n[1],s=-1;for(c<u&&(r=u,u=c,c=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=c&&(s<0&&(s=i),e=i);if(!(s<0))return u=t.invertExtent(o[s]),c=t.invertExtent(o[e]),[void 0===u[0]?u[1]:u[0],void 0===c[1]?c[0]:c[1]]}}(e):void 0),e.type=t,e};return r.metadata=(0,g.Rg)((0,g.IX)(e)),r}(t,n,e),this):function(t){return(0,g.nr)(h3,t)}(t)?h3[t]:void 0}function p3(t,n){var e=h3[t];return e&&e.metadata[n]}function v3(t){return p3(t,i3)}d3("identity",kL),d3(W2,wL,r3),d3(Y2,FL,[r3,Y2]),d3(X2,UL,r3),d3(G2,PL,r3),d3(J2,BL,r3),d3($2,sq,[r3,u3]),d3(V2,lq,[r3,u3]),d3(K2,dq,[r3,o3]),d3("".concat(K2,"-").concat(W2),dq,[r3,o3]),d3("".concat(K2,"-").concat(Y2),pq,[r3,o3,Y2]),d3("".concat(K2,"-").concat(X2),gq,[r3,o3]),d3("".concat(K2,"-").concat(G2),mq,[r3,o3]),d3("".concat(K2,"-").concat(J2),vq,[r3,o3]),d3("".concat(Q2,"-").concat(W2),xq,[r3,o3]),d3("".concat(Q2,"-").concat(Y2),_q,[r3,o3,Y2]),d3("".concat(Q2,"-").concat(X2),kq,[r3,o3]),d3("".concat(Q2,"-").concat(G2),Mq,[r3,o3]),d3("".concat(Q2,"-").concat(J2),wq,[r3,o3]),d3(t3,Oq,[a3,t3]),d3(n3,Eq,a3),d3(e3,Sq,a3),d3("bin-ordinal",(function t(){var n=[],e=[];function r(t){return null==t||t!==t?void 0:e[(sF(n,t)-1)%e.length]}return r.domain=function(t){return arguments.length?(n=function(t){return l3.call(t,g.He)}(t),r):n.slice()},r.range=function(t){return arguments.length?(e=f3.call(t),r):e.slice()},r.tickFormat=function(t,e){return xL(n[0],(0,g.fj)(n),null==t?10:t,e)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),[i3,a3]),d3("ordinal",Lq,i3),d3("band",c3,i3),d3("point",(function(){return s3(c3().paddingInner(1))}),i3);function g3(t,n,e){return yq(function(t,n){var e=v[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=n&&e&&e.gamma?e.gamma(n):e}(n||"rgb",e),t)}function m3(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}function y3(t,n){for(var e in t)x3(e,n(t[e]))}var b3={};function x3(t,n){return t=t&&t.toLowerCase(),arguments.length>1?(b3[t]=n,this):b3[t]}y3({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},m3),y3({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return g3(m3(t))}));var _3="symbol",w3="discrete",k3=function(t){return(0,g.kJ)(t)?t.map((function(t){return String(t)})):String(t)},M3=function(t,n){return t[1]-n[1]},O3=function(t,n){return n[1]-t[1]};function E3(t,n){return t.bins?function(t,n,e){var r=t.range(),i=r[0],a=(0,g.fj)(r),o=M3;if(i>a&&(r=a,a=i,i=r,o=O3),i=Math.floor(i),a=Math.ceil(a),n=n.map((function(n){return[n,t(n)]})).filter((function(t){return i<=t[1]&&t[1]<=a})).sort(o).map((function(t){return t[0]})),e>0&&n.length>1){for(var u=[n[0],(0,g.fj)(n)];n.length>e&&n.length>=3;)n=n.filter((function(t,n){return!(n%2)}));n.length<3&&(n=u)}return n}(t,t.bins):t.ticks?t.ticks(n):t.domain()}function S3(t,n,e,r,i,a){var o=n.type,u=k3;if(o===$2||i===$2)u=t.timeFormat(r);else if(o===V2||i===V2)u=t.utcFormat(r);else if(function(t){return p3(t,Y2)}(o)){var c=t.formatFloat(r);if(a||n.bins)u=c;else{var s=D3(n,e,!1);u=function(t){return s(t)?c(t):""}}}else if(n.tickFormat){var l=n.domain();u=t.formatSpan(l[0],l[l.length-1],e,r)}else r&&(u=t.format(r));return u}function D3(t,n,e){var r=E3(t,n),i=t.base(),a=Math.log(i),o=Math.max(1,i*n/r.length),u=function(t){var n=t/Math.pow(i,Math.round(Math.log(t)/a));return n*i<i-.5&&(n*=i),n<=o};return e?r.filter(u):u}var C3=(R2={},(0,nt.Z)(R2,t3,"quantiles"),(0,nt.Z)(R2,n3,"thresholds"),(0,nt.Z)(R2,e3,"domain"),R2),A3=(L2={},(0,nt.Z)(L2,t3,"quantiles"),(0,nt.Z)(L2,n3,"domain"),L2);function T3(t,n){return t.bins?function(t){var n=t.slice(0,-1);return n.max=(0,g.fj)(t),n}(t.bins):t.type===Y2?D3(t,n,!0):C3[t.type]?function(t){var n=[-1/0].concat(t);return n.max=1/0,n}(t[C3[t.type]]()):E3(t,n)}var F3=function(t){return C3[t.type]||t.bins};function j3(t,n,e,r,i,a,o){var u=A3[n.type]&&a!==$2&&a!==V2?function(t,n,e){var r,i=n[A3[n.type]](),a=i.length,o=a>1?i[1]-i[0]:i[0];for(r=1;r<a;++r)o=Math.min(o,i[r]-i[r-1]);return t.formatSpan(0,o,30,e)}(t,n,i):S3(t,n,e,i,a,o);return r===_3&&F3(n)?Z3(u):r===w3?z3(u):U3(u)}var Z3=function(t){return function(n,e,r){var i=N3(r[e+1],N3(r.max,1/0)),a=P3(n,t),o=P3(i,t);return a&&o?a+" \u2013 "+o:o?"< "+o:"\u2265 "+a}},N3=function(t,n){return null!=t?t:n},z3=function(t){return function(n,e){return e?t(n):null}},U3=function(t){return function(n){return t(n)}},P3=function(t,n){return Number.isFinite(t)?n(t):null};function R3(t,n,e,r){var i=r||n.type;return(0,g.HD)(e)&&function(t){return p3(t,u3)}(i)&&(e=e.replace(/%a/g,"%A").replace(/%b/g,"%B")),e||i!==$2?e||i!==V2?j3(t,n,5,null,e,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function L3(t,n,e){e=e||{};var r=Math.max(3,e.maxlen||7),i=R3(t,n,e.format,e.formatType);if(function(t){return p3(t,a3)}(n.type)){var a=T3(n).slice(1).map(i),o=a.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(a.join(", "))}if(v3(n.type)){var u=n.domain(),c=u.length,s=c>r?u.slice(0,r-2).map(i).join(", ")+", ending with "+u.slice(-1).map(i):u.map(i).join(", ");return"".concat(c," value").concat(1===c?"":"s",": ").concat(s)}var l=n.domain();return"values from ".concat(i(l[0])," to ").concat(i((0,g.fj)(l)))}var I3=0;var B3="p_";function q3(t){return t&&t.gradient}function H3(t,n,e){var r=t.gradient,i=t.id,a="radial"===r?B3:"";return i||(i=t.id="gradient_"+I3++,"radial"===r?(t.x1=W3(t.x1,.5),t.y1=W3(t.y1,.5),t.r1=W3(t.r1,0),t.x2=W3(t.x2,.5),t.y2=W3(t.y2,.5),t.r2=W3(t.r2,.5),a=B3):(t.x1=W3(t.x1,0),t.y1=W3(t.y1,0),t.x2=W3(t.x2,1),t.y2=W3(t.y2,0))),n[i]=t,"url("+(e||"")+"#"+a+i+")"}function W3(t,n){return null!=t?t:n}var Y3={basis:{curve:function(t){return new EQ(t)}},"basis-closed":{curve:function(t){return new DQ(t)}},"basis-open":{curve:function(t){return new CQ(t)}},bundle:{curve:TQ,tension:"beta",value:.85},cardinal:{curve:ZQ,tension:"tension",value:0},"cardinal-open":{curve:zQ,tension:"tension",value:0},"cardinal-closed":{curve:PQ,tension:"tension",value:0},"catmull-rom":{curve:QQ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:n0,tension:"alpha",value:.5},"catmull-rom-open":{curve:m0,tension:"alpha",value:.5},linear:{curve:b0},"linear-closed":{curve:function(t){return new x0(t)}},monotone:{horizontal:function(t){return new E0(t)},vertical:function(t){return new O0(t)}},natural:{curve:function(t){return new D0(t)}},step:{curve:function(t){return new A0(t,.5)}},"step-after":{curve:function(t){return new A0(t,1)}},"step-before":{curve:function(t){return new A0(t,0)}}};function X3(t,n,e){var r=(0,g.nr)(Y3,t)&&Y3[t],i=null;return r&&(i=r.curve||r[n||"vertical"],r.tension&&null!=e&&(i=i[r.tension](e))),i}var G3={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},J3=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$3=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,V3=/^((\s+,?\s*)|(,\s*))/,K3=/^[01]/;function Q3(t){var n=[];return(t.match(J3)||[]).forEach((function(t){var e=t[0],r=e.toLowerCase(),i=G3[r],a=function(t,n,e){for(var r=[],i=0;n&&i<e.length;)for(var a=0;a<n;++a){var o="a"!==t||3!==a&&4!==a?$3:K3,u=e.slice(i).match(o);if(null===u)throw Error("Invalid SVG path, incorrect parameter type");i+=u[0].length,r.push(+u[0]);var c=e.slice(i).match(V3);null!==c&&(i+=c[0].length)}return r}(r,i,t.slice(1).trim()),o=a.length;if(o<i||o&&o%i!==0)throw Error("Invalid SVG path, incorrect parameter count");if(n.push([e].concat((0,b.Z)(a.slice(0,i)))),o!==i){"m"===r&&(e="M"===e?"L":"l");for(var u=i;u<o;u+=i)n.push([e].concat((0,b.Z)(a.slice(u,u+i))))}})),n}var t5=Math.PI/180,n5=1e-14,e5=Math.PI/2,r5=2*Math.PI,i5=Math.sqrt(3)/2,a5={},o5={},u5=[].join;function c5(t){var n=u5.call(t);if(o5[n])return o5[n];var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],l=s*o,f=-c*u,h=c*o,d=s*u,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),_=e+p-x*v,w=r+v+x*p,k=e+g,M=r+m,O=k+x*m,E=M-x*g;return o5[n]=[l*_+f*w,h*_+d*w,l*O+f*E,h*O+d*E,l*k+f*M,h*k+d*M]}var s5=["l",0,0,0,0,0,0,0];function l5(t,n,e){var r=s5[0]=t[0];if("a"===r||"A"===r)s5[1]=n*t[1],s5[2]=e*t[2],s5[3]=t[3],s5[4]=t[4],s5[5]=t[5],s5[6]=n*t[6],s5[7]=e*t[7];else if("h"===r||"H"===r)s5[1]=n*t[1];else if("v"===r||"V"===r)s5[1]=e*t[1];else for(var i=1,a=t.length;i<a;++i)s5[i]=(i%2==1?n:e)*t[i];return s5}function f5(t,n,e,r,i,a){var o,u,c,s,l,f=null,h=0,d=0,p=0,v=0,g=0,m=0;null==e&&(e=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var y=0,b=n.length;y<b;++y){switch(o=n[y],1===i&&1===a||(o=l5(o,i,a)),o[0]){case"l":h+=o[1],d+=o[2],t.lineTo(h+e,d+r);break;case"L":h=o[1],d=o[2],t.lineTo(h+e,d+r);break;case"h":h+=o[1],t.lineTo(h+e,d+r);break;case"H":h=o[1],t.lineTo(h+e,d+r);break;case"v":d+=o[1],t.lineTo(h+e,d+r);break;case"V":d=o[1],t.lineTo(h+e,d+r);break;case"m":g=h+=o[1],m=d+=o[2],t.moveTo(h+e,d+r);break;case"M":g=h=o[1],m=d=o[2],t.moveTo(h+e,d+r);break;case"c":u=h+o[5],c=d+o[6],p=h+o[3],v=d+o[4],t.bezierCurveTo(h+o[1]+e,d+o[2]+r,p+e,v+r,u+e,c+r),h=u,d=c;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],t.bezierCurveTo(o[1]+e,o[2]+r,p+e,v+r,h+e,d+r);break;case"s":u=h+o[3],c=d+o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,h+o[1]+e,d+o[2]+r,u+e,c+r),p=h+o[1],v=d+o[2],h=u,d=c;break;case"S":u=o[3],c=o[4],p=2*h-p,v=2*d-v,t.bezierCurveTo(p+e,v+r,o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"q":u=h+o[3],c=d+o[4],p=h+o[1],v=d+o[2],t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"Q":u=o[3],c=o[4],t.quadraticCurveTo(o[1]+e,o[2]+r,u+e,c+r),h=u,d=c,p=o[1],v=o[2];break;case"t":u=h+o[1],c=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-s,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),s=p,l=v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),d=c,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],c=o[2],p=2*h-p,v=2*d-v,t.quadraticCurveTo(p+e,v+r,u+e,c+r),h=u,d=c;break;case"a":h5(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+e,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":h5(t,h+e,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+e,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":h=g,d=m,t.closePath()}f=o}}function h5(t,n,e,r){for(var i=function(t,n,e,r,i,a,o,u,c){var s=u5.call(arguments);if(a5[s])return a5[s];var l=o*t5,f=Math.sin(l),h=Math.cos(l),d=h*(u-t)*.5+f*(c-n)*.5,p=h*(c-n)*.5-f*(u-t)*.5,v=d*d/((e=Math.abs(e))*e)+p*p/((r=Math.abs(r))*r);v>1&&(e*=v=Math.sqrt(v),r*=v);var g=h/e,m=f/e,y=-f/r,b=h/r,x=g*u+m*c,_=y*u+b*c,w=g*t+m*n,k=y*t+b*n,M=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;M<0&&(M=0);var O=Math.sqrt(M);a==i&&(O=-O);var E=.5*(x+w)-O*(k-_),S=.5*(_+k)+O*(w-x),D=Math.atan2(_-S,x-E),C=Math.atan2(k-S,w-E)-D;C<0&&1===a?C+=r5:C>0&&0===a&&(C-=r5);for(var A=Math.ceil(Math.abs(C/(e5+.001))),T=[],F=0;F<A;++F){var j=D+F*C/A,Z=D+(F+1)*C/A;T[F]=[E,S,j,Z,e,r,f,h]}return a5[s]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],n,e),a=0;a<i.length;++a){var o=c5(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var d5=.5773502691896257,p5={circle:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(e,0),t.arc(0,0,e,0,r5)}},cross:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/2.5;t.moveTo(-e,-r),t.lineTo(-e,r),t.lineTo(-r,r),t.lineTo(-r,e),t.lineTo(r,e),t.lineTo(r,r),t.lineTo(e,r),t.lineTo(e,-r),t.lineTo(r,-r),t.lineTo(r,-e),t.lineTo(-r,-e),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.closePath()}},square:{draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},arrow:{draw:function(t,n){var e=Math.sqrt(n)/2,r=e/7,i=e/2.5,a=e/8;t.moveTo(-r,e),t.lineTo(r,e),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-e),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e,i=r-e*d5,a=e/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e,i=r-e*d5;t.moveTo(0,-r-i),t.lineTo(-e,r-i),t.lineTo(e,r-i),t.closePath()}},"triangle-up":{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e;t.moveTo(0,-r),t.lineTo(-e,r),t.lineTo(e,r),t.closePath()}},"triangle-down":{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e;t.moveTo(0,r),t.lineTo(-e,-r),t.lineTo(e,-r),t.closePath()}},"triangle-right":{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e;t.moveTo(r,0),t.lineTo(-r,-e),t.lineTo(-r,e),t.closePath()}},"triangle-left":{draw:function(t,n){var e=Math.sqrt(n)/2,r=i5*e;t.moveTo(-r,0),t.lineTo(r,-e),t.lineTo(r,e),t.closePath()}},stroke:{draw:function(t,n){var e=Math.sqrt(n)/2;t.moveTo(-e,0),t.lineTo(e,0)}}};function v5(t){return(0,g.nr)(p5,t)?p5[t]:function(t){if(!(0,g.nr)(g5,t)){var n=Q3(t);g5[t]={draw:function(t,e){f5(t,n,0,0,Math.sqrt(e)/2)}}}return g5[t]}(t)}var g5={};var m5=.448084975506;function y5(t){return t.x}function b5(t){return t.y}function x5(t){return t.width}function _5(t){return t.height}function w5(t){return"function"===typeof t?t:function(){return+t}}function k5(t,n,e){return Math.max(n,Math.min(t,e))}function M5(t,n){return null!=t?t:n}var O5=function(t){return t.x||0},E5=function(t){return t.y||0},S5=function(t){return!(!1===t.defined)},D5=function(){var t=L0,n=I0,e=T0(0),r=null,i=B0,a=q0,o=H0,u=null,c=R0(s);function s(){var s,l,f=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-GQ,p=a.apply(this,arguments)-GQ,v=RQ(p-d),g=p>d;if(u||(u=s=c()),h<f&&(l=h,h=f,f=l),h>YQ)if(v>JQ-YQ)u.moveTo(h*IQ(d),h*HQ(d)),u.arc(0,0,h,d,p,!g),f>YQ&&(u.moveTo(f*IQ(p),f*HQ(p)),u.arc(0,0,f,p,d,g));else{var m,y,b=d,x=p,_=d,w=p,k=v,M=v,O=o.apply(this,arguments)/2,E=O>YQ&&(r?+r.apply(this,arguments):WQ(f*f+h*h)),S=qQ(RQ(h-f)/2,+e.apply(this,arguments)),D=S,C=S;if(E>YQ){var A=$Q(E/f*HQ(O)),T=$Q(E/h*HQ(O));(k-=2*A)>YQ?(_+=A*=g?1:-1,w-=A):(k=0,_=w=(d+p)/2),(M-=2*T)>YQ?(b+=T*=g?1:-1,x-=T):(M=0,b=x=(d+p)/2)}var F=h*IQ(b),j=h*HQ(b),Z=f*IQ(w),N=f*HQ(w);if(S>YQ){var z,U=h*IQ(x),P=h*HQ(x),R=f*IQ(_),L=f*HQ(_);if(v<XQ)if(z=function(t,n,e,r,i,a,o,u){var c=e-t,s=r-n,l=o-i,f=u-a,h=f*c-l*s;if(!(h*h<YQ))return[t+(h=(l*(n-a)-f*(t-i))/h)*c,n+h*s]}(F,j,R,L,U,P,Z,N)){var I=F-z[0],B=j-z[1],q=U-z[0],H=P-z[1],W=1/HQ(function(t){return t>1?0:t<-1?XQ:Math.acos(t)}((I*q+B*H)/(WQ(I*I+B*B)*WQ(q*q+H*H)))/2),Y=WQ(z[0]*z[0]+z[1]*z[1]);D=qQ(S,(f-Y)/(W-1)),C=qQ(S,(h-Y)/(W+1))}else D=C=0}M>YQ?C>YQ?(m=W0(R,L,F,j,h,C,g),y=W0(U,P,Z,N,h,C,g),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<S?u.arc(m.cx,m.cy,C,LQ(m.y01,m.x01),LQ(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,C,LQ(m.y01,m.x01),LQ(m.y11,m.x11),!g),u.arc(0,0,h,LQ(m.cy+m.y11,m.cx+m.x11),LQ(y.cy+y.y11,y.cx+y.x11),!g),u.arc(y.cx,y.cy,C,LQ(y.y11,y.x11),LQ(y.y01,y.x01),!g))):(u.moveTo(F,j),u.arc(0,0,h,b,x,!g)):u.moveTo(F,j),f>YQ&&k>YQ?D>YQ?(m=W0(Z,N,U,P,f,-D,g),y=W0(F,j,R,L,f,-D,g),u.lineTo(m.cx+m.x01,m.cy+m.y01),D<S?u.arc(m.cx,m.cy,D,LQ(m.y01,m.x01),LQ(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,D,LQ(m.y01,m.x01),LQ(m.y11,m.x11),!g),u.arc(0,0,f,LQ(m.cy+m.y11,m.cx+m.x11),LQ(y.cy+y.y11,y.cx+y.x11),g),u.arc(y.cx,y.cy,D,LQ(y.y11,y.x11),LQ(y.y01,y.x01),!g))):u.arc(0,0,f,w,_,g):u.lineTo(Z,N)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-XQ/2;return[IQ(r)*e,HQ(r)*e]},s.innerRadius=function(n){return arguments.length?(t="function"===typeof n?n:T0(+n),s):t},s.outerRadius=function(t){return arguments.length?(n="function"===typeof t?t:T0(+t),s):n},s.cornerRadius=function(t){return arguments.length?(e="function"===typeof t?t:T0(+t),s):e},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:T0(+t),s):r},s.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:T0(+t),s):i},s.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:T0(+t),s):a},s.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:T0(+t),s):o},s.context=function(t){return arguments.length?(u=null==t?null:t,s):u},s}().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius((function(t){return t.cornerRadius||0})),C5=$0().x(O5).y1(E5).y0((function(t){return(t.y||0)+(t.height||0)})).defined(S5),A5=$0().y(E5).x1(O5).x0((function(t){return(t.x||0)+(t.width||0)})).defined(S5),T5=J0().x(O5).y(E5).defined(S5),F5=function(){var t=y5,n=b5,e=x5,r=_5,i=w5(0),a=i,o=i,u=i,c=null;function s(s,l,f){var h,d=null!=l?l:+t.call(this,s),p=null!=f?f:+n.call(this,s),v=+e.call(this,s),g=+r.call(this,s),m=Math.min(v,g)/2,y=k5(+i.call(this,s),0,m),b=k5(+a.call(this,s),0,m),x=k5(+o.call(this,s),0,m),_=k5(+u.call(this,s),0,m);if(c||(c=h=P0()),y<=0&&b<=0&&x<=0&&_<=0)c.rect(d,p,v,g);else{var w=d+v,k=p+g;c.moveTo(d+y,p),c.lineTo(w-b,p),c.bezierCurveTo(w-m5*b,p,w,p+m5*b,w,p+b),c.lineTo(w,k-_),c.bezierCurveTo(w,k-m5*_,w-m5*_,k,w-_,k),c.lineTo(d+x,k),c.bezierCurveTo(d+m5*x,k,d,k-m5*x,d,k-x),c.lineTo(d,p+y),c.bezierCurveTo(d,p+m5*y,d+m5*y,p,d+y,p),c.closePath()}if(h)return c=null,h+""||null}return s.x=function(n){return arguments.length?(t=w5(n),s):t},s.y=function(t){return arguments.length?(n=w5(t),s):n},s.width=function(t){return arguments.length?(e=w5(t),s):e},s.height=function(t){return arguments.length?(r=w5(t),s):r},s.cornerRadius=function(t,n,e,r){return arguments.length?(i=w5(t),a=null!=n?w5(n):i,u=null!=e?w5(e):i,o=null!=r?w5(r):a,s):i},s.context=function(t){return arguments.length?(c=null==t?null:t,s):c},s}().x(O5).y(E5).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius((function(t){return M5(t.cornerRadiusTopLeft,t.cornerRadius)||0}),(function(t){return M5(t.cornerRadiusTopRight,t.cornerRadius)||0}),(function(t){return M5(t.cornerRadiusBottomRight,t.cornerRadius)||0}),(function(t){return M5(t.cornerRadiusBottomLeft,t.cornerRadius)||0})),j5=function(t,n){var e=null,r=R0(i);function i(){var i;if(e||(e=i=r()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),i)return e=null,i+""||null}return t="function"===typeof t?t:T0(t||V0),n="function"===typeof n?n:T0(void 0===n?64:+n),i.type=function(n){return arguments.length?(t="function"===typeof n?n:T0(n),i):t},i.size=function(t){return arguments.length?(n="function"===typeof t?t:T0(+t),i):n},i.context=function(t){return arguments.length?(e=null==t?null:t,i):e},i}().type((function(t){return v5(t.shape||"circle")})).size((function(t){return M5(t.size,64)})),Z5=function(){var t,n,e,r,i,a,o,u,c=null;function s(t,n,e){var r=e/2;if(i){var s=o-n,l=t-a;if(s||l){var f=Math.sqrt(s*s+l*l),h=(s/=f)*u,d=(l/=f)*u,p=Math.atan2(l,s);c.moveTo(a-h,o-d),c.lineTo(t-s*r,n-l*r),c.arc(t,n,r,p-Math.PI,p),c.lineTo(a+h,o+d),c.arc(a,o,u,p,p+Math.PI)}else c.arc(t,n,r,0,r5);c.closePath()}else i=1;a=t,o=n,u=r}function l(a){var o,u,l,f=a.length,h=!1;for(null==c&&(c=l=P0()),o=0;o<=f;++o)!(o<f&&r(u=a[o],o,a))===h&&(h=!h)&&(i=0),h&&s(+t(u,o,a),+n(u,o,a),+e(u,o,a));if(l)return c=null,l+""||null}return l.x=function(n){return arguments.length?(t=n,l):t},l.y=function(t){return arguments.length?(n=t,l):n},l.size=function(t){return arguments.length?(e=t,l):e},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(c=null==t?null:t,l):c},l}().x(O5).y(E5).defined(S5).size((function(t){return t.size||1}));function N5(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function z5(t,n,e,r){return F5.context(t)(n,e,r)}var U5=1;function P5(t,n,e){var r=n.clip,i=t._defs,a=n.clip_id||(n.clip_id="clip"+U5++),o=i.clipping[a]||(i.clipping[a]={id:a});return(0,g.mf)(r)?o.path=r(null):N5(e)?o.path=z5(null,e,0,0):(o.width=e.width||0,o.height=e.height||0),"url(#"+a+")"}function R5(t){this.clear(),t&&this.union(t)}function L5(t){this.mark=t,this.bounds=this.bounds||new R5}function I5(t){L5.call(this,t),this.items=this.items||[]}function B5(t){this._pending=0,this._loader=t||D1()}function q5(t){t._pending+=1}function H5(t){t._pending-=1}function W5(t,n,e){if(n.stroke&&0!==n.opacity&&0!==n.strokeOpacity){var r=null!=n.strokeWidth?+n.strokeWidth:1;t.expand(r+(e?function(t,n){return t.strokeJoin&&"miter"!==t.strokeJoin?0:n}(n,r):0))}return t}R5.prototype={clone:function(){return new R5(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set:function(t,n,e,r){return e<t?(this.x2=t,this.x1=e):(this.x1=t,this.x2=e),r<n?(this.y2=n,this.y1=r):(this.y1=n,this.y2=r),this},add:function(t,n){return t<this.x1&&(this.x1=t),n<this.y1&&(this.y1=n),t>this.x2&&(this.x2=t),n>this.y2&&(this.y2=n),this},expand:function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate:function(t,n){return this.x1+=t,this.x2+=t,this.y1+=n,this.y2+=n,this},rotate:function(t,n,e){var r=this.rotatedPoints(t,n,e);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(t,n,e){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,u=Math.cos(t),c=Math.sin(t),s=n-n*u+e*c,l=e-n*c-e*u;return[u*r-c*i+s,c*r+u*i+l,u*r-c*o+s,c*r+u*o+l,u*a-c*i+s,c*a+u*i+l,u*a-c*o+s,c*a+u*o+l]},union:function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect:function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses:function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith:function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects:function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains:function(t,n){return!(t<this.x1||t>this.x2||n<this.y1||n>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},(0,g.XW)(I5,L5),B5.prototype={pending:function(){return this._pending},sanitizeURL:function(t){var n=this;return q5(n),n._loader.sanitize(t,{context:"href"}).then((function(t){return H5(n),t})).catch((function(){return H5(n),null}))},loadImage:function(t){var n=this,e=Ll();return q5(n),n._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!e)throw{url:r};var i=new e,a=(0,g.nr)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=function(){return H5(n)},i.onerror=function(){return H5(n)},i.src=r,i})).catch((function(t){return H5(n),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},ready:function(){var t=this;return new Promise((function(n){!function e(r){t.pending()?setTimeout((function(){e(!0)}),10):n(r)}(!1)}))}};var Y5,X5,G5,J5,$5,V5,K5,Q5,t6=r5-1e-8,n6=function(t,n){return Y5.add(t,n)},e6=function(t,n){return n6(X5=t,G5=n)},r6=function(t){return n6(t,Y5.y1)},i6=function(t){return n6(Y5.x1,t)},a6=function(t,n){return $5*t+K5*n},o6=function(t,n){return V5*t+Q5*n},u6=function(t,n){return n6(a6(t,n),o6(t,n))},c6=function(t,n){return e6(a6(t,n),o6(t,n))};function s6(t,n){return Y5=t,n?(J5=n*t5,$5=Q5=Math.cos(J5),V5=Math.sin(J5),K5=-V5):($5=Q5=1,J5=V5=K5=0),l6}var l6={beginPath:function(){},closePath:function(){},moveTo:c6,lineTo:c6,rect:function(t,n,e,r){J5?(u6(t+e,n),u6(t+e,n+r),u6(t,n+r),c6(t,n)):(n6(t+e,n+r),e6(t,n))},quadraticCurveTo:function(t,n,e,r){var i=a6(t,n),a=o6(t,n),o=a6(e,r),u=o6(e,r);f6(X5,i,o,r6),f6(G5,a,u,i6),e6(o,u)},bezierCurveTo:function(t,n,e,r,i,a){var o=a6(t,n),u=o6(t,n),c=a6(e,r),s=o6(e,r),l=a6(i,a),f=o6(i,a);h6(X5,o,c,l,r6),h6(G5,u,s,f,i6),e6(l,f)},arc:function(t,n,e,r,i,a){if(r+=J5,i+=J5,X5=e*Math.cos(i)+t,G5=e*Math.sin(i)+n,Math.abs(i-r)>t6)n6(t-e,n-e),n6(t+e,n+e);else{var o,u,c=function(r){return n6(e*Math.cos(r)+t,e*Math.sin(r)+n)};if(c(r),c(i),i!==r)if((r%=r5)<0&&(r+=r5),(i%=r5)<0&&(i+=r5),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=r5,o=r-r%e5,u=0;u<4&&o>i;++u,o-=e5)c(o);else for(o=r-r%e5+e5,u=0;u<4&&o<i;++u,o+=e5)c(o)}}};function f6(t,n,e,r){var i=(t-n)/(t+e-2*n);0<i&&i<1&&r(t+(n-t)*i)}function h6(t,n,e,r,i){var a,o=r-t+3*n-3*e,u=t+e-2*n,c=t-n,s=0,l=0;Math.abs(o)>n5?(a=u*u+c*o)>=0&&(s=(-u+(a=Math.sqrt(a)))/o,l=(-u-a)/o):s=.5*c/u,0<s&&s<1&&i(d6(s,t,n,e,r)),0<l&&l<1&&i(d6(l,t,n,e,r))}function d6(t,n,e,r,i){var a=1-t,o=a*a,u=t*t;return o*a*n+3*o*t*e+3*a*u*r+u*t*i}var p6=(p6=Rl(1,1))?p6.getContext("2d"):null,v6=new R5;function g6(t){return function(n,e){if(!p6)return!0;t(p6,n),v6.clear().union(n.bounds).intersect(e).round();for(var r=v6.x1,i=v6.y1,a=v6.x2,o=v6.y2,u=i;u<=o;++u)for(var c=r;c<=a;++c)if(p6.isPointInPath(c,u))return!0;return!1}}function m6(t,n){return n.contains(t.x||0,t.y||0)}function y6(t,n){var e=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return n.intersects(v6.set(e,r,e+i,r+a))}function b6(t,n,e,r,i){var a,o,u,c,s=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-n,p=i-e,v=0,g=1;for(c=0;c<4;++c){if(0===c&&(a=-d,o=-(s-n)),1===c&&(a=d,o=f-n),2===c&&(a=-p,o=-(l-e)),3===c&&(a=p,o=h-e),Math.abs(a)<1e-10&&o<0)return!1;if(u=o/a,a<0){if(u>g)return!1;u>v&&(v=u)}else if(a>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function x6(t,n){t.globalCompositeOperation=n.blend||"source-over"}function _6(t,n){return null==t?n:t}function w6(t,n){for(var e=n.length,r=0;r<e;++r)t.addColorStop(n[r].offset,n[r].color);return t}function k6(t,n,e){return q3(e)?function(t,n,e){var r,i=e.width(),a=e.height();if("radial"===n.gradient)r=t.createRadialGradient(e.x1+_6(n.x1,.5)*i,e.y1+_6(n.y1,.5)*a,Math.max(i,a)*_6(n.r1,0),e.x1+_6(n.x2,.5)*i,e.y1+_6(n.y2,.5)*a,Math.max(i,a)*_6(n.r2,.5));else{var o=_6(n.x1,0),u=_6(n.y1,0),c=_6(n.x2,1),s=_6(n.y2,0);if(o!==c&&u!==s&&i!==a){var l=Rl(Math.ceil(i),Math.ceil(a)),f=l.getContext("2d");return f.scale(i,a),f.fillStyle=w6(f.createLinearGradient(o,u,c,s),n.stops),f.fillRect(0,0,i,a),t.createPattern(l,"no-repeat")}r=t.createLinearGradient(e.x1+o*i,e.y1+u*a,e.x1+c*i,e.y1+s*a)}return w6(r,n.stops)}(t,e,n.bounds):e}function M6(t,n,e){return(e*=null==n.fillOpacity?1:n.fillOpacity)>0&&(t.globalAlpha=e,t.fillStyle=k6(t,n,n.fill),!0)}var O6=[];function E6(t,n,e){var r=null!=(r=n.strokeWidth)?r:1;return!(r<=0)&&((e*=null==n.strokeOpacity?1:n.strokeOpacity)>0&&(t.globalAlpha=e,t.strokeStyle=k6(t,n,n.stroke),t.lineWidth=r,t.lineCap=n.strokeCap||"butt",t.lineJoin=n.strokeJoin||"miter",t.miterLimit=n.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(n.strokeDash||O6),t.lineDashOffset=n.strokeDashOffset||0),!0))}function S6(t,n){return t.zindex-n.zindex||t.index-n.index}function D6(t){if(!t.zdirty)return t.zitems;var n,e,r,i=t.items,a=[];for(e=0,r=i.length;e<r;++e)(n=i[e]).index=e,n.zindex&&a.push(n);return t.zdirty=!1,t.zitems=a.sort(S6)}function C6(t,n){var e,r,i=t.items;if(i&&i.length){var a=D6(t);if(a&&a.length){for(e=0,r=i.length;e<r;++e)i[e].zindex||n(i[e]);i=a}for(e=0,r=i.length;e<r;++e)n(i[e])}}function A6(t,n){var e,r,i=t.items;if(!i||!i.length)return null;var a=D6(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(e=n(i[r]))return e;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(e=n(i[r])))return e;return null}function T6(t){return function(n,e,r){C6(e,(function(e){r&&!r.intersects(e.bounds)||j6(t,n,e,e)}))}}function F6(t){return function(n,e,r){!e.items.length||r&&!r.intersects(e.bounds)||j6(t,n,e.items[0],e.items)}}function j6(t,n,e,r){var i=null==e.opacity?1:e.opacity;0!==i&&(t(n,r)||(x6(n,e),e.fill&&M6(n,e,i)&&n.fill(),e.stroke&&E6(n,e,i)&&n.stroke()))}function Z6(t){return t=t||g.yb,function(n,e,r,i,a,o){return r*=n.pixelRatio,i*=n.pixelRatio,A6(e,(function(e){var u=e.bounds;if((!u||u.contains(a,o))&&u)return t(n,e,r,i,a,o)?e:void 0}))}}function N6(t,n){return function(e,r,i,a){var o,u,c=Array.isArray(r)?r[0]:r,s=null==n?c.fill:n,l=c.stroke&&e.isPointInStroke;return l&&(o=c.strokeWidth,u=c.strokeCap,e.lineWidth=null!=o?o:1,e.lineCap=null!=u?u:"butt"),!t(e,r)&&(s&&e.isPointInPath(i,a)||l&&e.isPointInStroke(i,a))}}function z6(t){return Z6(N6(t))}function U6(t,n){return"translate("+t+","+n+")"}function P6(t){return"rotate("+t+")"}function R6(t){return U6(t.x||0,t.y||0)}function L6(t,n,e){function r(t,e){var r=e.x||0,i=e.y||0,a=e.angle||0;t.translate(r,i),a&&t.rotate(a*=t5),t.beginPath(),n(t,e),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,e){t("transform",function(t){return U6(t.x||0,t.y||0)+(t.angle?" "+P6(t.angle):"")}(e)),t("d",n(null,e))},bound:function(t,e){return n(s6(t,e.angle),e),W5(t,e).translate(e.x||0,e.y||0)},draw:T6(r),pick:z6(r),isect:e||g6(r)}}var I6=L6("arc",(function(t,n){return D5.context(t)(n)}));function B6(t,n,e){function r(t,e){t.beginPath(),n(t,e)}var i=N6(r);return{type:t,tag:"path",nested:!0,attr:function(t,e){var r=e.mark.items;r.length&&t("d",n(null,r))},bound:function(t,e){var r=e.items;return 0===r.length?t:(n(s6(t),r),W5(t,r[0]))},draw:F6(r),pick:function(t,n,e,r,a,o){var u=n.items,c=n.bounds;return!u||!u.length||c&&!c.contains(a,o)?null:(e*=t.pixelRatio,r*=t.pixelRatio,i(t,u,e,r)?u[0]:null)},isect:m6,tip:e}}var q6=B6("area",(function(t,n){var e=n[0],r=e.interpolate||"linear";return("horizontal"===e.orient?A5:C5).curve(X3(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i="horizontal"===t[0].orient?n[1]:n[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,u=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<u&&(u=r,e=t[o]);return e}));function H6(t,n){t.beginPath(),N5(n)?z5(t,n,0,0):t.rect(0,0,n.width||0,n.height||0),t.clip()}function W6(t){var n=_6(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&n>.5&&n<1.5?.5-Math.abs(n-1):0}function Y6(t,n){var e=W6(n);t("d",z5(null,n,e,e))}function X6(t,n,e,r){var i=W6(n);t.beginPath(),z5(t,n,(e||0)+i,(r||0)+i)}var G6=N6(X6),J6=N6(X6,!1),$6=N6(X6,!0);var V6={type:"group",tag:"g",nested:!1,attr:function(t,n){t("transform",R6(n))},bound:function(t,n){if(!n.clip&&n.items)for(var e=n.items,r=e.length,i=0;i<r;++i)t.union(e[i].bounds);return(n.clip||n.width||n.height)&&!n.noBound&&t.add(0,0).add(n.width||0,n.height||0),W5(t,n),t.translate(n.x||0,n.y||0)},draw:function(t,n,e){var r=this;C6(n,(function(n){var i=n.x||0,a=n.y||0,o=n.strokeForeground,u=null==n.opacity?1:n.opacity;(n.stroke||n.fill)&&u&&(X6(t,n,i,a),x6(t,n),n.fill&&M6(t,n,u)&&t.fill(),n.stroke&&!o&&E6(t,n,u)&&t.stroke()),t.save(),t.translate(i,a),n.clip&&H6(t,n),e&&e.translate(-i,-a),C6(n,(function(n){r.draw(t,n,e)})),e&&e.translate(i,a),t.restore(),o&&n.stroke&&u&&(X6(t,n,i,a),x6(t,n),E6(t,n,u)&&t.stroke())}))},pick:function(t,n,e,r,i,a){var o=this;if(n.bounds&&!n.bounds.contains(i,a)||!n.items)return null;var u=e*t.pixelRatio,c=r*t.pixelRatio;return A6(n,(function(s){var l,f,h,d=s.bounds;if(!d||d.contains(i,a)){f=s.x||0,h=s.y||0;var p=f+(s.width||0),v=h+(s.height||0),g=s.clip;if(!g||!(i<f||i>p||a<h||a>v)){if(t.save(),t.translate(f,h),f=i-f,h=a-h,g&&N5(s)&&!$6(t,s,u,c))return t.restore(),null;var m=s.strokeForeground,y=!1!==n.interactive;return y&&m&&s.stroke&&J6(t,s,u,c)?(t.restore(),s):(!(l=A6(s,(function(t){return function(t,n,e){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(n,e)}(t,f,h)?o.pick(t,e,r,f,h):null})))&&y&&(s.fill||!m&&s.stroke)&&G6(t,s,u,c)&&(l=s),t.restore(),l||null)}}}))},isect:y6,content:function(t,n,e){t("clip-path",n.clip?P5(e,n,n):null)},background:function(t,n){t("class","background"),t("aria-hidden",!0),Y6(t,n)},foreground:function(t,n){t("class","foreground"),t("aria-hidden",!0),n.strokeForeground?Y6(t,n):t("d","")}},K6={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Q6(t,n){var e=t.image;return(!e||t.url&&t.url!==e.url)&&(e={complete:!1,width:0,height:0},n.loadImage(t.url).then((function(n){t.image=n,t.image.url=t.url}))),e}function t4(t,n){return null!=t.width?t.width:n&&n.width?!1!==t.aspect&&t.height?t.height*n.width/n.height:n.width:0}function n4(t,n){return null!=t.height?t.height:n&&n.height?!1!==t.aspect&&t.width?t.width*n.height/n.width:n.height:0}function e4(t,n){return"center"===t?n/2:"right"===t?n:0}function r4(t,n){return"middle"===t?n/2:"bottom"===t?n:0}var i4={type:"image",tag:"image",nested:!1,attr:function(t,n,e){var r=Q6(n,e),i=t4(n,r),a=n4(n,r),o=(n.x||0)-e4(n.align,i),u=(n.y||0)-r4(n.baseline,a);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",K6["xmlns:xlink"],"xlink:href"),t("transform",U6(o,u)),t("width",i),t("height",a),t("preserveAspectRatio",!1===n.aspect?"none":"xMidYMid")},bound:function(t,n){var e=n.image,r=t4(n,e),i=n4(n,e),a=(n.x||0)-e4(n.align,r),o=(n.y||0)-r4(n.baseline,i);return t.set(a,o,a+r,o+i)},draw:function(t,n,e){var r=this;C6(n,(function(n){if(!e||e.intersects(n.bounds)){var i=Q6(n,r),a=t4(n,i),o=n4(n,i);if(0!==a&&0!==o){var u,c,s,l,f=(n.x||0)-e4(n.align,a),h=(n.y||0)-r4(n.baseline,o);!1!==n.aspect&&(c=i.width/i.height,s=n.width/n.height,c===c&&s===s&&c!==s&&(s<c?(h+=(o-(l=a/c))/2,o=l):(f+=(a-(l=o*c))/2,a=l))),(i.complete||i.toDataURL)&&(x6(t,n),t.globalAlpha=null!=(u=n.opacity)?u:1,t.imageSmoothingEnabled=!1!==n.smooth,t.drawImage(i,f,h,a,o))}}}))},pick:Z6(),isect:g.yb,get:Q6,xOffset:e4,yOffset:r4},a4=B6("line",(function(t,n){var e=n[0],r=e.interpolate||"linear";return T5.curve(X3(r,e.orient,e.tension)).context(t)(n)}),(function(t,n){for(var e,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(e=t[a].x-n[0])*e+(r=t[a].y-n[1])*r<i)return t[a];return null}));function o4(t,n){var e=n.path;if(null==e)return!0;var r=n.x||0,i=n.y||0,a=n.scaleX||1,o=n.scaleY||1,u=(n.angle||0)*t5,c=n.pathCache;c&&c.path===e||((n.pathCache=c=Q3(e)).path=e),u&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(u),f5(t,c,0,0,a,o),t.rotate(-u),t.translate(-r,-i)):f5(t,c,r,i,a,o)}var u4={type:"path",tag:"path",nested:!1,attr:function(t,n){var e=n.scaleX||1,r=n.scaleY||1;1===e&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return U6(t.x||0,t.y||0)+(t.angle?" "+P6(t.angle):"")+(t.scaleX||t.scaleY?" "+function(t,n){return"scale("+t+","+n+")"}(t.scaleX||1,t.scaleY||1):"")}(n)),t("d",n.path)},bound:function(t,n){return o4(s6(t,n.angle),n)?t.set(0,0,0,0):W5(t,n,!0)},draw:T6(o4),pick:z6(o4),isect:g6(o4)};function c4(t,n){t.beginPath(),z5(t,n)}var s4={type:"rect",tag:"path",nested:!1,attr:function(t,n){t("d",z5(null,n))},bound:function(t,n){var e,r;return W5(t.set(e=n.x||0,r=n.y||0,e+n.width||0,r+n.height||0),n)},draw:T6(c4),pick:z6(c4),isect:y6};function l4(t,n,e){var r,i,a,o;return!(!n.stroke||!E6(t,n,e))&&(r=n.x||0,i=n.y||0,a=null!=n.x2?n.x2:r,o=null!=n.y2?n.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var f4={type:"rule",tag:"line",nested:!1,attr:function(t,n){t("transform",R6(n)),t("x2",null!=n.x2?n.x2-(n.x||0):0),t("y2",null!=n.y2?n.y2-(n.y||0):0)},bound:function(t,n){var e,r;return W5(t.set(e=n.x||0,r=n.y||0,null!=n.x2?n.x2:e,null!=n.y2?n.y2:r),n)},draw:function(t,n,e){C6(n,(function(n){if(!e||e.intersects(n.bounds)){var r=null==n.opacity?1:n.opacity;r&&l4(t,n,r)&&(x6(t,n),t.stroke())}}))},pick:Z6((function(t,n,e,r){return!!t.isPointInStroke&&(l4(t,n,1)&&t.isPointInStroke(e,r))})),isect:function(t,n){var e=t.x||0,r=t.y||0;return b6(n,e,r,null!=t.x2?t.x2:e,null!=t.y2?t.y2:r)}},h4=L6("shape",(function(t,n){return(n.mark.shape||n.shape).context(t)(n)})),d4=L6("symbol",(function(t,n){return j5.context(t)(n)}),m6),p4=(0,g.$m)(),v4={height:_4,measureWidth:b4,estimateWidth:m4,width:m4,canvas:g4};function g4(t){v4.width=t&&p6?b4:m4}function m4(t,n){return y4(M4(t,n),_4(t))}function y4(t,n){return~~(.8*t.length*n)}function b4(t,n){return _4(t)<=0||!(n=M4(t,n))?0:x4(n,E4(t))}function x4(t,n){var e="(".concat(n,") ").concat(t),r=p4.get(e);return void 0===r&&(p6.font=n,r=p6.measureText(t).width,p4.set(e,r)),r}function _4(t){return null!=t.fontSize?+t.fontSize||0:11}function w4(t){return null!=t.lineHeight?t.lineHeight:_4(t)+2}function k4(t){return n=t.lineBreak&&t.text&&!(0,g.kJ)(t.text)?t.text.split(t.lineBreak):t.text,(0,g.kJ)(n)?n.length>1?n:n[0]:n;var n}function M4(t,n){var e=null==n?"":(n+"").trim();return t.limit>0&&e.length?function(t,n){var e=+t.limit,r=function(t){if(v4.width===b4){var n=E4(t);return function(t){return x4(t,n)}}var e=_4(t);return function(t){return y4(t,e)}}(t);if(r(n)<e)return n;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,u=0,c=n.length;if(e-=r(a),o){for(;u<c;)i=u+c>>>1,r(n.slice(i))>e?u=i+1:c=i;return a+n.slice(u)}for(;u<c;)i=1+(u+c>>>1),r(n.slice(0,i))<e?u=i:c=i-1;return n.slice(0,u)+a}(t,e):e}function O4(t,n){var e=t.font;return(n&&e?String(e).replace(/"/g,"'"):e)||"sans-serif"}function E4(t,n){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+_4(t)+"px "+O4(t,n)}function S4(t){var n=t.baseline,e=_4(t);return Math.round("top"===n?.79*e:"middle"===n?.3*e:"bottom"===n?-.21*e:"line-top"===n?.29*e+.5*w4(t):"line-bottom"===n?.29*e-.5*w4(t):0)}g4(!0);var D4={left:"start",center:"middle",right:"end"},C4=new R5;function A4(t){var n,e=t.x||0,r=t.y||0,i=t.radius||0;return i&&(n=(t.theta||0)-e5,e+=i*Math.cos(n),r+=i*Math.sin(n)),C4.x1=e,C4.y1=r,C4}function T4(t,n,e){var r,i=v4.height(n),a=n.align,o=A4(n),u=o.x1,c=o.y1,s=n.dx||0,l=(n.dy||0)+S4(n)-Math.round(.8*i),f=k4(n);if((0,g.kJ)(f)?(i+=w4(n)*(f.length-1),r=f.reduce((function(t,e){return Math.max(t,v4.width(n,e))}),0)):r=v4.width(n,f),"center"===a?s-=r/2:"right"===a&&(s-=r),t.set(s+=u,l+=c,s+r,l+i),n.angle&&!e)t.rotate(n.angle*t5,u,c);else if(2===e)return t.rotatedPoints(n.angle*t5,u,c);return t}var F4={type:"text",tag:"text",nested:!1,attr:function(t,n){var e,r=n.dx||0,i=(n.dy||0)+S4(n),a=A4(n),o=a.x1,u=a.y1,c=n.angle||0;t("text-anchor",D4[n.align]||"start"),c?(e=U6(o,u)+" "+P6(c),(r||i)&&(e+=" "+U6(r,i))):e=U6(o+r,u+i),t("transform",e)},bound:T4,draw:function(t,n,e){C6(n,(function(n){var r,i,a,o,u,c,s,l=null==n.opacity?1:n.opacity;if(!(e&&!e.intersects(n.bounds)||0===l||n.fontSize<=0||null==n.text||0===n.text.length)){if(t.font=E4(n),t.textAlign=n.align||"left",i=(r=A4(n)).x1,a=r.y1,n.angle&&(t.save(),t.translate(i,a),t.rotate(n.angle*t5),i=a=0),i+=n.dx||0,a+=(n.dy||0)+S4(n),c=k4(n),x6(t,n),(0,g.kJ)(c))for(u=w4(n),o=0;o<c.length;++o)s=M4(n,c[o]),n.fill&&M6(t,n,l)&&t.fillText(s,i,a),n.stroke&&E6(t,n,l)&&t.strokeText(s,i,a),a+=u;else s=M4(n,c),n.fill&&M6(t,n,l)&&t.fillText(s,i,a),n.stroke&&E6(t,n,l)&&t.strokeText(s,i,a);n.angle&&t.restore()}}))},pick:Z6((function(t,n,e,r,i,a){if(n.fontSize<=0)return!1;if(!n.angle)return!0;var o=A4(n),u=o.x1,c=o.y1,s=T4(C4,n,1),l=-n.angle*t5,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(u-f*u+h*c),p=h*i+f*a+(c-h*u-f*c);return s.contains(d,p)})),isect:function(t,n){var e=T4(C4,t,2);return b6(n,e[0],e[1],e[2],e[3])||b6(n,e[0],e[1],e[4],e[5])||b6(n,e[4],e[5],e[6],e[7])||b6(n,e[2],e[3],e[6],e[7])}},j4=B6("trail",(function(t,n){return Z5.context(t)(n)}),(function(t,n){for(var e,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(e=t[i].x-n[0])*e+(r=t[i].y-n[1])*r<(e=t[i].size||1)*e)return t[i];return null})),Z4={arc:I6,area:q6,group:V6,image:i4,line:a4,path:u4,rect:s4,rule:f4,shape:h4,symbol:d4,text:F4,trail:j4};function N4(t,n,e){var r=Z4[t.mark.marktype],i=n||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new R5),t,e)}var z4={mark:null};var U4=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function P4(t){return R4("string"===typeof t?JSON.parse(t):t)}function R4(t){var n,e,r,i=t.marktype,a=t.items;if(a)for(e=0,r=a.length;e<r;++e)n=i?"mark":"group",a[e][n]=t,a[e].zindex&&(a[e][n].zdirty=!0),"group"===(i||n)&&R4(a[e]);return i&&function(t,n,e){var r,i,a,o,u=Z4[t.marktype],c=u.bound,s=t.items,l=s&&s.length;if(u.nested)return l?a=s[0]:(z4.mark=t,a=z4),o=N4(a,c,e),n&&n.union(o)||o;if(n=n||t.bounds&&t.bounds.clear()||new R5,l)for(r=0,i=s.length;r<i;++r)n.union(N4(s[r],c,e));t.bounds=n}(t),t}function L4(t){arguments.length?this.root=P4(t):(this.root=I4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new I5(this.root)])}function I4(t,n){var e={bounds:new R5,clip:!!t.clip,group:n,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(e.aria=t.aria),t.description&&(e.description=t.description),e}function B4(t,n,e){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?e?t.createElementNS(e,n):t.createElement(n):null}function q4(t,n){n=n.toLowerCase();for(var e=t.childNodes,r=0,i=e.length;r<i;++r)if(e[r].tagName.toLowerCase()===n)return e[r]}function H4(t,n,e,r){var i,a=t.childNodes[n];return a&&a.tagName.toLowerCase()===e.toLowerCase()||(i=a||null,a=B4(t.ownerDocument,e,r),t.insertBefore(a,i)),a}function W4(t,n){for(var e=t.childNodes,r=e.length;r>n;)t.removeChild(e[--r]);return t}function Y4(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function X4(t,n){var e=n.getBoundingClientRect();return[t.clientX-e.left-(n.clientLeft||0),t.clientY-e.top-(n.clientTop||0)]}function G4(t,n){this._active=null,this._handlers={},this._loader=t||D1(),this._tooltip=n||J4}function J4(t,n,e,r){t.element().setAttribute("title",r||"")}function $4(t){this._el=null,this._bgcolor=null,this._loader=new B5(t)}L4.prototype={toJSON:function(t){return function(t,n){return JSON.stringify(t,U4,n)}(this.root,t||0)},mark:function(t,n,e){var r=I4(t,n=n||this.root.items[0]);return n.items[e]=r,r.zindex&&(r.group.zdirty=!0),r}},G4.prototype={initialize:function(t,n,e){return this._el=t,this._obj=e||null,this.origin(n)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene:function(t){return arguments.length?(this._scene=t,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(t,n,e){for(var r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!e||t[r].handler===e))return r;return-1},handlers:function(t){var n=this._handlers,e=[];if(t)e.push.apply(e,(0,b.Z)(n[this.eventName(t)]));else for(var r in n)e.push.apply(e,(0,b.Z)(n[r]));return e},eventName:function(t){var n=t.indexOf(".");return n<0?t:t.slice(0,n)},handleHref:function(t,n,e){this._loader.sanitize(e,{context:"href"}).then((function(n){var e=new MouseEvent(t.type,t),r=B4(null,"a");for(var i in n)r.setAttribute(i,n[i]);r.dispatchEvent(e)})).catch((function(){}))},handleTooltip:function(t,n,e){if(n&&null!=n.tooltip){n=function(t,n,e,r){var i,a,o=t&&t.mark;if(o&&(i=Z4[o.marktype]).tip){for((a=X4(n,e))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(n,t,this.canvas(),this._origin);var r=e&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}},getItemBoundingClientRect:function(t){var n=this.canvas();if(n){for(var e=n.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height(),u=i.x1+r[0]+e.left,c=i.y1+r[1]+e.top;t.mark&&(t=t.mark.group);)u+=t.x||0,c+=t.y||0;return{x:u,y:c,width:a,height:o,left:u,top:c,right:u+a,bottom:c+o}}}},$4.prototype={initialize:function(t,n,e,r,i){return this._el=t,this.resize(n,e,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize:function(t,n,e,r){return this._width=t,this._height=n,this._origin=e||[0,0],this._scale=r||1,this},dirty:function(){},render:function(t){var n=this;return n._call=function(){n._render(t)},n._call(),n._call=null,n},_render:function(){},renderAsync:function(t){var n=this.render(t);return this._ready?this._ready.then((function(){return n})):Promise.resolve(n)},_load:function(t,n){var e=this,r=e._loader[t](n);if(!e._ready){var i=e._call;e._ready=e._loader.ready().then((function(t){t&&i(),e._ready=null}))}return r},sanitizeURL:function(t){return this._load("sanitizeURL",t)},loadImage:function(t){return this._load("loadImage",t)}};var V4="dragenter",K4="dragleave",Q4="dragover",t7="mousedown",n7="mousemove",e7="mouseout",r7="mouseover",i7="click",a7="mousewheel",o7="touchstart",u7="touchmove",c7="touchend",s7=["keydown","keypress","keyup",V4,K4,Q4,t7,"mouseup",n7,e7,r7,i7,"dblclick","wheel",a7,o7,u7,c7],l7=n7,f7=e7,h7=i7;function d7(t,n){G4.call(this,t,n),this._down=null,this._touch=null,this._first=!0,this._events={}}var p7=function(t){return t===o7||t===u7||t===c7?[o7,u7,c7]:[t]};function v7(t,n){p7(n).forEach((function(n){return function(t,n){var e=t.canvas();e&&!t._events[n]&&(t._events[n]=1,e.addEventListener(n,t[n]?function(e){return t[n](e)}:function(e){return t.fire(n,e)}))}(t,n)}))}function g7(t,n,e){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(e,r),this._active=a,this.fire(n,r)),this.fire(t,r)}}function m7(t){return function(n){this.fire(t,n),this._active=null}}(0,g.XW)(d7,G4,{initialize:function(t,n,e){var r=this;return this._canvas=t&&q4(t,"canvas"),[i7,t7,n7,e7,K4].forEach((function(t){return v7(r,t)})),G4.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:s7,DOMMouseScroll:function(t){this.fire(a7,t)},mousemove:g7(n7,r7,e7),dragover:g7(Q4,V4,K4),mouseout:m7(e7),dragleave:m7(K4),mousedown:function(t){this._down=this._active,this.fire(t7,t)},click:function(t){this._down===this._active&&(this.fire(i7,t),this._down=null)},touchstart:function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(o7,t,!0)},touchmove:function(t){this.fire(u7,t,!0)},touchend:function(t){this.fire(c7,t,!0),this._touch=null},fire:function(t,n,e){var r=e?this._touch:this._active,i=this._handlers[t];if(n.vegaType=t,t===h7&&r&&r.href?this.handleHref(n,r,r.href):t!==l7&&t!==f7||this.handleTooltip(n,r,t!==f7),i)for(var a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,n,r)},on:function(t,n){var e=this.eventName(t),r=this._handlers;return this._handlerIndex(r[e],t,n)<0&&(v7(this,t),(r[e]||(r[e]=[])).push({type:t,handler:n})),this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&r.splice(i,1),this},pickEvent:function(t){var n=X4(t,this._canvas),e=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-e[0],n[1]-e[1])},pick:function(t,n,e,r,i){var a=this.context();return Z4[t.marktype].pick.call(this,a,t,n,e,r,i)}});var y7="undefined"!==typeof window&&window.devicePixelRatio||1;function b7(t){$4.call(this,t),this._options={},this._redraw=!1,this._dirty=new R5,this._tempb=new R5}var x7=$4.prototype;function _7(t,n){G4.call(this,t,n);var e=this;e._hrefHandler=w7(e,(function(t,n){n&&n.href&&e.handleHref(t,n,n.href)})),e._tooltipHandler=w7(e,(function(t,n){e.handleTooltip(t,n,t.type!==f7)}))}(0,g.XW)(b7,$4,{initialize:function(t,n,e,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Rl(1,1,this._options.type),t&&this._canvas&&(W4(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),x7.initialize.call(this,t,n,e,r,i)},resize:function(t,n,e,r){if(x7.resize.call(this,t,n,e,r),this._canvas)!function(t,n,e,r,i,a){var o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=o?y7:i;for(var s in t.width=n*c,t.height=e*c,a)u[s]=a[s];o&&1!==c&&(t.style.width=n+"px",t.style.height=e+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var i=this._options.externalContext;i||(0,g.vU)("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(t){for(var n=this._tempb.clear().union(t.bounds),e=t.mark.group;e;)n.translate(e.x||0,e.y||0),e=e.mark.group;this._dirty.union(n)},_render:function(t){var n=this.context(),e=this._origin,r=this._width,i=this._height,a=this._dirty,o=function(t,n,e){return(new R5).set(0,0,n,e).translate(-t[0],-t[1])}(e,r,i);n.save();var u=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):function(t,n,e){return n.expand(1).round(),t.pixelRatio%1&&n.scale(t.pixelRatio).round().scale(1/t.pixelRatio),n.translate(-e[0]%1,-e[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),n}(n,o.intersect(a),e);return this.clear(-e[0],-e[1],r,i),this.draw(n,t,u),n.restore(),a.clear(),this},draw:function(t,n,e){var r=Z4[n.marktype];n.clip&&function(t,n){var e=n.clip;t.save(),(0,g.mf)(e)?(t.beginPath(),e(t),t.clip()):H6(t,n.group)}(t,n),r.draw.call(this,t,n,e),n.clip&&t.restore()},clear:function(t,n,e,r){var i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,n,e,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,e,r))}});var w7=function(t,n){return function(e){var r=e.target.__data__;r=Array.isArray(r)?r[0]:r,e.vegaType=e.type,n.call(t._obj,e,r)}};(0,g.XW)(_7,G4,{initialize:function(t,n,e){var r=this._svg;return r&&(r.removeEventListener(h7,this._hrefHandler),r.removeEventListener(l7,this._tooltipHandler),r.removeEventListener(f7,this._tooltipHandler)),this._svg=r=t&&q4(t,"svg"),r&&(r.addEventListener(h7,this._hrefHandler),r.addEventListener(l7,this._tooltipHandler),r.addEventListener(f7,this._tooltipHandler)),G4.prototype.initialize.call(this,t,n,e)},canvas:function(){return this._svg},on:function(t,n){var e=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[e],t,n)<0){var i={type:t,handler:n,listener:w7(this,n)};(r[e]||(r[e]=[])).push(i),this._svg&&this._svg.addEventListener(e,i.listener)}return this},off:function(t,n){var e=this.eventName(t),r=this._handlers[e],i=this._handlerIndex(r,t,n);return i>=0&&(this._svg&&this._svg.removeEventListener(e,r[i].listener),r.splice(i,1)),this}});var k7="aria-hidden",M7="aria-label",O7="role",E7="aria-roledescription",S7="graphics-object",D7="graphics-symbol",C7=function(t,n,e){var r;return r={},(0,nt.Z)(r,O7,t),(0,nt.Z)(r,E7,n),(0,nt.Z)(r,M7,e||void 0),r},A7=(0,g.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),T7={axis:{desc:"axis",caption:function(t){var n=t.datum,e=t.orient,r=n.title?z7(t):null,i=t.context,a=i.scales[n.scale].value,o=i.dataflow.locale(),u=a.type;return"".concat("left"===e||"right"===e?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(v3(u)?"discrete":u," scale")+" with ".concat(L3(o,a,t))}},legend:{desc:"legend",caption:function(t){var n=t.datum,e=n.title?z7(t):null,r="".concat(n.type||""," legend").trim(),i=n.scales,a=Object.keys(i),o=t.context,u=o.scales[i[a[0]]].value,c=o.dataflow.locale();return function(t){return t.length?t[0].toUpperCase()+t.slice(1):t}(r)+(e?" titled '".concat(e,"'"):"")+" for ".concat(function(t){return t=t.map((function(t){return t+("fill"===t||"stroke"===t?" color":"")})),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+(0,g.fj)(t)}(a))+" with ".concat(L3(c,u,t))}},"title-text":{desc:"title",caption:function(t){return"Title text '".concat(N7(t),"'")}},"title-subtitle":{desc:"subtitle",caption:function(t){return"Subtitle text '".concat(N7(t),"'")}}},F7={ariaRole:O7,ariaRoleDescription:E7,description:M7};function j7(t,n){var e=!1===n.aria;if(t(k7,e||void 0),e||null==n.description)for(var r in F7)t(F7[r],void 0);else{var i=n.mark.marktype;t(M7,n.description),t(O7,n.ariaRole||("group"===i?S7:D7)),t(E7,n.ariaRoleDescription||"".concat(i," mark"))}}function Z7(t){return!1===t.aria?(0,nt.Z)({},k7,!0):A7[t.role]?null:T7[t.role]?function(t,n){try{var e=t.items[0],r=n.caption||function(){return""};return C7(n.role||D7,n.desc,e.description||r(e))}catch(i){return null}}(t,T7[t.role]):function(t){var n=t.marktype,e="group"===n||"text"===n||t.items.some((function(t){return null!=t.description&&!1!==t.aria}));return C7(e?S7:D7,"".concat(n," mark container"),t.description)}(t)}function N7(t){return(0,g.IX)(t.text).join(" ")}function z7(t){try{return(0,g.IX)((0,g.fj)(t.items).items[0].text).join(" ")}catch(n){return null}}var U7=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},P7=function(t){return U7(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")};function R7(){var t="",n="",e="",r=[],i=function(){return n=e=""},a=function(a){n&&(t+="".concat(n,">").concat(e),i()),r.push(a)},o=function(t,e){return null!=e&&(n+=" ".concat(t,'="').concat(P7(e),'"')),u},u={open:function(t){a(t),n="<"+t;for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var c=0,s=r;c<s.length;c++){var l=s[c];for(var f in l)o(f,l[f])}return u},close:function(){var a=r.pop();return t+=n?n+(e?">".concat(e,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),u},attr:o,text:function(t){return e+=U7(t),u},toString:function(){return t}};return u}var L7=function(t){return I7(R7(),t)+""};function I7(t,n){if(t.open(n.tagName),n.hasAttributes())for(var e=n.attributes,r=e.length,i=0;i<r;++i)t.attr(e[i].name,e[i].value);if(n.hasChildNodes()){var a,o=n.childNodes,u=(0,_a.Z)(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;3===c.nodeType?t.text(c.nodeValue):I7(t,c)}}catch(s){u.e(s)}finally{u.f()}}return t.close()}var B7={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},q7={blend:"mix-blend-mode"},H7={fill:"none","stroke-miterlimit":10},W7="http://www.w3.org/2000/xmlns/",Y7=K6.xmlns;function X7(t){$4.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var G7=$4.prototype;function J7(t,n){for(;t&&t.dirty!==n;t=t.mark.group){if(t.dirty=n,!t.mark||t.mark.dirty===n)return;t.mark.dirty=n}}function $7(t,n,e){var r,i,a;if("radial"===n.gradient){var o=H4(t,e++,"pattern",Y7);i8(o,{id:B3+n.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),i8(o=H4(o,0,"rect",Y7),{width:1,height:1,fill:"url(".concat(o8(),"#").concat(n.id,")")}),i8(t=H4(t,e++,"radialGradient",Y7),{id:n.id,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})}else i8(t=H4(t,e++,"linearGradient",Y7),{id:n.id,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2});for(r=0,i=n.stops.length;r<i;++r)(a=H4(t,r,"stop",Y7)).setAttribute("offset",n.stops[r].offset),a.setAttribute("stop-color",n.stops[r].color);return W4(t,r),e}function V7(t,n,e){return(t=H4(t,e,"clipPath",Y7)).setAttribute("id",n.id),n.path?H4(t,0,"path",Y7).setAttribute("d",n.path):i8(H4(t,0,"rect",Y7),{x:0,y:0,width:n.width,height:n.height}),W4(t,1),e+1}function K7(t,n,e,r,i){var a,o=t._svg;if(!o&&(o=B4(a=n.ownerDocument,r,Y7),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var u=B4(a,"path",Y7);o.appendChild(u),u.__data__=t;var c=B4(a,"g",Y7);o.appendChild(c),c.__data__=t;var s=B4(a,"path",Y7);o.appendChild(s),s.__data__=t,s.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(t,n){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=n}(o,e))&&n.insertBefore(o,e?e.nextSibling:n.firstChild),o}(0,g.XW)(X7,$4,{initialize:function(t,n,e,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=H4(t,0,"svg",Y7),this._svg.setAttributeNS(W7,"xmlns",Y7),this._svg.setAttributeNS(W7,"xmlns:xlink",K6["xmlns:xlink"]),this._svg.setAttribute("version",K6.version),this._svg.setAttribute("class","marks"),W4(t,1),this._root=H4(this._svg,0,"g",Y7),i8(this._root,H7),W4(this._svg,1)),this.background(this._bgcolor),G7.initialize.call(this,t,n,e,r,i)},background:function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),G7.background.apply(this,arguments)},resize:function(t,n,e,r){return G7.resize.call(this,t,n,e,r),this._svg&&(i8(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var t,n=this._svg,e=this._bgcolor;if(!n)return null;e&&(n.removeAttribute("style"),i8(t=H4(n,0,"rect",Y7),{width:this._width,height:this._height,fill:e}));var r=L7(n);return e&&(n.removeChild(t),this._svg.style.setProperty("background-color",e)),r},_render:function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),W4(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty:function(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var n,e,r,i,a,o,u,c=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(e=(n=t[a]).mark).marktype!==r&&(r=e.marktype,i=Z4[r]),e.zdirty&&e.dirty!==c&&(this._dirtyAll=!1,J7(n,c),e.items.forEach((function(t){t.dirty=c}))),e.zdirty||(n.exit?(i.nested&&e.items.length?(u=e.items[0])._svg&&this._update(i,u._svg,u):n._svg&&(u=n._svg.parentNode)&&u.removeChild(n._svg),n._svg=null):(n=i.nested?e.items[0]:n)._update!==c&&(n._svg&&n._svg.ownerSVGElement?this._update(i,n._svg,n):(this._dirtyAll=!1,J7(n,c)),n._update=c));return!this._dirtyAll},mark:function(t,n,e){var r=this;if(!this.isDirty(n))return n._svg;var i=this._svg,a=Z4[n.marktype],o=!1===n.interactive?"none":null,u="g"===a.tag,c=K7(n,t,e,"g",i);c.setAttribute("class",Y4(n));var s=Z7(n);for(var l in s)a8(c,l,s[l]);u||a8(c,"pointer-events",o),a8(c,"clip-path",n.clip?P5(this,n,n.group):null);var f=null,h=0,d=function(t){var n=r.isDirty(t),e=K7(t,c,f,a.tag,i);n&&(r._update(a,e,t),u&&function(t,n,e){n=n.lastChild.previousSibling;var r,i=0;C6(e,(function(e){r=t.mark(n,e,r),++i})),W4(n,1+i)}(r,e,t)),f=e,++h};return a.nested?n.items.length&&d(n.items[0]):C6(n,d),W4(c,h),c},_update:function(t,n,e){Q7=n,t8=n.__values__,j7(e8,e),t.attr(e8,e,this);var r=n8[t.type];r&&r.call(this,t,n,e),Q7&&this.style(Q7,e)},style:function(t,n){if(null!=n){for(var e in B7){var r="font"===e?O4(n):n[e];if(r!==t8[e]){var i=B7[e];null==r?t.removeAttribute(i):(q3(r)&&(r=H3(r,this._defs.gradient,o8())),t.setAttribute(i,r+"")),t8[e]=r}}for(var a in q7)r8(t,q7[a],n[a])}},defs:function(){var t=this._svg,n=this._defs,e=n.el,r=0;for(var i in n.gradient)e||(n.el=e=H4(t,1,"defs",Y7)),r=$7(e,n.gradient[i],r);for(var a in n.clipping)e||(n.el=e=H4(t,1,"defs",Y7)),r=V7(e,n.clipping[a],r);e&&(0===r?(t.removeChild(e),n.el=null):W4(e,r))},_clearDefs:function(){var t=this._defs;t.gradient={},t.clipping={}}});var Q7=null,t8=null,n8={group:function(t,n,e){var r=Q7=n.childNodes[2];t8=r.__values__,t.foreground(e8,e,this),t8=n.__values__,Q7=n.childNodes[1],t.content(e8,e,this);var i=Q7=n.childNodes[0];t.background(e8,e,this);var a=!1===e.mark.interactive?"none":null;if(a!==t8.events&&(a8(r,"pointer-events",a),a8(i,"pointer-events",a),t8.events=a),e.strokeForeground&&e.stroke){var o=e.fill;a8(r,"display",null),this.style(i,e),a8(i,"stroke",null),o&&(e.fill=null),t8=r.__values__,this.style(r,e),o&&(e.fill=o),Q7=null}else a8(r,"display","none")},image:function(t,n,e){!1===e.smooth?(r8(n,"image-rendering","optimizeSpeed"),r8(n,"image-rendering","pixelated")):r8(n,"image-rendering",null)},text:function(t,n,e){var r,i,a,o,u=k4(e);(0,g.kJ)(u)?(r=(i=u.map((function(t){return M4(e,t)}))).join("\n"))!==t8.text&&(W4(n,0),a=n.ownerDocument,o=w4(e),i.forEach((function(t,r){var i=B4(a,"tspan",Y7);i.__data__=e,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),n.appendChild(i)})),t8.text=r):(i=M4(e,u))!==t8.text&&(n.textContent=i,t8.text=i),a8(n,"font-family",O4(e)),a8(n,"font-size",_4(e)+"px"),a8(n,"font-style",e.fontStyle),a8(n,"font-variant",e.fontVariant),a8(n,"font-weight",e.fontWeight)}};function e8(t,n,e){n!==t8[t]&&(e?function(t,n,e,r){null!=e?t.setAttributeNS(r,n,e):t.removeAttributeNS(r,n)}(Q7,t,n,e):a8(Q7,t,n),t8[t]=n)}function r8(t,n,e){e!==t8[n]&&(null==e?t.style.removeProperty(n):t.style.setProperty(n,e+""),t8[n]=e)}function i8(t,n){for(var e in n)a8(t,e,n[e])}function a8(t,n,e){null!=e?t.setAttribute(n,e):t.removeAttribute(n)}function o8(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function u8(t){$4.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}(0,g.XW)(u8,$4,{svg:function(){return this._text},_render:function(t){var n=R7();n.open("svg",(0,g.l7)({},K6,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var e=this._bgcolor;return e&&"transparent"!==e&&"none"!==e&&n.open("rect",{width:this._width,height:this._height,fill:e}).close(),n.open("g",H7,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this},mark:function(t,n){var e=this,r=Z4[n.marktype],i=r.tag,a=[j7,r.attr];t.open("g",{class:Y4(n),"clip-path":n.clip?P5(this,n,n.group):null},Z7(n),{"pointer-events":"g"!==i&&!1===n.interactive?"none":null});var o=function(o){var u=e.href(o);if(u&&t.open("a",u),t.open(i,e.attr(n,o,a,"g"!==i?i:null)),"text"===i){var c=k4(o);if((0,g.kJ)(c))for(var s={x:0,dy:w4(o)},l=0;l<c.length;++l)t.open("tspan",l?s:null).text(M4(o,c[l])).close();else t.text(M4(o,c))}else if("g"===i){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),t.open("path",e.attr(n,o,r.background,"bgrect")).close(),t.open("g",e.attr(n,o,r.content)),C6(o,(function(n){return e.mark(t,n)})),t.close(),f&&d?(h&&(o.fill=null),o.stroke=d,t.open("path",e.attr(n,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):t.open("path",e.attr(n,o,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):C6(n,o),t.close()},href:function(t){var n,e=this,r=t.href;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(e._hrefs||(e._hrefs={}))[r]=t}))}return null},attr:function(t,n,e,r){var i=this,a={},o=function(t,n,e,r){a[r||t]=n};return Array.isArray(e)?e.forEach((function(t){return t(o,n,i)})):e(o,n,this),r&&function(t,n,e,r,i){var a;if(null==n)return t;"bgrect"===r&&!1===e.interactive&&(t["pointer-events"]="none");if("bgfore"===r&&(!1===e.interactive&&(t["pointer-events"]="none"),t.display="none",null!==n.fill))return t;"image"===r&&!1===n.smooth&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(t["font-family"]=O4(n),t["font-size"]=_4(n)+"px",t["font-style"]=n.fontStyle,t["font-variant"]=n.fontVariant,t["font-weight"]=n.fontWeight);for(var o in B7){var u=n[o],c=B7[o];("transparent"!==u||"fill"!==c&&"stroke"!==c)&&null!=u&&(q3(u)&&(u=H3(u,i.gradient,"")),t[c]=u)}for(var s in q7){var l=n[s];null!=l&&(a=a||[]).push("".concat(q7[s],": ").concat(l,";"))}a&&(t.style=a.join(" "))}(a,n,t,r,this._defs),a},defs:function(t){var n=this._defs.gradient,e=this._defs.clipping;if(0!==Object.keys(n).length+Object.keys(e).length){for(var r in t.open("defs"),n){var i=n[r],a=i.stops;"radial"===i.gradient?(t.open("pattern",{id:B3+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(var o=0;o<a.length;++o)t.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();t.close()}for(var u in e){var c=e[u];t.open("clipPath",{id:u}),c.path?t.open("path",{d:c.path}).close():t.open("rect",{x:0,y:0,width:c.width,height:c.height}).close(),t.close()}t.close()}}});var c8="canvas",s8="none",l8={Canvas:c8,PNG:"png",SVG:"svg",None:s8},f8={};function h8(t,n){return t=String(t||"").toLowerCase(),arguments.length>1?(f8[t]=n,this):f8[t]}f8[c8]=f8.png={renderer:b7,headless:b7,handler:d7},f8.svg={renderer:X7,headless:u8,handler:_7},f8[s8]={};new R5;var d8,p8,v8,g8,m8,y8,b8,x8,_8,w8,k8,M8,O8,E8,S8,D8,C8=e(12516),A8=new z$,T8=new z$,F8={point:U$,lineStart:U$,lineEnd:U$,polygonStart:function(){A8=new z$,F8.lineStart=j8,F8.lineEnd=Z8},polygonEnd:function(){var t=+A8;T8.add(t<0?TS+t:t),this.lineStart=this.lineEnd=this.point=U$},sphere:function(){T8.add(TS)}};function j8(){F8.point=N8}function Z8(){z8(d8,p8)}function N8(t,n){F8.point=z8,d8=t,p8=n,v8=t*=jS,g8=US(n=(n*=jS)/2+AS),m8=qS(n)}function z8(t,n){var e=(t*=jS)-v8,r=e>=0?1:-1,i=r*e,a=US(n=(n*=jS)/2+AS),o=qS(n),u=m8*o,c=g8*a+u*US(i),s=u*r*qS(i);A8.add(zS(s,c)),v8=t,g8=a,m8=o}var U8,P8,R8,L8,I8,B8,q8,H8,W8,Y8,X8,G8,J8,$8,V8,K8,Q8={point:t9,lineStart:e9,lineEnd:r9,polygonStart:function(){Q8.point=i9,Q8.lineStart=a9,Q8.lineEnd=o9,E8=new z$,F8.polygonStart()},polygonEnd:function(){F8.polygonEnd(),Q8.point=t9,Q8.lineStart=e9,Q8.lineEnd=r9,A8<0?(y8=-(x8=180),b8=-(_8=90)):E8>ES?_8=90:E8<-ES&&(b8=-90),D8[0]=y8,D8[1]=x8},sphere:function(){y8=-(x8=180),b8=-(_8=90)}};function t9(t,n){S8.push(D8=[y8=t,x8=t]),n<b8&&(b8=n),n>_8&&(_8=n)}function n9(t,n){var e=tK([t*jS,n*jS]);if(O8){var r=eK(O8,e),i=eK([r[1],-r[0],0],r);aK(i),i=QV(i);var a,o=t-w8,u=o>0?1:-1,c=i[0]*FS*u,s=ZS(o)>180;s^(u*w8<c&&c<u*t)?(a=i[1]*FS)>_8&&(_8=a):s^(u*w8<(c=(c+360)%360-180)&&c<u*t)?(a=-i[1]*FS)<b8&&(b8=a):(n<b8&&(b8=n),n>_8&&(_8=n)),s?t<w8?u9(y8,t)>u9(y8,x8)&&(x8=t):u9(t,x8)>u9(y8,x8)&&(y8=t):x8>=y8?(t<y8&&(y8=t),t>x8&&(x8=t)):t>w8?u9(y8,t)>u9(y8,x8)&&(x8=t):u9(t,x8)>u9(y8,x8)&&(y8=t)}else S8.push(D8=[y8=t,x8=t]);n<b8&&(b8=n),n>_8&&(_8=n),O8=e,w8=t}function e9(){Q8.point=n9}function r9(){D8[0]=y8,D8[1]=x8,Q8.point=t9,O8=null}function i9(t,n){if(O8){var e=t-w8;E8.add(ZS(e)>180?e+(e>0?360:-360):e)}else k8=t,M8=n;F8.point(t,n),n9(t,n)}function a9(){F8.lineStart()}function o9(){i9(k8,M8),F8.lineEnd(),ZS(E8)>ES&&(y8=-(x8=180)),D8[0]=y8,D8[1]=x8,O8=null}function u9(t,n){return(n-=t)<0?n+360:n}function c9(t,n){return t[0]-n[0]}function s9(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var l9={sphere:U$,point:f9,lineStart:d9,lineEnd:g9,polygonStart:function(){l9.lineStart=m9,l9.lineEnd=y9},polygonEnd:function(){l9.lineStart=d9,l9.lineEnd=g9}};function f9(t,n){t*=jS;var e=US(n*=jS);h9(e*US(t),e*qS(t),qS(n))}function h9(t,n,e){++U8,R8+=(t-R8)/U8,L8+=(n-L8)/U8,I8+=(e-I8)/U8}function d9(){l9.point=p9}function p9(t,n){t*=jS;var e=US(n*=jS);$8=e*US(t),V8=e*qS(t),K8=qS(n),l9.point=v9,h9($8,V8,K8)}function v9(t,n){t*=jS;var e=US(n*=jS),r=e*US(t),i=e*qS(t),a=qS(n),o=zS(WS((o=V8*a-K8*i)*o+(o=K8*r-$8*a)*o+(o=$8*i-V8*r)*o),$8*r+V8*i+K8*a);P8+=o,B8+=o*($8+($8=r)),q8+=o*(V8+(V8=i)),H8+=o*(K8+(K8=a)),h9($8,V8,K8)}function g9(){l9.point=f9}function m9(){l9.point=b9}function y9(){x9(G8,J8),l9.point=f9}function b9(t,n){G8=t,J8=n,t*=jS,n*=jS,l9.point=x9;var e=US(n);$8=e*US(t),V8=e*qS(t),K8=qS(n),h9($8,V8,K8)}function x9(t,n){t*=jS;var e=US(n*=jS),r=e*US(t),i=e*qS(t),a=qS(n),o=V8*a-K8*i,u=K8*r-$8*a,c=$8*i-V8*r,s=LS(o,u,c),l=GS(s),f=s&&-l/s;W8.add(f*o),Y8.add(f*u),X8.add(f*c),P8+=l,B8+=l*($8+($8=r)),q8+=l*(V8+(V8=i)),H8+=l*(K8+(K8=a)),h9($8,V8,K8)}var _9=new Date,w9=new Date;function k9(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,a){var o,u=[];if(e=i.ceil(e),a=null==a?1:Math.floor(a),!(e<r)||!(a>0))return u;do{u.push(o=new Date(+e)),n(e,a),t(e)}while(o<e&&e<r);return u},i.filter=function(e){return k9((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return _9.setTime(+n),w9.setTime(+r),t(_9),t(w9),Math.floor(e(_9,w9))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t===0}:function(n){return i.count(0,n)%t===0}):i:null}),i}var M9=1e3,O9=6e4,E9=60*O9,S9=24*E9,D9=7*S9,C9=k9((function(t){return t.setHours(0,0,0,0)}),(function(t,n){return t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*O9)/S9}),(function(t){return t.getDate()-1})),A9=(C9.range,k9((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/S9}),(function(t){return t.getUTCDate()-1}))),T9=(A9.range,k9((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/S9}),(function(t){return Math.floor(t/S9)})));T9.range;function F9(t){return k9((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*O9)/D9}))}var j9=F9(0),Z9=F9(1),N9=F9(2),z9=F9(3),U9=F9(4),P9=F9(5),R9=F9(6);j9.range,Z9.range,N9.range,z9.range,U9.range,P9.range,R9.range;function L9(t){return k9((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/D9}))}var I9=L9(0),B9=L9(1),q9=L9(2),H9=L9(3),W9=L9(4),Y9=L9(5),X9=L9(6),G9=(I9.range,B9.range,q9.range,H9.range,W9.range,Y9.range,X9.range,k9((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));G9.every=function(t){return isFinite(t=Math.floor(t))&&t>0?k9((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};G9.range;var J9=k9((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));J9.every=function(t){return isFinite(t=Math.floor(t))&&t>0?k9((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};J9.range;var $9=k9((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),V9=($9.range,k9((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),K9=(V9.range,k9((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*M9-t.getMinutes()*O9)}),(function(t,n){t.setTime(+t+n*E9)}),(function(t,n){return(n-t)/E9}),(function(t){return t.getHours()}))),Q9=(K9.range,k9((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*E9)}),(function(t,n){return(n-t)/E9}),(function(t){return t.getUTCHours()}))),ttt=(Q9.range,k9((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*M9)}),(function(t,n){t.setTime(+t+n*O9)}),(function(t,n){return(n-t)/O9}),(function(t){return t.getMinutes()}))),ntt=(ttt.range,k9((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*O9)}),(function(t,n){return(n-t)/O9}),(function(t){return t.getUTCMinutes()}))),ett=(ntt.range,k9((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*M9)}),(function(t,n){return(n-t)/M9}),(function(t){return t.getUTCSeconds()}))),rtt=(ett.range,k9((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t})));rtt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?k9((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):rtt:null};rtt.range;var itt,att,ott,utt,ctt,stt,ltt,ftt="year",htt="quarter",dtt="month",ptt="week",vtt="date",gtt="day",mtt="dayofyear",ytt="hours",btt="minutes",xtt="seconds",_tt="milliseconds",wtt=[ftt,htt,dtt,ptt,vtt,gtt,mtt,ytt,btt,xtt,_tt].reduce((function(t,n,e){return t[n]=1+e,t}),{});var ktt=(itt={},(0,nt.Z)(itt,ftt,"%Y "),(0,nt.Z)(itt,htt,"Q%q "),(0,nt.Z)(itt,dtt,"%b "),(0,nt.Z)(itt,vtt,"%d "),(0,nt.Z)(itt,ptt,"W%U "),(0,nt.Z)(itt,gtt,"%a "),(0,nt.Z)(itt,mtt,"%j "),(0,nt.Z)(itt,ytt,"%H:00"),(0,nt.Z)(itt,btt,"00:%M"),(0,nt.Z)(itt,xtt,":%S"),(0,nt.Z)(itt,_tt,".%L"),(0,nt.Z)(itt,"".concat(ftt,"-").concat(dtt),"%Y-%m "),(0,nt.Z)(itt,"".concat(ftt,"-").concat(dtt,"-").concat(vtt),"%Y-%m-%d "),(0,nt.Z)(itt,"".concat(ytt,"-").concat(btt),"%H:%M"),itt);var Mtt=new Date;function Ott(t){return Mtt.setFullYear(t),Mtt.setMonth(0),Mtt.setDate(1),Mtt.setHours(0,0,0,0),Mtt}function Ett(t){return C9.count(Ott(t.getFullYear())-1,t)}function Stt(t){return j9.count(Ott(t.getFullYear())-1,t)}function Dtt(t){return Ott(t).getDay()}function Ctt(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return A9.count(n-1,t)}function Att(t){var n=Date.UTC(t.getUTCFullYear(),0,1);return I9.count(n-1,t)}function Ttt(t){return Mtt.setTime(Date.UTC(t,0,1)),Mtt.getUTCDay()}function Ftt(t,n,e){return n+7*t-(e+6)%7}att={},(0,nt.Z)(att,ftt,(function(t){return t.getFullYear()})),(0,nt.Z)(att,htt,(function(t){return Math.floor(t.getMonth()/3)})),(0,nt.Z)(att,dtt,(function(t){return t.getMonth()})),(0,nt.Z)(att,vtt,(function(t){return t.getDate()})),(0,nt.Z)(att,ytt,(function(t){return t.getHours()})),(0,nt.Z)(att,btt,(function(t){return t.getMinutes()})),(0,nt.Z)(att,xtt,(function(t){return t.getSeconds()})),(0,nt.Z)(att,_tt,(function(t){return t.getMilliseconds()})),(0,nt.Z)(att,mtt,(function(t){return Ett(t)})),(0,nt.Z)(att,ptt,(function(t){return Stt(t)})),(0,nt.Z)(att,ptt+gtt,(function(t,n){return Ftt(Stt(t),t.getDay(),Dtt(n))})),(0,nt.Z)(att,gtt,(function(t,n){return Ftt(1,t.getDay(),Dtt(n))})),ott={},(0,nt.Z)(ott,htt,(function(t){return 3*t})),(0,nt.Z)(ott,ptt,(function(t,n){return Ftt(t,0,Dtt(n))}));utt={},(0,nt.Z)(utt,ftt,(function(t){return t.getUTCFullYear()})),(0,nt.Z)(utt,htt,(function(t){return Math.floor(t.getUTCMonth()/3)})),(0,nt.Z)(utt,dtt,(function(t){return t.getUTCMonth()})),(0,nt.Z)(utt,vtt,(function(t){return t.getUTCDate()})),(0,nt.Z)(utt,ytt,(function(t){return t.getUTCHours()})),(0,nt.Z)(utt,btt,(function(t){return t.getUTCMinutes()})),(0,nt.Z)(utt,xtt,(function(t){return t.getUTCSeconds()})),(0,nt.Z)(utt,_tt,(function(t){return t.getUTCMilliseconds()})),(0,nt.Z)(utt,mtt,(function(t){return Ctt(t)})),(0,nt.Z)(utt,ptt,(function(t){return Att(t)})),(0,nt.Z)(utt,gtt,(function(t,n){return Ftt(1,t.getUTCDay(),Ttt(n))})),(0,nt.Z)(utt,ptt+gtt,(function(t,n){return Ftt(Att(t),t.getUTCDay(),Ttt(n))})),ctt={},(0,nt.Z)(ctt,htt,(function(t){return 3*t})),(0,nt.Z)(ctt,ptt,(function(t,n){return Ftt(t,0,Ttt(n))}));var jtt=(stt={},(0,nt.Z)(stt,ftt,G9),(0,nt.Z)(stt,htt,$9.every(3)),(0,nt.Z)(stt,dtt,$9),(0,nt.Z)(stt,ptt,j9),(0,nt.Z)(stt,vtt,C9),(0,nt.Z)(stt,gtt,C9),(0,nt.Z)(stt,mtt,C9),(0,nt.Z)(stt,ytt,K9),(0,nt.Z)(stt,btt,ttt),(0,nt.Z)(stt,xtt,ett),(0,nt.Z)(stt,_tt,rtt),stt),Ztt=(ltt={},(0,nt.Z)(ltt,ftt,J9),(0,nt.Z)(ltt,htt,V9.every(3)),(0,nt.Z)(ltt,dtt,V9),(0,nt.Z)(ltt,ptt,I9),(0,nt.Z)(ltt,vtt,A9),(0,nt.Z)(ltt,gtt,A9),(0,nt.Z)(ltt,mtt,A9),(0,nt.Z)(ltt,ytt,Q9),(0,nt.Z)(ltt,btt,ntt),(0,nt.Z)(ltt,xtt,ett),(0,nt.Z)(ltt,_tt,rtt),ltt);function Ntt(t){return jtt[t]}function ztt(t){return Ztt[t]}function Utt(t,n,e){return t?t.offset(n,e):void 0}function Ptt(t,n,e,r){return t?t.range(n,e,r):void 0}var Rtt,Ltt,Itt=[ftt,dtt,vtt,ytt,btt,xtt,_tt],Btt=Itt.slice(0,-1),qtt=Btt.slice(0,-1),Htt=qtt.slice(0,-1);Htt.slice(0,-1);function Wtt(t,n,e){var r=t-n+2*e;return t?r>0?r:1:0}var Ytt="linear",Xtt="log",Gtt="pow",Jtt="sqrt",$tt="symlog",Vtt="time",Ktt="utc",Qtt="sequential",tnt="diverging",nnt="quantile",ent="quantize",rnt="threshold",int="continuous",ant="discrete",ont="discretizing",unt="interpolating",cnt="temporal";function snt(){var t,n,e=Lq().unknown(void 0),r=e.domain,i=e.range,a=[0,1],o=!1,u=0,c=0,s=.5;function l(){var e=r().length,l=a[1]<a[0],f=a[1-l],h=Wtt(e,u,c),d=a[l-0];t=(f-d)/(h||1),o&&(t=Math.floor(t)),d+=(f-d-t*(e-u))*s,n=t*(1-u),o&&(d=Math.round(d),n=Math.round(n));var p=Qa(e).map((function(n){return d+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},e.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(o=!!t,l()):o},e.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u=c,l()):u},e.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},e.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,o,u,c=a[1]<a[0],s=c?i().reverse():i(),l=s.length-1,f=+t[0],h=+t[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<s[0]||f>a[1-c])))return e=Math.max(0,uF(s,f)-1),o=f===h?e:uF(s,h)-1,f-s[e]>n+1e-10&&++e,c&&(u=e,e=l-o,o=l-u),e>o?void 0:r().slice(e,o+1)}},e.invert=function(t){var n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return snt().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(c).align(s)},l()}function lnt(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return lnt(n())},t}var fnt=Array.prototype.map;var hnt=Array.prototype.slice;var dnt={};function pnt(t,n,e){return arguments.length>1?(dnt[t]=function(t,n,e){var r=function(){var e=n();return e.invertRange||(e.invertRange=e.invert?function(t){return function(n){var e,r=n[0],i=n[1];return i<r&&(e=r,r=i,i=e),[t.invert(r),t.invert(i)]}}(e):e.invertExtent?function(t){return function(n){var e,r,i,a,o=t.range(),u=n[0],c=n[1],s=-1;for(c<u&&(r=u,u=c,c=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=c&&(s<0&&(s=i),e=i);if(!(s<0))return u=t.invertExtent(o[s]),c=t.invertExtent(o[e]),[void 0===u[0]?u[1]:u[0],void 0===c[1]?c[0]:c[1]]}}(e):void 0),e.type=t,e};return r.metadata=(0,g.Rg)((0,g.IX)(e)),r}(t,n,e),this):function(t){return(0,g.nr)(dnt,t)}(t)?dnt[t]:void 0}pnt("identity",kL),pnt(Ytt,wL,int),pnt(Xtt,FL,[int,Xtt]),pnt(Gtt,UL,int),pnt(Jtt,PL,int),pnt($tt,BL,int),pnt(Vtt,sq,[int,cnt]),pnt(Ktt,lq,[int,cnt]),pnt(Qtt,dq,[int,unt]),pnt("".concat(Qtt,"-").concat(Ytt),dq,[int,unt]),pnt("".concat(Qtt,"-").concat(Xtt),pq,[int,unt,Xtt]),pnt("".concat(Qtt,"-").concat(Gtt),gq,[int,unt]),pnt("".concat(Qtt,"-").concat(Jtt),mq,[int,unt]),pnt("".concat(Qtt,"-").concat($tt),vq,[int,unt]),pnt("".concat(tnt,"-").concat(Ytt),xq,[int,unt]),pnt("".concat(tnt,"-").concat(Xtt),_q,[int,unt,Xtt]),pnt("".concat(tnt,"-").concat(Gtt),kq,[int,unt]),pnt("".concat(tnt,"-").concat(Jtt),Mq,[int,unt]),pnt("".concat(tnt,"-").concat($tt),wq,[int,unt]),pnt(nnt,Oq,[ont,nnt]),pnt(ent,Eq,ont),pnt(rnt,Sq,ont),pnt("bin-ordinal",(function t(){var n=[],e=[];function r(t){return null==t||t!==t?void 0:e[(sF(n,t)-1)%e.length]}return r.domain=function(t){return arguments.length?(n=function(t){return fnt.call(t,g.He)}(t),r):n.slice()},r.range=function(t){return arguments.length?(e=hnt.call(t),r):e.slice()},r.tickFormat=function(t,e){return xL(n[0],(0,g.fj)(n),null==t?10:t,e)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),[ant,ont]),pnt("ordinal",Lq,ant),pnt("band",snt,ant),pnt("point",(function(){return lnt(snt().paddingInner(1))}),ant);var vnt=["clamp","base","constant","exponent"];function gnt(t,n,e){return yq(function(t,n){var e=v[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=n&&e&&e.gamma?e.gamma(n):e}(n||"rgb",e),t)}function mnt(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}function ynt(t,n){for(var e in t)xnt(e,n(t[e]))}var bnt={};function xnt(t,n){return t=t&&t.toLowerCase(),arguments.length>1?(bnt[t]=n,this):bnt[t]}ynt({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},mnt),ynt({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return gnt(mnt(t))}));Rtt={},(0,nt.Z)(Rtt,nnt,"quantiles"),(0,nt.Z)(Rtt,ent,"thresholds"),(0,nt.Z)(Rtt,rnt,"domain"),Ltt={},(0,nt.Z)(Ltt,nnt,"quantiles"),(0,nt.Z)(Ltt,ent,"domain");var _nt="intersect",wnt="union",knt="vlMulti",Mnt="vlPoint",Ont="or",Ent="and",Snt="E",Dnt="R",Cnt="R-E",Ant="R-LE",Tnt="R-RE",Fnt="index:unit";function jnt(t,n){for(var e,r,i=n.fields,a=n.values,o=i.length,u=0;u<o;++u)if((r=i[u]).getter=g.EP.getter||(0,g.EP)(r.field),e=r.getter(t),(0,g.J_)(e)&&(e=(0,g.He)(e)),(0,g.J_)(a[u])&&(a[u]=(0,g.He)(a[u])),(0,g.J_)(a[u][0])&&(a[u]=a[u].map(g.He)),r.type===Snt){if((0,g.kJ)(a[u])?a[u].indexOf(e)<0:e!==a[u])return!1}else if(r.type===Dnt){if(!(0,g.u5)(e,a[u]))return!1}else if(r.type===Tnt){if(!(0,g.u5)(e,a[u],!0,!1))return!1}else if(r.type===Cnt){if(!(0,g.u5)(e,a[u],!1,!1))return!1}else if(r.type===Ant&&!(0,g.u5)(e,a[u],!1,!0))return!1;return!0}function Znt(t,n,e){for(var r,i,a,o,u,c=this.context.data[t],s=c?c.values.value:[],l=c?c[Fnt]&&c[Fnt].value:void 0,f=e===_nt,h=s.length,d=0;d<h;++d)if(r=s[d],l&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(u=jnt(n,r),i[o]=u?-1:++a,u&&1===l.size)return!0;if(!u&&a===l.get(o).count)return!1}else if(f^(u=jnt(n,r)))return u;return h&&f}var Nnt=(0,g.EP)("_vgsid_"),znt=function(t){var n=t,e=t;function r(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}return 1===t.length&&(n=function(n,e){return t(n)-e},e=function(t){return function(n,e){return function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}(t(n),e)}}(t)),{left:r,center:function(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);var o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}(Nnt),Unt=znt.left,Pnt=znt.right;function Rnt(t,n,e){var r=this.context.data[t],i=r?r.values.value:[],a=r?r[Fnt]&&r[Fnt].value:void 0,o=e===_nt,u=Nnt(n),c=Unt(i,u);if(c===i.length)return!1;if(Nnt(i[c])!==u)return!1;if(a&&o){if(1===a.size)return!0;if(Pnt(i,u)-c<a.size)return!1}return!0}function Lnt(t,n){return t.map((function(t){return(0,g.l7)({values:n.fields.map((function(n){return(n.getter||(n.getter=(0,g.EP)(n.field)))(t.datum)}))},n)}))}function Int(t,n,e,r){for(var i,a,o,u,c,s,l,f,h,d,p,v=this.context.data[t],m=v?v.values.value:[],y={},x={},_={},w=m.length,k=0;k<w;++k){for(u=(i=m[k]).unit,a=i.fields,o=i.values,d=0,p=a.length;d<p;++d)c=a[d],l=(s=y[c.field]||(y[c.field]={}))[u]||(s[u]=[]),_[c.field]=f=c.type.charAt(0),h=Bnt[f+"_union"],s[u]=h(l,(0,g.IX)(o[d]));e&&(l=x[u]||(x[u]=[])).push((0,g.IX)(o).reduce((function(t,n,e){return t[a[e].field]=n,t}),{}))}(n=n||wnt,Object.keys(y).forEach((function(t){y[t]=Object.keys(y[t]).map((function(n){return y[t][n]})).reduce((function(e,r){return void 0===e?r:Bnt[_[t]+"_"+n](e,r)}))})),m=Object.keys(x),e&&m.length)&&(y[r?Mnt:knt]=n===wnt?(0,nt.Z)({},Ont,m.reduce((function(t,n){return t.push.apply(t,(0,b.Z)(x[n])),t}),[])):(0,nt.Z)({},Ent,m.map((function(t){return(0,nt.Z)({},Ont,x[t])}))));return y}var Bnt={E_union:function(t,n){if(!t.length)return n;for(var e=0,r=n.length;e<r;++e)t.indexOf(n[e])<0&&t.push(n[e]);return t},E_intersect:function(t,n){return t.length?t.filter((function(t){return n.indexOf(t)>=0})):n},R_union:function(t,n){var e=(0,g.He)(n[0]),r=(0,g.He)(n[1]);return e>r&&(e=n[1],r=n[0]),t.length?(t[0]>e&&(t[0]=e),t[1]<r&&(t[1]=r),t):[e,r]},R_intersect:function(t,n){var e=(0,g.He)(n[0]),r=(0,g.He)(n[1]);return e>r&&(e=n[1],r=n[0]),t.length?r<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>r&&(t[1]=r),t):[e,r]}},qnt=":",Hnt="@";function Wnt(t,n,e,r){n[0].type!==C8.t$&&(0,g.vU)("First argument to selection functions must be a string literal.");var i=n[0].value,a=n.length>=2&&(0,g.fj)(n).value,o="unit",u=Hnt+o,c=qnt+i;a!==_nt||(0,g.nr)(r,u)||(r[u]=e.getData(i).indataRef(e,o)),(0,g.nr)(r,c)||(r[c]=e.getData(i).tuplesRef())}function Ynt(t){var n=this.context.data[t];return n?n.values.value:[]}var Xnt=function(t){return function(n,e){return this.context.dataflow.locale()[t](e)(n)}},Gnt=Xnt("format"),Jnt=Xnt("timeFormat"),$nt=Xnt("utcFormat"),Vnt=Xnt("timeParse"),Knt=Xnt("utcParse"),Qnt=new Date(2e3,0,1);function tet(t,n,e){return Number.isInteger(t)&&Number.isInteger(n)?(Qnt.setYear(2e3),Qnt.setMonth(t),Qnt.setDate(n),Jnt.call(this,Qnt,e)):""}var net=":",eet="@",ret="%",iet="$";function aet(t,n,e,r){n[0].type!==C8.t$&&(0,g.vU)("First argument to data functions must be a string literal.");var i=n[0].value,a=net+i;if(!(0,g.nr)(a,r))try{r[a]=e.getData(i).tuplesRef()}catch(o){}}function oet(t,n,e,r){if(n[0].type===C8.t$)uet(e,r,n[0].value);else for(t in e.scales)uet(e,r,t)}function uet(t,n,e){var r=ret+e;if(!(0,g.nr)(n,r))try{n[r]=t.scaleRef(e)}catch(i){}}function cet(t,n){var e;return(0,g.mf)(t)?t:(0,g.HD)(t)?(e=n.scales[t])&&e.value:void 0}function set(t,n,e){n.__bandwidth=function(t){return t&&t.bandwidth?t.bandwidth():0},e._bandwidth=oet,e._range=oet,e._scale=oet;var r=function(n){return"_["+(n.type===C8.t$?(0,g.m8)(ret+n.value):(0,g.m8)(ret)+"+"+t(n))+"]"};return{_bandwidth:function(t){return"this.__bandwidth(".concat(r(t[0]),")")},_range:function(t){return"".concat(r(t[0]),".range()")},_scale:function(n){return"".concat(r(n[0]),"(").concat(t(n[1]),")")}}}function fet(t,n){return function(e,r,i){if(e){var a=cet(e,(i||this).context);return a&&a.path[t](r)}return n(r)}}var het=fet("area",(function(t){return T8=new z$,N$(t,F8),2*T8})),det=fet("bounds",(function(t){var n,e,r,i,a,o,u;if(_8=x8=-(y8=b8=1/0),S8=[],N$(t,Q8),e=S8.length){for(S8.sort(c9),n=1,a=[r=S8[0]];n<e;++n)s9(r,(i=S8[n])[0])||s9(r,i[1])?(u9(r[0],i[1])>u9(r[0],r[1])&&(r[1]=i[1]),u9(i[0],r[1])>u9(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=0,r=a[e=a.length-1];n<=e;r=i,++n)i=a[n],(u=u9(r[1],i[0]))>o&&(o=u,y8=i[0],x8=r[1])}return S8=D8=null,y8===1/0||b8===1/0?[[NaN,NaN],[NaN,NaN]]:[[y8,b8],[x8,_8]]})),pet=fet("centroid",(function(t){U8=P8=R8=L8=I8=B8=q8=H8=0,W8=new z$,Y8=new z$,X8=new z$,N$(t,l9);var n=+W8,e=+Y8,r=+X8,i=LS(n,e,r);return i<SS&&(n=B8,e=q8,r=H8,P8<ES&&(n=R8,e=L8,r=I8),(i=LS(n,e,r))<SS)?[NaN,NaN]:[zS(e,n)*FS,GS(r/i)*FS]}));function vet(t,n,e){try{t[n].apply(t,["EXPRESSION"].concat([].slice.call(e)))}catch(r){t.warn(r)}return e[e.length-1]}function get(t){var n=t/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}function met(t){var n=(0,m_.B8)(t);return.2126*get(n.r)+.7152*get(n.g)+.0722*get(n.b)}function yet(t,n){return t===n||t!==t&&n!==n||((0,g.kJ)(t)?!(!(0,g.kJ)(n)||t.length!==n.length)&&function(t,n){for(var e=0,r=t.length;e<r;++e)if(!yet(t[e],n[e]))return!1;return!0}(t,n):!(!(0,g.Kn)(t)||!(0,g.Kn)(n))&&bet(t,n))}function bet(t,n){for(var e in t)if(!yet(t[e],n[e]))return!1;return!0}function xet(t){return function(n){return bet(t,n)}}var _et={};function wet(t){return(0,g.kJ)(t)||ArrayBuffer.isView(t)?t:null}function ket(t){return wet(t)||((0,g.HD)(t)?t:null)}var Met=function(t){return t.data};function Oet(t,n){var e=Ynt.call(n,t);return e.root&&e.root.lookup||{}}var Eet=function(){return"undefined"!==typeof window&&window||null};function Det(t,n,e){if(!t)return[];var r=(0,Go.Z)(t,2),i=r[0],a=r[1],o=(new Sg).set(i[0],i[1],a[0],a[1]);return Yb(e||this.context.dataflow.scenegraph().root,o,function(t){var n=null;if(t){var e=(0,g.IX)(t.marktype),r=(0,g.IX)(t.markname);n=function(t){return(!e.length||e.some((function(n){return t.marktype===n})))&&(!r.length||r.some((function(n){return t.name===n})))}}return n}(n))}var Cet={random:function(){return _w()},cumulativeNormal:Sw,cumulativeLogNormal:Tw,cumulativeUniform:Nw,densityNormal:Ew,densityLogNormal:Aw,densityUniform:Zw,quantileNormal:Dw,quantileLogNormal:Fw,quantileUniform:zw,sampleNormal:Ow,sampleLogNormal:Cw,sampleUniform:jw,isArray:g.kJ,isBoolean:g.jn,isDate:g.J_,isDefined:function(t){return void 0!==t},isNumber:g.hj,isObject:g.Kn,isRegExp:g.Kj,isString:g.HD,isTuple:Fi,isValid:function(t){return null!=t&&t===t},toBoolean:g.sw,toDate:function(t){return(0,g.ZU)(t)},toNumber:g.He,toString:g.BB,indexof:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=ket(t)).indexOf.apply(n,r)},join:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=wet(t)).join.apply(n,r)},lastindexof:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=ket(t)).lastIndexOf.apply(n,r)},replace:function(t,n,e){return(0,g.mf)(e)&&(0,g.vU)("Function argument passed to replace."),String(t).replace(n,e)},reverse:function(t){return wet(t).slice().reverse()},slice:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=ket(t)).slice.apply(n,r)},flush:g.yl,lerp:g.t7,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),g.l7.apply(void 0,(0,b.Z)(t))},pad:g.vk,peek:g.fj,pluck:function(t,n){var e=_et[n]||(_et[n]=(0,g.EP)(n));return(0,g.kJ)(t)?t.map(e):e(t)},span:g.yP,inrange:g.u5,truncate:g.$G,rgb:m_.B8,lab:lH,hcl:mH,hsl:m_.Ym,luminance:met,contrast:function(t,n){var e=met(t),r=met(n);return(Math.max(e,r)+.05)/(Math.min(e,r)+.05)},sequence:Qa,format:Gnt,utcFormat:$nt,utcParse:Knt,utcOffset:function(t,n,e){return Utt(ztt(t),n,e)},utcSequence:function(t,n,e,r){return Ptt(ztt(t),n,e,r)},timeFormat:Jnt,timeParse:Vnt,timeOffset:function(t,n,e){return Utt(Ntt(t),n,e)},timeSequence:function(t,n,e,r){return Ptt(Ntt(t),n,e,r)},timeUnitSpecifier:function(t,n){var e,r,i=(0,g.l7)({},ktt,n),a=function(t){var n=(0,g.IX)(t).slice(),e={};return n.length||(0,g.vU)("Missing time unit."),n.forEach((function(t){(0,g.nr)(wtt,t)?e[t]=1:(0,g.vU)("Invalid time unit: ".concat(t,"."))})),(e[ptt]||e[gtt]?1:0)+(e[htt]||e[dtt]||e[vtt]?1:0)+(e[mtt]?1:0)>1&&(0,g.vU)("Incompatible time units: ".concat(t)),n.sort((function(t,n){return wtt[t]-wtt[n]})),n}(t),o=a.length,u="",c=0;for(c=0;c<o;)for(e=a.length;e>c;--e)if(null!=i[r=a.slice(c,e).join("-")]){u+=i[r],c=e;break}return u.trim()},monthFormat:function(t){return tet.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return tet.call(this,t,1,"%b")},dayFormat:function(t){return tet.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return tet.call(this,0,2+t,"%a")},quarter:g.mS,utcquarter:g.N3,week:function(t){return Stt(new Date(t))},utcweek:function(t){return Att(new Date(t))},dayofyear:function(t){return Ett(new Date(t))},utcdayofyear:function(t){return Ctt(new Date(t))},warn:function(){return vet(this.context.dataflow,"warn",arguments)},info:function(){return vet(this.context.dataflow,"info",arguments)},debug:function(){return vet(this.context.dataflow,"debug",arguments)},extent:function(t){return(0,g.We)(t)},inScope:function(t){var n=this.context.group,e=!1;if(n)for(;t;){if(t===n){e=!0;break}t=t.mark.group}return e},intersect:Det,clampRange:g.l$,pinchDistance:function(t){var n=t.touches,e=n[0].clientX-n[1].clientX,r=n[0].clientY-n[1].clientY;return Math.sqrt(e*e+r*r)},pinchAngle:function(t){var n=t.touches;return Math.atan2(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function(){var t=Eet();return t?t.screen:{}},containerSize:function(){var t=this.context.dataflow,n=t.container&&t.container();return n?[n.clientWidth,n.clientHeight]:[void 0,void 0]},windowSize:function(){var t=Eet();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,n,e){return Wtt(t||0,n||0,e||0)},setdata:function(t,n){var e=this.context.dataflow,r=this.context.data[t].input;return e.pulse(r,e.changeset().remove(g.yb).insert(n)),1},pathShape:function(t){var n=null;return function(e){return e?Qv(e,n=n||Iv(t)):t}},panLinear:g.Dw,panLog:g.mJ,panPow:g.QA,panSymlog:g.Zw,zoomLinear:g.ay,zoomLog:g.dH,zoomPow:g.mK,zoomSymlog:g.bV,encode:function(t,n,e){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,n))}return void 0!==e?e:t},modify:function(t,n,e,r,i,a){var o,u,c=this.context.dataflow,s=this.context.data[t],l=s.input,f=c.stamp(),h=s.changes;if(!1===c._trigger||!(l.value.length||n||r))return 0;if((!h||h.stamp<f)&&(s.changes=h=c.changeset(),h.stamp=f,c.runAfter((function(){s.modified=!0,c.pulse(l,h).run()}),!0,1)),e&&(o=!0===e?g.yb:(0,g.kJ)(e)||Fi(e)?e:xet(e),h.remove(o)),n&&h.insert(n),r&&(o=xet(r),l.value.some(o)?h.remove(o):h.insert(r)),i)for(u in a)h.modify(i,u,a[u]);return 1},lassoAppend:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=t[t.length-1];return void 0===i||Math.sqrt(Math.pow(i[0]-n,2)+Math.pow(i[1]-e,2))>r?(t.push([n,e]),(0,b.Z)(t)):t},lassoPath:function(t){return(null!==t&&void 0!==t?t:[]).reduce((function(n,e,r){var i=(0,Go.Z)(e,2),a=i[0],o=i[1];return n+(0==r?"M ".concat(a,",").concat(o," "):r===t.length-1?" Z":"L ".concat(a,",").concat(o," "))}),"")},intersectLasso:function(t,n,e){var r,i=e.x,a=e.y,o=e.mark,u=(new Sg).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),c=(0,_a.Z)(n);try{for(c.s();!(r=c.n()).done;){var s=(0,Go.Z)(r.value,2),l=s[0],f=s[1];l<u.x1&&(u.x1=l),l>u.x2&&(u.x2=l),f<u.y1&&(u.y1=f),f>u.y2&&(u.y2=f)}}catch(h){c.e(h)}finally{c.f()}return u.translate(i,a),Det([[u.x1,u.y1],[u.x2,u.y2]],t,o).filter((function(t){return function(t,n,e){for(var r=0,i=0,a=e.length-1;i<e.length;a=i++){var o=(0,Go.Z)(e[a],2),u=o[0],c=o[1],s=(0,Go.Z)(e[i],2),l=s[0],f=s[1];f>n!=c>n&&t<(u-l)*(n-f)/(c-f)+l&&r++}return 1&r}(t.x,t.y,n)}))}},Aet=["view","item","group","xy","x","y"],Tet="event.vega.",Fet="this.",jet={},Zet={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_[".concat((0,g.m8)(iet+t),"]")},functions:function(t){var n=(0,C8.wk)(t);for(var e in Aet.forEach((function(t){return n[t]=Tet+t})),Cet)n[e]=Fet+e;return(0,g.l7)(n,set(t,Cet,jet)),n},constants:C8._G,visitors:jet},Net=(0,C8.YP)(Zet);function zet(t,n,e){return 1===arguments.length?Cet[t]:(Cet[t]=n,e&&(jet[t]=e),Net&&(Net.functions[t]=Fet+t),this)}zet("bandwidth",(function(t,n){var e=cet(t,(n||this).context);return e&&e.bandwidth?e.bandwidth():0}),oet),zet("copy",(function(t,n){var e=cet(t,(n||this).context);return e?e.copy():void 0}),oet),zet("domain",(function(t,n){var e=cet(t,(n||this).context);return e?e.domain():[]}),oet),zet("range",(function(t,n){var e=cet(t,(n||this).context);return e&&e.range?e.range():[]}),oet),zet("invert",(function(t,n,e){var r=cet(t,(e||this).context);return r?(0,g.kJ)(n)?(r.invertRange||r.invert)(n):(r.invert||r.invertExtent)(n):void 0}),oet),zet("scale",(function(t,n,e){var r=cet(t,(e||this).context);return r?r(n):void 0}),oet),zet("gradient",(function(t,n,e,r,i){t=cet(t,(i||this).context);var a=zv(n,e),o=t.domain(),u=o[0],c=(0,g.fj)(o),s=g.yR;return c-u?s=function(t,n,e){var r,i,a,o=e-n;return o&&Number.isFinite(o)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=pnt(i)().domain([n,e]).range([0,1]),vnt.forEach((function(n){return t[n]?a[n](t[n]()):0})),a):(0,g.a9)(.5)}(t,u,c):t=(t.interpolator?pnt("sequential")().interpolator(t.interpolator()):pnt("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,c=1]),t.ticks&&(u!==(o=t.ticks(+r||15))[0]&&o.unshift(u),c!==(0,g.fj)(o)&&o.push(c)),o.forEach((function(n){return a.stop(s(n),t(n))})),a}),oet),zet("geoArea",het,oet),zet("geoBounds",det,oet),zet("geoCentroid",pet,oet),zet("geoShape",(function(t,n,e){var r=cet(t,(e||this).context);return function(t){return r?r.path.context(t)(n):""}}),oet),zet("indata",(function(t,n,e){var r=this.context.data[t]["index:"+n],i=r?r.value.get(e):void 0;return i?i.count:i}),(function(t,n,e,r){n[0].type!==C8.t$&&(0,g.vU)("First argument to indata must be a string literal."),n[1].type!==C8.t$&&(0,g.vU)("Second argument to indata must be a string literal.");var i=n[0].value,a=n[1].value,o=eet+a;(0,g.nr)(o,r)||(r[o]=e.getData(i).indataRef(e,a))})),zet("data",Ynt,aet),zet("treePath",(function(t,n,e){var r=Oet(t,this),i=r[n],a=r[e];return i&&a?i.path(a).map(Met):void 0}),aet),zet("treeAncestors",(function(t,n){var e=Oet(t,this)[n];return e?e.ancestors().map(Met):void 0}),aet),zet("vlSelectionTest",Znt,Wnt),zet("vlSelectionIdTest",Rnt,Wnt),zet("vlSelectionResolve",Int,Wnt),zet("vlSelectionTuples",Lnt);var Uet=(0,g.Rg)(["rule"]),Pet=(0,g.Rg)(["group","image","rect"]);function Ret(t){return(t+"").toLowerCase()}function Let(t,n,e){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(void 0,(0,b.Z)(n.concat(e)));return t&&t.functions?r.bind(t.functions):r}var Iet={operator:function(t,n){return Let(t,["_"],n.code)},parameter:function(t,n){return Let(t,["datum","_"],n.code)},event:function(t,n){return Let(t,["event"],n.code)},handler:function(t,n){return Let(t,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(n.code,";"))},encode:function(t,n){var e=n.marktype,r=n.channels,i="var o=item,datum=o.datum,m=0,$;";for(var a in r){var o="o["+(0,g.m8)(a)+"]";i+="$=".concat(r[a].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return i+=function(t,n){var e="";return Uet[n]||(t.x2&&(t.x?(Pet[n]&&(e+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),e+="o.width=o.x2-o.x;"):e+="o.x=o.x2-(o.width||0);"),t.xc&&(e+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(Pet[n]&&(e+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),e+="o.height=o.y2-o.y;"):e+="o.y=o.y2-(o.height||0);"),t.yc&&(e+="o.y=o.yc-(o.height||0)/2;")),e}(r,e),Let(t,["item","_"],i+="return m;")},codegen:{get:function(t){var n="[".concat(t.map(g.m8).join("]["),"]"),e=Function("_","return _".concat(n,";"));return e.path=n,e},comparator:function(t,n){var e,r=Function("a","b","var u, v; return "+t.map((function(t,r){var i,a,o=n[r];return t.path?(i="a".concat(t.path),a="b".concat(t.path)):((e=e||{})["f"+r]=t,i="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(t,n,e,r){return"((u = ".concat(t,") < (v = ").concat(n,") || u == null) && v != null ? ").concat(e,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(e,"\n  : v !== v && u === u ? ").concat(r," : ")}(i,a,-o,o)})).join("")+"0;");return e?r.bind(e):r}}};function Bet(t,n,e){if(!t||!(0,g.Kn)(t))return t;for(var r,i=0,a=qet.length;i<a;++i)if(r=qet[i],(0,g.nr)(t,r.key))return r.parse(t,n,e);return t}var qet=[{key:"$ref",parse:function(t,n){return n.get(t.$ref)||(0,g.vU)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,n){var e="k:"+t.$key+"_"+!!t.$flat;return n.fn[e]||(n.fn[e]=(0,g.Jy)(t.$key,t.$flat,n.expr.codegen))}},{key:"$expr",parse:function(t,n,e){t.$params&&n.parseParameters(t.$params,e);var r="e:"+t.$expr.code+"_"+t.$name;return n.fn[r]||(n.fn[r]=(0,g.ZE)(n.parameterExpression(t.$expr),t.$fields,t.$name))}},{key:"$field",parse:function(t,n){if(!t.$field)return null;var e="f:"+t.$field+"_"+t.$name;return n.fn[e]||(n.fn[e]=(0,g.EP)(t.$field,t.$name,n.expr.codegen))}},{key:"$encode",parse:function(t,n){var e=t.$encode,r={};for(var i in e){var a=e[i];r[i]=(0,g.ZE)(n.encodeExpression(a.$expr),a.$fields),r[i].output=a.$output}return r}},{key:"$compare",parse:function(t,n){var e="c:"+t.$compare+"_"+t.$order,r=(0,g.IX)(t.$compare).map((function(t){return t&&t.$tupleid?ji:t}));return n.fn[e]||(n.fn[e]=(0,g.qu)(r,t.$order,n.expr.codegen))}},{key:"$context",parse:function(t,n){return n}},{key:"$subflow",parse:function(t,n){var e=t.$subflow;return function(t,r,i){var a=n.fork().parse(e),o=a.get(e.operators[0].id),u=a.signals.parent;return u&&u.set(i),o.detachSubflow=function(){return n.detach(a)},o}}},{key:"$tupleid",parse:function(){return ji}}];var Het={skip:!0};function Wet(t,n,e,r){return new Yet(t,n,e,r)}function Yet(t,n,e,r){this.dataflow=t,this.transforms=n,this.events=t.events.bind(t),this.expr=r||Iet,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},e&&(this.functions=Object.create(e),this.functions.context=this)}function Xet(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function Get(t,n){t&&(null==n?t.removeAttribute("aria-label"):t.setAttribute("aria-label",n))}Yet.prototype=Xet.prototype={fork:function(){var t=new Xet(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach:function(t){this.subcontext=this.subcontext.filter((function(n){return n!==t}));for(var n=Object.keys(t.nodes),e=0,r=n;e<r.length;e++){var i=r[e];t.nodes[i]._targets=null}for(var a=0,o=n;a<o.length;a++){var u=o[a];t.nodes[u].detach()}t.nodes=null},get:function(t){return this.nodes[t]},set:function(t,n){return this.nodes[t]=n},add:function(t,n){var e=this,r=e.dataflow,i=t.value;if(e.set(t.id,n),function(t){return"collect"===Ret(t)}(t.type)&&i&&(i.$ingest?r.ingest(n,i.$ingest,i.$format):i.$request?r.preload(n,i.$request,i.$format):r.pulse(n,r.changeset().insert(i))),t.root&&(e.root=n),t.parent){var a=e.get(t.parent.$ref);a?(r.connect(a,[n]),n.targets().add(a)):(e.unresolved=e.unresolved||[]).push((function(){a=e.get(t.parent.$ref),r.connect(a,[n]),n.targets().add(a)}))}if(t.signal&&(e.signals[t.signal]=n),t.scale&&(e.scales[t.scale]=n),t.data){var o=function(){var r=e.data[u]||(e.data[u]={});t.data[u].forEach((function(t){return r[t]=n}))};for(var u in t.data)o()}},resolve:function(){return(this.unresolved||[]).forEach((function(t){return t()})),delete this.unresolved,this},operator:function(t,n){this.add(t,this.dataflow.add(t.value,n))},transform:function(t,n){this.add(t,this.dataflow.add(this.transforms[Ret(n)]))},stream:function(t,n){this.set(t.id,n)},update:function(t,n,e,r,i){this.dataflow.on(n,e,r,i,t.options)},operatorExpression:function(t){return this.expr.operator(this,t)},parameterExpression:function(t){return this.expr.parameter(this,t)},eventExpression:function(t){return this.expr.event(this,t)},handlerExpression:function(t){return this.expr.handler(this,t)},encodeExpression:function(t){return this.expr.encode(this,t)},parse:function(t){var n=this,e=t.operators||[];return t.background&&(n.background=t.background),t.eventConfig&&(n.eventConfig=t.eventConfig),t.locale&&(n.locale=t.locale),e.forEach((function(t){return n.parseOperator(t)})),e.forEach((function(t){return n.parseOperatorParameters(t)})),(t.streams||[]).forEach((function(t){return n.parseStream(t)})),(t.updates||[]).forEach((function(t){return n.parseUpdate(t)})),n.resolve()},parseOperator:function(t){var n=this;!function(t){return"operator"===Ret(t)}(t.type)&&t.type?n.transform(t,t.type):n.operator(t,t.update?n.operatorExpression(t.update):null)},parseOperatorParameters:function(t){var n=this;if(t.params){var e=n.get(t.id);e||(0,g.vU)("Invalid operator id: "+t.id),n.dataflow.connect(e,e.parameters(n.parseParameters(t.params),t.react,t.initonly))}},parseParameters:function(t,n){n=n||{};var e=this;for(var r in t){var i=t[r];n[r]=(0,g.kJ)(i)?i.map((function(t){return Bet(t,e,n)})):Bet(i,e,n)}return n},parseStream:function(t){var n,e=this,r=null!=t.filter?e.eventExpression(t.filter):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map((function(t){return e.get(t)})))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map((function(t){return e.get(t)})),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&(0,g.vU)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)},parseUpdate:function(t){var n,e=this,r=(0,g.Kn)(r=t.source)?r.$ref:r,i=e.get(r),a=t.update,o=void 0;i||(0,g.vU)("Source not defined: "+t.source),n=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(o=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,i,n,a,o)},getState:function(t){var n=this,e={};if(t.signals){var r=e.signals={};Object.keys(n.signals).forEach((function(e){var i=n.signals[e];t.signals(e,i)&&(r[e]=i.value)}))}if(t.data){var i=e.data={};Object.keys(n.data).forEach((function(e){var r=n.data[e];t.data(e,r)&&(i[e]=r.input.value)}))}return n.subcontext&&!1!==t.recurse&&(e.subcontext=n.subcontext.map((function(n){return n.getState(t)}))),e},setState:function(t){var n=this,e=n.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach((function(t){e.update(n.signals[t],i[t],Het)})),Object.keys(r||{}).forEach((function(t){e.pulse(n.data[t].input,e.changeset().remove(g.yb).insert(r[t]))})),(t.subcontext||[]).forEach((function(t,e){var r=n.subcontext[e];r&&r.setState(t)}))}};var Jet="default";function $et(t,n){var e=t.globalCursor()?"undefined"!==typeof document&&document.body:t.container();if(e)return null==n?e.style.removeProperty("cursor"):e.style.cursor=n}function Vet(t,n){var e=t._runtime.data;return(0,g.nr)(e,n)||(0,g.vU)("Unrecognized data set: "+n),e[n]}function Ket(t,n){Li(n)||(0,g.vU)("Second argument to changes must be a changeset.");var e=Vet(this,t);return e.modified=!0,this.pulse(e.input,n)}function Qet(t){var n=t.padding();return Math.max(0,t._viewWidth+n.left+n.right)}function trt(t){var n=t.padding();return Math.max(0,t._viewHeight+n.top+n.bottom)}function nrt(t){var n=t.padding(),e=t._origin;return[n.left+e[0],n.top+e[1]]}function ert(t){var n=nrt(t),e=Qet(t),r=trt(t);t._renderer.background(t.background()),t._renderer.resize(e,r,n),t._handler.origin(n),t._resizeListeners.forEach((function(n){try{n(e,r)}catch(i){t.error(i)}}))}function rrt(t,n,e){var r,i,a=t._renderer,o=a&&a.canvas();return o&&(i=nrt(t),(r=X4(n.changedTouches?n.changedTouches[0]:n,o))[0]-=i[0],r[1]-=i[1]),n.dataflow=t,n.item=e,n.vega=function(t,n,e){var r=n?"group"===n.mark.marktype?n:n.mark.group:null;function i(t){var e,i=r;if(t)for(e=n;e;e=e.mark.group)if(e.mark.name===t){i=e;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(t){if(!t)return e;(0,g.HD)(t)&&(t=i(t));for(var n=e.slice();t;)n[0]-=t.x||0,n[1]-=t.y||0,t=t.mark&&t.mark.group;return n}return{view:(0,g.a9)(t),item:(0,g.a9)(n||{}),group:i,xy:a,x:function(t){return a(t)[0]},y:function(t){return a(t)[1]}}}(t,e,r),n}var irt="view",art="timer",ort="window",urt={trap:!1};function crt(t,n,e,r){t._eventListeners.push({type:e,sources:(0,g.IX)(n),handler:r})}function srt(t,n,e){var r=t._eventConfig&&t._eventConfig[n];return!(!1===r||(0,g.Kn)(r)&&!r[e])||(t.warn("Blocked ".concat(n," ").concat(e," event listener.")),!1)}function lrt(t){return t.item}function frt(t){return t.item.mark.source}function hrt(t){return function(n,e){return e.vega.view().changeset().encode(e.item,t)}}function drt(t,n,e){var r=document.createElement(t);for(var i in n)r.setAttribute(i,n[i]);return null!=e&&(r.textContent=e),r}var prt="vega-bind",vrt="vega-bind-name",grt="vega-bind-radio";function mrt(t,n,e,r){var i=e.event||"input",a=function(){return t.update(n.value)};r.signal(e.signal,n.value),n.addEventListener(i,a),crt(r,n,i,a),t.set=function(t){n.value=t,n.dispatchEvent(function(t){return"undefined"!==typeof Event?new Event(t):{type:t}}(i))}}function yrt(t,n,e,r){var i=r.signal(e.signal),a=drt("div",{class:prt}),o="radio"===e.input?a:a.appendChild(drt("label"));o.appendChild(drt("span",{class:vrt},e.name||e.signal)),n.appendChild(a);var u=brt;switch(e.input){case"checkbox":u=xrt;break;case"select":u=_rt;break;case"radio":u=wrt;break;case"range":u=krt}u(t,o,e,i)}function brt(t,n,e,r){var i=drt("input");for(var a in e)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,e[a]);i.setAttribute("name",e.signal),i.value=r,n.appendChild(i),i.addEventListener("input",(function(){return t.update(i.value)})),t.elements=[i],t.set=function(t){return i.value=t}}function xrt(t,n,e,r){var i={type:"checkbox",name:e.signal};r&&(i.checked=!0);var a=drt("input",i);n.appendChild(a),a.addEventListener("change",(function(){return t.update(a.checked)})),t.elements=[a],t.set=function(t){return a.checked=!!t||null}}function _rt(t,n,e,r){var i=drt("select",{name:e.signal}),a=e.labels||[];e.options.forEach((function(t,n){var e={value:t};Mrt(t,r)&&(e.selected=!0),i.appendChild(drt("option",e,(a[n]||t)+""))})),n.appendChild(i),i.addEventListener("change",(function(){t.update(e.options[i.selectedIndex])})),t.elements=[i],t.set=function(t){for(var n=0,r=e.options.length;n<r;++n)if(Mrt(e.options[n],t))return void(i.selectedIndex=n)}}function wrt(t,n,e,r){var i=drt("span",{class:grt}),a=e.labels||[];n.appendChild(i),t.elements=e.options.map((function(n,o){var u={type:"radio",name:e.signal,value:n};Mrt(n,r)&&(u.checked=!0);var c=drt("input",u);c.addEventListener("change",(function(){return t.update(n)}));var s=drt("label",{},(a[o]||n)+"");return s.prepend(c),i.appendChild(s),c})),t.set=function(n){for(var e=t.elements,r=e.length,i=0;i<r;++i)Mrt(e[i].value,n)&&(e[i].checked=!0)}}function krt(t,n,e,r){r=void 0!==r?r:(+e.max+ +e.min)/2;var i=null!=e.max?e.max:Math.max(100,+r)||100,a=e.min||Math.min(0,i,+r)||0,o=e.step||nu(a,i,100),u=drt("input",{type:"range",name:e.signal,min:a,max:i,step:o});u.value=r;var c=drt("span",{},+r);n.appendChild(u),n.appendChild(c);var s=function(){c.textContent=u.value,t.update(+u.value)};u.addEventListener("input",s),u.addEventListener("change",s),t.elements=[u],t.set=function(t){u.value=t,c.textContent=t}}function Mrt(t,n){return t===n||t+""===n+""}function Ort(t,n,e,r,i,a){return(n=n||new r(t.loader())).initialize(e,Qet(t),trt(t),nrt(t),i,a).background(t.background())}function Ert(t,n){return n?function(){try{n.apply(this,arguments)}catch(e){t.error(e)}}:null}function Srt(t,n,e){if("string"===typeof n){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(!(n=document.querySelector(n)))return t.error("Signal bind element not found: "+n),null}if(n&&e)try{n.textContent=""}catch(r){n=null,t.error(r)}return n}var Drt=function(t){return+t||0},Crt=function(t){return{top:t,bottom:t,left:t,right:t}};function Art(t){return(0,g.Kn)(t)?{top:Drt(t.top),bottom:Drt(t.bottom),left:Drt(t.left),right:Drt(t.right)}:Crt(Drt(t))}function Trt(t,n,e,r){return Frt.apply(this,arguments)}function Frt(){return Frt=(0,y.Z)((0,m.Z)().mark((function t(n,e,r,i){var a,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h8(e),(o=a&&a.headless)||(0,g.vU)("Unrecognized renderer type: "+e),t.next=4,n.runAsync();case 4:return t.abrupt("return",Ort(n,null,null,o,r,i).renderAsync(n._scenegraph.root));case 5:case"end":return t.stop()}}),t)}))),Frt.apply(this,arguments)}function jrt(){return jrt=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n!==l8.Canvas&&n!==l8.SVG&&n!==l8.PNG&&(0,g.vU)("Unrecognized image type: "+n),t.next=3,Trt(this,n,e);case 3:return r=t.sent,t.abrupt("return",n===l8.SVG?Zrt(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return t.stop()}}),t,this)}))),jrt.apply(this,arguments)}function Zrt(t,n){var e=new Blob([t],{type:n});return window.URL.createObjectURL(e)}function Nrt(){return(Nrt=(0,y.Z)((0,m.Z)().mark((function t(n,e){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Trt(this,l8.Canvas,n,e);case 2:return r=t.sent,t.abrupt("return",r.canvas());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function zrt(){return(zrt=(0,y.Z)((0,m.Z)().mark((function t(n){var e;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Trt(this,l8.SVG,n);case 2:return e=t.sent,t.abrupt("return",e.svg());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var Urt="width",Prt="height",Rrt="padding",Lrt={skip:!0};function Irt(t,n){var e=t.autosize(),r=t.padding();return n-(e&&e.contains===Rrt?r.left+r.right:0)}function Brt(t,n){var e=t.autosize(),r=t.padding();return n-(e&&e.contains===Rrt?r.top+r.bottom:0)}function qrt(t,n){return n.modified&&(0,g.kJ)(n.input.value)&&t.indexOf("_:vega:_")}function Hrt(t,n){return!("parent"===t||n instanceof ya.proxy)}function Wrt(t,n,e,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":(0,g.kJ)(t)?Yrt(t):(0,g.Kn)(t)&&!(0,g.J_)(t)?(n=t,Object.keys(n).map((function(t){var e=n[t];return t+": "+((0,g.kJ)(e)?Yrt(e):Xrt(e))})).join("\n")):t+"";var n}(r))}function Yrt(t){return"["+t.map(Xrt).join(", ")+"]"}function Xrt(t){return(0,g.kJ)(t)?"[\u2026]":(0,g.Kn)(t)&&!(0,g.J_)(t)?"{\u2026}":t}function Grt(t,n){var e=this;if(n=n||{},va.call(e),n.loader&&e.loader(n.loader),n.logger&&e.logger(n.logger),null!=n.logLevel&&e.logLevel(n.logLevel),n.locale||t.locale){var r=(0,g.l7)({},t.locale,n.locale);e.locale(tP(r.number,r.time))}e._el=null,e._elBind=null,e._renderType=n.renderer||l8.Canvas,e._scenegraph=new L4;var i=e._scenegraph.root;e._renderer=null,e._tooltip=n.tooltip||Wrt,e._redraw=!0,e._handler=(new d7).scene(i),e._globalCursor=!1,e._preventDefault=!1,e._timers=[],e._eventListeners=[],e._resizeListeners=[],e._eventConfig=function(t){var n=(0,g.l7)({defaults:{}},t),e=function(t,n){n.forEach((function(n){(0,g.kJ)(t[n])&&(t[n]=(0,g.Rg)(t[n]))}))};return e(n.defaults,["prevent","allow"]),e(n,["view","window","selector"]),n}(t.eventConfig),e.globalCursor(e._eventConfig.globalCursor);var a=function(t,n,e){return Wet(t,ya,Cet,e).parse(n)}(e,t,n.expr);e._runtime=a,e._signals=a.signals,e._bind=(t.bindings||[]).map((function(t){return{state:null,param:(0,g.l7)({},t)}})),a.root&&a.root.set(i),i.source=a.data.root.input,e.pulse(a.data.root.input,e.changeset().insert(i.items)),e._width=e.width(),e._height=e.height(),e._viewWidth=Irt(e,e._width),e._viewHeight=Brt(e,e._height),e._origin=[0,0],e._resize=0,e._autosize=1,function(t){var n=t._signals,e=n[Urt],r=n[Prt],i=n[Rrt];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,(function(n){t._width=n.size,t._viewWidth=Irt(t,n.size),a()}),{size:e}),t._resizeHeight=t.add(null,(function(n){t._height=n.size,t._viewHeight=Brt(t,n.size),a()}),{size:r});var o=t.add(null,a,{pad:i});t._resizeWidth.rank=e.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(e),function(t){t.add(null,(function(n){return t._background=n.bg,t._resize=1,n.bg}),{bg:t._signals.background})}(e),function(t){var n=t._signals.cursor||(t._signals.cursor=t.add({user:Jet,item:null}));t.on(t.events("view","mousemove"),n,(function(t,e){var r=n.value,i=r?(0,g.HD)(r)?r:r.user:Jet,a=e.item&&e.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),t.add(null,(function(n){var e=n.cursor,r=this.value;return(0,g.HD)(e)||(r=e.item,e=e.user),$et(t,e&&e!==Jet?e:r||e),r}),{cursor:n})}(e),e.description(t.description),n.hover&&e.hover(),n.container&&e.initialize(n.container,n.bind)}function Jrt(t,n){return(0,g.nr)(t._signals,n)?t._signals[n]:(0,g.vU)("Unrecognized signal name: "+(0,g.m8)(n))}function $rt(t,n){var e=(t._targets||[]).filter((function(t){return t._update&&t._update.handler===n}));return e.length?e[0]:null}function Vrt(t,n,e,r){var i=$rt(e,r);return i||((i=Ert(t,(function(){return r(n,e.value)}))).handler=r,t.on(e,null,i)),t}function Krt(t,n,e){var r=$rt(n,e);return r&&n._targets.remove(r),t}(0,g.XW)(Grt,va,{evaluate:function(t,n,e){var r=this;return(0,y.Z)((0,m.Z)().mark((function i(){return(0,m.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,va.prototype.evaluate.call(r,t,n);case 2:if(!r._redraw&&!r._resize){i.next=14;break}if(i.prev=3,!r._renderer){i.next=8;break}return r._resize&&(r._resize=0,ert(r)),i.next=8,r._renderer.renderAsync(r._scenegraph.root);case 8:r._redraw=!1,i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),r.error(i.t0);case 14:return e&&Di(r,e),i.abrupt("return",r);case 16:case"end":return i.stop()}}),i,null,[[3,11]])})))()},dirty:function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description:function(t){if(arguments.length){var n=null!=t?t+"":null;return n!==this._desc&&Get(this._el,this._desc=n),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(t,n,e){var r=Jrt(this,t);return 1===arguments.length?r.value:this.update(r,n,e)},width:function(t){return arguments.length?this.signal("width",t):this.signal("width")},height:function(t){return arguments.length?this.signal("height",t):this.signal("height")},padding:function(t){return arguments.length?this.signal("padding",Art(t)):Art(this.signal("padding"))},autosize:function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background:function(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer:function(t){return arguments.length?(h8(t)||(0,g.vU)("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip:function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader:function(t){return arguments.length?(t!==this._loader&&(va.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(Jrt(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(t,n,e,r,i,a){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==e&&(u=1,o.signal(Urt,e,Lrt),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(Prt,r,Lrt),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==n&&(o._resize=1,o._viewHeight=n),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter((function(t){return t.resize()}))}),!1,1)},addEventListener:function(t,n,e){var r=n;return e&&!1===e.trap||((r=Ert(this,n)).raw=n),this._handler.on(t,r),this},removeEventListener:function(t,n){for(var e,r,i=this._handler.handlers(t),a=i.length;--a>=0;)if(r=i[a].type,e=i[a].handler,t===r&&(n===e||n===e.raw)){this._handler.off(r,e);break}return this},addResizeListener:function(t){var n=this._resizeListeners;return n.indexOf(t)<0&&n.push(t),this},removeResizeListener:function(t){var n=this._resizeListeners,e=n.indexOf(t);return e>=0&&n.splice(e,1),this},addSignalListener:function(t,n){return Vrt(this,t,Jrt(this,t),n)},removeSignalListener:function(t,n){return Krt(this,Jrt(this,t),n)},addDataListener:function(t,n){return Vrt(this,t,Vet(this,t).values,n)},removeDataListener:function(t,n){return Krt(this,Vet(this,t).values,n)},globalCursor:function(t){if(arguments.length){if(this._globalCursor!==!!t){var n=$et(this,null);this._globalCursor=!!t,n&&$et(this,n)}return this}return this._globalCursor},preventDefault:function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:function(t,n){this._timers.push(function(t,n,e){var r=new WD.B7,i=n;return null==n?(r.restart(t,n,e),r):(r._restart=r.restart,r.restart=function(t,n,e){n=+n,e=null==e?(0,WD.zO)():+e,r._restart((function a(o){o+=i,r._restart(a,i+=n,e),t(o)}),n,e)},r.restart(t,n,e),r)}((function(n){t({timestamp:Date.now(),elapsed:n})}),n))},events:function(t,n,e){var r,i=this,a=new Ji(e),o=function(e,r){i.runAsync(null,(function(){t===irt&&function(t,n){var e=t._eventConfig.defaults,r=e.prevent,i=e.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[n]:i?!i[n]:t.preventDefault()))}(i,n)&&e.preventDefault(),a.receive(rrt(i,e,r))}))};if(t===art)srt(i,"timer",n)&&i.timer(o,n);else if(t===irt)srt(i,"view",n)&&i.addEventListener(n,o,urt);else if(t===ort?srt(i,"window",n)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&srt(i,"selector",n)&&(r=document.querySelectorAll(t)),r){for(var u=0,c=r.length;u<c;++u)r[u].addEventListener(n,o);crt(i,r,n,o)}else i.warn("Can not resolve event source: "+t);return a},finalize:function(){var t,n,e,r=this._tooltip,i=this._timers,a=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=a.length;--t>=0;)for(n=(e=a[t]).sources.length;--n>=0;)e.sources[n].removeEventListener(e.type,e.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(t,n){return n=[n||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",lrt),frt,hrt(t)),this.on(this.events("view","mouseout",lrt),frt,hrt(n)),this},data:function(t,n){return arguments.length<2?Vet(this,t).values.value:Ket.call(this,t,Ii().remove(g.yb).insert(n))},change:Ket,insert:function(t,n){return Ket.call(this,t,Ii().insert(n))},remove:function(t,n){return Ket.call(this,t,Ii().remove(n))},scale:function(t){var n=this._runtime.scales;return(0,g.nr)(n,t)||(0,g.vU)("Unrecognized scale or projection: "+t),n[t].value},initialize:function(t,n){var e=this,r=e._renderType,i=e._eventConfig.bind,a=h8(r);t=e._el=t?Srt(e,t,!0):null,function(t){var n=t.container();n&&(n.setAttribute("role","graphics-document"),n.setAttribute("aria-roleDescription","visualization"),Get(n,t.description()))}(e),a||e.error("Unrecognized renderer type: "+r);var o=a.handler||d7,u=t?a.renderer:a.headless;return e._renderer=u?Ort(e,e._renderer,t,u):null,e._handler=function(t,n,e,r){var i=new r(t.loader(),Ert(t,t.tooltip())).scene(t.scenegraph().root).initialize(e,nrt(t),t);return n&&n.handlers().forEach((function(t){i.on(t.type,t.handler)})),i}(e,e._handler,t,o),e._redraw=!0,t&&"none"!==i&&(n=n?e._elBind=Srt(e,n,!0):t.appendChild(drt("form",{class:"vega-bindings"})),e._bind.forEach((function(t){t.param.element&&"container"!==i&&(t.element=Srt(e,t.param.element,!!t.param.input))})),e._bind.forEach((function(t){!function(t,n,e){if(n){var r=e.param,i=e.state;i||(i=e.state={elements:null,active:!1,set:null,update:function(n){n!=t.signal(r.signal)&&t.runAsync(null,(function(){i.source=!0,t.signal(r.signal,n)}))}},r.debounce&&(i.update=(0,g.Ds)(r.debounce,i.update))),(null==r.input&&r.element?mrt:yrt)(i,n,r,t),i.active||(t.on(t._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(t.signal(r.signal))})),i.active=!0)}}(e,t.element||n,t)}))),e},toImageURL:function(t,n){return jrt.apply(this,arguments)},toCanvas:function(t,n){return Nrt.apply(this,arguments)},toSVG:function(t){return zrt.apply(this,arguments)},getState:function(t){return this._runtime.getState(t||{data:qrt,signals:Hrt,recurse:!0})},setState:function(t){return this.runAsync(null,(function(n){n._trigger=!1,n._runtime.setState(t)}),(function(t){t._trigger=!0})),this}});var Qrt=function(){function t(){(0,rk.Z)(this,t),this._partials=new Float64Array(32),this._n=0}return(0,ik.Z)(t,[{key:"add",value:function(t){for(var n=this._partials,e=0,r=0;r<this._n&&r<32;r++){var i=n[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(n[e++]=o),t=a}return n[e]=t,this._n=e+1,this}},{key:"valueOf",value:function(){var t,n,e,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(e=(n=r[--i])-((a=t+n)-t))););i>0&&(e<0&&r[i-1]<0||e>0&&r[i-1]>0)&&(n=2*e)==(t=a+n)-a&&(a=t)}return a}}]),t}();var tit=1e-6,nit=1e-12,eit=Math.PI,rit=eit/2,iit=eit/4,ait=2*eit,oit=180/eit,uit=eit/180,cit=Math.abs,sit=(Math.atan,Math.atan2),lit=Math.cos,fit=(Math.ceil,Math.exp,Math.floor,Math.hypot),hit=(Math.log,Math.pow,Math.sin),dit=(Math.sign,Math.sqrt);Math.tan;function pit(t){return t>1?rit:t<-1?-rit:Math.asin(t)}function vit(){}function git(t,n){t&&yit.hasOwnProperty(t.type)&&yit[t.type](t,n)}var mit={Feature:function(t,n){git(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)git(e[r].geometry,n)}},yit={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){bit(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)bit(e[r],n,0)},Polygon:function(t,n){xit(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)xit(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)git(e[r],n)}};function bit(t,n,e){var r,i=-1,a=t.length-e;for(n.lineStart();++i<a;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function xit(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)bit(t[e],n,1);n.polygonEnd()}function _it(t,n){t&&mit.hasOwnProperty(t.type)?mit[t.type](t,n):git(t,n)}var wit,kit,Mit,Oit,Eit,Sit,Dit,Cit,Ait,Tit,Fit,jit,Zit,Nit,zit,Uit,Pit=new Qrt,Rit=new Qrt,Lit={point:vit,lineStart:vit,lineEnd:vit,polygonStart:function(){Pit=new Qrt,Lit.lineStart=Iit,Lit.lineEnd=Bit},polygonEnd:function(){var t=+Pit;Rit.add(t<0?ait+t:t),this.lineStart=this.lineEnd=this.point=vit},sphere:function(){Rit.add(ait)}};function Iit(){Lit.point=qit}function Bit(){Hit(wit,kit)}function qit(t,n){Lit.point=Hit,wit=t,kit=n,Mit=t*=uit,Oit=lit(n=(n*=uit)/2+iit),Eit=hit(n)}function Hit(t,n){var e=(t*=uit)-Mit,r=e>=0?1:-1,i=r*e,a=lit(n=(n*=uit)/2+iit),o=hit(n),u=Eit*o,c=Oit*a+u*lit(i),s=u*r*hit(i);Pit.add(sit(s,c)),Mit=t,Oit=a,Eit=o}function Wit(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}var Yit,Xit,Git,Jit,$it,Vit,Kit,Qit,tat,nat,eat,rat,iat,aat,oat,uat,cat={point:sat,lineStart:fat,lineEnd:hat,polygonStart:function(){cat.point=dat,cat.lineStart=pat,cat.lineEnd=vat,Nit=new Qrt,Lit.polygonStart()},polygonEnd:function(){Lit.polygonEnd(),cat.point=sat,cat.lineStart=fat,cat.lineEnd=hat,Pit<0?(Sit=-(Cit=180),Dit=-(Ait=90)):Nit>tit?Ait=90:Nit<-tit&&(Dit=-90),Uit[0]=Sit,Uit[1]=Cit},sphere:function(){Sit=-(Cit=180),Dit=-(Ait=90)}};function sat(t,n){zit.push(Uit=[Sit=t,Cit=t]),n<Dit&&(Dit=n),n>Ait&&(Ait=n)}function lat(t,n){var e=function(t){var n=t[0],e=t[1],r=lit(e);return[r*lit(n),r*hit(n),hit(e)]}([t*uit,n*uit]);if(Zit){var r=Wit(Zit,e),i=Wit([r[1],-r[0],0],r);!function(t){var n=dit(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}(i),i=function(t){return[sit(t[1],t[0]),pit(t[2])]}(i);var a,o=t-Tit,u=o>0?1:-1,c=i[0]*oit*u,s=cit(o)>180;s^(u*Tit<c&&c<u*t)?(a=i[1]*oit)>Ait&&(Ait=a):s^(u*Tit<(c=(c+360)%360-180)&&c<u*t)?(a=-i[1]*oit)<Dit&&(Dit=a):(n<Dit&&(Dit=n),n>Ait&&(Ait=n)),s?t<Tit?gat(Sit,t)>gat(Sit,Cit)&&(Cit=t):gat(t,Cit)>gat(Sit,Cit)&&(Sit=t):Cit>=Sit?(t<Sit&&(Sit=t),t>Cit&&(Cit=t)):t>Tit?gat(Sit,t)>gat(Sit,Cit)&&(Cit=t):gat(t,Cit)>gat(Sit,Cit)&&(Sit=t)}else zit.push(Uit=[Sit=t,Cit=t]);n<Dit&&(Dit=n),n>Ait&&(Ait=n),Zit=e,Tit=t}function fat(){cat.point=lat}function hat(){Uit[0]=Sit,Uit[1]=Cit,cat.point=sat,Zit=null}function dat(t,n){if(Zit){var e=t-Tit;Nit.add(cit(e)>180?e+(e>0?360:-360):e)}else Fit=t,jit=n;Lit.point(t,n),lat(t,n)}function pat(){Lit.lineStart()}function vat(){dat(Fit,jit),Lit.lineEnd(),cit(Nit)>tit&&(Sit=-(Cit=180)),Uit[0]=Sit,Uit[1]=Cit,Zit=null}function gat(t,n){return(n-=t)<0?n+360:n}function mat(t,n){return t[0]-n[0]}function yat(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var bat={sphere:vit,point:xat,lineStart:wat,lineEnd:Oat,polygonStart:function(){bat.lineStart=Eat,bat.lineEnd=Sat},polygonEnd:function(){bat.lineStart=wat,bat.lineEnd=Oat}};function xat(t,n){t*=uit;var e=lit(n*=uit);_at(e*lit(t),e*hit(t),hit(n))}function _at(t,n,e){++Yit,Git+=(t-Git)/Yit,Jit+=(n-Jit)/Yit,$it+=(e-$it)/Yit}function wat(){bat.point=kat}function kat(t,n){t*=uit;var e=lit(n*=uit);aat=e*lit(t),oat=e*hit(t),uat=hit(n),bat.point=Mat,_at(aat,oat,uat)}function Mat(t,n){t*=uit;var e=lit(n*=uit),r=e*lit(t),i=e*hit(t),a=hit(n),o=sit(dit((o=oat*a-uat*i)*o+(o=uat*r-aat*a)*o+(o=aat*i-oat*r)*o),aat*r+oat*i+uat*a);Xit+=o,Vit+=o*(aat+(aat=r)),Kit+=o*(oat+(oat=i)),Qit+=o*(uat+(uat=a)),_at(aat,oat,uat)}function Oat(){bat.point=xat}function Eat(){bat.point=Dat}function Sat(){Cat(rat,iat),bat.point=xat}function Dat(t,n){rat=t,iat=n,t*=uit,n*=uit,bat.point=Cat;var e=lit(n);aat=e*lit(t),oat=e*hit(t),uat=hit(n),_at(aat,oat,uat)}function Cat(t,n){t*=uit;var e=lit(n*=uit),r=e*lit(t),i=e*hit(t),a=hit(n),o=oat*a-uat*i,u=uat*r-aat*a,c=aat*i-oat*r,s=fit(o,u,c),l=pit(s),f=s&&-l/s;tat.add(f*o),nat.add(f*u),eat.add(f*c),Xit+=l,Vit+=l*(aat+(aat=r)),Kit+=l*(oat+(oat=i)),Qit+=l*(uat+(uat=a)),_at(aat,oat,uat)}function Aat(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Tat(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Fat(){}var jat=.7,Zat=1/jat,Nat="\\s*([+-]?\\d+)\\s*",zat="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uat="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pat=/^#([0-9a-f]{3,8})$/,Rat=new RegExp("^rgb\\("+[Nat,Nat,Nat]+"\\)$"),Lat=new RegExp("^rgb\\("+[Uat,Uat,Uat]+"\\)$"),Iat=new RegExp("^rgba\\("+[Nat,Nat,Nat,zat]+"\\)$"),Bat=new RegExp("^rgba\\("+[Uat,Uat,Uat,zat]+"\\)$"),qat=new RegExp("^hsl\\("+[zat,Uat,Uat]+"\\)$"),Hat=new RegExp("^hsla\\("+[zat,Uat,Uat,zat]+"\\)$"),Wat={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yat(){return this.rgb().formatHex()}function Xat(){return this.rgb().formatRgb()}function Gat(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Pat.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Jat(n):3===e?new Qat(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?$at(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?$at(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Rat.exec(t))?new Qat(n[1],n[2],n[3],1):(n=Lat.exec(t))?new Qat(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Iat.exec(t))?$at(n[1],n[2],n[3],n[4]):(n=Bat.exec(t))?$at(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=qat.exec(t))?rot(n[1],n[2]/100,n[3]/100,1):(n=Hat.exec(t))?rot(n[1],n[2]/100,n[3]/100,n[4]):Wat.hasOwnProperty(t)?Jat(Wat[t]):"transparent"===t?new Qat(NaN,NaN,NaN,0):null}function Jat(t){return new Qat(t>>16&255,t>>8&255,255&t,1)}function $at(t,n,e,r){return r<=0&&(t=n=e=NaN),new Qat(t,n,e,r)}function Vat(t){return t instanceof Fat||(t=Gat(t)),t?new Qat((t=t.rgb()).r,t.g,t.b,t.opacity):new Qat}function Kat(t,n,e,r){return 1===arguments.length?Vat(t):new Qat(t,n,e,null==r?1:r)}function Qat(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function tot(){return"#"+eot(this.r)+eot(this.g)+eot(this.b)}function not(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function eot(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function rot(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new oot(t,n,e,r)}function iot(t){if(t instanceof oot)return new oot(t.h,t.s,t.l,t.opacity);if(t instanceof Fat||(t=Gat(t)),!t)return new oot;if(t instanceof oot)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,u=a-i,c=(a+i)/2;return u?(o=n===a?(e-r)/u+6*(e<r):e===a?(r-n)/u+2:(n-e)/u+4,u/=c<.5?a+i:2-a-i,o*=60):u=c>0&&c<1?0:o,new oot(o,u,c,t.opacity)}function aot(t,n,e,r){return 1===arguments.length?iot(t):new oot(t,n,e,null==r?1:r)}function oot(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function uot(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Aat(Fat,Gat,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yat,formatHex:Yat,formatHsl:function(){return iot(this).formatHsl()},formatRgb:Xat,toString:Xat}),Aat(Qat,Kat,Tat(Fat,{brighter:function(t){return t=null==t?Zat:Math.pow(Zat,t),new Qat(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?jat:Math.pow(jat,t),new Qat(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tot,formatHex:tot,formatRgb:not,toString:not})),Aat(oot,aot,Tat(Fat,{brighter:function(t){return t=null==t?Zat:Math.pow(Zat,t),new oot(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?jat:Math.pow(jat,t),new oot(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Qat(uot(t>=240?t-240:t+120,i,r),uot(t,i,r),uot(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var cot=Math.PI/180,sot=180/Math.PI,lot=.96422,fot=1,hot=.82521,dot=4/29,pot=6/29,vot=3*pot*pot,got=pot*pot*pot;function mot(t){if(t instanceof bot)return new bot(t.l,t.a,t.b,t.opacity);if(t instanceof Eot)return Sot(t);t instanceof Qat||(t=Vat(t));var n,e,r=kot(t.r),i=kot(t.g),a=kot(t.b),o=xot((.2225045*r+.7168786*i+.0606169*a)/fot);return r===i&&i===a?n=e=o:(n=xot((.4360747*r+.3850649*i+.1430804*a)/lot),e=xot((.0139322*r+.0971045*i+.7141733*a)/hot)),new bot(116*o-16,500*(n-o),200*(o-e),t.opacity)}function yot(t,n,e,r){return 1===arguments.length?mot(t):new bot(t,n,e,null==r?1:r)}function bot(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function xot(t){return t>got?Math.pow(t,1/3):t/vot+dot}function _ot(t){return t>pot?t*t*t:vot*(t-dot)}function wot(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function kot(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mot(t){if(t instanceof Eot)return new Eot(t.h,t.c,t.l,t.opacity);if(t instanceof bot||(t=mot(t)),0===t.a&&0===t.b)return new Eot(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*sot;return new Eot(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Oot(t,n,e,r){return 1===arguments.length?Mot(t):new Eot(t,n,e,null==r?1:r)}function Eot(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Sot(t){if(isNaN(t.h))return new bot(t.l,0,0,t.opacity);var n=t.h*cot;return new bot(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function Dot(t){var n=this.context.data[t];return n?n.values.value:[]}Aat(bot,yot,Tat(Fat,{brighter:function(t){return new bot(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new bot(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Qat(wot(3.1338561*(n=lot*_ot(n))-1.6168667*(t=fot*_ot(t))-.4906146*(e=hot*_ot(e))),wot(-.9787684*n+1.9161415*t+.033454*e),wot(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Aat(Eot,Oot,Tat(Fat,{brighter:function(t){return new Eot(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Eot(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Sot(this).rgb()}}));var Cot=function(t){return function(n,e){return this.context.dataflow.locale()[t](e)(n)}},Aot=Cot("format"),Tot=Cot("timeFormat"),Fot=Cot("utcFormat"),jot=Cot("timeParse"),Zot=Cot("utcParse"),Not=new Date(2e3,0,1);function zot(t,n,e){return Number.isInteger(t)&&Number.isInteger(n)?(Not.setYear(2e3),Not.setMonth(t),Not.setDate(n),Tot.call(this,Not,e)):""}var Uot=":",Pot="@",Rot="%",Lot="$";function Iot(t,n,e,r){n[0].type!==C8.t$&&(0,g.vU)("First argument to data functions must be a string literal.");var i=n[0].value,a=Uot+i;if(!(0,g.nr)(a,r))try{r[a]=e.getData(i).tuplesRef()}catch(o){}}function Bot(t,n,e,r){if(n[0].type===C8.t$)qot(e,r,n[0].value);else for(t in e.scales)qot(e,r,t)}function qot(t,n,e){var r=Rot+e;if(!(0,g.nr)(n,r))try{n[r]=t.scaleRef(e)}catch(i){}}function Hot(t,n){var e;return(0,g.mf)(t)?t:(0,g.HD)(t)?(e=n.scales[t])&&e.value:void 0}function Wot(t,n,e){n.__bandwidth=function(t){return t&&t.bandwidth?t.bandwidth():0},e._bandwidth=Bot,e._range=Bot,e._scale=Bot;var r=function(n){return"_["+(n.type===C8.t$?(0,g.m8)(Rot+n.value):(0,g.m8)(Rot)+"+"+t(n))+"]"};return{_bandwidth:function(t){return"this.__bandwidth(".concat(r(t[0]),")")},_range:function(t){return"".concat(r(t[0]),".range()")},_scale:function(n){return"".concat(r(n[0]),"(").concat(t(n[1]),")")}}}function Yot(t,n){return function(e,r,i){if(e){var a=Hot(e,(i||this).context);return a&&a.path[t](r)}return n(r)}}var Xot=Yot("area",(function(t){return Rit=new Qrt,_it(t,Lit),2*Rit})),Got=Yot("bounds",(function(t){var n,e,r,i,a,o,u;if(Ait=Cit=-(Sit=Dit=1/0),zit=[],_it(t,cat),e=zit.length){for(zit.sort(mat),n=1,a=[r=zit[0]];n<e;++n)yat(r,(i=zit[n])[0])||yat(r,i[1])?(gat(r[0],i[1])>gat(r[0],r[1])&&(r[1]=i[1]),gat(i[0],r[1])>gat(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=0,r=a[e=a.length-1];n<=e;r=i,++n)i=a[n],(u=gat(r[1],i[0]))>o&&(o=u,Sit=i[0],Cit=r[1])}return zit=Uit=null,Sit===1/0||Dit===1/0?[[NaN,NaN],[NaN,NaN]]:[[Sit,Dit],[Cit,Ait]]})),Jot=Yot("centroid",(function(t){Yit=Xit=Git=Jit=$it=Vit=Kit=Qit=0,tat=new Qrt,nat=new Qrt,eat=new Qrt,_it(t,bat);var n=+tat,e=+nat,r=+eat,i=fit(n,e,r);return i<nit&&(n=Vit,e=Kit,r=Qit,Xit<tit&&(n=Git,e=Jit,r=$it),(i=fit(n,e,r))<nit)?[NaN,NaN]:[sit(e,n)*oit,pit(r/i)*oit]}));function $ot(t,n,e){try{t[n].apply(t,["EXPRESSION"].concat([].slice.call(e)))}catch(r){t.warn(r)}return e[e.length-1]}function Vot(t){var n=t/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Kot(t){var n=Kat(t);return.2126*Vot(n.r)+.7152*Vot(n.g)+.0722*Vot(n.b)}function Qot(t,n){return t===n||t!==t&&n!==n||((0,g.kJ)(t)?!(!(0,g.kJ)(n)||t.length!==n.length)&&function(t,n){for(var e=0,r=t.length;e<r;++e)if(!Qot(t[e],n[e]))return!1;return!0}(t,n):!(!(0,g.Kn)(t)||!(0,g.Kn)(n))&&tut(t,n))}function tut(t,n){for(var e in t)if(!Qot(t[e],n[e]))return!1;return!0}function nut(t){return function(n){return tut(t,n)}}var eut={};function rut(t){return(0,g.kJ)(t)||ArrayBuffer.isView(t)?t:null}function iut(t){return rut(t)||((0,g.HD)(t)?t:null)}var aut=function(t){return t.data};function out(t,n){var e=Dot.call(n,t);return e.root&&e.root.lookup||{}}var uut=function(){return"undefined"!==typeof window&&window||null};var cut={random:function(){return _w()},cumulativeNormal:Sw,cumulativeLogNormal:Tw,cumulativeUniform:Nw,densityNormal:Ew,densityLogNormal:Aw,densityUniform:Zw,quantileNormal:Dw,quantileLogNormal:Fw,quantileUniform:zw,sampleNormal:Ow,sampleLogNormal:Cw,sampleUniform:jw,isArray:g.kJ,isBoolean:g.jn,isDate:g.J_,isDefined:function(t){return void 0!==t},isNumber:g.hj,isObject:g.Kn,isRegExp:g.Kj,isString:g.HD,isTuple:Fi,isValid:function(t){return null!=t&&t===t},toBoolean:g.sw,toDate:g.ZU,toNumber:g.He,toString:g.BB,indexof:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=iut(t)).indexOf.apply(n,r)},join:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=rut(t)).join.apply(n,r)},lastindexof:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=iut(t)).lastIndexOf.apply(n,r)},replace:function(t,n,e){return(0,g.mf)(e)&&(0,g.vU)("Function argument passed to replace."),String(t).replace(n,e)},reverse:function(t){return rut(t).slice().reverse()},slice:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=iut(t)).slice.apply(n,r)},flush:g.yl,lerp:g.t7,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),g.l7.apply(void 0,(0,b.Z)(t))},pad:g.vk,peek:g.fj,pluck:function(t,n){var e=eut[n]||(eut[n]=(0,g.EP)(n));return(0,g.kJ)(t)?t.map(e):e(t)},span:g.yP,inrange:g.u5,truncate:g.$G,rgb:Kat,lab:yot,hcl:Oot,hsl:aot,luminance:Kot,contrast:function(t,n){var e=Kot(t),r=Kot(n);return(Math.max(e,r)+.05)/(Math.min(e,r)+.05)},sequence:function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);++r<i;)a[r]=t+r*e;return a},format:Aot,utcFormat:Fot,utcParse:Zot,utcOffset:function(t,n,e){return Fn(Tn(t),n,e)},utcSequence:function(t,n,e,r){return jn(Tn(t),n,e,r)},timeFormat:Tot,timeParse:jot,timeOffset:function(t,n,e){return Fn(An(t),n,e)},timeSequence:function(t,n,e,r){return jn(An(t),n,e,r)},timeUnitSpecifier:function(t,n){var e,r,i=(0,g.l7)({},yn,n),a=function(t){var n=(0,g.IX)(t).slice(),e={};return n.length||(0,g.vU)("Missing time unit."),n.forEach((function(t){(0,g.nr)(mn,t)?e[t]=1:(0,g.vU)("Invalid time unit: ".concat(t,"."))})),(e[sn]||e[fn]?1:0)+(e[un]||e[cn]||e[ln]?1:0)+(e[hn]?1:0)>1&&(0,g.vU)("Incompatible time units: ".concat(t)),n.sort((function(t,n){return mn[t]-mn[n]})),n}(t),o=a.length,u="",c=0;for(c=0;c<o;)for(e=a.length;e>c;--e)if(null!=i[r=a.slice(c,e).join("-")]){u+=i[r],c=e;break}return u.trim()},monthFormat:function(t){return zot.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return zot.call(this,t,1,"%b")},dayFormat:function(t){return zot.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return zot.call(this,0,2+t,"%a")},quarter:g.mS,utcquarter:g.N3,week:function(t){return wn(new Date(t))},utcweek:function(t){return On(new Date(t))},dayofyear:function(t){return _n(new Date(t))},utcdayofyear:function(t){return Mn(new Date(t))},warn:function(){return $ot(this.context.dataflow,"warn",arguments)},info:function(){return $ot(this.context.dataflow,"info",arguments)},debug:function(){return $ot(this.context.dataflow,"debug",arguments)},extent:g.We,inScope:function(t){var n=this.context.group,e=!1;if(n)for(;t;){if(t===n){e=!0;break}t=t.mark.group}return e},intersect:function(t,n,e){if(!t)return[];var r=(0,Go.Z)(t,2),i=r[0],a=r[1],o=(new Sg).set(i[0],i[1],a[0],a[1]);return Yb(e||this.context.dataflow.scenegraph().root,o,function(t){var n=null;if(t){var e=(0,g.IX)(t.marktype),r=(0,g.IX)(t.markname);n=function(t){return(!e.length||e.some((function(n){return t.marktype===n})))&&(!r.length||r.some((function(n){return t.name===n})))}}return n}(n))},clampRange:g.l$,pinchDistance:function(t){var n=t.touches,e=n[0].clientX-n[1].clientX,r=n[0].clientY-n[1].clientY;return Math.sqrt(e*e+r*r)},pinchAngle:function(t){var n=t.touches;return Math.atan2(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function(){var t=uut();return t?t.screen:{}},containerSize:function(){var t=this.context.dataflow,n=t.container&&t.container();return n?[n.clientWidth,n.clientHeight]:[void 0,void 0]},windowSize:function(){var t=uut();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,n,e){return bp(t||0,n||0,e||0)},setdata:function(t,n){var e=this.context.dataflow,r=this.context.data[t].input;return e.pulse(r,e.changeset().remove(g.yb).insert(n)),1},pathShape:function(t){var n=null;return function(e){return e?Qv(e,n=n||Iv(t)):t}},panLinear:g.Dw,panLog:g.mJ,panPow:g.QA,panSymlog:g.Zw,zoomLinear:g.ay,zoomLog:g.dH,zoomPow:g.mK,zoomSymlog:g.bV,encode:function(t,n,e){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,n))}return void 0!==e?e:t},modify:function(t,n,e,r,i,a){var o,u,c=this.context.dataflow,s=this.context.data[t],l=s.input,f=c.stamp(),h=s.changes;if(!1===c._trigger||!(l.value.length||n||r))return 0;if((!h||h.stamp<f)&&(s.changes=h=c.changeset(),h.stamp=f,c.runAfter((function(){s.modified=!0,c.pulse(l,h).run()}),!0,1)),e&&(o=!0===e?g.yb:(0,g.kJ)(e)||Fi(e)?e:nut(e),h.remove(o)),n&&h.insert(n),r&&(o=nut(r),l.value.some(o)?h.remove(o):h.insert(r)),i)for(u in a)h.modify(i,u,a[u]);return 1}},sut=["view","item","group","xy","x","y"],lut="event.vega.",fut="this.",hut={},dut={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_[".concat((0,g.m8)(Lot+t),"]")},functions:function(t){var n=(0,C8.wk)(t);for(var e in sut.forEach((function(t){return n[t]=lut+t})),cut)n[e]=fut+e;return(0,g.l7)(n,Wot(t,cut,hut)),n},constants:C8._G,visitors:hut},put=(0,C8.YP)(dut);function vut(t,n,e){return 1===arguments.length?cut[t]:(cut[t]=n,e&&(hut[t]=e),put&&(put.functions[t]=fut+t),this)}function gut(t,n){var e,r={};try{t=(0,g.HD)(t)?t:(0,g.m8)(t)+"",e=(0,C8.BJ)(t)}catch(a){(0,g.vU)("Expression parse error: "+t)}e.visit((function(t){if(t.type===C8.Lt){var e=t.callee.name,i=dut.visitors[e];i&&i(e,t.arguments,n,r)}}));var i=put(e);return i.globals.forEach((function(t){var e=Lot+t;!(0,g.nr)(r,e)&&n.getSignal(t)&&(r[e]=n.signalRef(t))})),{$expr:(0,g.l7)({code:i.code},n.options.ast?{ast:e}:null),$fields:i.fields,$params:r}}vut("bandwidth",(function(t,n){var e=Hot(t,(n||this).context);return e&&e.bandwidth?e.bandwidth():0}),Bot),vut("copy",(function(t,n){var e=Hot(t,(n||this).context);return e?e.copy():void 0}),Bot),vut("domain",(function(t,n){var e=Hot(t,(n||this).context);return e?e.domain():[]}),Bot),vut("range",(function(t,n){var e=Hot(t,(n||this).context);return e&&e.range?e.range():[]}),Bot),vut("invert",(function(t,n,e){var r=Hot(t,(e||this).context);return r?(0,g.kJ)(n)?(r.invertRange||r.invert)(n):(r.invert||r.invertExtent)(n):void 0}),Bot),vut("scale",(function(t,n,e){var r=Hot(t,(e||this).context);return r?r(n):void 0}),Bot),vut("gradient",(function(t,n,e,r,i){t=Hot(t,(i||this).context);var a=zv(n,e),o=t.domain(),u=o[0],c=(0,g.fj)(o),s=g.yR;return c-u?s=rv(t,u,c):t=(t.interpolator?Yp("sequential")().interpolator(t.interpolator()):Yp("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,c=1]),t.ticks&&(u!==(o=t.ticks(+r||15))[0]&&o.unshift(u),c!==(0,g.fj)(o)&&o.push(c)),o.forEach((function(n){return a.stop(s(n),t(n))})),a}),Bot),vut("geoArea",Xot,Bot),vut("geoBounds",Got,Bot),vut("geoCentroid",Jot,Bot),vut("geoShape",(function(t,n,e){var r=Hot(t,(e||this).context);return function(t){return r?r.path.context(t)(n):""}}),Bot),vut("indata",(function(t,n,e){var r=this.context.data[t]["index:"+n],i=r?r.value.get(e):void 0;return i?i.count:i}),(function(t,n,e,r){n[0].type!==C8.t$&&(0,g.vU)("First argument to indata must be a string literal."),n[1].type!==C8.t$&&(0,g.vU)("Second argument to indata must be a string literal.");var i=n[0].value,a=n[1].value,o=Pot+a;(0,g.nr)(o,r)||(r[o]=e.getData(i).indataRef(e,a))})),vut("data",Dot,Iot),vut("treePath",(function(t,n,e){var r=out(t,this),i=r[n],a=r[e];return i&&a?i.path(a).map(aut):void 0}),Iot),vut("treeAncestors",(function(t,n){var e=out(t,this)[n];return e?e.ancestors().map(aut):void 0}),Iot),vut("vlSelectionTest",Znt,Wnt),vut("vlSelectionIdTest",Rnt,Wnt),vut("vlSelectionResolve",Int,Wnt),vut("vlSelectionTuples",Lnt);var mut=e(5946);function yut(t){return(0,g.Kn)(t)?t:{type:t||"pad"}}var but=function(t){return+t||0},xut=function(t){return{top:t,bottom:t,left:t,right:t}};function _ut(t){return(0,g.Kn)(t)?t.signal?t:{top:but(t.top),bottom:but(t.bottom),left:but(t.left),right:but(t.right)}:xut(but(t))}var wut=function(t){return(0,g.Kn)(t)&&!(0,g.kJ)(t)?(0,g.l7)({},t):{value:t}};function kut(t,n,e,r){return null!=e?((0,g.Kn)(e)&&!(0,g.kJ)(e)||(0,g.kJ)(e)&&e.length&&(0,g.Kn)(e[0])?t.update[n]=e:t[r||"enter"][n]={value:e},1):0}function Mut(t,n,e){for(var r in n)kut(t,r,n[r]);for(var i in e)kut(t,i,e[i],"update")}function Out(t,n,e){for(var r in n)e&&(0,g.nr)(e,r)||(t[r]=(0,g.l7)(t[r]||{},n[r]));return t}function Eut(t,n){return n&&(n.enter&&n.enter[t]||n.update&&n.update[t])}var Sut="mark",Dut="frame",Cut="scope",Aut="axis",Tut="axis-domain",Fut="axis-grid",jut="axis-label",Zut="axis-tick",Nut="axis-title",zut="legend",Uut="legend-band",Put="legend-entry",Rut="legend-gradient",Lut="legend-label",Iut="legend-symbol",But="legend-title",qut="title",Hut="title-text",Wut="title-subtitle";function Yut(t,n,e){t[n]=e&&e.signal?{signal:e.signal}:{value:e}}var Xut=function(t){return(0,g.HD)(t)?(0,g.m8)(t):t.signal?"(".concat(t.signal,")"):Vut(t)};function Gut(t){if(null!=t.gradient)return function(t){var n=[t.start,t.stop,t.count].map((function(t){return null==t?null:(0,g.m8)(t)}));for(;n.length&&null==(0,g.fj)(n);)n.pop();return n.unshift(Xut(t.gradient)),"gradient(".concat(n.join(","),")")}(t);var n=t.signal?"(".concat(t.signal,")"):t.color?function(t){return t.c?Jut("hcl",t.h,t.c,t.l):t.h||t.s?Jut("hsl",t.h,t.s,t.l):t.l||t.a?Jut("lab",t.l,t.a,t.b):t.r||t.g||t.b?Jut("rgb",t.r,t.g,t.b):null}(t.color):null!=t.field?Vut(t.field):void 0!==t.value?(0,g.m8)(t.value):void 0;return null!=t.scale&&(n=function(t,n){var e=Xut(t.scale);null!=t.range?n="lerp(_range(".concat(e,"), ").concat(+t.range,")"):(void 0!==n&&(n="_scale(".concat(e,", ").concat(n,")")),t.band&&(n=(n?n+"+":"")+"_bandwidth(".concat(e,")")+(1===+t.band?"":"*"+$ut(t.band)),t.extra&&(n="(datum.extra ? _scale(".concat(e,", datum.extra.value) : ").concat(n,")"))),null==n&&(n="0"));return n}(t,n)),void 0===n&&(n=null),null!=t.exponent&&(n="pow(".concat(n,",").concat($ut(t.exponent),")")),null!=t.mult&&(n+="*".concat($ut(t.mult))),null!=t.offset&&(n+="+".concat($ut(t.offset))),t.round&&(n="round(".concat(n,")")),n}var Jut=function(t,n,e,r){return"(".concat(t,"(").concat([n,e,r].map(Gut).join(","),")+'')")};function $ut(t){return(0,g.Kn)(t)?"("+Gut(t)+")":t}function Vut(t){return Kut((0,g.Kn)(t)?t:{datum:t})}function Kut(t){var n,e,r;if(t.signal)n="datum",r=t.signal;else if(t.group||t.parent){for(e=Math.max(1,t.level||1),n="item";e-- >0;)n+=".mark.group";t.parent?(r=t.parent,n+=".datum"):r=t.group}else t.datum?(n="datum",r=t.datum):(0,g.vU)("Invalid field reference: "+(0,g.m8)(t));return t.signal||(r=(0,g.HD)(r)?(0,g._k)(r).map(g.m8).join("]["):Kut(r)),n+"["+r+"]"}function Qut(t,n,e,r,i,a){var o={};for(var u in(a=a||{}).encoders={$encode:o},t=function(t,n,e,r,i){var a,o,u,c={},s={};for(o in o="lineBreak","text"!==n||null==i[o]||Eut(o,t)||Yut(c,o,i[o]),("legend"==e||String(e).startsWith("axis"))&&(e=null),u=e===Dut?i.group:e===Sut?(0,g.l7)({},i.mark,i[n]):null)Eut(o,t)||("fill"===o||"stroke"===o)&&(Eut("fill",t)||Eut("stroke",t))||Yut(c,o,u[o]);for(o in(0,g.IX)(r).forEach((function(n){var e=i.style&&i.style[n];for(var r in e)Eut(r,t)||Yut(c,r,e[r])})),t=(0,g.l7)({},t),c)(u=c[o]).signal?(a=a||{})[o]=u:s[o]=u;return t.enter=(0,g.l7)(s,t.enter),a&&(t.update=(0,g.l7)(a,t.update)),t}(t,n,e,r,i.config),t)o[u]=tct(t[u],n,a,i);return a}function tct(t,n,e,r){var i,a={},o={};for(var u in t)null!=t[u]&&(a[u]=nct((i=t[u],(0,g.kJ)(i)?function(t){var n="";return t.forEach((function(t){var e=Gut(t);n+=t.test?"(".concat(t.test,")?").concat(e,":"):e})),":"===(0,g.fj)(n)&&(n+="null"),n}(i):Gut(i)),r,e,o));return{$expr:{marktype:n,channels:a},$fields:Object.keys(o),$output:Object.keys(t)}}function nct(t,n,e,r){var i=gut(t,n);return i.$fields.forEach((function(t){return r[t]=1})),(0,g.l7)(e,i.$params),i.$expr}var ect="outer",rct=["value","update","init","react","bind"];function ict(t,n){(0,g.vU)(t+' for "outer" push: '+(0,g.m8)(n))}function act(t,n){var e=t.name;if(t.push===ect)n.signals[e]||ict("No prior signal definition",e),rct.forEach((function(n){void 0!==t[n]&&ict("Invalid property ",n)}));else{var r=n.addSignal(e,t.value);!1===t.react&&(r.react=!1),t.bind&&n.addBinding(e,t.bind)}}function oct(t,n,e,r){this.id=-1,this.type=t,this.value=n,this.params=e,r&&(this.parent=r)}function uct(t,n,e,r){return new oct(t,n,e,r)}function cct(t,n){return uct("operator",t,n)}function sct(t){var n={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(n),n}function lct(t,n){return n?{$field:t,$name:n}:{$field:t}}var fct=lct("key");function hct(t,n){return{$compare:t,$order:n}}var dct="descending";function pct(t,n){return(t&&t.signal?"$"+t.signal:t||"")+(t&&n?"_":"")+(n&&n.signal?"$"+n.signal:n||"")}var vct="scope",gct="view";function mct(t){return t&&t.signal}function yct(t){if(mct(t))return!0;if((0,g.Kn)(t))for(var n in t)if(yct(t[n]))return!0;return!1}function bct(t,n){return null!=t?t:n}function xct(t){return t&&t.signal||t}var _ct="timer";function wct(t,n){return(t.merge?kct:t.stream?Mct:t.type?Oct:(0,g.vU)("Invalid stream specification: "+(0,g.m8)(t)))(t,n)}function kct(t,n){var e=t.merge.map((function(t){return wct(t,n)})),r=Ect({merge:e},t,n);return n.addStream(r).id}function Mct(t,n){var e=Ect({stream:wct(t.stream,n)},t,n);return n.addStream(e).id}function Oct(t,n){var e;t.type===_ct?(e=n.event(_ct,t.throttle),t={between:t.between,filter:t.filter}):e=n.event(function(t){return t===vct?gct:t||gct}(t.source),t.type);var r=Ect({stream:e},t,n);return 1===Object.keys(r).length?e:n.addStream(r).id}function Ect(t,n,e){var r=n.between;return r&&(2!==r.length&&(0,g.vU)('Stream "between" parameter must have 2 entries: '+(0,g.m8)(n)),t.between=[wct(r[0],e),wct(r[1],e)]),r=n.filter?[].concat(n.filter):[],(n.marktype||n.markname||n.markrole)&&r.push(function(t,n,e){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(e?"&&"+r+".mark.role==='"+e+"'":"")+(n?"&&"+r+".mark.name==='"+n+"'":"")}(n.marktype,n.markname,n.markrole)),n.source===vct&&r.push("inScope(event.item)"),r.length&&(t.filter=gut("("+r.join(")&&(")+")",e).$expr),null!=(r=n.throttle)&&(t.throttle=+r),null!=(r=n.debounce)&&(t.debounce=+r),n.consume&&(t.consume=!0),t}var Sct={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Dct(t,n,e){var r=t.encode,i={target:e},a=t.events,o=t.update,u=[];a||(0,g.vU)("Signal update missing events specification."),(0,g.HD)(a)&&(a=(0,mut.r)(a,n.isSubscope()?vct:gct)),a=(0,g.IX)(a).filter((function(t){return t.signal||t.scale?(u.push(t),0):1})),u.length>1&&(u=[Cct(u)]),a.length&&u.push(a.length>1?{merge:a}:a[0]),null!=r&&(o&&(0,g.vU)("Signal encode and update are mutually exclusive."),o="encode(item(),"+(0,g.m8)(r)+")"),i.update=(0,g.HD)(o)?gut(o,n):null!=o.expr?gut(o.expr,n):null!=o.value?o.value:null!=o.signal?{$expr:Sct,$params:{$value:n.signalRef(o.signal)}}:(0,g.vU)("Invalid signal update specification."),t.force&&(i.options={force:!0}),u.forEach((function(t){return n.addUpdate((0,g.l7)(function(t,n){return{source:t.signal?n.signalRef(t.signal):t.scale?n.scaleRef(t.scale):wct(t,n)}}(t,n),i))}))}function Cct(t){return{signal:"["+t.map((function(t){return t.scale?'scale("'+t.scale+'")':t.signal}))+"]"}}var Act=function(t){return function(n,e,r){return uct(t,e,n||void 0,r)}},Tct=Act("aggregate"),Fct=Act("axisticks"),jct=Act("bound"),Zct=Act("collect"),Nct=Act("compare"),zct=Act("datajoin"),Uct=Act("encode"),Pct=Act("expression"),Rct=Act("facet"),Lct=Act("field"),Ict=Act("key"),Bct=Act("legendentries"),qct=Act("load"),Hct=Act("mark"),Wct=Act("multiextent"),Yct=Act("multivalues"),Xct=Act("overlap"),Gct=Act("params"),Jct=Act("prefacet"),$ct=Act("projection"),Vct=Act("proxy"),Kct=Act("relay"),Qct=Act("render"),tst=Act("scale"),nst=Act("sieve"),est=Act("sortitems"),rst=Act("viewlayout"),ist=Act("values"),ast=0,ost={min:"min",max:"max",count:"sum"};function ust(t,n){var e,r=n.getScale(t.name).params;for(e in r.domain=fst(t.domain,t,n),null!=t.range&&(r.range=bst(t,n,r)),null!=t.interpolate&&function(t,n){n.interpolate=cst(t.type||t),null!=t.gamma&&(n.interpolateGamma=cst(t.gamma))}(t.interpolate,r),null!=t.nice&&(r.nice=function(t){return(0,g.Kn)(t)?{interval:cst(t.interval),step:cst(t.step)}:cst(t)}(t.nice)),null!=t.bins&&(r.bins=function(t,n){return t.signal||(0,g.kJ)(t)?sst(t,n):n.objectProperty(t)}(t.bins,n)),t)(0,g.nr)(r,e)||"name"===e||(r[e]=cst(t[e],n))}function cst(t,n){return(0,g.Kn)(t)?t.signal?n.signalRef(t.signal):(0,g.vU)("Unsupported object: "+(0,g.m8)(t)):t}function sst(t,n){return t.signal?n.signalRef(t.signal):t.map((function(t){return cst(t,n)}))}function lst(t){(0,g.vU)("Can not find data set: "+(0,g.m8)(t))}function fst(t,n,e){if(t)return t.signal?e.signalRef(t.signal):((0,g.kJ)(t)?hst:t.fields?pst:dst)(t,n,e);null==n.domainMin&&null==n.domainMax||(0,g.vU)("No scale domain defined for domainMin/domainMax to override.")}function hst(t,n,e){return t.map((function(t){return cst(t,e)}))}function dst(t,n,e){var r=e.getData(t.data);return r||lst(t.data),$p(n.type)?r.valuesRef(e,t.field,gst(t.sort,!1)):tv(n.type)?r.domainRef(e,t.field):r.extentRef(e,t.field)}function pst(t,n,e){var r=t.data,i=t.fields.reduce((function(t,n){return n=(0,g.HD)(n)?{data:r,field:n}:(0,g.kJ)(n)||n.signal?function(t,n){var e="_:vega:_"+ast++,r=Zct({});if((0,g.kJ)(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+(0,g.m8)(e)+","+t.signal+")";r.params.input=n.signalRef(i)}return n.addDataPipeline(e,[r,nst({})]),{data:e,field:"data"}}(n,e):n,t.push(n),t}),[]);return($p(n.type)?vst:tv(n.type)?mst:yst)(t,e,i)}function vst(t,n,e){var r,i,a=gst(t.sort,!0),o=e.map((function(t){var e=n.getData(t.data);return e||lst(t.data),e.countsRef(n,t.field,a)})),u={groupby:fct,pulse:o};a&&(r=a.op||"count",i=a.field?pct(r,a.field):"count",u.ops=[ost[r]],u.fields=[n.fieldRef(i)],u.as=[i]),r=n.add(Tct(u));var c=n.add(Zct({pulse:sct(r)}));return i=n.add(ist({field:fct,sort:n.sortRef(a),pulse:sct(c)})),sct(i)}function gst(t,n){return t&&(t.field||t.op?t.field||"count"===t.op?n&&t.field&&t.op&&!ost[t.op]&&(0,g.vU)("Multiple domain scales can not be sorted using "+t.op):(0,g.vU)("No field provided for sort aggregate op: "+t.op):(0,g.Kn)(t)?t.field="key":t={field:"key"}),t}function mst(t,n,e){var r=e.map((function(t){var e=n.getData(t.data);return e||lst(t.data),e.domainRef(n,t.field)}));return sct(n.add(Yct({values:r})))}function yst(t,n,e){var r=e.map((function(t){var e=n.getData(t.data);return e||lst(t.data),e.extentRef(n,t.field)}));return sct(n.add(Wct({extents:r})))}function bst(t,n,e){var r=n.config.range,i=t.range;if(i.signal)return n.signalRef(i.signal);if((0,g.HD)(i)){if(r&&(0,g.nr)(r,i))return bst(t=(0,g.l7)({},t,{range:r[i]}),n,e);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=$p(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:(0,g.vU)("Unrecognized scale range value: "+(0,g.m8)(i))}else{if(i.scheme)return e.scheme=(0,g.kJ)(i.scheme)?sst(i.scheme,n):cst(i.scheme,n),i.extent&&(e.schemeExtent=sst(i.extent,n)),void(i.count&&(e.schemeCount=cst(i.count,n)));if(i.step)return void(e.rangeStep=cst(i.step,n));if($p(t.type)&&!(0,g.kJ)(i))return fst(i,t,n);(0,g.kJ)(i)||(0,g.vU)("Unsupported range type: "+(0,g.m8)(i))}return i.map((function(t){return((0,g.kJ)(t)?sst:cst)(t,n)}))}function xst(t,n,e){return(0,g.kJ)(t)?t.map((function(t){return xst(t,n,e)})):(0,g.Kn)(t)?t.signal?e.signalRef(t.signal):"fit"===n?t:(0,g.vU)("Unsupported parameter object: "+(0,g.m8)(t)):t}var _st="top",wst="left",kst="right",Mst="bottom",Ost="center",Est="vertical",Sst="start",Dst="end",Cst="index",Ast="label",Tst="offset",Fst="perc",jst="perc2",Zst="value",Nst="guide-label",zst="guide-title",Ust="group-title",Pst="group-subtitle",Rst="symbol",Lst="gradient",Ist="discrete",Bst="size",qst=[Bst,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],Hst={name:1,style:1,interactive:1},Wst={value:0},Yst={value:1},Xst="group",Gst="rect",Jst="rule",$st="symbol",Vst="text";function Kst(t){return t.type=Xst,t.interactive=t.interactive||!1,t}function Qst(t,n){var e=function(e,r){return bct(t[e],bct(n[e],r))};return e.isVertical=function(e){return Est===bct(t.direction,n.direction||(e?n.symbolDirection:n.gradientDirection))},e.gradientLength=function(){return bct(t.gradientLength,n.gradientLength||n.gradientWidth)},e.gradientThickness=function(){return bct(t.gradientThickness,n.gradientThickness||n.gradientHeight)},e.entryColumns=function(){return bct(t.columns,bct(n.columns,+e.isVertical(!0)))},e}function tlt(t,n){var e=n&&(n.update&&n.update[t]||n.enter&&n.enter[t]);return e&&e.signal?e:e?e.value:null}function nlt(t,n,e){return"item.anchor === '".concat(Sst,"' ? ").concat(t," : item.anchor === '").concat(Dst,"' ? ").concat(n," : ").concat(e)}var elt=nlt((0,g.m8)(wst),(0,g.m8)(kst),(0,g.m8)(Ost));function rlt(t,n){return n?t?(0,g.Kn)(t)?Object.assign({},t,{offset:rlt(t.offset,n)}):{value:t,offset:n}:n:t}function ilt(t,n){return n?(t.name=n.name,t.style=n.style||t.style,t.interactive=!!n.interactive,t.encode=Out(t.encode,n,Hst)):t.interactive=!1,t}function alt(t,n,e,r){var i,a,o,u,c,s=Qst(t,e),l=s.isVertical(),f=s.gradientThickness(),h=s.gradientLength();l?(a=[0,1],o=[0,0],u=f,c=h):(a=[0,0],o=[1,0],u=h,c=f);var d={enter:i={opacity:Wst,x:Wst,y:Wst,width:wut(u),height:wut(c)},update:(0,g.l7)({},i,{opacity:Yst,fill:{gradient:n,start:a,stop:o}}),exit:{opacity:Wst}};return Mut(d,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ilt({type:Gst,role:Rut,encode:d},r)}function olt(t,n,e,r,i){var a,o,u,c,s=Qst(t,e),l=s.isVertical(),f=s.gradientThickness(),h=s.gradientLength(),d="";l?(a="y",u="y2",o="x",c="width",d="1-"):(a="x",u="x2",o="y",c="height");var p={opacity:Wst,fill:{scale:n,field:Zst}};p[a]={signal:d+"datum."+Fst,mult:h},p[o]=Wst,p[u]={signal:d+"datum."+jst,mult:h},p[c]=wut(f);var v={enter:p,update:(0,g.l7)({},p,{opacity:Yst}),exit:{opacity:Wst}};return Mut(v,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ilt({type:Gst,role:Uut,key:Zst,from:i,encode:v},r)}var ult="datum.".concat(Fst,'<=0?"').concat(wst,'":datum.').concat(Fst,'>=1?"').concat(kst,'":"').concat(Ost,'"'),clt="datum.".concat(Fst,'<=0?"').concat(Mst,'":datum.').concat(Fst,'>=1?"').concat(_st,'":"').concat("middle",'"');function slt(t,n,e,r){var i,a,o,u,c=Qst(t,n),s=c.isVertical(),l=wut(c.gradientThickness()),f=c.gradientLength(),h=c("labelOverlap"),d="",p={enter:i={opacity:Wst},update:a={opacity:Yst,text:{field:Ast}},exit:{opacity:Wst}};return Mut(p,{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:bct(t.labelLimit,n.gradientLabelLimit)}),s?(i.align={value:"left"},i.baseline=a.baseline={signal:clt},o="y",u="x",d="1-"):(i.align=a.align={signal:ult},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:d+"datum."+Fst,mult:f},i[u]=a[u]=l,l.offset=bct(t.labelOffset,n.gradientLabelOffset)||0,h=h?{separation:c("labelSeparation"),method:h,order:"datum."+Cst}:void 0,ilt({type:Vst,role:Lut,style:Nst,key:Zst,from:r,encode:p,overlap:h},e)}function llt(t,n,e,r,i){var a,o,u,c,s,l=Qst(t,n),f=e.entries,h=!(!f||!f.interactive),d=f?f.name:void 0,p=l("clipHeight"),v=l("symbolOffset"),g={data:"value"},m="(".concat(i,") ? datum.").concat(Tst," : datum.").concat(Bst),y=p?wut(p):{field:Bst},b="datum.".concat(Cst),x="max(1, ".concat(i,")");y.mult=.5,a={enter:o={opacity:Wst,x:{signal:m,mult:.5,offset:v},y:y},update:u={opacity:Yst,x:o.x,y:o.y},exit:{opacity:Wst}};var _=null,w=null;t.fill||(_=n.symbolBaseFillColor,w=n.symbolBaseStrokeColor),Mut(a,{fill:l("symbolFillColor",_),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",w),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),qst.forEach((function(n){t[n]&&(u[n]=o[n]={scale:t[n],field:Zst})}));var k=ilt({type:$st,role:Iut,key:Zst,from:g,clip:!!p||void 0,encode:a},e.symbols),M=wut(v);M.offset=l("labelOffset"),Mut(a={enter:o={opacity:Wst,x:{signal:m,offset:M},y:y},update:u={opacity:Yst,text:{field:Ast},x:o.x,y:o.y},exit:{opacity:Wst}},{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});var O=ilt({type:Vst,role:Lut,style:Nst,key:Zst,from:g,encode:a},e.labels);return a={enter:{noBound:{value:!p},width:Wst,height:p?wut(p):Wst,opacity:Wst},exit:{opacity:Wst},update:u={opacity:Yst,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(c="ceil(item.mark.items.length / ".concat(x,")"),u.row.signal="".concat(b,"%").concat(c),u.column.signal="floor(".concat(b," / ").concat(c,")"),s={field:["row",b]}):(u.row.signal="floor(".concat(b," / ").concat(x,")"),u.column.signal="".concat(b," % ").concat(x),s={field:b}),u.column.signal="(".concat(i,")?").concat(u.column.signal,":").concat(b),Kst({role:Cut,from:r={facet:{data:r,name:"value",groupby:Cst}},encode:Out(a,f,Hst),marks:[k,O],name:d,interactive:h,sort:s})}var flt='item.orient === "left"',hlt='item.orient === "right"',dlt="(".concat(flt," || ").concat(hlt,")"),plt="datum.vgrad && ".concat(dlt),vlt=nlt('"top"','"bottom"','"middle"'),glt=nlt('"right"','"left"','"center"'),mlt="datum.vgrad && ".concat(hlt," ? (").concat(glt,") : (").concat(dlt," && !(datum.vgrad && ").concat(flt,')) ? "left" : ').concat(elt),ylt="item._anchor || (".concat(dlt,' ? "middle" : "start")'),blt="".concat(plt," ? (").concat(flt," ? -90 : 90) : 0"),xlt="".concat(dlt," ? (datum.vgrad ? (").concat(hlt,' ? "bottom" : "top") : ').concat(vlt,') : "top"');function _lt(t,n){var e;return(0,g.Kn)(t)&&(t.signal?e=t.signal:t.path?e="pathShape("+wlt(t.path)+")":t.sphere&&(e="geoShape("+wlt(t.sphere)+', {type: "Sphere"})')),e?n.signalRef(e):!!t}function wlt(t){return(0,g.Kn)(t)&&t.signal?t.signal:(0,g.m8)(t)}function klt(t){var n=t.role||"";return n.indexOf("axis")&&n.indexOf("legend")&&n.indexOf("title")?t.type===Xst?Cut:n||Sut:n}function Mlt(t){return{marktype:t.type,name:t.name||void 0,role:t.role||klt(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function Olt(t,n){return t&&t.signal?n.signalRef(t.signal):!1!==t}function Elt(t,n){var e=ba(t.type);e||(0,g.vU)("Unrecognized transform type: "+(0,g.m8)(t.type));var r=uct(e.type.toLowerCase(),null,Slt(e,t,n));return t.signal&&n.addSignal(t.signal,n.proxy(r)),r.metadata=e.metadata||{},r}function Slt(t,n,e){for(var r={},i=t.params.length,a=0;a<i;++a){var o=t.params[a];r[o.name]=Dlt(o,n,e)}return r}function Dlt(t,n,e){var r=t.type,i=n[t.name];return"index"===r?function(t,n,e){(0,g.HD)(n.from)||(0,g.vU)('Lookup "from" parameter must be a string literal.');return e.getData(n.from).lookupRef(e,n.key)}(0,n,e):void 0!==i?"param"===r?function(t,n,e){var r=n[t.name];return t.array?((0,g.kJ)(r)||(0,g.vU)("Expected an array of sub-parameters. Instead: "+(0,g.m8)(r)),r.map((function(n){return Alt(t,n,e)}))):Alt(t,r,e)}(t,n,e):"projection"===r?e.projectionRef(n[t.name]):t.array&&!mct(i)?i.map((function(n){return Clt(t,n,e)})):Clt(t,i,e):void(t.required&&(0,g.vU)("Missing required "+(0,g.m8)(n.type)+" parameter: "+(0,g.m8)(t.name)))}function Clt(t,n,e){var r=t.type;if(mct(n))return Zlt(r)?(0,g.vU)("Expression references can not be signals."):Nlt(r)?e.fieldRef(n):zlt(r)?e.compareRef(n):e.signalRef(n.signal);var i=t.expr||Nlt(r);return i&&Tlt(n)?e.exprRef(n.expr,n.as):i&&Flt(n)?lct(n.field,n.as):Zlt(r)?gut(n,e):jlt(r)?sct(e.getData(n).values):Nlt(r)?lct(n):zlt(r)?e.compareRef(n):n}function Alt(t,n,e){for(var r,i=t.params.length,a=0;a<i;++a){for(var o in(r=t.params[a]).key)if(r.key[o]!==n[o]){r=null;break}if(r)break}r||(0,g.vU)("Unsupported parameter: "+(0,g.m8)(n));var u=(0,g.l7)(Slt(r,n,e),r.key);return sct(e.add(Gct(u)))}var Tlt=function(t){return t&&t.expr},Flt=function(t){return t&&t.field},jlt=function(t){return"data"===t},Zlt=function(t){return"expr"===t},Nlt=function(t){return"field"===t},zlt=function(t){return"compare"===t};function Ult(t,n){return t.$ref?t:t.data&&t.data.$ref?t.data:sct(n.getData(t.data).output)}function Plt(t,n,e,r,i){this.scope=t,this.input=n,this.output=e,this.values=r,this.aggregate=i,this.index={}}function Rlt(t){return(0,g.HD)(t)?t:null}function Llt(t,n,e){var r,i=pct(e.op,e.field);if(n.ops){for(var a=0,o=n.as.length;a<o;++a)if(n.as[a]===i)return}else n.ops=["count"],n.fields=[null],n.as=["count"];e.op&&(n.ops.push((r=e.op.signal)?t.signalRef(r):e.op),n.fields.push(t.fieldRef(e.field)),n.as.push(i))}function Ilt(t,n,e,r,i,a,o){var u,c,s=n[e]||(n[e]={}),l=function(t){return(0,g.Kn)(t)?(t.order===dct?"-":"+")+pct(t.op,t.field):""}(a),f=Rlt(i);if(null!=f&&(t=n.scope,u=s[f+=l?"|"+l:""]),!u){var h=a?{field:fct,pulse:n.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:sct(n.output)};l&&(h.sort=t.sortRef(a)),c=t.add(uct(r,void 0,h)),o&&(n.index[i]=c),u=sct(c),null!=f&&(s[f]=u)}return u}function Blt(t,n,e){var r=t.remove,i=t.insert,a=t.toggle,o=t.modify,u=t.values,c=n.add(cct()),s=gut("if("+t.trigger+',modify("'+e+'",'+[i,r,a,o,u].map((function(t){return null==t?"null":t})).join(",")+"),0)",n);c.update=s.$expr,c.params=s.$params}function qlt(t,n){var e,r,i,a,o,u,c,s=klt(t),l=t.type===Xst,f=t.from&&t.from.facet,h=t.overlap,d=t.layout||s===Cut||s===Dut,p=s===Sut||d||f,v=function(t,n,e){var r,i,a,o,u;return t?(r=t.facet)&&(n||(0,g.vU)("Only group marks can be faceted."),null!=r.field?o=u=Ult(r,e):(t.data?u=sct(e.getData(t.data).aggregate):((a=Elt((0,g.l7)({type:"aggregate",groupby:(0,g.IX)(r.groupby)},r.aggregate),e)).params.key=e.keyRef(r.groupby),a.params.pulse=Ult(r,e),o=u=sct(e.add(a))),i=e.keyRef(r.groupby,!0))):o=sct(e.add(Zct(null,[{}]))),o||(o=Ult(t,e)),{key:i,pulse:o,parent:u}}(t.from,l,n),m=sct(r=n.add(zct({key:v.key||(t.key?lct(t.key):void 0),pulse:v.pulse,clean:!l})));r=i=n.add(Zct({pulse:m})),r=n.add(Hct({markdef:Mlt(t),interactive:Olt(t.interactive,n),clip:_lt(t.clip,n),context:{$context:!0},groups:n.lookup(),parent:n.signals.parent?n.signalRef("parent"):null,index:n.markpath(),pulse:sct(r)}));var y=sct(r);(r=a=n.add(Uct(Qut(t.encode,t.type,s,t.style,n,{mod:!1,pulse:y})))).params.parent=n.encode(),t.transform&&t.transform.forEach((function(t){var e=Elt(t,n),i=e.metadata;(i.generates||i.changes)&&(0,g.vU)("Mark transforms should not generate new data."),i.nomod||(a.params.mod=!0),e.params.pulse=sct(r),n.add(r=e)})),t.sort&&(r=n.add(est({sort:n.compareRef(t.sort),pulse:sct(r)})));var b=sct(r);(f||d)&&(u=sct(d=n.add(rst({layout:n.objectProperty(t.layout),legends:n.legends,mark:y,pulse:b}))));var x=n.add(jct({mark:y,pulse:u||b}));c=sct(x),l&&(p&&((e=n.operators).pop(),d&&e.pop()),n.pushState(b,u||c,m),f?function(t,n,e){var r,i=t.from.facet,a=i.name,o=Ult(i,n);i.name||(0,g.vU)("Facet must have a name: "+(0,g.m8)(i)),i.data||(0,g.vU)("Facet must reference a data set: "+(0,g.m8)(i)),i.field?r=n.add(Jct({field:n.fieldRef(i.field),pulse:o})):i.groupby?r=n.add(Rct({key:n.keyRef(i.groupby),group:sct(n.proxy(e.parent)),pulse:o})):(0,g.vU)("Facet must specify groupby or field: "+(0,g.m8)(i));var u=n.fork(),c=u.add(Zct()),s=u.add(nst({pulse:sct(c)}));u.addData(a,new Plt(u,c,c,s)),u.addSignal("parent",null),r.params.subflow={$subflow:u.parse(t).toRuntime()}}(t,n,v):p?function(t,n,e){var r=n.add(Jct({pulse:e.pulse})),i=n.fork();i.add(nst()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}(t,n,v):n.parse(t),n.popState(),p&&(d&&e.push(d),e.push(x))),h&&(c=function(t,n,e){var r=t.method,i=t.bound,a=t.separation,o={separation:mct(a)?e.signalRef(a.signal):a,method:mct(r)?e.signalRef(r.signal):r,pulse:n};t.order&&(o.sort=e.compareRef({field:t.order}));if(i){var u=i.tolerance;o.boundTolerance=mct(u)?e.signalRef(u.signal):+u,o.boundScale=e.scaleRef(i.scale),o.boundOrient=i.orient}return sct(e.add(Xct(o)))}(h,c,n));var _=n.add(Qct({pulse:c})),w=n.add(nst({pulse:sct(_)},void 0,n.parent()));null!=t.name&&(o=t.name,n.addData(o,new Plt(n,i,_,w)),t.on&&t.on.forEach((function(t){(t.insert||t.remove||t.toggle)&&(0,g.vU)("Marks only support modify triggers."),Blt(t,n,o)})))}function Hlt(t,n){var e,r,i,a=n.config.legend,o=t.encode||{},u=Qst(t,a),c=o.legend||{},s=c.name||void 0,l=c.interactive,f=c.style,h={},d=0;qst.forEach((function(n){return t[n]?(h[n]=t[n],d=d||t[n]):0})),d||(0,g.vU)("Missing valid scale for legend.");var p=function(t,n){var e=t.type||Rst;t.type||1!==function(t){return qst.reduce((function(n,e){return n+(t[e]?1:0)}),0)}(t)||!t.fill&&!t.stroke||(e=Jp(n)?Lst:Vp(n)?Ist:Rst);return e!==Lst?e:Vp(n)?Ist:Lst}(t,n.scaleType(d)),v={title:null!=t.title,scales:h,type:p,vgrad:"symbol"!==p&&u.isVertical()},m=sct(n.add(Zct(null,[v]))),y=sct(n.add(Bct(r={type:p,scale:n.scaleRef(d),count:n.objectProperty(u("tickCount")),limit:n.property(u("symbolLimit")),values:n.objectProperty(t.values),minstep:n.property(t.tickMinStep),formatType:n.property(t.formatType),formatSpecifier:n.property(t.format)})));return p===Lst?(i=[alt(t,d,a,o.gradient),slt(t,a,o.labels,y)],r.count=r.count||n.signalRef("max(2,2*floor((".concat(xct(u.gradientLength()),")/100))"))):p===Ist?i=[olt(t,d,a,o.gradient,y),slt(t,a,o.labels,y)]:(e=function(t,n){var e=Qst(t,n);return{align:e("gridAlign"),columns:e.entryColumns(),center:{row:!0,column:!1},padding:{row:e("rowPadding"),column:e("columnPadding")}}}(t,a),i=[llt(t,a,o,y,xct(e.columns))],r.size=function(t,n,e){var r=xct(Ylt("size",t,e)),i=xct(Ylt("strokeWidth",t,e)),a=xct(function(t,n,e){return tlt("fontSize",t)||function(t,n,e){var r=n.config.style[e];return r&&r[t]}("fontSize",n,e)}(e[1].encode,n,Nst));return gut("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(a,")"),n)}(t,n,i[0].marks)),i=[Kst({role:Put,from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:i,layout:e,interactive:l})],v.title&&i.push(function(t,n,e,r){var i=Qst(t,n),a={enter:{opacity:Wst},update:{opacity:Yst,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Wst}};return Mut(a,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:ylt},angle:{signal:blt},align:{signal:mlt},baseline:{signal:xlt},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ilt({type:Vst,role:But,style:zst,from:r,encode:a},e)}(t,a,o.title,m)),qlt(Kst({role:zut,from:m,encode:Out(Wlt(u,t,a),c,Hst),marks:i,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:l,style:f}),n)}function Wlt(t,n,e){var r={enter:{},update:{}};return Mut(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:e.strokeWidth,strokeDash:e.strokeDash,x:t("legendX"),y:t("legendY"),format:n.format,formatType:n.formatType}),r}function Ylt(t,n,e){return n[t]?'scale("'.concat(n[t],'",datum)'):tlt(t,e[0].encode)}Plt.fromEntries=function(t,n){var e=n.length,r=n[e-1],i=n[e-2],a=n[0],o=null,u=1;for(a&&"load"===a.type&&(a=n[1]),t.add(n[0]);u<e;++u)n[u].params.pulse=sct(n[u-1]),t.add(n[u]),"aggregate"===n[u].type&&(o=n[u]);return new Plt(t,a,i,r,o)},Plt.prototype={countsRef:function(t,n,e){var r,i,a,o=this,u=o.counts||(o.counts={}),c=Rlt(n);return null!=c&&(t=o.scope,r=u[c]),r?e&&e.field&&Llt(t,r.agg.params,e):(a={groupby:t.fieldRef(n,"key"),pulse:sct(o.output)},e&&e.field&&Llt(t,a,e),i=t.add(Tct(a)),r=t.add(Zct({pulse:sct(i)})),r={agg:i,ref:sct(r)},null!=c&&(u[c]=r)),r.ref},tuplesRef:function(){return sct(this.values)},extentRef:function(t,n){return Ilt(t,this,"extent","extent",n,!1)},domainRef:function(t,n){return Ilt(t,this,"domain","values",n,!1)},valuesRef:function(t,n,e){return Ilt(t,this,"vals","values",n,e||!0)},lookupRef:function(t,n){return Ilt(t,this,"lookup","tupleindex",n,!1)},indataRef:function(t,n){return Ilt(t,this,"indata","tupleindex",n,!0,!0)}};var Xlt='item.orient==="'.concat(wst,'"?-90:item.orient==="').concat(kst,'"?90:0');function Glt(t,n){var e=Qst(t=(0,g.HD)(t)?{text:t}:t,n.config.title),r=t.encode||{},i=r.group||{},a=i.name||void 0,o=i.interactive,u=i.style,c=[],s=sct(n.add(Zct(null,[{}])));return c.push(function(t,n,e,r){var i={value:0},a=t.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mut(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:n("dx"),dy:n("dy"),fill:n("color"),font:n("font"),fontSize:n("fontSize"),fontStyle:n("fontStyle"),fontWeight:n("fontWeight"),lineHeight:n("lineHeight")},{align:n("align"),angle:n("angle"),baseline:n("baseline")}),ilt({type:Vst,role:Hut,style:Ust,from:r,encode:o},e)}(t,e,function(t){var n=t.encode;return n&&n.title||(0,g.l7)({name:t.name,interactive:t.interactive,style:t.style},n)}(t),s)),t.subtitle&&c.push(function(t,n,e,r){var i={value:0},a=t.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mut(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:n("dx"),dy:n("dy"),fill:n("subtitleColor"),font:n("subtitleFont"),fontSize:n("subtitleFontSize"),fontStyle:n("subtitleFontStyle"),fontWeight:n("subtitleFontWeight"),lineHeight:n("subtitleLineHeight")},{align:n("align"),angle:n("angle"),baseline:n("baseline")}),ilt({type:Vst,role:Wut,style:Pst,from:r,encode:o},e)}(t,e,r.subtitle,s)),qlt(Kst({role:qut,from:s,encode:Jlt(e,i),marks:c,aria:e("aria"),description:e("description"),zindex:e("zindex"),name:a,interactive:o,style:u}),n)}function Jlt(t,n){var e={enter:{},update:{}};return Mut(e,{orient:t("orient"),anchor:t("anchor"),align:{signal:elt},angle:{signal:Xlt},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Out(e,n,Hst)}function $lt(t,n){var e=[];t.transform&&t.transform.forEach((function(t){e.push(Elt(t,n))})),t.on&&t.on.forEach((function(e){Blt(e,n,t.name)})),n.addDataPipeline(t.name,function(t,n,e){var r,i,a,o,u,c=[],s=null,l=!1,f=!1;t.values?mct(t.values)||yct(t.format)?(c.push(Klt(n,t)),c.push(s=Vlt())):c.push(s=Vlt({$ingest:t.values,$format:t.format})):t.url?yct(t.url)||yct(t.format)?(c.push(Klt(n,t)),c.push(s=Vlt())):c.push(s=Vlt({$request:t.url,$format:t.format})):t.source&&(s=r=(0,g.IX)(t.source).map((function(t){return sct(n.getData(t).output)})),c.push(null));for(i=0,a=e.length;i<a;++i)u=(o=e[i]).metadata,s||u.source||c.push(s=Vlt()),c.push(o),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?s=o:u.changes&&(s=null);r&&(a=r.length-1,c[0]=Kct({derive:l,pulse:a?r:r[0]}),(l||a)&&c.splice(1,0,Vlt()));s||c.push(Vlt());return c.push(nst({})),c}(t,n,e))}function Vlt(t){var n=Zct({},t);return n.metadata={source:!0},n}function Klt(t,n){return qct({url:n.url?t.property(n.url):void 0,async:n.async?t.property(n.async):void 0,values:n.values?t.property(n.values):void 0,format:t.objectProperty(n.format)})}var Qlt=function(t){return t===Mst||t===_st},tft=function(t,n,e){return mct(t)?uft(t.signal,n,e):t===wst||t===_st?n:e},nft=function(t,n,e){return mct(t)?aft(t.signal,n,e):Qlt(t)?n:e},eft=function(t,n,e){return mct(t)?oft(t.signal,n,e):Qlt(t)?e:n},rft=function(t,n,e){return mct(t)?cft(t.signal,n,e):t===_st?{value:n}:{value:e}},ift=function(t,n,e){return mct(t)?sft(t.signal,n,e):t===kst?{value:n}:{value:e}},aft=function(t,n,e){return lft("".concat(t," === '").concat(_st,"' || ").concat(t," === '").concat(Mst,"'"),n,e)},oft=function(t,n,e){return lft("".concat(t," !== '").concat(_st,"' && ").concat(t," !== '").concat(Mst,"'"),n,e)},uft=function(t,n,e){return hft("".concat(t," === '").concat(wst,"' || ").concat(t," === '").concat(_st,"'"),n,e)},cft=function(t,n,e){return hft("".concat(t," === '").concat(_st,"'"),n,e)},sft=function(t,n,e){return hft("".concat(t," === '").concat(kst,"'"),n,e)},lft=function(t,n,e){return n=null!=n?wut(n):n,e=null!=e?wut(e):e,fft(n)&&fft(e)?(n=n?n.signal||(0,g.m8)(n.value):null,e=e?e.signal||(0,g.m8)(e.value):null,{signal:"".concat(t," ? (").concat(n,") : (").concat(e,")")}):[(0,g.l7)({test:t},n)].concat(e||[])},fft=function(t){return null==t||1===Object.keys(t).length},hft=function(t,n,e){return{signal:"".concat(t," ? (").concat(pft(n),") : (").concat(pft(e),")")}},dft=function(t,n,e,r,i){return{signal:(null!=r?"".concat(t," === '").concat(wst,"' ? (").concat(pft(r),") : "):"")+(null!=e?"".concat(t," === '").concat(Mst,"' ? (").concat(pft(e),") : "):"")+(null!=i?"".concat(t," === '").concat(kst,"' ? (").concat(pft(i),") : "):"")+(null!=n?"".concat(t," === '").concat(_st,"' ? (").concat(pft(n),") : "):"")+"(null)"}},pft=function(t){return mct(t)?t.signal:null==t?null:(0,g.m8)(t)},vft=function(t,n){return 0===n?0:mct(t)?{signal:"(".concat(t.signal,") * ").concat(n)}:{value:t*n}},gft=function(t,n){var e=t.signal;return e&&e.endsWith("(null)")?{signal:e.slice(0,-6)+n.signal}:t};function mft(t,n,e,r){var i;if(n&&(0,g.nr)(n,t))return n[t];if((0,g.nr)(e,t))return e[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[zst][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[Nst][i]}return null}function yft(t){var n,e={},r=(0,_a.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i)for(var a in i)e[a]=1}}catch(o){r.e(o)}finally{r.f()}return Object.keys(e)}function bft(t,n){return{scale:t.scale,range:n}}function xft(t,n,e,r,i){var a,o,u,c=Qst(t,n),s=t.orient,l=t.gridScale,f=tft(s,1,-1),h=function(t,n){if(1===n);else if((0,g.Kn)(t)){for(var e=t=(0,g.l7)({},t);null!=e.mult;){if(!(0,g.Kn)(e.mult))return e.mult=mct(n)?{signal:"(".concat(e.mult,") * (").concat(n.signal,")")}:e.mult*n,t;e=e.mult=(0,g.l7)({},e.mult)}e.mult=n}else t=mct(n)?{signal:"(".concat(n.signal,") * (").concat(t||0,")")}:n*(t||0);return t}(t.offset,f),d={enter:a={opacity:Wst},update:u={opacity:Yst},exit:o={opacity:Wst}};Mut(d,{stroke:c("gridColor"),strokeCap:c("gridCap"),strokeDash:c("gridDash"),strokeDashOffset:c("gridDashOffset"),strokeOpacity:c("gridOpacity"),strokeWidth:c("gridWidth")});var p={scale:t.scale,field:Zst,band:i.band,extra:i.extra,offset:i.offset,round:c("tickRound")},v=nft(s,{signal:"height"},{signal:"width"}),m=l?{scale:l,range:0,mult:f,offset:h}:{value:0,offset:h},y=l?{scale:l,range:1,mult:f,offset:h}:(0,g.l7)(v,{mult:f,offset:h});return a.x=u.x=nft(s,p,m),a.y=u.y=eft(s,p,m),a.x2=u.x2=eft(s,y),a.y2=u.y2=nft(s,y),o.x=nft(s,p),o.y=eft(s,p),ilt({type:Jst,role:Fut,key:Zst,from:r,encode:d},e)}function _ft(t,n,e,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+n+","+e+","+r+","+i+")"}}function wft(t,n,e,r){var i,a,o=Qst(t,n),u=t.orient,c=tft(u,-1,1),s={enter:i={opacity:Wst,anchor:wut(o("titleAnchor",null)),align:{signal:elt}},update:a=(0,g.l7)({},i,{opacity:Yst,text:wut(t.title)}),exit:{opacity:Wst}},l={signal:'lerp(range("'.concat(t.scale,'"), ').concat(nlt(0,1,.5),")")};return a.x=nft(u,l),a.y=eft(u,l),i.angle=nft(u,Wst,vft(c,90)),i.baseline=nft(u,rft(u,Mst,_st),{value:Mst}),a.angle=i.angle,a.baseline=i.baseline,Mut(s,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),function(t,n,e,r){var i=function(t,n){return null!=t?(e.update[n]=gft(wut(t),e.update[n]),!1):!Eut(n,r)},a=i(t("titleX"),"x"),o=i(t("titleY"),"y");e.enter.auto=o===a?wut(o):nft(n,wut(o),wut(a))}(o,u,s,e),s.update.align=gft(s.update.align,i.align),s.update.angle=gft(s.update.angle,i.angle),s.update.baseline=gft(s.update.baseline,i.baseline),ilt({type:Vst,role:Nut,style:zst,from:r,encode:s},e)}function kft(t,n){var e,r=function(t,n){var e,r,i,a=n.config,o=a.style,u=a.axis,c="band"===n.scaleType(t.scale)&&a.axisBand,s=t.orient;if(mct(s)){var l=yft([a.axisX,a.axisY]),f=yft([a.axisTop,a.axisBottom,a.axisLeft,a.axisRight]);e={};var h,d=(0,_a.Z)(l);try{for(d.s();!(h=d.n()).done;)e[i=h.value]=nft(s,mft(i,a.axisX,u,o),mft(i,a.axisY,u,o))}catch(m){d.e(m)}finally{d.f()}r={};var p,v=(0,_a.Z)(f);try{for(v.s();!(p=v.n()).done;)r[i=p.value]=dft(s.signal,mft(i,a.axisTop,u,o),mft(i,a.axisBottom,u,o),mft(i,a.axisLeft,u,o),mft(i,a.axisRight,u,o))}catch(m){v.e(m)}finally{v.f()}}else e=s===_st||s===Mst?a.axisX:a.axisY,r=a["axis"+s[0].toUpperCase()+s.slice(1)];return e||r||c?(0,g.l7)({},u,e,r,c):u}(t,n),i=t.encode||{},a=i.axis||{},o=a.name||void 0,u=a.interactive,c=a.style,s=Qst(t,r),l=function(t){var n,e,r=t("tickBand"),i=t("tickOffset");return r?r.signal?(n={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},e={signal:"(".concat(r.signal,") === 'extent'")},(0,g.Kn)(i)||(i={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===r?(n=1,e=!0,i=0):(n=.5,e=!1):(n=t("bandPosition"),e=t("tickExtra")),{extra:e,band:n,offset:i}}(s),f={scale:t.scale,ticks:!!s("ticks"),labels:!!s("labels"),grid:!!s("grid"),domain:!!s("domain"),title:null!=t.title},h=sct(n.add(Zct({},[f]))),d=sct(n.add(Fct({scale:n.scaleRef(t.scale),extra:n.property(l.extra),count:n.objectProperty(t.tickCount),values:n.objectProperty(t.values),minstep:n.property(t.tickMinStep),formatType:n.property(t.formatType),formatSpecifier:n.property(t.format)}))),p=[];return f.grid&&p.push(xft(t,r,i.grid,d,l)),f.ticks&&(e=s("tickSize"),p.push(function(t,n,e,r,i,a){var o,u,c,s=Qst(t,n),l=t.orient,f=tft(l,-1,1),h={enter:o={opacity:Wst},update:c={opacity:Yst},exit:u={opacity:Wst}};Mut(h,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});var d=wut(i);d.mult=f;var p={scale:t.scale,field:Zst,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return c.y=o.y=nft(l,Wst,p),c.y2=o.y2=nft(l,d),u.x=nft(l,p),c.x=o.x=eft(l,Wst,p),c.x2=o.x2=eft(l,d),u.y=eft(l,p),ilt({type:Jst,role:Zut,key:Zst,from:r,encode:h},e)}(t,r,i.ticks,d,e,l))),f.labels&&(e=f.ticks?e:0,p.push(function(t,n,e,r,i,a){var o,u=Qst(t,n),c=t.orient,s=t.scale,l=tft(c,-1,1),f=xct(u("labelFlush")),h=xct(u("labelFlushOffset")),d=u("labelAlign"),p=u("labelBaseline"),v=0===f||!!f,g=wut(i);g.mult=l,g.offset=wut(u("labelPadding")||0),g.offset.mult=l;var m={scale:s,field:Zst,band:.5,offset:rlt(a.offset,u("labelOffset"))},y=nft(c,v?_ft(s,f,'"left"','"right"','"center"'):{value:"center"},ift(c,"left","right")),b=nft(c,rft(c,"bottom","top"),v?_ft(s,f,'"top"','"bottom"','"middle"'):{value:"middle"}),x=_ft(s,f,"-(".concat(h,")"),h,0);v=v&&h;var _={opacity:Wst,x:nft(c,m,g),y:eft(c,m,g)},w={enter:_,update:o={opacity:Yst,text:{field:Ast},x:_.x,y:_.y,align:y,baseline:b},exit:{opacity:Wst,x:_.x,y:_.y}};Mut(w,{dx:!d&&v?nft(c,x):null,dy:!p&&v?eft(c,x):null}),Mut(w,{angle:u("labelAngle"),fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontWeight:u("labelFontWeight"),fontStyle:u("labelFontStyle"),limit:u("labelLimit"),lineHeight:u("labelLineHeight")},{align:d,baseline:p});var k=u("labelBound"),M=u("labelOverlap");return M=M||k?{separation:u("labelSeparation"),method:M,order:"datum.index",bound:k?{scale:s,orient:c,tolerance:k}:null}:void 0,o.align!==y&&(o.align=gft(o.align,y)),o.baseline!==b&&(o.baseline=gft(o.baseline,b)),ilt({type:Vst,role:jut,style:Nst,key:Zst,from:r,encode:w,overlap:M},e)}(t,r,i.labels,d,e,l))),f.domain&&p.push(function(t,n,e,r){var i,a,o=Qst(t,n),u=t.orient,c={enter:i={opacity:Wst},update:a={opacity:Yst},exit:{opacity:Wst}};Mut(c,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});var s=bft(t,0),l=bft(t,1);return i.x=a.x=nft(u,s,Wst),i.x2=a.x2=nft(u,l),i.y=a.y=eft(u,s,Wst),i.y2=a.y2=eft(u,l),ilt({type:Jst,role:Tut,from:r,encode:c},e)}(t,r,i.domain,h)),f.title&&p.push(wft(t,r,i.title,h)),qlt(Kst({role:Aut,from:h,encode:Out(Mft(s,t),a,Hst),marks:p,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:o,interactive:u,style:c}),n)}function Mft(t,n){var e={enter:{},update:{}};return Mut(e,{orient:t("orient"),offset:t("offset")||0,position:bct(n.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(n.scale,'")))')},translate:t("translate"),format:n.format,formatType:n.formatType}),e}function Oft(t,n,e){var r=(0,g.IX)(t.signals),i=(0,g.IX)(t.scales);return e||r.forEach((function(t){return act(t,n)})),(0,g.IX)(t.projections).forEach((function(t){return function(t,n){var e=n.config.projection||{},r={};for(var i in t)"name"!==i&&(r[i]=xst(t[i],i,n));for(var a in e)null==r[a]&&(r[a]=xst(e[a],a,n));n.addProjection(t.name,r)}(t,n)})),i.forEach((function(t){return function(t,n){var e=t.type||"linear";Xp(e)||(0,g.vU)("Unrecognized scale type: "+(0,g.m8)(e)),n.addScale(t.name,{type:e,domain:void 0})}(t,n)})),(0,g.IX)(t.data).forEach((function(t){return $lt(t,n)})),i.forEach((function(t){return ust(t,n)})),(e||r).forEach((function(t){return function(t,n){var e=n.getSignal(t.name),r=t.update;t.init&&(r?(0,g.vU)("Signals can not include both init and update expressions."):(r=t.init,e.initonly=!0)),r&&(r=gut(r,n),e.update=r.$expr,e.params=r.$params),t.on&&t.on.forEach((function(t){return Dct(t,n,e.id)}))}(t,n)})),(0,g.IX)(t.axes).forEach((function(t){return kft(t,n)})),(0,g.IX)(t.marks).forEach((function(t){return qlt(t,n)})),(0,g.IX)(t.legends).forEach((function(t){return Hlt(t,n)})),t.title&&Glt(t.title,n),n.parseLambdas(),n}var Eft=function(t){return Out({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t)};function Sft(t,n){var e=n.config,r=sct(n.root=n.add(cct())),i=function(t,n){var e=function(e){return bct(t[e],n[e])},r=[Dft("background",e("background")),Dft("autosize",yut(e("autosize"))),Dft("padding",_ut(e("padding"))),Dft("width",e("width")||0),Dft("height",e("height")||0)],i=r.reduce((function(t,n){return t[n.name]=n,t}),{}),a={};return(0,g.IX)(t.signals).forEach((function(t){(0,g.nr)(i,t.name)?t=(0,g.l7)(i[t.name],t):r.push(t),a[t.name]=t})),(0,g.IX)(n.signals).forEach((function(t){(0,g.nr)(a,t.name)||(0,g.nr)(i,t.name)||r.push(t)})),r}(t,e);i.forEach((function(t){return act(t,n)})),n.description=t.description||e.description,n.eventConfig=e.events,n.legends=n.objectProperty(e.legend&&e.legend.layout),n.locale=e.locale;var a=n.add(Zct()),o=n.add(Uct(Qut(Eft(t.encode),Xst,Dut,t.style,n,{pulse:sct(a)}))),u=n.add(rst({layout:n.objectProperty(t.layout),legends:n.legends,autosize:n.signalRef("autosize"),mark:r,pulse:sct(o)}));n.operators.pop(),n.pushState(sct(o),sct(u),null),Oft(t,n,i),n.operators.push(u);var c=n.add(jct({mark:r,pulse:sct(u)}));return c=n.add(Qct({pulse:sct(c)})),c=n.add(nst({pulse:sct(c)})),n.addData("root",new Plt(n,a,a,c)),n}function Dft(t,n){return n&&n.signal?{name:t,update:n.signal}:{name:t,value:n}}function Cft(t,n){this.config=t||{},this.options=n||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Aft(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function Tft(t){return((0,g.kJ)(t)?Fft:jft)(t)}function Fft(t){for(var n=t.length,e="[",r=0;r<n;++r){var i=t[r];e+=(r>0?",":"")+((0,g.Kn)(i)?i.signal||Tft(i):(0,g.m8)(i))}return e+"]"}function jft(t){var n,e,r="{",i=0;for(n in t)e=t[n],r+=(++i>1?",":"")+(0,g.m8)(n)+":"+((0,g.Kn)(e)?e.signal||Tft(e):(0,g.m8)(e));return r+"}"}function Zft(t,n,e){return(0,g.Kn)(t)||(0,g.vU)("Input Vega specification must be an object."),n=(0,g.fE)(function(){var t="sans-serif",n="#4c78a8",e="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:n},area:{fill:n},image:null,line:{stroke:n,strokeWidth:2},path:{stroke:n},rect:{fill:n},rule:{stroke:e},shape:{stroke:n},symbol:{fill:n,size:64},text:{fill:e,font:t,fontSize:11},trail:{fill:n,size:2},style:{"guide-label":{fill:e,font:t,fontSize:10},"guide-title":{fill:e,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:e,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:e,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),n,t.config),Sft(t,new Cft(n,e)).toRuntime()}Cft.prototype=Aft.prototype={parse:function(t){return Oft(t,this)},fork:function(){return new Aft(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach((function(n){n.$ref=t.id})),t.refs=null),t},proxy:function(t){var n=t instanceof oct?sct(t):t;return this.add(Vct({value:n}))},addStream:function(t){return this.streams.push(t),t.id=this.id(),t},addUpdate:function(t){return this.updates.push(t),t},finish:function(){var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function e(t,n,e){var r;t&&((r=t.data||(t.data={}))[n]||(r[n]=[])).push(e)}for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},pushState:function(t,n,e){this._encode.push(sct(this.add(nst({pulse:t})))),this._parent.push(n),this._lookup.push(e?sct(this.proxy(e)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return(0,g.fj)(this._parent)},encode:function(){return(0,g.fj)(this._encode)},lookup:function(){return(0,g.fj)(this._lookup)},markpath:function(){var t=this._markpath;return++t[t.length-1]},fieldRef:function(t,n){if((0,g.HD)(t))return lct(t,n);t.signal||(0,g.vU)("Unsupported field reference: "+(0,g.m8)(t));var e=t.signal,r=this.field[e];if(!r){var i={name:this.signalRef(e)};n&&(i.as=n),this.field[e]=r=sct(this.add(Lct(i)))}return r},compareRef:function(t){var n=this,e=!1,r=function(t){return mct(t)?(e=!0,n.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(e=!0,n.exprRef(t.expr)):t},i=(0,g.IX)(t.field).map(r),a=(0,g.IX)(t.order).map(r);return e?sct(this.add(Nct({fields:i,orders:a}))):hct(i,a)},keyRef:function(t,n){var e=!1,r=this.signals;return t=(0,g.IX)(t).map((function(t){return mct(t)?(e=!0,sct(r[t.signal])):t})),e?sct(this.add(Ict({fields:t,flat:n}))):function(t,n){var e={$key:t};return n&&(e.$flat=!0),e}(t,n)},sortRef:function(t){if(!t)return t;var n=pct(t.op,t.field),e=t.order||"ascending";return e.signal?sct(this.add(Nct({fields:n,orders:this.signalRef(e.signal)}))):hct(n,e)},event:function(t,n){var e=t+":"+n;if(!this.events[e]){var r=this.id();this.streams.push({id:r,source:t,type:n}),this.events[e]=r}return this.events[e]},hasOwnSignal:function(t){return(0,g.nr)(this.signals,t)},addSignal:function(t,n){this.hasOwnSignal(t)&&(0,g.vU)("Duplicate signal name: "+(0,g.m8)(t));var e=n instanceof oct?n:this.add(cct(n));return this.signals[t]=e},getSignal:function(t){return this.signals[t]||(0,g.vU)("Unrecognized signal name: "+(0,g.m8)(t)),this.signals[t]},signalRef:function(t){return this.signals[t]?sct(this.signals[t]):((0,g.nr)(this.lambdas,t)||(this.lambdas[t]=this.add(cct(null))),sct(this.lambdas[t]))},parseLambdas:function(){for(var t=Object.keys(this.lambdas),n=0,e=t.length;n<e;++n){var r=t[n],i=gut(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},property:function(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty:function(t){return t&&(0,g.Kn)(t)?this.signalRef(t.signal||Tft(t)):t},exprRef:function(t,n){var e={expr:gut(t,this)};return n&&(e.expr.$name=n),sct(this.add(Pct(e)))},addBinding:function(t,n){this.bindings||(0,g.vU)("Nested signals do not support binding: "+(0,g.m8)(t)),this.bindings.push((0,g.l7)({signal:t},n))},addScaleProj:function(t,n){(0,g.nr)(this.scales,t)&&(0,g.vU)("Duplicate scale or projection name: "+(0,g.m8)(t)),this.scales[t]=this.add(n)},addScale:function(t,n){this.addScaleProj(t,tst(n))},addProjection:function(t,n){this.addScaleProj(t,$ct(n))},getScale:function(t){return this.scales[t]||(0,g.vU)("Unrecognized scale name: "+(0,g.m8)(t)),this.scales[t]},scaleRef:function(t){return sct(this.getScale(t))},scaleType:function(t){return this.getScale(t).params.type},projectionRef:function(t){return this.scaleRef(t)},projectionType:function(t){return this.scaleType(t)},addData:function(t,n){return(0,g.nr)(this.data,t)&&(0,g.vU)("Duplicate data set name: "+(0,g.m8)(t)),this.data[t]=n},getData:function(t){return this.data[t]||(0,g.vU)("Undefined data set name: "+(0,g.m8)(t)),this.data[t]},addDataPipeline:function(t,n){return(0,g.nr)(this.data,t)&&(0,g.vU)("Duplicate data set name: "+(0,g.m8)(t)),this.addData(t,Plt.fromEntries(this,n))}};var Nft="5.22.1";(0,g.l7)(ya,r,a,o,u,c,l,s,f,h,d,p)},47614:function(t){"use strict";var n=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var r,i,a;return e=e||{},r=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===r?1/0:void 0===e.maxLength?80:e.maxLength,a=e.replacer,function t(e,o,u){var c,s,l,f,h,d,p,v,g,m,y,b;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0===(y=JSON.stringify(e,a)))return y;if(p=i-o.length-u,y.length<=p&&(g=y.replace(n,(function(t,n){return n||t+" "}))).length<=p)return g;if(null!=a&&(e=JSON.parse(y),a=void 0),"object"===typeof e&&null!==e){if(v=o+r,l=[],s=0,Array.isArray(e))for(m="[",c="]",p=e.length;s<p;s++)l.push(t(e[s],v,s===p-1?0:1)||"null");else for(m="{",c="}",p=(d=Object.keys(e)).length;s<p;s++)f=d[s],h=JSON.stringify(f)+": ",void 0!==(b=t(e[f],v,h.length+(s===p-1?0:1)))&&l.push(h+b);if(l.length>0)return[m,r+l.join(",\n"+v),c].join("\n"+o)}return y}(t,"",0)}}}]);
//# sourceMappingURL=7160.fe8b036a.chunk.js.map