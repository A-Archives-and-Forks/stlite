"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[5440],{75440:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var a=r(72176),n=r(40252),s=r(2343),i=r(58278),d=r(80812);const l=528;function o(e){let{element:t,width:r,endpoints:o,elementMgr:u}=e;const c=(0,a.useRef)(null),{type:m,url:p,startTime:f,subtitles:h,endTime:v,loop:y,autoplay:E,muted:T}=t,L=(0,i.PY)(p),g=(0,i.$m)(h),w=(0,a.useMemo)((()=>{if(!t.id)return!0;const e=u.getElementState(t.id,"preventAutoplay");return e||u.setElementState(t.id,"preventAutoplay",!0),null!==e&&void 0!==e&&e}),[t.id,u]);(0,a.useEffect)((()=>{c.current&&(c.current.currentTime=f)}),[f]),(0,a.useEffect)((()=>{const e=c.current,r=()=>{e&&(e.currentTime=t.startTime)};return e&&e.addEventListener("loadedmetadata",r),()=>{e&&e.removeEventListener("loadedmetadata",r)}}),[t]),(0,a.useEffect)((()=>{const e=c.current;if(!e)return;let t=!1;const r=()=>{v>0&&e.currentTime>=v&&(y?(e.currentTime=f||0,e.play()):t||(t=!0,e.pause()))};return v>0&&e.addEventListener("timeupdate",r),()=>{e&&v>0&&e.removeEventListener("timeupdate",r)}}),[v,y,f]),(0,a.useEffect)((()=>{const e=c.current;if(!e)return;const t=()=>{y&&(e.currentTime=f||0,e.play())};return e.addEventListener("ended",t),()=>{e&&e.removeEventListener("ended",t)}}),[y,f]);const P=e=>{const{startTime:r,endTime:a,loop:n,autoplay:s,muted:i}=t,d=new URL(e);if(r&&!isNaN(r)&&d.searchParams.append("start",r.toString()),a&&!isNaN(a)&&d.searchParams.append("end",a.toString()),n){d.searchParams.append("loop","1");const e=d.pathname.split("/").pop();e&&d.searchParams.append("playlist",e)}return s&&d.searchParams.append("autoplay","1"),i&&d.searchParams.append("mute","1"),d.toString()};if(m===n.Ce.Type.YOUTUBE_IFRAME){const e=0!==r?.75*r:l;return(0,d.jsx)("iframe",{className:"stVideo","data-testid":"stVideo",title:L,src:P(L),width:r,height:e,style:{colorScheme:"normal"},frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0})}return(0,d.jsx)("video",{className:"stVideo","data-testid":"stVideo",ref:c,controls:!0,muted:T,autoPlay:E&&!w,src:o.buildMediaURL(L),style:{width:r,height:0===r?l:void 0},crossOrigin:s.LD&&g.length>0?"anonymous":void 0,children:g&&g.map(((e,t)=>(0,d.jsx)("track",{kind:"captions",src:o.buildMediaURL(e.url),label:e.label,default:0===t},t)))})}}}]);
//# sourceMappingURL=5440.9ecda401.chunk.js.map