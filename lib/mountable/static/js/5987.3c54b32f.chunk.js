"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[5987],{81805:(e,t,r)=>{r.d(t,{X:()=>a,o:()=>o});var n=r(72176),i=r(61872);class o{constructor(){this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}manageFormClearListener(e,t,r){(0,i.se)(this.formClearListener)&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,i._L)(t)&&(this.formClearListener=e.addFormClearedListener(t,r),this.lastWidgetMgr=e,this.lastFormId=t))}disconnect(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}function a(e){let{element:t,widgetMgr:r,onFormCleared:o}=e;(0,n.useEffect)((()=>{if(!(0,i._L)(t.formId))return;const e=r.addFormClearedListener(t.formId,o);return()=>{e.disconnect()}}),[t,r,o])}},5987:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(72176),i=r(60259),o=r.n(i),a=r(93223),l=r(60265),d=r(89176),s=r(15521),u=r.n(s),g=r(69204),c=r(40252),f=r(61872),m=r(37097),h=r(89183),p=r(76355),b=r(76341),v=r(271),y=r(13637);const w=(0,v.A)("div",{target:"ew7r33m3"})((e=>{let{disabled:t,theme:r}=e;return{alignItems:"center",backgroundColor:t?r.colors.gray:r.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",justifyContent:"center",height:r.sizes.sliderThumb,width:r.sizes.sliderThumb,":focus":{outline:"none"},":focus-visible":{boxShadow:`0 0 0 0.2rem ${(0,y.No)(r.colors.primary,.5)}`}}}),""),C=(0,v.A)("div",{target:"ew7r33m2"})((e=>{let{disabled:t,theme:r}=e;return{fontFamily:r.genericFonts.codeFont,fontSize:r.fontSizes.sm,color:t?r.colors.gray:r.colors.primary,top:"-1.6em",position:"absolute",whiteSpace:"nowrap",backgroundColor:r.colors.transparent,lineHeight:r.lineHeights.base,fontWeight:r.fontWeights.normal,pointerEvents:"none"}}),""),S=(0,v.A)("div",{target:"ew7r33m1"})((e=>{let{theme:t}=e;return{fontSize:t.fontSizes.sm,paddingBottom:t.spacing.none,paddingLeft:t.spacing.none,paddingRight:t.spacing.none,paddingTop:"0.65em",justifyContent:"space-between",alignItems:"center",display:"flex"}}),""),x=(0,v.A)("div",{target:"ew7r33m0"})((e=>{let{disabled:t,theme:r}=e;return{lineHeight:r.lineHeights.base,fontWeight:r.fontWeights.normal,fontFamily:r.genericFonts.codeFont,color:t?r.colors.fadedText40:"inherit"}}),"");var M=r(80812);function T(e){var t;let{disabled:r,element:i,widgetMgr:d,width:s,fragmentId:u}=e;const[c,v]=(0,g.t)({getStateFromWidgetMgr:F,getDefaultStateFromProto:k,getCurrStateFromProto:R,updateWidgetMgrState:I,element:i,widgetMgr:d,fragmentId:u}),[y,T]=(0,n.useState)(c),A=(0,n.useRef)(null),[j]=(0,n.useState)([]),[D]=(0,n.useState)([]),{colors:E,fonts:$,fontSizes:z,spacing:U}=(0,l.u)(),V={width:s},H=y.map((e=>B(e,i))),P=B(i.min,i),X=B(i.max,i),_=i.label;(0,n.useEffect)((()=>{T(c)}),[c]);const K=(0,n.useCallback)((0,f.sg)(200,(e=>{v({value:e,fromUi:!0})})),[]),N=(0,n.useCallback)((e=>{let{value:t}=e;T(t),K(t)}),[K]),G=(0,n.useCallback)((()=>(0,M.jsxs)(S,{"data-testid":"stSliderTickBar",children:[(0,M.jsx)(x,{disabled:r,"data-testid":"stSliderTickBarMin",children:P}),(0,M.jsx)(x,{disabled:r,"data-testid":"stSliderTickBarMax",children:X})]})),[P,X,r]),O=(0,n.useCallback)(n.forwardRef((function(e,t){const{$thumbIndex:r}=e,i=r||0;j[i]=t,D[i]||=n.createRef();const a=o()(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]),l=H[i];return(0,M.jsx)(w,{...a,disabled:!0===e.$disabled,ref:j[i],"aria-valuetext":l,"aria-label":_,children:(0,M.jsx)(C,{"data-testid":"stSliderThumbValue",disabled:!0===e.$disabled,ref:D[i],children:l})})})),[]);(0,n.useEffect)((()=>{var e,t,r;D.map(((e,t)=>{e.current&&(e.current.innerText=H[t])})),j.map(((e,t)=>{e.current&&e.current.setAttribute("aria-valuetext",H[t])}));!function(e,t,r,n,i){if(!e||!t||!n)return;W(e,t,n),r&&i&&(W(e,r,i),function(e,t,r,n,i){const o=24,a=e.getBoundingClientRect(),l=t.getBoundingClientRect(),d=r.getBoundingClientRect(),s=n.getBoundingClientRect(),u=i.getBoundingClientRect(),g=a.left+a.width/2,c=l.left+l.width/2,f=d.left+d.width/2,m=c-s.width/2>=a.left,h=f+u.width/2<=a.right,p=l.left-s.width>=a.left,b=d.right+u.width<=a.right,v=m?s.width/2:s.width,y=h?u.width/2:u.width;if(f-y-(c+v)>o)return W(e,t,n),void W(e,r,i);if(p&&b)return n.style.left="",n.style.right=`${Math.round(l.width)}px`,i.style.left=`${Math.round(d.width)}px`,void(i.style.right="");c<g?(W(e,t,n),i.style.left=`${Math.round(c+v+o-f)}px`,i.style.right=""):(W(e,r,i),n.style.left="",n.style.right=-Math.round(f-y-o-c)+"px")}(e,t,r,n,i))}(null!==(e=A.current)&&void 0!==e?e:null,j[0].current,null===(t=j[1])||void 0===t?void 0:t.current,D[0].current,null===(r=D[1])||void 0===r?void 0:r.current)}));const q=(0,n.useCallback)((e=>{let{$disabled:t}=e;return{height:U.twoXS,...t?{background:E.darkenedBgMix25}:{}}}),[E,U]);return(0,M.jsxs)("div",{ref:A,className:"stSlider","data-testid":"stSlider",style:V,children:[(0,M.jsx)(m.L,{label:i.label,disabled:r,labelVisibility:(0,f.yv)(null===(t=i.labelVisibility)||void 0===t?void 0:t.value),children:i.help&&(0,M.jsx)(h.j,{children:(0,M.jsx)(p.A,{content:i.help,placement:b.W.TOP_RIGHT})})}),(0,M.jsx)(a.A,{min:i.min,max:i.max,step:i.step,value:L(y,i),onChange:N,disabled:r,overrides:{Thumb:O,Tick:{style:{fontFamily:$.monospace}},Track:{style:{backgroundColor:"none !important",paddingBottom:U.none,paddingLeft:U.none,paddingRight:U.none,paddingTop:`calc(${z.sm} * 1.35)`}},InnerTrack:{style:q},TickBar:G}})]})}function F(e,t){return e.getDoubleArrayValue(t)}function k(e){return e.default}function R(e){return e.value}function I(e,t,r,n){t.setDoubleArrayValue(e,r.value,{fromUi:r.fromUi},n)}function B(e,t){const{format:r,options:n}=t;return function(e){const{dataType:t}=e;return t===c.Ap.DataType.DATETIME||t===c.Ap.DataType.DATE||t===c.Ap.DataType.TIME}(t)?u().utc(e/1e3).format(r):n.length>0?(0,d.sprintf)(r,n[e]):(0,d.sprintf)(r,e)}function L(e,t){const{min:r,max:n}=t;let i=e[0],o=e.length>1?e[1]:e[0];return i>o&&(i=o),i<r&&(i=r),i>n&&(i=n),o<r&&(o=r),o>n&&(o=n),e.length>1?[i,o]:[i]}function W(e,t,r){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),o=r.getBoundingClientRect(),a=i.left+i.width/2,l=a-o.width/2<n.left,d=a+o.width/2>n.right;r.style.left=l?"0":"",r.style.right=d?"0":""}const A=(0,n.memo)(T)},69204:(e,t,r)=>{r.d(t,{_:()=>a,t:()=>l});var n=r(72176),i=r(81805),o=r(61872);function a(e){let{getStateFromWidgetMgr:t,getDefaultState:r,updateWidgetMgrState:a,element:l,widgetMgr:d,fragmentId:s,onFormCleared:u}=e;const[g,c]=(0,n.useState)((()=>{var e;return null!==(e=t(d,l))&&void 0!==e?e:r(d,l)})),[f,m]=(0,n.useState)({value:g,fromUi:!1});(0,n.useEffect)((()=>{(0,o.hX)(f)||(m(null),c(f.value),a(l,d,f,s))}),[f,a,l,d,s]);const h=(0,n.useCallback)((()=>{m({value:r(d,l),fromUi:!0}),null===u||void 0===u||u()}),[m,l,r,d,u]);return(0,i.X)({widgetMgr:d,element:l,onFormCleared:h}),[g,m]}function l(e){let{getStateFromWidgetMgr:t,getDefaultStateFromProto:r,getCurrStateFromProto:i,updateWidgetMgrState:o,element:l,widgetMgr:d,fragmentId:s,onFormCleared:u}=e;const g=(0,n.useCallback)(((e,t)=>r(t)),[r]),[c,f]=a({getStateFromWidgetMgr:t,getDefaultState:g,updateWidgetMgrState:o,element:l,widgetMgr:d,fragmentId:s,onFormCleared:u});return(0,n.useEffect)((()=>{l.setValue&&(l.setValue=!1,f({value:i(l),fromUi:!1}))}),[l,i,f]),[c,f]}}}]);
//# sourceMappingURL=5987.3c54b32f.chunk.js.map