(this["webpackJsonp@stlite/mountable"]=this["webpackJsonp@stlite/mountable"]||[]).push([[44],{1765:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var n=a(3),i=a(2),o=a(4),r=a(79),l=a(5),s=a(6),u=a(0),d=a.n(u),c=a(42),m=a(1778),h=a(68),b=a(1366),p=a(198),f=a(20),g=a(35),v=a(114),y=a.n(v),j=a(119),T=a(120),R=a(56),V=a(8),O=a(26),k=Object(V.a)("div",{target:"e88czh83"})((function(e){var t=e.disabled,a=e.theme;return{alignItems:"center",backgroundColor:t?a.colors.gray:a.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",height:a.radii.xl,justifyContent:"center",width:a.radii.xl,":focus":{boxShadow:"0 0 0 0.2rem ".concat(Object(O.g)(a.colors.primary,.5)),outline:"none"}}}),""),x=Object(V.a)("div",{target:"e88czh82"})((function(e){var t=e.disabled,a=e.theme;return{fontFamily:a.fonts.monospace,fontSize:a.fontSizes.sm,paddingBottom:a.spacing.twoThirdsSmFont,color:t?a.colors.gray:a.colors.primary,top:"-22px",position:"absolute",whiteSpace:"nowrap",backgroundColor:a.colors.transparent,lineHeight:a.lineHeights.base,fontWeight:"normal"}}),""),w=Object(V.a)("div",{target:"e88czh81"})((function(e){var t=e.theme;return{paddingBottom:t.spacing.none,paddingLeft:t.spacing.none,paddingRight:t.spacing.none,paddingTop:t.spacing.twoThirdsSmFont,justifyContent:"space-between",alignItems:"center",display:"flex"}}),""),S=Object(V.a)("div",{target:"e88czh80"})((function(e){var t=e.disabled,a=e.theme;return{lineHeight:a.lineHeights.base,fontWeight:"normal",fontSize:a.fontSizes.sm,fontFamily:a.fonts.monospace,color:t?a.colors.fadedText40:"inherit"}}),""),C=a(1),B=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).formClearHelper=new p.b,o.state=void 0,o.sliderRef=d.a.createRef(),o.thumbRef=[],o.thumbValueRef=[],o.commitWidgetValueDebounced=void 0,o.commitWidgetValue=function(e){o.props.widgetMgr.setDoubleArrayValue(o.props.element,o.state.value,e)},o.onFormCleared=function(){o.setState((function(e,t){return{value:t.element.default}}),(function(){return o.commitWidgetValue({fromUi:!0})}))},o.handleChange=function(e){var t=e.value;o.setState({value:t},(function(){return o.commitWidgetValueDebounced({fromUi:!0})}))},o.renderThumb=d.a.forwardRef((function(e,t){var a,i=e.$value,r=e.$thumbIndex,l=r||0;o.thumbRef[l]=t,(a=o.thumbValueRef)[l]||(a[l]=d.a.createRef());var s=i?o.formatValue(i[r]):"",u=Object(c.pick)(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]);return o.props.element.options.length>0||o.isDateTimeType(),o.thumbValueAlignment(o.thumbRef[l].current,o.thumbValueRef[l].current),Object(C.jsx)(k,Object(n.a)(Object(n.a)({},u),{},{disabled:!0===e.$disabled,ref:o.thumbRef[l],"aria-valuetext":s,"aria-label":o.props.element.label,children:Object(C.jsx)(x,{className:"StyledThumbValue","data-testid":"stThumbValue",disabled:!0===e.$disabled,ref:o.thumbValueRef[l],children:s})}))})),o.renderTickBar=function(){var e=o.props,t=e.disabled,a=e.element,n=a.max,i=a.min;return Object(C.jsxs)(w,{"data-testid":"stTickBar",children:[Object(C.jsx)(S,{disabled:t,"data-testid":"stTickBarMin",children:o.formatValue(i)}),Object(C.jsx)(S,{disabled:t,"data-testid":"stTickBarMax",children:o.formatValue(n)})]})},o.commitWidgetValueDebounced=Object(g.b)(200,o.commitWidgetValue.bind(Object(r.a)(o))),o.state={value:o.initialValue},o}return Object(o.a)(a,[{key:"initialValue",get:function(){var e=this.props.widgetMgr.getDoubleArrayValue(this.props.element);return void 0!==e?e:this.props.element.default}},{key:"componentDidMount",value:function(){for(var e=0;e<Math.min(this.thumbRef.length,this.thumbValueRef.length);e++)this.thumbValueAlignment(this.thumbRef[e].current,this.thumbValueRef[e].current);this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1,this.setState({value:t},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"value",get:function(){var e=this.props.element,t=e.min,a=e.max,n=this.state.value,i=n[0],o=n.length>1?n[1]:n[0];return i>o&&(i=o),i<t&&(i=t),i>a&&(i=a),o<t&&(o=t),o>a&&(o=a),n.length>1?[i,o]:[i]}},{key:"isDateTimeType",value:function(){var e=this.props.element.dataType;return e===f.t.DataType.DATETIME||e===f.t.DataType.DATE||e===f.t.DataType.TIME}},{key:"formatValue",value:function(e){var t=this.props.element,a=t.format,n=t.options;return this.isDateTimeType()?y.a.utc(e/1e3).format(a):n.length>0?Object(b.sprintf)(a,n[e]):Object(b.sprintf)(a,e)}},{key:"thumbValueAlignment",value:function(e,t){var a=this.sliderRef.current;if(a&&e&&t){var n=a.getBoundingClientRect(),i=e.getBoundingClientRect(),o=t.getBoundingClientRect(),r=i.left+i.width/2,l=r-o.width/2<n.left,s=r+o.width/2>n.right;t.style.left=l?"0":"",t.style.right=s?"0":""}}},{key:"render",value:function(){var e,t=this.props,a=t.disabled,i=t.element,o=t.theme,r=t.width,l=t.widgetMgr,s=o.colors,u=o.fonts,d=o.fontSizes,c=o.spacing,h={width:r};return this.formClearHelper.manageFormClearListener(l,i.formId,this.onFormCleared),Object(C.jsxs)("div",{ref:this.sliderRef,className:"stSlider",style:h,children:[Object(C.jsx)(j.d,{label:i.label,disabled:a,labelVisibility:Object(g.k)(null===(e=i.labelVisibility)||void 0===e?void 0:e.value),children:i.help&&Object(C.jsx)(j.b,{children:Object(C.jsx)(T.a,{content:i.help,placement:R.b.TOP_RIGHT})})}),Object(C.jsx)(m.a,{min:i.min,max:i.max,step:i.step,value:this.value,onChange:this.handleChange,disabled:a,overrides:{Root:{style:{paddingTop:c.twoThirdsSmFont}},Thumb:this.renderThumb,Tick:{style:{fontFamily:u.monospace,fontSize:d.sm}},Track:{style:{backgroundColor:"none !important",paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:c.twoThirdsSmFont}},InnerTrack:{style:function(e){var t=e.$disabled;return Object(n.a)({height:"4px"},t?{background:s.darkenedBgMix25}:{})}},TickBar:this.renderTickBar}})]})}}]),a}(d.a.PureComponent),D=Object(h.d)(B)}}]);
//# sourceMappingURL=44.c68040e0.chunk.js.map