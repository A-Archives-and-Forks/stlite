/*! For license information please see 2876.50ad6e6c.chunk.js.LICENSE.txt */
var stlite;!function(){"use strict";var e={22523:function(e){function t(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",o=0,a=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(a===s-1||1===i);else if(a!==s-1&&2===i){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",o=0):o=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),a=s,i=0;continue}}else if(2===r.length||1===r.length){r="",o=0,a=s,i=0;continue}t&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+="/"+e.slice(a+1,s):r=e.slice(a+1,s),o=s-a-1;a=s,i=0}else 46===n&&-1!==i?++i:i=-1}return r}var r={resolve:function(){for(var e,r="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var i;a>=0?i=arguments[a]:(void 0===e&&(e=process.cwd()),i=e),t(i),0!==i.length&&(r=i+"/"+r,o=47===i.charCodeAt(0))}return r=n(r,!o),o?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&o&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var o=arguments[n];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length,i=a-o,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,c=i<l?i:l,u=-1,f=0;f<=c;++f){if(f===c){if(l>c){if(47===n.charCodeAt(s+f))return n.slice(s+f+1);if(0===f)return n.slice(s+f)}else i>c&&(47===e.charCodeAt(o+f)?u=f:0===f&&(u=0));break}var p=e.charCodeAt(o+f);if(p!==n.charCodeAt(s+f))break;47===p&&(u=f)}var h="";for(f=o+u+1;f<=a;++f)f!==a&&47!==e.charCodeAt(f)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(s+u):(s+=u,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,o=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(n=e.charCodeAt(i))){if(!a){o=i;break}}else a=!1;return-1===o?r?"/":".":r&&1===o?"//":e.slice(0,o)},basename:function(e,n){if(void 0!==n&&"string"!==typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,o=0,a=-1,i=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,l=-1;for(r=e.length-1;r>=0;--r){var c=e.charCodeAt(r);if(47===c){if(!i){o=r+1;break}}else-1===l&&(i=!1,l=r+1),s>=0&&(c===n.charCodeAt(s)?-1===--s&&(a=r):(s=-1,a=l))}return o===a?a=l:-1===a&&(a=e.length),e.slice(o,a)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!i){o=r+1;break}}else-1===a&&(i=!1,a=r+1);return-1===a?"":e.slice(o,a)},extname:function(e){t(e);for(var n=-1,r=0,o=-1,a=!0,i=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===o&&(a=!1,o=s+1),46===l?-1===n?n=s:1!==i&&(i=1):-1!==n&&(i=-1);else if(!a){r=s+1;break}}return-1===n||-1===o||0===i||1===i&&n===o-1&&n===r+1?"":e.slice(n,o)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,o=e.charCodeAt(0),a=47===o;a?(n.root="/",r=1):r=0;for(var i=-1,s=0,l=-1,c=!0,u=e.length-1,f=0;u>=r;--u)if(47!==(o=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===o?-1===i?i=u:1!==f&&(f=1):-1!==i&&(f=-1);else if(!c){s=u+1;break}return-1===i||-1===l||0===f||1===f&&i===l-1&&i===s+1?-1!==l&&(n.base=n.name=0===s&&a?e.slice(1,l):e.slice(s,l)):(0===s&&a?(n.name=e.slice(1,i),n.base=e.slice(1,l)):(n.name=e.slice(s,i),n.base=e.slice(s,l)),n.ext=e.slice(i,l)),s>0?n.dir=e.slice(0,s-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){t=function(){return n};var n={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new L(r||[]);return a(i,"_invoke",{value:k(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}n.wrap=f;var h={};function g(){}function d(){}function m(){}var y={};u(y,s,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(P([])));b&&b!==r&&o.call(b,s)&&(y=b);var _=m.prototype=g.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(t,n){function r(a,i,s,l){var c=p(t[a],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==e(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):n.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,o){r(e,t,n,o)}))}return i=i?i.then(o,o):o()}})}function k(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return C()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=A(i,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function A(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=m,a(_,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:d,configurable:!0}),d.displayName=u(m,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},n.awrap=function(e){return{__await:e}},w(x.prototype),u(x.prototype,l,(function(){return this})),n.AsyncIterator=x,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new x(f(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},n}var r;!function(e){function t(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e}function n(e){return Array.isArray(e)}function r(e,o){if(e===o)return!0;if(t(e)||t(o))return!1;var a=n(e),i=n(o);return a===i&&(a&&i?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;++n)if(!r(e[n],t[n]))return!1;return!0}(e,o):function(e,t){if(e===t)return!0;for(var n in e)if(void 0!==e[n]&&!(n in t))return!1;for(var n in t)if(void 0!==t[n]&&!(n in e))return!1;for(var n in e){var o=e[n],a=t[n];if(void 0!==o||void 0!==a){if(void 0===o||void 0===a)return!1;if(!r(o,a))return!1}}return!0}(e,o))}function o(e){return t(e)?e:n(e)?function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=o(e[n]);return t}(e):function(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=o(r))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=r,e.deepCopy=o}(r||(r={}));!function(){function e(){this._types=[],this._values=[]}e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0}}();var o,a,i=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}();function s(e){for(var t=0,n=0,r=e.length;n<r;++n)n%4===0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}!function(e){e.getRandomValues=function(){var e="undefined"!==typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"===typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:s}()}(o||(o={})),function(e){e.uuid4=function(e){for(var t=new Uint8Array(16),n=new Array(256),r=0;r<16;++r)n[r]="0"+r.toString(16);for(r=16;r<256;++r)n[r]=r.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(o.getRandomValues)}(a||(a={}));var u=n(22523),f=n.n(u);function p(e,t){var n,r=f().normalize(t),o=[],a=c(f().dirname(r).split("/"));try{for(a.s();!(n=a.n()).done;){var i=n.value;o.push(i);var s=o.join("/");if(e.FS.analyzePath(s).exists){if(e.FS.isDir(s))throw new Error('"'.concat(s,'" already exists and is not a directory.'))}else try{e.FS.mkdir(s)}catch(l){throw console.error('Failed to create a directory "'.concat(s,'"')),l}}}catch(l){a.e(l)}finally{a.f()}}function h(e,t,n,r){p(e,t),e.FS.writeFile(t,n,r)}function g(e,t,n){p(e,n),e.FS.rename(t,n)}function d(e){e.forEach((function(e){var t;try{t=new URL(e)}catch(n){return}if("emfs:"===t.protocol||"file:"===t.protocol)throw new Error('"emfs:" and "file:" protocols are not allowed for the requirement ('.concat(e,")"))}))}var m,y,v=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},b=self,_=new i;function w(e){b.postMessage({type:"event:progress",data:{message:e}})}var x=function(){return v(this,void 0,void 0,t().mark((function e(){var n,r,o,a,i,s,l,c,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.promise;case 2:return n=e.sent,r=n.entrypoint,o=n.files,a=n.requirements,i=n.wheels,s=n.mountedSitePackagesSnapshotFilePath,l=n.pyodideEntrypointUrl,w("Loading Pyodide."),console.debug("Import the entrypoint script."),importScripts(null!==l&&void 0!==l?l:"https://cdn.jsdelivr.net/pyodide/v0.22.1/full/pyodide.js"),console.debug("Loading Pyodide"),e.next=15,loadPyodide({stdout:console.log,stderr:console.error});case 15:return m=e.sent,console.debug("Loaded Pyodide"),w("Mounting files."),Object.keys(o).forEach((function(e){var t=o[e],n=t.data,r=t.opts;console.debug('Write a file "'.concat(e,'"')),h(m,e,n,r)})),w("Loading the initially required packages."),console.debug("Loading the initially necessary packages"),e.next=23,m.loadPackage(["ssl"]);case 23:if(console.debug("Loaded the initially necessary packages"),!s){e.next=36;break}return w("Restoring the snapshot."),e.next=28,m.runPythonAsync("import tarfile, shutil, site");case 28:return e.next=30,m.runPythonAsync("\n      site_packages_dirs = site.getsitepackages()\n      for site_packages in site_packages_dirs:\n          shutil.rmtree(site_packages)\n    ");case 30:return console.debug("Unarchive ".concat(s)),e.next=33,m.runPythonAsync('\n      with tarfile.open("'.concat(s,'", "r") as tar_gz_file:\n          tar_gz_file.extractall("/")\n    '));case 33:console.debug("Restored the snapshot"),e.next=56;break;case 36:if(!i){e.next=55;break}return w("Installing streamlit and its dependencies."),console.debug("Loading tornado, pyarrow, and streamlit"),e.next=41,m.loadPackage("micropip");case 41:return c=m.pyimport("micropip"),e.next=44,c.install.callKwargs([i.tornado,i.pyarrow],{keep_going:!0});case 44:return e.next=46,c.install.callKwargs([i.streamlit],{keep_going:!0});case 46:return console.debug("Loaded tornado, pyarrow, and streamlit"),w("Installing the requirements."),console.debug("Installing the requirements:",a),d(a),e.next=52,c.install.callKwargs(a,{keep_going:!0});case 52:console.debug("Installed the requirements:",a),e.next=56;break;case 55:throw new Error("Neither snapshot nor wheel files are provided.");case 56:return e.next=58,m.runPythonAsync("\n    import importlib\n    importlib.invalidate_caches()\n  ");case 58:return w("Loading streamlit package."),console.debug("Loading the Streamlit package"),e.next=62,m.runPythonAsync("\n      import streamlit.runtime\n      import streamlit.web\n  ");case 62:return console.debug("Loaded the Streamlit package"),w("Setting up the loggers."),console.debug("Setting the loggers"),e.next=67,m.runPythonAsync("\n      import logging\n      import streamlit.logger\n\n      streamlit.logger.get_logger = logging.getLogger\n      streamlit.logger.setup_formatter = None\n      streamlit.logger.update_formatter = lambda *a, **k: None\n      streamlit.logger.set_log_level = lambda *a, **k: None\n  ");case 67:return u=function(e){e.startsWith("CRITICAL")||e.startsWith("ERROR")?console.error(e):e.startsWith("WARNING")?console.warn(e):e.startsWith("INFO")?console.info(e):e.startsWith("DEBUG")?console.debug(e):console.log(e)},self.__logCallback__=u,e.next=71,m.runPythonAsync('\n      from js import __logCallback__\n\n\n      class JsHandler(logging.Handler):\n          def emit(self, record):\n              msg = self.format(record)\n              __logCallback__(msg)\n\n\n      main_formatter = logging.Formatter("%(levelname)s:%(name)s:%(message)s")\n\n      js_handler = JsHandler()\n      js_handler.setFormatter(main_formatter)\n\n      root_logger = logging.getLogger()\n      root_logger.handlers.clear()\n      root_logger.addHandler(js_handler)\n      root_logger.setLevel(logging.DEBUG)\n\n      streamlit_handler = logging.getLogger("streamlit")\n      streamlit_handler.setLevel(logging.DEBUG)\n  ');case 71:return console.debug("Set the loggers"),w("Mocking some Streamlit functions for the browser environment."),console.debug("Mocking some Streamlit functions"),e.next=76,m.runPythonAsync("\n    import streamlit\n    import contextlib\n\n    @contextlib.contextmanager\n    def spinner(*args, **kwargs):\n        yield\n\n    streamlit.spinner = spinner\n    streamlit.runtime.caching.cache_utils.spinner = spinner\n    streamlit.runtime.legacy_caching.caching.spinner = spinner\n  ");case 76:return console.debug("Mocked some Streamlit functions"),w("Booting up the Streamlit server."),console.debug("Defining the bootstrap functions"),e.next=81,m.runPythonAsync('\n    import asyncio\n    import os\n    import streamlit\n    import streamlit.web.bootstrap as bootstrap\n    from streamlit.web.server import Server\n\n\n    class BadArgumentUsage(Exception):\n        pass\n\n\n    class BadParameter(Exception):\n        pass\n\n\n    # Mimic streamlit.web.bootstrap.run() but exclude some code unnecessary for stlite environment\n    def run(\n        main_script_path,\n        command_line,\n        args,\n        flag_options,\n    ) -> None:\n        bootstrap._fix_sys_path(main_script_path)\n        bootstrap._fix_matplotlib_crash()\n        bootstrap._fix_sys_argv(main_script_path, args)\n        bootstrap._fix_pydeck_mapbox_api_warning()\n        bootstrap._install_pages_watcher(main_script_path)\n\n        # Create the server. It won\'t start running yet.\n        server = Server(main_script_path, command_line)\n\n        # Run the server.\n        asyncio.get_event_loop().create_task(server.start())\n\n\n    def _get_command_line_as_string():\n        return ""  # TODO\n\n\n    def _main_run(file, args=None, flag_options=None):\n        if args is None:\n            args = []\n\n        if flag_options is None:\n            flag_options = {}\n\n        command_line = _get_command_line_as_string()\n\n        # Set a global flag indicating that we\'re "within" streamlit.\n        streamlit._is_running_with_streamlit = True\n\n        # check_credentials()  # Disable credential check on Pyodide\n\n        run(file, command_line, args, flag_options)  # Call this customized run function instead of the original bootstrap.run.\n\n\n    def main_hello(**kwargs):\n        """Runs the Hello World script."""\n        from streamlit.hello import Hello\n\n        bootstrap.load_config_options(flag_options=kwargs)\n        filename = Hello.__file__\n        _main_run(filename, flag_options=kwargs)\n\n\n    ACCEPTED_FILE_EXTENSIONS = ("py", "py3")\n\n\n    def main_run(target, args=None, **kwargs):\n        """Run a Python script, piping stderr to Streamlit.\n\n        The script can be local or it can be an url. In the latter case, Streamlit\n        will download the script to a temporary file and runs this file.\n\n        """\n        bootstrap.load_config_options(flag_options=kwargs)\n\n        _, extension = os.path.splitext(target)\n        if extension[1:] not in ACCEPTED_FILE_EXTENSIONS:\n            if extension[1:] == "":\n                raise BadArgumentUsage(\n                    "Streamlit requires raw Python (.py) files, but the provided file has no extension.\\nFor more information, please see https://docs.streamlit.io"\n                )\n            else:\n                raise BadArgumentUsage(\n                    "Streamlit requires raw Python (.py) files, not %s.\\nFor more information, please see https://docs.streamlit.io"\n                    % extension\n                )\n\n        # stlite deals with the URL input in the JS layer,\n        # so Python code does not take care of it and\n        # `target` here can be assumed to be a file path, not a URL.\n\n        if not os.path.exists(target):\n            raise BadParameter("File does not exist: {}".format(target))\n        _main_run(target, args, flag_options=kwargs)\n  ');case 81:return console.debug("Defined the bootstrap functions"),console.debug("Booting up the Streamlit server"),e.next=85,m.runPythonAsync('\n  command_kwargs = {\n      "server.headless": True,  # Not to open the browser after launching\n      "global.dataFrameSerialization": "legacy",  # Not to use PyArrow\n      "server.enableXsrfProtection": False,  # Disable XSRF protection as it relies on cookies\n      "browser.gatherUsageStats": False,\n  }\n  ');case 85:return e.next=87,m.runPythonAsync('main_run("'.concat(r,'", **command_kwargs)'));case 87:return console.debug("Booted up the Streamlit server"),console.debug("Setting up the HTTP server"),e.next=91,m.runPythonAsync("\n    from tornado.httpserver import HTTP_SERVER\n  ");case 91:y=m.globals.get("HTTP_SERVER").copy(),console.debug("Set up the HTTP server"),b.postMessage({type:"event:loaded"});case 94:case"end":return e.stop()}}),e)})))}().catch((function(e){throw b.postMessage({type:"event:error",data:{error:e}}),e}));self.onmessage=function(e){return v(void 0,void 0,void 0,t().mark((function n(){var r,o,a,i,s,l,c,u,f,p,v,w,k,A,S,E;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("initData"!==(r=e.data).type){t.next=4;break}return _.resolve(r.data),t.abrupt("return");case 4:return t.next=6,x;case 6:o=e.ports[0],t.prev=7,t.t0=r.type,t.next="websocket:connect"===t.t0?11:"websocket:send"===t.t0?16:"http:request"===t.t0?20:"file:write"===t.t0?25:"file:rename"===t.t0?30:"file:unlink"===t.t0?35:"install"===t.t0?40:46;break;case 11:return console.debug("websocket:connect",r.data),a=r.data.path,y.start_websocket(a,(function(e,t){if(t){var n=e.getBuffer("u8");e.destroy();var r=new Uint8ClampedArray(n.data.buffer,n.data.byteOffset,n.data.byteLength);b.postMessage({type:"websocket:message",data:{payload:new Uint8Array(r)}})}else b.postMessage({type:"websocket:message",data:{payload:e}})})),o.postMessage({type:"reply"}),t.abrupt("break",46);case 16:return console.debug("websocket:send",r.data),i=r.data.payload,y.receive_websocket_from_js(i),t.abrupt("break",46);case 20:return console.debug("http:request",r.data),s=r.data.request,l=function(e,t,n){var r=t.toJs(),a=n.toJs();console.debug({statusCode:e,headers:r,body:a});var i={type:"http:response",data:{response:{statusCode:e,headers:r,body:a}}};o.postMessage(i)},y.receive_http_from_js(s.method,s.path,s.headers,s.body,l),t.abrupt("break",46);case 25:return c=r.data,u=c.path,f=c.data,p=c.opts,console.debug('Write a file "'.concat(u,'"')),h(m,u,f,p),o.postMessage({type:"reply"}),t.abrupt("break",46);case 30:return v=r.data,w=v.oldPath,k=v.newPath,console.debug('Rename "'.concat(w,'" to ').concat(k)),g(m,w,k),o.postMessage({type:"reply"}),t.abrupt("break",46);case 35:return A=r.data.path,console.debug('Remove "'.concat(A)),m.FS.unlink(A),o.postMessage({type:"reply"}),t.abrupt("break",46);case 40:return S=r.data.requirements,E=m.pyimport("micropip"),console.debug("Install the requirements:",S),d(S),t.next=46,E.install.callKwargs(S,{keep_going:!0}).then((function(){if(S.includes("matplotlib"))return m.runPythonAsync("\n                bootstrap._fix_matplotlib_crash()\n              ")})).then((function(){console.debug("Successfully installed"),o.postMessage({type:"reply"})}));case 46:t.next=51;break;case 48:t.prev=48,t.t1=t.catch(7),o.postMessage({type:"reply",error:t.t1});case 51:case"end":return t.stop()}}),n,null,[[7,48]])})))},b.postMessage({type:"event:start"})}(),stlite={}}();
//# sourceMappingURL=2876.50ad6e6c.chunk.js.map