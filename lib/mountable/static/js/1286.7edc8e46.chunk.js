"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[1286],{21286:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var i=r(30969),n=r(15749),a=r(28322),o=r(99279),s=r(98976);const d=(0,r(94013).z)("div")({name:"DataGridOverlayEditorStyle",class:"gdg-d19meir1",propsAsIs:!1,vars:{"d19meir1-0":[e=>e.targetY,"px"],"d19meir1-1":[e=>e.targetX,"px"],"d19meir1-2":[e=>e.targetWidth,"px"],"d19meir1-3":[e=>e.targetHeight,"px"],"d19meir1-4":[e=>e.targetY+10,"px"],"d19meir1-5":[e=>Math.max(0,(e.targetHeight-28)/2),"px"]}});function l(){const[e,t]=function(){const[e,t]=i.useState();return[e??void 0,t]}(),[r,n]=i.useState(0),[a,o]=i.useState(!0);i.useLayoutEffect((()=>{if(void 0===e)return;if(!("IntersectionObserver"in window))return;const t=new IntersectionObserver((e=>{0!==e.length&&o(e[0].isIntersecting)}),{threshold:1});return t.observe(e),()=>t.disconnect()}),[e]),i.useEffect((()=>{if(a||void 0===e)return;let t;const r=()=>{const{right:i}=e.getBoundingClientRect();n((e=>Math.min(e+window.innerWidth-i-10,0))),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>{void 0!==t&&cancelAnimationFrame(t)}}),[e,a]);return{ref:t,style:i.useMemo((()=>({transform:`translateX(${r}px)`})),[r])}}const c=e=>{const{target:t,content:r,onFinishEditing:c,forceEditMode:u,initialValue:g,imageEditorOverride:v,markdownDivCreateNode:m,highlight:f,className:h,theme:p,id:y,cell:b,bloom:E,validateCell:k,getCellRenderer:C,provideEditor:w,isOutsideClick:x}=e,[D,O]=i.useState(u?r:void 0),P=i.useRef(D??r);P.current=D??r;const[S,N]=i.useState((()=>void 0===k||!((0,s.T9)(r)&&!1===k?.(b,r,P.current)))),M=i.useCallback(((e,t)=>{c(S?e:void 0,t)}),[S,c]),R=i.useCallback((e=>{if(void 0!==k&&void 0!==e&&(0,s.T9)(e)){const t=k(b,e,P.current);!1===t?N(!1):"object"===typeof t?(e=t,N(!0)):N(!0)}O(e)}),[b,k]),F=i.useRef(!1),I=i.useRef(void 0),T=i.useCallback((()=>{M(D,[0,0]),F.current=!0}),[D,M]),A=i.useCallback(((e,t)=>{M(e,t??I.current??[0,0]),F.current=!0}),[M]),H=i.useCallback((async e=>{let t=!1;"Escape"===e.key?(e.stopPropagation(),e.preventDefault(),I.current=[0,0]):"Enter"!==e.key||e.shiftKey?"Tab"===e.key&&(e.stopPropagation(),e.preventDefault(),I.current=[e.shiftKey?-1:1,0],t=!0):(e.stopPropagation(),e.preventDefault(),I.current=[0,1],t=!0),window.setTimeout((()=>{F.current||void 0===I.current||(M(t?D:void 0,I.current),F.current=!0)}),0)}),[M,D]),K=D??r,[V,W]=i.useMemo((()=>{if((0,s.rs)(r))return[];const e=w?.(r);return void 0!==e?[e,!1]:[C(r)?.provideEditor?.(r),!1]}),[r,C,w]),{ref:X,style:Y}=l();let q,B,G=!0,j=!0;if(void 0!==V){G=!0!==V.disablePadding,j=!0!==V.disableStyling;const e=(0,s.DP)(V);e&&(B=V.styleOverride);const r=e?V.editor:V;q=i.createElement(r,{isHighlighted:f,onChange:R,value:K,initialValue:g,onFinishedEditing:A,validatedSelection:(0,s.T9)(K)?K.selectionRange:void 0,forceEditMode:u,target:t,imageEditorOverride:v,markdownDivCreateNode:m,isValid:S,theme:p})}B={...B,...Y};const z=document.getElementById("portal");if(null===z)return console.error('Cannot open Data Grid overlay editor, because portal not found.  Please add `<div id="portal" />` as the last child of your `<body>`.'),null;let L=j?"gdg-style":"gdg-unstyle";S||(L+=" gdg-invalid"),G&&(L+=" gdg-pad");const Z=E?.[0]??1,$=E?.[1]??1;return(0,n.createPortal)(i.createElement(o.Ni.Provider,{value:p},i.createElement(a.Z,{style:(0,o.be)(p),className:h,onClickOutside:T,isOutsideClick:x},i.createElement(d,{ref:X,id:y,className:L,style:B,as:!0===W?"label":void 0,targetX:t.x-Z,targetY:t.y-$,targetWidth:t.width+2*Z,targetHeight:t.height+2*$},i.createElement("div",{className:"gdg-clip-region",onKeyDown:H},q)))),z)}}}]);
//# sourceMappingURL=1286.7edc8e46.chunk.js.map